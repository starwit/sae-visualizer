var UN=Object.defineProperty;var FN=(t,e,n)=>e in t?UN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var M=(t,e,n)=>FN(t,typeof e!="symbol"?e+"":e,n);function zN(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function np(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Km={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1;function VN(){if(Y1)return pc;Y1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var c in r)c!=="key"&&(s[c]=r[c])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:s}}return pc.Fragment=e,pc.jsx=n,pc.jsxs=n,pc}var K1;function $N(){return K1||(K1=1,Km.exports=VN()),Km.exports}var de=$N(),Zm={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function jN(){if(Z1)return Ie;Z1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=m&&P[m]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,T={};function S(P,$,Q){this.props=P,this.context=$,this.refs=T,this.updater=Q||b}S.prototype.isReactComponent={},S.prototype.setState=function(P,$){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,$,"setState")},S.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function w(){}w.prototype=S.prototype;function C(P,$,Q){this.props=P,this.context=$,this.refs=T,this.updater=Q||b}var A=C.prototype=new w;A.constructor=C,v(A,S.prototype),A.isPureReactComponent=!0;var O=Array.isArray,R={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function z(P,$,Q,ne,re,ue){return Q=ue.ref,{$$typeof:t,type:P,key:$,ref:Q!==void 0?Q:null,props:ue}}function j(P,$){return z(P.type,$,void 0,void 0,void 0,P.props)}function V(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function x(P){var $={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Q){return $[Q]})}var H=/\/+/g;function te(P,$){return typeof P=="object"&&P!==null&&P.key!=null?x(""+P.key):$.toString(36)}function se(){}function fe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(se,se):(P.status="pending",P.then(function($){P.status==="pending"&&(P.status="fulfilled",P.value=$)},function($){P.status==="pending"&&(P.status="rejected",P.reason=$)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function pe(P,$,Q,ne,re){var ue=typeof P;(ue==="undefined"||ue==="boolean")&&(P=null);var ye=!1;if(P===null)ye=!0;else switch(ue){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(P.$$typeof){case t:case e:ye=!0;break;case p:return ye=P._init,pe(ye(P._payload),$,Q,ne,re)}}if(ye)return re=re(P),ye=ne===""?"."+te(P,0):ne,O(re)?(Q="",ye!=null&&(Q=ye.replace(H,"$&/")+"/"),pe(re,$,Q,"",function(Re){return Re})):re!=null&&(V(re)&&(re=j(re,Q+(re.key==null||P&&P.key===re.key?"":(""+re.key).replace(H,"$&/")+"/")+ye)),$.push(re)),1;ye=0;var Se=ne===""?".":ne+":";if(O(P))for(var me=0;me<P.length;me++)ne=P[me],ue=Se+te(ne,me),ye+=pe(ne,$,Q,ue,re);else if(me=y(P),typeof me=="function")for(P=me.call(P),me=0;!(ne=P.next()).done;)ne=ne.value,ue=Se+te(ne,me++),ye+=pe(ne,$,Q,ue,re);else if(ue==="object"){if(typeof P.then=="function")return pe(fe(P),$,Q,ne,re);throw $=String(P),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ye}function N(P,$,Q){if(P==null)return P;var ne=[],re=0;return pe(P,ne,"","",function(ue){return $.call(Q,ue,re++)}),ne}function U(P){if(P._status===-1){var $=P._result;$=$(),$.then(function(Q){(P._status===0||P._status===-1)&&(P._status=1,P._result=Q)},function(Q){(P._status===0||P._status===-1)&&(P._status=2,P._result=Q)}),P._status===-1&&(P._status=0,P._result=$)}if(P._status===1)return P._result.default;throw P._result}var L=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function X(){}return Ie.Children={map:N,forEach:function(P,$,Q){N(P,function(){$.apply(this,arguments)},Q)},count:function(P){var $=0;return N(P,function(){$++}),$},toArray:function(P){return N(P,function($){return $})||[]},only:function(P){if(!V(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ie.Component=S,Ie.Fragment=n,Ie.Profiler=r,Ie.PureComponent=C,Ie.StrictMode=i,Ie.Suspense=f,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ie.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ie.cache=function(P){return function(){return P.apply(null,arguments)}},Ie.cloneElement=function(P,$,Q){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ne=v({},P.props),re=P.key,ue=void 0;if($!=null)for(ye in $.ref!==void 0&&(ue=void 0),$.key!==void 0&&(re=""+$.key),$)!D.call($,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&$.ref===void 0||(ne[ye]=$[ye]);var ye=arguments.length-2;if(ye===1)ne.children=Q;else if(1<ye){for(var Se=Array(ye),me=0;me<ye;me++)Se[me]=arguments[me+2];ne.children=Se}return z(P.type,re,void 0,void 0,ue,ne)},Ie.createContext=function(P){return P={$$typeof:a,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:s,_context:P},P},Ie.createElement=function(P,$,Q){var ne,re={},ue=null;if($!=null)for(ne in $.key!==void 0&&(ue=""+$.key),$)D.call($,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(re[ne]=$[ne]);var ye=arguments.length-2;if(ye===1)re.children=Q;else if(1<ye){for(var Se=Array(ye),me=0;me<ye;me++)Se[me]=arguments[me+2];re.children=Se}if(P&&P.defaultProps)for(ne in ye=P.defaultProps,ye)re[ne]===void 0&&(re[ne]=ye[ne]);return z(P,ue,void 0,void 0,null,re)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(P){return{$$typeof:c,render:P}},Ie.isValidElement=V,Ie.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:U}},Ie.memo=function(P,$){return{$$typeof:h,type:P,compare:$===void 0?null:$}},Ie.startTransition=function(P){var $=R.T,Q={};R.T=Q;try{var ne=P(),re=R.S;re!==null&&re(Q,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(X,L)}catch(ue){L(ue)}finally{R.T=$}},Ie.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ie.use=function(P){return R.H.use(P)},Ie.useActionState=function(P,$,Q){return R.H.useActionState(P,$,Q)},Ie.useCallback=function(P,$){return R.H.useCallback(P,$)},Ie.useContext=function(P){return R.H.useContext(P)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(P,$){return R.H.useDeferredValue(P,$)},Ie.useEffect=function(P,$){return R.H.useEffect(P,$)},Ie.useId=function(){return R.H.useId()},Ie.useImperativeHandle=function(P,$,Q){return R.H.useImperativeHandle(P,$,Q)},Ie.useInsertionEffect=function(P,$){return R.H.useInsertionEffect(P,$)},Ie.useLayoutEffect=function(P,$){return R.H.useLayoutEffect(P,$)},Ie.useMemo=function(P,$){return R.H.useMemo(P,$)},Ie.useOptimistic=function(P,$){return R.H.useOptimistic(P,$)},Ie.useReducer=function(P,$,Q){return R.H.useReducer(P,$,Q)},Ie.useRef=function(P){return R.H.useRef(P)},Ie.useState=function(P){return R.H.useState(P)},Ie.useSyncExternalStore=function(P,$,Q){return R.H.useSyncExternalStore(P,$,Q)},Ie.useTransition=function(){return R.H.useTransition()},Ie.version="19.0.0",Ie}var Q1;function z0(){return Q1||(Q1=1,Zm.exports=jN()),Zm.exports}var I=z0();const Fe=np(I),r_=zN({__proto__:null,default:Fe},[I]);var Qm={exports:{}},gc={},Gm={exports:{}},Jm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1;function HN(){return G1||(G1=1,function(t){function e(N,U){var L=N.length;N.push(U);e:for(;0<L;){var X=L-1>>>1,P=N[X];if(0<r(P,U))N[X]=U,N[L]=P,L=X;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var U=N[0],L=N.pop();if(L!==U){N[0]=L;e:for(var X=0,P=N.length,$=P>>>1;X<$;){var Q=2*(X+1)-1,ne=N[Q],re=Q+1,ue=N[re];if(0>r(ne,L))re<P&&0>r(ue,ne)?(N[X]=ue,N[re]=L,X=re):(N[X]=ne,N[Q]=L,X=Q);else if(re<P&&0>r(ue,L))N[X]=ue,N[re]=L,X=re;else break e}}return U}function r(N,U){var L=N.sortIndex-U.sortIndex;return L!==0?L:N.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var f=[],h=[],p=1,m=null,y=3,b=!1,v=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(N){for(var U=n(h);U!==null;){if(U.callback===null)i(h);else if(U.startTime<=N)i(h),U.sortIndex=U.expirationTime,e(f,U);else break;U=n(h)}}function O(N){if(T=!1,A(N),!v)if(n(f)!==null)v=!0,fe();else{var U=n(h);U!==null&&pe(O,U.startTime-N)}}var R=!1,D=-1,z=5,j=-1;function V(){return!(t.unstable_now()-j<z)}function x(){if(R){var N=t.unstable_now();j=N;var U=!0;try{e:{v=!1,T&&(T=!1,w(D),D=-1),b=!0;var L=y;try{t:{for(A(N),m=n(f);m!==null&&!(m.expirationTime>N&&V());){var X=m.callback;if(typeof X=="function"){m.callback=null,y=m.priorityLevel;var P=X(m.expirationTime<=N);if(N=t.unstable_now(),typeof P=="function"){m.callback=P,A(N),U=!0;break t}m===n(f)&&i(f),A(N)}else i(f);m=n(f)}if(m!==null)U=!0;else{var $=n(h);$!==null&&pe(O,$.startTime-N),U=!1}}break e}finally{m=null,y=L,b=!1}U=void 0}}finally{U?H():R=!1}}}var H;if(typeof C=="function")H=function(){C(x)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,se=te.port2;te.port1.onmessage=x,H=function(){se.postMessage(null)}}else H=function(){S(x,0)};function fe(){R||(R=!0,H())}function pe(N,U){D=S(function(){N(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){v||b||(v=!0,fe())},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(N){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var L=y;y=U;try{return N()}finally{y=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,U){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=y;y=N;try{return U()}finally{y=L}},t.unstable_scheduleCallback=function(N,U,L){var X=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?X+L:X):L=X,N){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=L+P,N={id:p++,callback:U,priorityLevel:N,startTime:L,expirationTime:P,sortIndex:-1},L>X?(N.sortIndex=L,e(h,N),n(f)===null&&N===n(h)&&(T?(w(D),D=-1):T=!0,pe(O,L-X))):(N.sortIndex=P,e(f,N),v||b||(v=!0,fe())),N},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(N){var U=y;return function(){var L=y;y=U;try{return N.apply(this,arguments)}finally{y=L}}}}(Jm)),Jm}var J1;function WN(){return J1||(J1=1,Gm.exports=HN()),Gm.exports}var ey={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function XN(){if(eE)return pn;eE=1;var t=z0();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(f,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:f,containerInfo:h,implementation:p}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,pn.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(f,h,null,p)},pn.flushSync=function(f){var h=a.T,p=i.p;try{if(a.T=null,i.p=2,f)return f()}finally{a.T=h,i.p=p,i.d.f()}},pn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},pn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},pn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):p==="script"&&i.d.X(f,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},pn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},pn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);i.d.L(f,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},pn.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=c(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},pn.requestFormReset=function(f){i.d.r(f)},pn.unstable_batchedUpdates=function(f,h){return f(h)},pn.useFormState=function(f,h,p){return a.H.useFormState(f,h,p)},pn.useFormStatus=function(){return a.H.useHostTransitionStatus()},pn.version="19.0.0",pn}var tE;function BR(){if(tE)return ey.exports;tE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ey.exports=XN(),ey.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function qN(){if(nE)return gc;nE=1;var t=WN(),e=z0(),n=BR();function i(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}var s=Symbol.for("react.element"),a=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),b=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),O=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function D(o){return o===null||typeof o!="object"?null:(o=R&&o[R]||o["@@iterator"],typeof o=="function"?o:null)}var z=Symbol.for("react.client.reference");function j(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===z?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case f:return"Fragment";case c:return"Portal";case p:return"Profiler";case h:return"StrictMode";case T:return"Suspense";case S:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case b:return(o.displayName||"Context")+".Provider";case y:return(o._context.displayName||"Context")+".Consumer";case v:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case w:return l=o.displayName||null,l!==null?l:j(o.type)||"Memo";case C:l=o._payload,o=o._init;try{return j(o(l))}catch{}}return null}var V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=Object.assign,H,te;function se(o){if(H===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);H=l&&l[1]||"",te=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+H+o+te}var fe=!1;function pe(o,l){if(!o||fe)return"";fe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ae){var ee=ae}Reflect.construct(o,[],he)}else{try{he.call()}catch(ae){ee=ae}o.call(he.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(he=o())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),E=_[0],k=_[1];if(E&&k){var F=E.split(`
`),q=k.split(`
`);for(g=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;g<q.length&&!q[g].includes("DetermineComponentFrameRoot");)g++;if(d===F.length||g===q.length)for(d=F.length-1,g=q.length-1;1<=d&&0<=g&&F[d]!==q[g];)g--;for(;1<=d&&0<=g;d--,g--)if(F[d]!==q[g]){if(d!==1||g!==1)do if(d--,g--,0>g||F[d]!==q[g]){var le=`
`+F[d].replace(" at new "," at ");return o.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",o.displayName)),le}while(1<=d&&0<=g);break}}}finally{fe=!1,Error.prepareStackTrace=u}return(u=o?o.displayName||o.name:"")?se(u):""}function N(o){switch(o.tag){case 26:case 27:case 5:return se(o.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return o=pe(o.type,!1),o;case 11:return o=pe(o.type.render,!1),o;case 1:return o=pe(o.type,!0),o;default:return""}}function U(o){try{var l="";do l+=N(o),o=o.return;while(o);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function L(o){var l=o,u=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,l.flags&4098&&(u=l.return),o=l.return;while(o)}return l.tag===3?u:null}function X(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function P(o){if(L(o)!==o)throw Error(i(188))}function $(o){var l=o.alternate;if(!l){if(l=L(o),l===null)throw Error(i(188));return l!==o?null:o}for(var u=o,d=l;;){var g=u.return;if(g===null)break;var _=g.alternate;if(_===null){if(d=g.return,d!==null){u=d;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===u)return P(g),o;if(_===d)return P(g),l;_=_.sibling}throw Error(i(188))}if(u.return!==d.return)u=g,d=_;else{for(var E=!1,k=g.child;k;){if(k===u){E=!0,u=g,d=_;break}if(k===d){E=!0,d=g,u=_;break}k=k.sibling}if(!E){for(k=_.child;k;){if(k===u){E=!0,u=_,d=g;break}if(k===d){E=!0,d=_,u=g;break}k=k.sibling}if(!E)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?o:l}function Q(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=Q(o),l!==null)return l;o=o.sibling}return null}var ne=Array.isArray,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ye=[],Se=-1;function me(o){return{current:o}}function Re(o){0>Se||(o.current=ye[Se],ye[Se]=null,Se--)}function ve(o,l){Se++,ye[Se]=o.current,o.current=l}var Qe=me(null),Ge=me(null),bt=me(null),kt=me(null);function Ce(o,l){switch(ve(bt,l),ve(Ge,o),ve(Qe,null),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)&&(l=l.namespaceURI)?E1(l):0;break;default:if(o=o===8?l.parentNode:l,l=o.tagName,o=o.namespaceURI)o=E1(o),l=w1(o,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Re(Qe),ve(Qe,l)}function xe(){Re(Qe),Re(Ge),Re(bt)}function Ye(o){o.memoizedState!==null&&ve(kt,o);var l=Qe.current,u=w1(l,o.type);l!==u&&(ve(Ge,o),ve(Qe,u))}function vt(o){Ge.current===o&&(Re(Qe),Re(Ge)),kt.current===o&&(Re(kt),cc._currentValue=ue)}var tn=Object.prototype.hasOwnProperty,Ht=t.unstable_scheduleCallback,fn=t.unstable_cancelCallback,we=t.unstable_shouldYield,ki=t.unstable_requestPaint,Wt=t.unstable_now,ir=t.unstable_getCurrentPriorityLevel,Ii=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,mt=t.unstable_NormalPriority,It=t.unstable_LowPriority,Yn=t.unstable_IdlePriority,pt=t.log,nn=t.unstable_setDisableYieldValue,Dn=null,gt=null;function Vp(o){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Dn,o,void 0,(o.current.flags&128)===128)}catch{}}function Kn(o){if(typeof pt=="function"&&nn(o),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(Dn,o)}catch{}}var Tn=Math.clz32?Math.clz32:jp,Po=Math.log,$p=Math.LN2;function jp(o){return o>>>=0,o===0?32:31-(Po(o)/$p|0)|0}var No=128,ko=4194304;function rr(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Io(o,l){var u=o.pendingLanes;if(u===0)return 0;var d=0,g=o.suspendedLanes,_=o.pingedLanes,E=o.warmLanes;o=o.finishedLanes!==0;var k=u&134217727;return k!==0?(u=k&~g,u!==0?d=rr(u):(_&=k,_!==0?d=rr(_):o||(E=k&~E,E!==0&&(d=rr(E))))):(k=u&~g,k!==0?d=rr(k):_!==0?d=rr(_):o||(E=u&~E,E!==0&&(d=rr(E)))),d===0?0:l!==0&&l!==d&&!(l&g)&&(g=d&-d,E=l&-l,g>=E||g===32&&(E&4194176)!==0)?l:d}function Cs(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Hp(o,l){switch(o){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ne(){var o=No;return No<<=1,!(No&4194176)&&(No=128),o}function xn(){var o=ko;return ko<<=1,!(ko&62914560)&&(ko=4194304),o}function Do(o){for(var l=[],u=0;31>u;u++)l.push(o);return l}function vl(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function RM(o,l,u,d,g,_){var E=o.pendingLanes;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=u,o.entangledLanes&=u,o.errorRecoveryDisabledLanes&=u,o.shellSuspendCounter=0;var k=o.entanglements,F=o.expirationTimes,q=o.hiddenUpdates;for(u=E&~u;0<u;){var le=31-Tn(u),he=1<<le;k[le]=0,F[le]=-1;var ee=q[le];if(ee!==null)for(q[le]=null,le=0;le<ee.length;le++){var ae=ee[le];ae!==null&&(ae.lane&=-536870913)}u&=~he}d!==0&&yv(o,d,0),_!==0&&g===0&&o.tag!==0&&(o.suspendedLanes|=_&~(E&~l))}function yv(o,l,u){o.pendingLanes|=l,o.suspendedLanes&=~l;var d=31-Tn(l);o.entangledLanes|=l,o.entanglements[d]=o.entanglements[d]|1073741824|u&4194218}function _v(o,l){var u=o.entangledLanes|=l;for(o=o.entanglements;u;){var d=31-Tn(u),g=1<<d;g&l|o[d]&l&&(o[d]|=l),u&=~g}}function bv(o){return o&=-o,2<o?8<o?o&134217727?32:268435456:8:2}function vv(){var o=re.p;return o!==0?o:(o=window.event,o===void 0?32:$1(o.type))}function CM(o,l){var u=re.p;try{return re.p=o,l()}finally{re.p=u}}var Fr=Math.random().toString(36).slice(2),hn="__reactFiber$"+Fr,Rn="__reactProps$"+Fr,Bo="__reactContainer$"+Fr,Wp="__reactEvents$"+Fr,OM="__reactListeners$"+Fr,MM="__reactHandles$"+Fr,Tv="__reactResources$"+Fr,Tl="__reactMarker$"+Fr;function Xp(o){delete o[hn],delete o[Rn],delete o[Wp],delete o[OM],delete o[MM]}function Os(o){var l=o[hn];if(l)return l;for(var u=o.parentNode;u;){if(l=u[Bo]||u[hn]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(o=R1(o);o!==null;){if(u=o[hn])return u;o=R1(o)}return l}o=u,u=o.parentNode}return null}function Lo(o){if(o=o[hn]||o[Bo]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function Sl(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(i(33))}function Uo(o){var l=o[Tv];return l||(l=o[Tv]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Kt(o){o[Tl]=!0}var Sv=new Set,Ev={};function Ms(o,l){Fo(o,l),Fo(o+"Capture",l)}function Fo(o,l){for(Ev[o]=l,o=0;o<l.length;o++)Sv.add(l[o])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),PM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wv={},Av={};function NM(o){return tn.call(Av,o)?!0:tn.call(wv,o)?!1:PM.test(o)?Av[o]=!0:(wv[o]=!0,!1)}function Fu(o,l,u){if(NM(l))if(u===null)o.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+u)}}function zu(o,l,u){if(u===null)o.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+u)}}function or(o,l,u,d){if(d===null)o.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttributeNS(l,u,""+d)}}function Zn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xv(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function kM(o){var l=xv(o)?"checked":"value",u=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),d=""+o[l];if(!o.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return g.call(this)},set:function(E){d=""+E,_.call(this,E)}}),Object.defineProperty(o,l,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Vu(o){o._valueTracker||(o._valueTracker=kM(o))}function Rv(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var u=l.getValue(),d="";return o&&(d=xv(o)?o.checked?"true":"false":o.value),o=d,o!==u?(l.setValue(o),!0):!1}function $u(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var IM=/[\n"\\]/g;function Qn(o){return o.replace(IM,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function qp(o,l,u,d,g,_,E,k){o.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?o.type=E:o.removeAttribute("type"),l!=null?E==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Zn(l)):o.value!==""+Zn(l)&&(o.value=""+Zn(l)):E!=="submit"&&E!=="reset"||o.removeAttribute("value"),l!=null?Yp(o,E,Zn(l)):u!=null?Yp(o,E,Zn(u)):d!=null&&o.removeAttribute("value"),g==null&&_!=null&&(o.defaultChecked=!!_),g!=null&&(o.checked=g&&typeof g!="function"&&typeof g!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?o.name=""+Zn(k):o.removeAttribute("name")}function Cv(o,l,u,d,g,_,E,k){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),l!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||l!=null))return;u=u!=null?""+Zn(u):"",l=l!=null?""+Zn(l):u,k||l===o.value||(o.value=l),o.defaultValue=l}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=k?o.checked:!!d,o.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.name=E)}function Yp(o,l,u){l==="number"&&$u(o.ownerDocument)===o||o.defaultValue===""+u||(o.defaultValue=""+u)}function zo(o,l,u,d){if(o=o.options,l){l={};for(var g=0;g<u.length;g++)l["$"+u[g]]=!0;for(u=0;u<o.length;u++)g=l.hasOwnProperty("$"+o[u].value),o[u].selected!==g&&(o[u].selected=g),g&&d&&(o[u].defaultSelected=!0)}else{for(u=""+Zn(u),l=null,g=0;g<o.length;g++){if(o[g].value===u){o[g].selected=!0,d&&(o[g].defaultSelected=!0);return}l!==null||o[g].disabled||(l=o[g])}l!==null&&(l.selected=!0)}}function Ov(o,l,u){if(l!=null&&(l=""+Zn(l),l!==o.value&&(o.value=l),u==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=u!=null?""+Zn(u):""}function Mv(o,l,u,d){if(l==null){if(d!=null){if(u!=null)throw Error(i(92));if(ne(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),l=u}u=Zn(l),o.defaultValue=u,d=o.textContent,d===u&&d!==""&&d!==null&&(o.value=d)}function Vo(o,l){if(l){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=l;return}}o.textContent=l}var DM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pv(o,l,u){var d=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":d?o.setProperty(l,u):typeof u!="number"||u===0||DM.has(l)?l==="float"?o.cssFloat=u:o[l]=(""+u).trim():o[l]=u+"px"}function Nv(o,l,u){if(l!=null&&typeof l!="object")throw Error(i(62));if(o=o.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var g in l)d=l[g],l.hasOwnProperty(g)&&u[g]!==d&&Pv(o,g,d)}else for(var _ in l)l.hasOwnProperty(_)&&Pv(o,_,l[_])}function Kp(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),LM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ju(o){return LM.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Zp=null;function Qp(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var $o=null,jo=null;function kv(o){var l=Lo(o);if(l&&(o=l.stateNode)){var u=o[Rn]||null;e:switch(o=l.stateNode,l.type){case"input":if(qp(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Qn(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var d=u[l];if(d!==o&&d.form===o.form){var g=d[Rn]||null;if(!g)throw Error(i(90));qp(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(l=0;l<u.length;l++)d=u[l],d.form===o.form&&Rv(d)}break e;case"textarea":Ov(o,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&zo(o,!!u.multiple,l,!1)}}}var Gp=!1;function Iv(o,l,u){if(Gp)return o(l,u);Gp=!0;try{var d=o(l);return d}finally{if(Gp=!1,($o!==null||jo!==null)&&(Rf(),$o&&(l=$o,o=jo,jo=$o=null,kv(l),o)))for(l=0;l<o.length;l++)kv(o[l])}}function El(o,l){var u=o.stateNode;if(u===null)return null;var d=u[Rn]||null;if(d===null)return null;u=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(i(231,l,typeof u));return u}var Jp=!1;if(sr)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){Jp=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{Jp=!1}var zr=null,eg=null,Hu=null;function Dv(){if(Hu)return Hu;var o,l=eg,u=l.length,d,g="value"in zr?zr.value:zr.textContent,_=g.length;for(o=0;o<u&&l[o]===g[o];o++);var E=u-o;for(d=1;d<=E&&l[u-d]===g[_-d];d++);return Hu=g.slice(o,1<d?1-d:void 0)}function Wu(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Xu(){return!0}function Bv(){return!1}function Cn(o){function l(u,d,g,_,E){this._reactName=u,this._targetInst=g,this.type=d,this.nativeEvent=_,this.target=E,this.currentTarget=null;for(var k in o)o.hasOwnProperty(k)&&(u=o[k],this[k]=u?u(_):_[k]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Xu:Bv,this.isPropagationStopped=Bv,this}return x(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),l}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qu=Cn(Ps),Al=x({},Ps,{view:0,detail:0}),UM=Cn(Al),tg,ng,xl,Yu=x({},Al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rg,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==xl&&(xl&&o.type==="mousemove"?(tg=o.screenX-xl.screenX,ng=o.screenY-xl.screenY):ng=tg=0,xl=o),tg)},movementY:function(o){return"movementY"in o?o.movementY:ng}}),Lv=Cn(Yu),FM=x({},Yu,{dataTransfer:0}),zM=Cn(FM),VM=x({},Al,{relatedTarget:0}),ig=Cn(VM),$M=x({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),jM=Cn($M),HM=x({},Ps,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),WM=Cn(HM),XM=x({},Ps,{data:0}),Uv=Cn(XM),qM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZM(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=KM[o])?!!l[o]:!1}function rg(){return ZM}var QM=x({},Al,{key:function(o){if(o.key){var l=qM[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Wu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?YM[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rg,charCode:function(o){return o.type==="keypress"?Wu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Wu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),GM=Cn(QM),JM=x({},Yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fv=Cn(JM),eP=x({},Al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rg}),tP=Cn(eP),nP=x({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),iP=Cn(nP),rP=x({},Yu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),sP=Cn(rP),oP=x({},Ps,{newState:0,oldState:0}),aP=Cn(oP),lP=[9,13,27,32],sg=sr&&"CompositionEvent"in window,Rl=null;sr&&"documentMode"in document&&(Rl=document.documentMode);var cP=sr&&"TextEvent"in window&&!Rl,zv=sr&&(!sg||Rl&&8<Rl&&11>=Rl),Vv=" ",$v=!1;function jv(o,l){switch(o){case"keyup":return lP.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hv(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ho=!1;function uP(o,l){switch(o){case"compositionend":return Hv(l);case"keypress":return l.which!==32?null:($v=!0,Vv);case"textInput":return o=l.data,o===Vv&&$v?null:o;default:return null}}function fP(o,l){if(Ho)return o==="compositionend"||!sg&&jv(o,l)?(o=Dv(),Hu=eg=zr=null,Ho=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return zv&&l.locale!=="ko"?null:l.data;default:return null}}var hP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wv(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!hP[o.type]:l==="textarea"}function Xv(o,l,u,d){$o?jo?jo.push(d):jo=[d]:$o=d,l=Nf(l,"onChange"),0<l.length&&(u=new qu("onChange","change",null,u,d),o.push({event:u,listeners:l}))}var Cl=null,Ol=null;function dP(o){_1(o,0)}function Ku(o){var l=Sl(o);if(Rv(l))return o}function qv(o,l){if(o==="change")return l}var Yv=!1;if(sr){var og;if(sr){var ag="oninput"in document;if(!ag){var Kv=document.createElement("div");Kv.setAttribute("oninput","return;"),ag=typeof Kv.oninput=="function"}og=ag}else og=!1;Yv=og&&(!document.documentMode||9<document.documentMode)}function Zv(){Cl&&(Cl.detachEvent("onpropertychange",Qv),Ol=Cl=null)}function Qv(o){if(o.propertyName==="value"&&Ku(Ol)){var l=[];Xv(l,Ol,o,Qp(o)),Iv(dP,l)}}function pP(o,l,u){o==="focusin"?(Zv(),Cl=l,Ol=u,Cl.attachEvent("onpropertychange",Qv)):o==="focusout"&&Zv()}function gP(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ku(Ol)}function mP(o,l){if(o==="click")return Ku(l)}function yP(o,l){if(o==="input"||o==="change")return Ku(l)}function _P(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Bn=typeof Object.is=="function"?Object.is:_P;function Ml(o,l){if(Bn(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var u=Object.keys(o),d=Object.keys(l);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var g=u[d];if(!tn.call(l,g)||!Bn(o[g],l[g]))return!1}return!0}function Gv(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Jv(o,l){var u=Gv(o);o=0;for(var d;u;){if(u.nodeType===3){if(d=o+u.textContent.length,o<=l&&d>=l)return{node:u,offset:l-o};o=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Gv(u)}}function eT(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?eT(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function tT(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=$u(o.document);l instanceof o.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)o=l.contentWindow;else break;l=$u(o.document)}return l}function lg(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function bP(o,l){var u=tT(l);l=o.focusedElem;var d=o.selectionRange;if(u!==l&&l&&l.ownerDocument&&eT(l.ownerDocument.documentElement,l)){if(d!==null&&lg(l)){if(o=d.start,u=d.end,u===void 0&&(u=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(u,l.value.length);else if(u=(o=l.ownerDocument||document)&&o.defaultView||window,u.getSelection){u=u.getSelection();var g=l.textContent.length,_=Math.min(d.start,g);d=d.end===void 0?_:Math.min(d.end,g),!u.extend&&_>d&&(g=d,d=_,_=g),g=Jv(l,_);var E=Jv(l,d);g&&E&&(u.rangeCount!==1||u.anchorNode!==g.node||u.anchorOffset!==g.offset||u.focusNode!==E.node||u.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),u.removeAllRanges(),_>d?(u.addRange(o),u.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),u.addRange(o)))}}for(o=[],u=l;u=u.parentNode;)u.nodeType===1&&o.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)u=o[l],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var vP=sr&&"documentMode"in document&&11>=document.documentMode,Wo=null,cg=null,Pl=null,ug=!1;function nT(o,l,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ug||Wo==null||Wo!==$u(d)||(d=Wo,"selectionStart"in d&&lg(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Pl&&Ml(Pl,d)||(Pl=d,d=Nf(cg,"onSelect"),0<d.length&&(l=new qu("onSelect","select",null,l,u),o.push({event:l,listeners:d}),l.target=Wo)))}function Ns(o,l){var u={};return u[o.toLowerCase()]=l.toLowerCase(),u["Webkit"+o]="webkit"+l,u["Moz"+o]="moz"+l,u}var Xo={animationend:Ns("Animation","AnimationEnd"),animationiteration:Ns("Animation","AnimationIteration"),animationstart:Ns("Animation","AnimationStart"),transitionrun:Ns("Transition","TransitionRun"),transitionstart:Ns("Transition","TransitionStart"),transitioncancel:Ns("Transition","TransitionCancel"),transitionend:Ns("Transition","TransitionEnd")},fg={},iT={};sr&&(iT=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function ks(o){if(fg[o])return fg[o];if(!Xo[o])return o;var l=Xo[o],u;for(u in l)if(l.hasOwnProperty(u)&&u in iT)return fg[o]=l[u];return o}var rT=ks("animationend"),sT=ks("animationiteration"),oT=ks("animationstart"),TP=ks("transitionrun"),SP=ks("transitionstart"),EP=ks("transitioncancel"),aT=ks("transitionend"),lT=new Map,cT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function _i(o,l){lT.set(o,l),Ms(l,[o])}var Gn=[],qo=0,hg=0;function Zu(){for(var o=qo,l=hg=qo=0;l<o;){var u=Gn[l];Gn[l++]=null;var d=Gn[l];Gn[l++]=null;var g=Gn[l];Gn[l++]=null;var _=Gn[l];if(Gn[l++]=null,d!==null&&g!==null){var E=d.pending;E===null?g.next=g:(g.next=E.next,E.next=g),d.pending=g}_!==0&&uT(u,g,_)}}function Qu(o,l,u,d){Gn[qo++]=o,Gn[qo++]=l,Gn[qo++]=u,Gn[qo++]=d,hg|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function dg(o,l,u,d){return Qu(o,l,u,d),Gu(o)}function Vr(o,l){return Qu(o,null,null,l),Gu(o)}function uT(o,l,u){o.lanes|=u;var d=o.alternate;d!==null&&(d.lanes|=u);for(var g=!1,_=o.return;_!==null;)_.childLanes|=u,d=_.alternate,d!==null&&(d.childLanes|=u),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(g=!0)),o=_,_=_.return;g&&l!==null&&o.tag===3&&(_=o.stateNode,g=31-Tn(u),_=_.hiddenUpdates,o=_[g],o===null?_[g]=[l]:o.push(l),l.lane=u|536870912)}function Gu(o){if(50<nc)throw nc=0,bm=null,Error(i(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var Yo={},fT=new WeakMap;function Jn(o,l){if(typeof o=="object"&&o!==null){var u=fT.get(o);return u!==void 0?u:(l={value:o,source:l,stack:U(l)},fT.set(o,l),l)}return{value:o,source:l,stack:U(l)}}var Ko=[],Zo=0,Ju=null,ef=0,ei=[],ti=0,Is=null,ar=1,lr="";function Ds(o,l){Ko[Zo++]=ef,Ko[Zo++]=Ju,Ju=o,ef=l}function hT(o,l,u){ei[ti++]=ar,ei[ti++]=lr,ei[ti++]=Is,Is=o;var d=ar;o=lr;var g=32-Tn(d)-1;d&=~(1<<g),u+=1;var _=32-Tn(l)+g;if(30<_){var E=g-g%5;_=(d&(1<<E)-1).toString(32),d>>=E,g-=E,ar=1<<32-Tn(l)+g|u<<g|d,lr=_+o}else ar=1<<_|u<<g|d,lr=o}function pg(o){o.return!==null&&(Ds(o,1),hT(o,1,0))}function gg(o){for(;o===Ju;)Ju=Ko[--Zo],Ko[Zo]=null,ef=Ko[--Zo],Ko[Zo]=null;for(;o===Is;)Is=ei[--ti],ei[ti]=null,lr=ei[--ti],ei[ti]=null,ar=ei[--ti],ei[ti]=null}var Sn=null,rn=null,je=!1,bi=null,Di=!1,mg=Error(i(519));function Bs(o){var l=Error(i(418,""));throw Il(Jn(l,o)),mg}function dT(o){var l=o.stateNode,u=o.type,d=o.memoizedProps;switch(l[hn]=o,l[Rn]=d,u){case"dialog":ze("cancel",l),ze("close",l);break;case"iframe":case"object":case"embed":ze("load",l);break;case"video":case"audio":for(u=0;u<rc.length;u++)ze(rc[u],l);break;case"source":ze("error",l);break;case"img":case"image":case"link":ze("error",l),ze("load",l);break;case"details":ze("toggle",l);break;case"input":ze("invalid",l),Cv(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Vu(l);break;case"select":ze("invalid",l);break;case"textarea":ze("invalid",l),Mv(l,d.value,d.defaultValue,d.children),Vu(l)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||d.suppressHydrationWarning===!0||S1(l.textContent,u)?(d.popover!=null&&(ze("beforetoggle",l),ze("toggle",l)),d.onScroll!=null&&ze("scroll",l),d.onScrollEnd!=null&&ze("scrollend",l),d.onClick!=null&&(l.onclick=kf),l=!0):l=!1,l||Bs(o)}function pT(o){for(Sn=o.return;Sn;)switch(Sn.tag){case 3:case 27:Di=!0;return;case 5:case 13:Di=!1;return;default:Sn=Sn.return}}function Nl(o){if(o!==Sn)return!1;if(!je)return pT(o),je=!0,!1;var l=!1,u;if((u=o.tag!==3&&o.tag!==27)&&((u=o.tag===5)&&(u=o.type,u=!(u!=="form"&&u!=="button")||Bm(o.type,o.memoizedProps)),u=!u),u&&(l=!0),l&&rn&&Bs(o),pT(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(u=o.data,u==="/$"){if(l===0){rn=Ti(o.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;o=o.nextSibling}rn=null}}else rn=Sn?Ti(o.stateNode.nextSibling):null;return!0}function kl(){rn=Sn=null,je=!1}function Il(o){bi===null?bi=[o]:bi.push(o)}var Dl=Error(i(460)),gT=Error(i(474)),yg={then:function(){}};function mT(o){return o=o.status,o==="fulfilled"||o==="rejected"}function tf(){}function yT(o,l,u){switch(u=o[u],u===void 0?o.push(l):u!==l&&(l.then(tf,tf),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,o===Dl?Error(i(483)):o;default:if(typeof l.status=="string")l.then(tf,tf);else{if(o=ft,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=l,o.status="pending",o.then(function(d){if(l.status==="pending"){var g=l;g.status="fulfilled",g.value=d}},function(d){if(l.status==="pending"){var g=l;g.status="rejected",g.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,o===Dl?Error(i(483)):o}throw Bl=l,Dl}}var Bl=null;function _T(){if(Bl===null)throw Error(i(459));var o=Bl;return Bl=null,o}var Qo=null,Ll=0;function nf(o){var l=Ll;return Ll+=1,Qo===null&&(Qo=[]),yT(Qo,o,l)}function Ul(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function rf(o,l){throw l.$$typeof===s?Error(i(525)):(o=Object.prototype.toString.call(l),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function bT(o){var l=o._init;return l(o._payload)}function vT(o){function l(Z,W){if(o){var J=Z.deletions;J===null?(Z.deletions=[W],Z.flags|=16):J.push(W)}}function u(Z,W){if(!o)return null;for(;W!==null;)l(Z,W),W=W.sibling;return null}function d(Z){for(var W=new Map;Z!==null;)Z.key!==null?W.set(Z.key,Z):W.set(Z.index,Z),Z=Z.sibling;return W}function g(Z,W){return Z=Jr(Z,W),Z.index=0,Z.sibling=null,Z}function _(Z,W,J){return Z.index=J,o?(J=Z.alternate,J!==null?(J=J.index,J<W?(Z.flags|=33554434,W):J):(Z.flags|=33554434,W)):(Z.flags|=1048576,W)}function E(Z){return o&&Z.alternate===null&&(Z.flags|=33554434),Z}function k(Z,W,J,ce){return W===null||W.tag!==6?(W=fm(J,Z.mode,ce),W.return=Z,W):(W=g(W,J),W.return=Z,W)}function F(Z,W,J,ce){var be=J.type;return be===f?le(Z,W,J.props.children,ce,J.key):W!==null&&(W.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===C&&bT(be)===W.type)?(W=g(W,J.props),Ul(W,J),W.return=Z,W):(W=Sf(J.type,J.key,J.props,null,Z.mode,ce),Ul(W,J),W.return=Z,W)}function q(Z,W,J,ce){return W===null||W.tag!==4||W.stateNode.containerInfo!==J.containerInfo||W.stateNode.implementation!==J.implementation?(W=hm(J,Z.mode,ce),W.return=Z,W):(W=g(W,J.children||[]),W.return=Z,W)}function le(Z,W,J,ce,be){return W===null||W.tag!==7?(W=Xs(J,Z.mode,ce,be),W.return=Z,W):(W=g(W,J),W.return=Z,W)}function he(Z,W,J){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=fm(""+W,Z.mode,J),W.return=Z,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case a:return J=Sf(W.type,W.key,W.props,null,Z.mode,J),Ul(J,W),J.return=Z,J;case c:return W=hm(W,Z.mode,J),W.return=Z,W;case C:var ce=W._init;return W=ce(W._payload),he(Z,W,J)}if(ne(W)||D(W))return W=Xs(W,Z.mode,J,null),W.return=Z,W;if(typeof W.then=="function")return he(Z,nf(W),J);if(W.$$typeof===b)return he(Z,bf(Z,W),J);rf(Z,W)}return null}function ee(Z,W,J,ce){var be=W!==null?W.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return be!==null?null:k(Z,W,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case a:return J.key===be?F(Z,W,J,ce):null;case c:return J.key===be?q(Z,W,J,ce):null;case C:return be=J._init,J=be(J._payload),ee(Z,W,J,ce)}if(ne(J)||D(J))return be!==null?null:le(Z,W,J,ce,null);if(typeof J.then=="function")return ee(Z,W,nf(J),ce);if(J.$$typeof===b)return ee(Z,W,bf(Z,J),ce);rf(Z,J)}return null}function ae(Z,W,J,ce,be){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Z=Z.get(J)||null,k(W,Z,""+ce,be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case a:return Z=Z.get(ce.key===null?J:ce.key)||null,F(W,Z,ce,be);case c:return Z=Z.get(ce.key===null?J:ce.key)||null,q(W,Z,ce,be);case C:var Be=ce._init;return ce=Be(ce._payload),ae(Z,W,J,ce,be)}if(ne(ce)||D(ce))return Z=Z.get(J)||null,le(W,Z,ce,be,null);if(typeof ce.then=="function")return ae(Z,W,J,nf(ce),be);if(ce.$$typeof===b)return ae(Z,W,J,bf(W,ce),be);rf(W,ce)}return null}function Te(Z,W,J,ce){for(var be=null,Be=null,Ee=W,Ae=W=0,Gt=null;Ee!==null&&Ae<J.length;Ae++){Ee.index>Ae?(Gt=Ee,Ee=null):Gt=Ee.sibling;var He=ee(Z,Ee,J[Ae],ce);if(He===null){Ee===null&&(Ee=Gt);break}o&&Ee&&He.alternate===null&&l(Z,Ee),W=_(He,W,Ae),Be===null?be=He:Be.sibling=He,Be=He,Ee=Gt}if(Ae===J.length)return u(Z,Ee),je&&Ds(Z,Ae),be;if(Ee===null){for(;Ae<J.length;Ae++)Ee=he(Z,J[Ae],ce),Ee!==null&&(W=_(Ee,W,Ae),Be===null?be=Ee:Be.sibling=Ee,Be=Ee);return je&&Ds(Z,Ae),be}for(Ee=d(Ee);Ae<J.length;Ae++)Gt=ae(Ee,Z,Ae,J[Ae],ce),Gt!==null&&(o&&Gt.alternate!==null&&Ee.delete(Gt.key===null?Ae:Gt.key),W=_(Gt,W,Ae),Be===null?be=Gt:Be.sibling=Gt,Be=Gt);return o&&Ee.forEach(function(os){return l(Z,os)}),je&&Ds(Z,Ae),be}function Me(Z,W,J,ce){if(J==null)throw Error(i(151));for(var be=null,Be=null,Ee=W,Ae=W=0,Gt=null,He=J.next();Ee!==null&&!He.done;Ae++,He=J.next()){Ee.index>Ae?(Gt=Ee,Ee=null):Gt=Ee.sibling;var os=ee(Z,Ee,He.value,ce);if(os===null){Ee===null&&(Ee=Gt);break}o&&Ee&&os.alternate===null&&l(Z,Ee),W=_(os,W,Ae),Be===null?be=os:Be.sibling=os,Be=os,Ee=Gt}if(He.done)return u(Z,Ee),je&&Ds(Z,Ae),be;if(Ee===null){for(;!He.done;Ae++,He=J.next())He=he(Z,He.value,ce),He!==null&&(W=_(He,W,Ae),Be===null?be=He:Be.sibling=He,Be=He);return je&&Ds(Z,Ae),be}for(Ee=d(Ee);!He.done;Ae++,He=J.next())He=ae(Ee,Z,Ae,He.value,ce),He!==null&&(o&&He.alternate!==null&&Ee.delete(He.key===null?Ae:He.key),W=_(He,W,Ae),Be===null?be=He:Be.sibling=He,Be=He);return o&&Ee.forEach(function(LN){return l(Z,LN)}),je&&Ds(Z,Ae),be}function xt(Z,W,J,ce){if(typeof J=="object"&&J!==null&&J.type===f&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case a:e:{for(var be=J.key;W!==null;){if(W.key===be){if(be=J.type,be===f){if(W.tag===7){u(Z,W.sibling),ce=g(W,J.props.children),ce.return=Z,Z=ce;break e}}else if(W.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===C&&bT(be)===W.type){u(Z,W.sibling),ce=g(W,J.props),Ul(ce,J),ce.return=Z,Z=ce;break e}u(Z,W);break}else l(Z,W);W=W.sibling}J.type===f?(ce=Xs(J.props.children,Z.mode,ce,J.key),ce.return=Z,Z=ce):(ce=Sf(J.type,J.key,J.props,null,Z.mode,ce),Ul(ce,J),ce.return=Z,Z=ce)}return E(Z);case c:e:{for(be=J.key;W!==null;){if(W.key===be)if(W.tag===4&&W.stateNode.containerInfo===J.containerInfo&&W.stateNode.implementation===J.implementation){u(Z,W.sibling),ce=g(W,J.children||[]),ce.return=Z,Z=ce;break e}else{u(Z,W);break}else l(Z,W);W=W.sibling}ce=hm(J,Z.mode,ce),ce.return=Z,Z=ce}return E(Z);case C:return be=J._init,J=be(J._payload),xt(Z,W,J,ce)}if(ne(J))return Te(Z,W,J,ce);if(D(J)){if(be=D(J),typeof be!="function")throw Error(i(150));return J=be.call(J),Me(Z,W,J,ce)}if(typeof J.then=="function")return xt(Z,W,nf(J),ce);if(J.$$typeof===b)return xt(Z,W,bf(Z,J),ce);rf(Z,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,W!==null&&W.tag===6?(u(Z,W.sibling),ce=g(W,J),ce.return=Z,Z=ce):(u(Z,W),ce=fm(J,Z.mode,ce),ce.return=Z,Z=ce),E(Z)):u(Z,W)}return function(Z,W,J,ce){try{Ll=0;var be=xt(Z,W,J,ce);return Qo=null,be}catch(Ee){if(Ee===Dl)throw Ee;var Be=si(29,Ee,null,Z.mode);return Be.lanes=ce,Be.return=Z,Be}finally{}}}var Ls=vT(!0),TT=vT(!1),Go=me(null),sf=me(0);function ST(o,l){o=br,ve(sf,o),ve(Go,l),br=o|l.baseLanes}function _g(){ve(sf,br),ve(Go,Go.current)}function bg(){br=sf.current,Re(Go),Re(sf)}var ni=me(null),Bi=null;function $r(o){var l=o.alternate;ve(Xt,Xt.current&1),ve(ni,o),Bi===null&&(l===null||Go.current!==null||l.memoizedState!==null)&&(Bi=o)}function ET(o){if(o.tag===22){if(ve(Xt,Xt.current),ve(ni,o),Bi===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Bi=o)}}else jr()}function jr(){ve(Xt,Xt.current),ve(ni,ni.current)}function cr(o){Re(ni),Bi===o&&(Bi=null),Re(Xt)}var Xt=me(0);function of(o){for(var l=o;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var wP=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(u,d){o.push(d)}};this.abort=function(){l.aborted=!0,o.forEach(function(u){return u()})}},AP=t.unstable_scheduleCallback,xP=t.unstable_NormalPriority,qt={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vg(){return{controller:new wP,data:new Map,refCount:0}}function Fl(o){o.refCount--,o.refCount===0&&AP(xP,function(){o.controller.abort()})}var zl=null,Tg=0,Jo=0,ea=null;function RP(o,l){if(zl===null){var u=zl=[];Tg=0,Jo=Rm(),ea={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Tg++,l.then(wT,wT),l}function wT(){if(--Tg===0&&zl!==null){ea!==null&&(ea.status="fulfilled");var o=zl;zl=null,Jo=0,ea=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function CP(o,l){var u=[],d={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return o.then(function(){d.status="fulfilled",d.value=l;for(var g=0;g<u.length;g++)(0,u[g])(l)},function(g){for(d.status="rejected",d.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),d}var AT=V.S;V.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&RP(o,l),AT!==null&&AT(o,l)};var Us=me(null);function Sg(){var o=Us.current;return o!==null?o:ft.pooledCache}function af(o,l){l===null?ve(Us,Us.current):ve(Us,l.pool)}function xT(){var o=Sg();return o===null?null:{parent:qt._currentValue,pool:o}}var Hr=0,De=null,Je=null,Lt=null,lf=!1,ta=!1,Fs=!1,cf=0,Vl=0,na=null,OP=0;function Dt(){throw Error(i(321))}function Eg(o,l){if(l===null)return!1;for(var u=0;u<l.length&&u<o.length;u++)if(!Bn(o[u],l[u]))return!1;return!0}function wg(o,l,u,d,g,_){return Hr=_,De=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,V.H=o===null||o.memoizedState===null?zs:Wr,Fs=!1,_=u(d,g),Fs=!1,ta&&(_=CT(l,u,d,g)),RT(o),_}function RT(o){V.H=Li;var l=Je!==null&&Je.next!==null;if(Hr=0,Lt=Je=De=null,lf=!1,Vl=0,na=null,l)throw Error(i(300));o===null||Zt||(o=o.dependencies,o!==null&&_f(o)&&(Zt=!0))}function CT(o,l,u,d){De=o;var g=0;do{if(ta&&(na=null),Vl=0,ta=!1,25<=g)throw Error(i(301));if(g+=1,Lt=Je=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}V.H=Vs,_=l(u,d)}while(ta);return _}function MP(){var o=V.H,l=o.useState()[0];return l=typeof l.then=="function"?$l(l):l,o=o.useState()[0],(Je!==null?Je.memoizedState:null)!==o&&(De.flags|=1024),l}function Ag(){var o=cf!==0;return cf=0,o}function xg(o,l,u){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~u}function Rg(o){if(lf){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}lf=!1}Hr=0,Lt=Je=De=null,ta=!1,Vl=cf=0,na=null}function On(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?De.memoizedState=Lt=o:Lt=Lt.next=o,Lt}function Ut(){if(Je===null){var o=De.alternate;o=o!==null?o.memoizedState:null}else o=Je.next;var l=Lt===null?De.memoizedState:Lt.next;if(l!==null)Lt=l,Je=o;else{if(o===null)throw De.alternate===null?Error(i(467)):Error(i(310));Je=o,o={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Lt===null?De.memoizedState=Lt=o:Lt=Lt.next=o}return Lt}var uf;uf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function $l(o){var l=Vl;return Vl+=1,na===null&&(na=[]),o=yT(na,o,l),l=De,(Lt===null?l.memoizedState:Lt.next)===null&&(l=l.alternate,V.H=l===null||l.memoizedState===null?zs:Wr),o}function ff(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return $l(o);if(o.$$typeof===b)return dn(o)}throw Error(i(438,String(o)))}function Cg(o){var l=null,u=De.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var d=De.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(g){return g.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=uf(),De.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(o),d=0;d<o;d++)u[d]=O;return l.index++,u}function ur(o,l){return typeof l=="function"?l(o):l}function hf(o){var l=Ut();return Og(l,Je,o)}function Og(o,l,u){var d=o.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var g=o.baseQueue,_=d.pending;if(_!==null){if(g!==null){var E=g.next;g.next=_.next,_.next=E}l.baseQueue=g=_,d.pending=null}if(_=o.baseState,g===null)o.memoizedState=_;else{l=g.next;var k=E=null,F=null,q=l,le=!1;do{var he=q.lane&-536870913;if(he!==q.lane?(Ve&he)===he:(Hr&he)===he){var ee=q.revertLane;if(ee===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),he===Jo&&(le=!0);else if((Hr&ee)===ee){q=q.next,ee===Jo&&(le=!0);continue}else he={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},F===null?(k=F=he,E=_):F=F.next=he,De.lanes|=ee,es|=ee;he=q.action,Fs&&u(_,he),_=q.hasEagerState?q.eagerState:u(_,he)}else ee={lane:he,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},F===null?(k=F=ee,E=_):F=F.next=ee,De.lanes|=he,es|=he;q=q.next}while(q!==null&&q!==l);if(F===null?E=_:F.next=k,!Bn(_,o.memoizedState)&&(Zt=!0,le&&(u=ea,u!==null)))throw u;o.memoizedState=_,o.baseState=E,o.baseQueue=F,d.lastRenderedState=_}return g===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function Mg(o){var l=Ut(),u=l.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var d=u.dispatch,g=u.pending,_=l.memoizedState;if(g!==null){u.pending=null;var E=g=g.next;do _=o(_,E.action),E=E.next;while(E!==g);Bn(_,l.memoizedState)||(Zt=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),u.lastRenderedState=_}return[_,d]}function OT(o,l,u){var d=De,g=Ut(),_=je;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=l();var E=!Bn((Je||g).memoizedState,u);if(E&&(g.memoizedState=u,Zt=!0),g=g.queue,kg(NT.bind(null,d,g,o),[o]),g.getSnapshot!==l||E||Lt!==null&&Lt.memoizedState.tag&1){if(d.flags|=2048,ia(9,PT.bind(null,d,g,u,l),{destroy:void 0},null),ft===null)throw Error(i(349));_||Hr&60||MT(d,l,u)}return u}function MT(o,l,u){o.flags|=16384,o={getSnapshot:l,value:u},l=De.updateQueue,l===null?(l=uf(),De.updateQueue=l,l.stores=[o]):(u=l.stores,u===null?l.stores=[o]:u.push(o))}function PT(o,l,u,d){l.value=u,l.getSnapshot=d,kT(l)&&IT(o)}function NT(o,l,u){return u(function(){kT(l)&&IT(o)})}function kT(o){var l=o.getSnapshot;o=o.value;try{var u=l();return!Bn(o,u)}catch{return!0}}function IT(o){var l=Vr(o,2);l!==null&&En(l,o,2)}function Pg(o){var l=On();if(typeof o=="function"){var u=o;if(o=u(),Fs){Kn(!0);try{u()}finally{Kn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:o},l}function DT(o,l,u,d){return o.baseState=u,Og(o,Je,typeof d=="function"?d:ur)}function PP(o,l,u,d,g){if(gf(o))throw Error(i(485));if(o=l.action,o!==null){var _={payload:g,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){_.listeners.push(E)}};V.T!==null?u(!0):_.isTransition=!1,d(_),u=l.pending,u===null?(_.next=l.pending=_,BT(l,_)):(_.next=u.next,l.pending=u.next=_)}}function BT(o,l){var u=l.action,d=l.payload,g=o.state;if(l.isTransition){var _=V.T,E={};V.T=E;try{var k=u(g,d),F=V.S;F!==null&&F(E,k),LT(o,l,k)}catch(q){Ng(o,l,q)}finally{V.T=_}}else try{_=u(g,d),LT(o,l,_)}catch(q){Ng(o,l,q)}}function LT(o,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){UT(o,l,d)},function(d){return Ng(o,l,d)}):UT(o,l,u)}function UT(o,l,u){l.status="fulfilled",l.value=u,FT(l),o.state=u,l=o.pending,l!==null&&(u=l.next,u===l?o.pending=null:(u=u.next,l.next=u,BT(o,u)))}function Ng(o,l,u){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=u,FT(l),l=l.next;while(l!==d)}o.action=null}function FT(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function zT(o,l){return l}function VT(o,l){if(je){var u=ft.formState;if(u!==null){e:{var d=De;if(je){if(rn){t:{for(var g=rn,_=Di;g.nodeType!==8;){if(!_){g=null;break t}if(g=Ti(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){rn=Ti(g.nextSibling),d=g.data==="F!";break e}}Bs(d)}d=!1}d&&(l=u[0])}}return u=On(),u.memoizedState=u.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zT,lastRenderedState:l},u.queue=d,u=sS.bind(null,De,d),d.dispatch=u,d=Pg(!1),_=Ug.bind(null,De,!1,d.queue),d=On(),g={state:l,dispatch:null,action:o,pending:null},d.queue=g,u=PP.bind(null,De,g,_,u),g.dispatch=u,d.memoizedState=o,[l,u,!1]}function $T(o){var l=Ut();return jT(l,Je,o)}function jT(o,l,u){l=Og(o,l,zT)[0],o=hf(ur)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?$l(l):l;var d=Ut(),g=d.queue,_=g.dispatch;return u!==d.memoizedState&&(De.flags|=2048,ia(9,NP.bind(null,g,u),{destroy:void 0},null)),[l,_,o]}function NP(o,l){o.action=l}function HT(o){var l=Ut(),u=Je;if(u!==null)return jT(l,u,o);Ut(),l=l.memoizedState,u=Ut();var d=u.queue.dispatch;return u.memoizedState=o,[l,d,!1]}function ia(o,l,u,d){return o={tag:o,create:l,inst:u,deps:d,next:null},l=De.updateQueue,l===null&&(l=uf(),De.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=o.next=o:(d=u.next,u.next=o,o.next=d,l.lastEffect=o),o}function WT(){return Ut().memoizedState}function df(o,l,u,d){var g=On();De.flags|=o,g.memoizedState=ia(1|l,u,{destroy:void 0},d===void 0?null:d)}function pf(o,l,u,d){var g=Ut();d=d===void 0?null:d;var _=g.memoizedState.inst;Je!==null&&d!==null&&Eg(d,Je.memoizedState.deps)?g.memoizedState=ia(l,u,_,d):(De.flags|=o,g.memoizedState=ia(1|l,u,_,d))}function XT(o,l){df(8390656,8,o,l)}function kg(o,l){pf(2048,8,o,l)}function qT(o,l){return pf(4,2,o,l)}function YT(o,l){return pf(4,4,o,l)}function KT(o,l){if(typeof l=="function"){o=o();var u=l(o);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function ZT(o,l,u){u=u!=null?u.concat([o]):null,pf(4,4,KT.bind(null,l,o),u)}function Ig(){}function QT(o,l){var u=Ut();l=l===void 0?null:l;var d=u.memoizedState;return l!==null&&Eg(l,d[1])?d[0]:(u.memoizedState=[o,l],o)}function GT(o,l){var u=Ut();l=l===void 0?null:l;var d=u.memoizedState;if(l!==null&&Eg(l,d[1]))return d[0];if(d=o(),Fs){Kn(!0);try{o()}finally{Kn(!1)}}return u.memoizedState=[d,l],d}function Dg(o,l,u){return u===void 0||Hr&1073741824?o.memoizedState=l:(o.memoizedState=u,o=e1(),De.lanes|=o,es|=o,u)}function JT(o,l,u,d){return Bn(u,l)?u:Go.current!==null?(o=Dg(o,u,d),Bn(o,l)||(Zt=!0),o):Hr&42?(o=e1(),De.lanes|=o,es|=o,l):(Zt=!0,o.memoizedState=u)}function eS(o,l,u,d,g){var _=re.p;re.p=_!==0&&8>_?_:8;var E=V.T,k={};V.T=k,Ug(o,!1,l,u);try{var F=g(),q=V.S;if(q!==null&&q(k,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var le=CP(F,d);jl(o,l,le,zn(o))}else jl(o,l,d,zn(o))}catch(he){jl(o,l,{then:function(){},status:"rejected",reason:he},zn())}finally{re.p=_,V.T=E}}function kP(){}function Bg(o,l,u,d){if(o.tag!==5)throw Error(i(476));var g=tS(o).queue;eS(o,g,l,ue,u===null?kP:function(){return nS(o),u(d)})}function tS(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:ue},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:u},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function nS(o){var l=tS(o).next.queue;jl(o,l,{},zn())}function Lg(){return dn(cc)}function iS(){return Ut().memoizedState}function rS(){return Ut().memoizedState}function IP(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var u=zn();o=Yr(u);var d=Kr(l,o,u);d!==null&&(En(d,l,u),Xl(d,l,u)),l={cache:vg()},o.payload=l;return}l=l.return}}function DP(o,l,u){var d=zn();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},gf(o)?oS(l,u):(u=dg(o,l,u,d),u!==null&&(En(u,o,d),aS(u,l,d)))}function sS(o,l,u){var d=zn();jl(o,l,u,d)}function jl(o,l,u,d){var g={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(gf(o))oS(l,g);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var E=l.lastRenderedState,k=_(E,u);if(g.hasEagerState=!0,g.eagerState=k,Bn(k,E))return Qu(o,l,g,0),ft===null&&Zu(),!1}catch{}finally{}if(u=dg(o,l,g,d),u!==null)return En(u,o,d),aS(u,l,d),!0}return!1}function Ug(o,l,u,d){if(d={lane:2,revertLane:Rm(),action:d,hasEagerState:!1,eagerState:null,next:null},gf(o)){if(l)throw Error(i(479))}else l=dg(o,u,d,2),l!==null&&En(l,o,2)}function gf(o){var l=o.alternate;return o===De||l!==null&&l===De}function oS(o,l){ta=lf=!0;var u=o.pending;u===null?l.next=l:(l.next=u.next,u.next=l),o.pending=l}function aS(o,l,u){if(u&4194176){var d=l.lanes;d&=o.pendingLanes,u|=d,l.lanes=u,_v(o,u)}}var Li={readContext:dn,use:ff,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt};Li.useCacheRefresh=Dt,Li.useMemoCache=Dt,Li.useHostTransitionStatus=Dt,Li.useFormState=Dt,Li.useActionState=Dt,Li.useOptimistic=Dt;var zs={readContext:dn,use:ff,useCallback:function(o,l){return On().memoizedState=[o,l===void 0?null:l],o},useContext:dn,useEffect:XT,useImperativeHandle:function(o,l,u){u=u!=null?u.concat([o]):null,df(4194308,4,KT.bind(null,l,o),u)},useLayoutEffect:function(o,l){return df(4194308,4,o,l)},useInsertionEffect:function(o,l){df(4,2,o,l)},useMemo:function(o,l){var u=On();l=l===void 0?null:l;var d=o();if(Fs){Kn(!0);try{o()}finally{Kn(!1)}}return u.memoizedState=[d,l],d},useReducer:function(o,l,u){var d=On();if(u!==void 0){var g=u(l);if(Fs){Kn(!0);try{u(l)}finally{Kn(!1)}}}else g=l;return d.memoizedState=d.baseState=g,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:g},d.queue=o,o=o.dispatch=DP.bind(null,De,o),[d.memoizedState,o]},useRef:function(o){var l=On();return o={current:o},l.memoizedState=o},useState:function(o){o=Pg(o);var l=o.queue,u=sS.bind(null,De,l);return l.dispatch=u,[o.memoizedState,u]},useDebugValue:Ig,useDeferredValue:function(o,l){var u=On();return Dg(u,o,l)},useTransition:function(){var o=Pg(!1);return o=eS.bind(null,De,o.queue,!0,!1),On().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,u){var d=De,g=On();if(je){if(u===void 0)throw Error(i(407));u=u()}else{if(u=l(),ft===null)throw Error(i(349));Ve&60||MT(d,l,u)}g.memoizedState=u;var _={value:u,getSnapshot:l};return g.queue=_,XT(NT.bind(null,d,_,o),[o]),d.flags|=2048,ia(9,PT.bind(null,d,_,u,l),{destroy:void 0},null),u},useId:function(){var o=On(),l=ft.identifierPrefix;if(je){var u=lr,d=ar;u=(d&~(1<<32-Tn(d)-1)).toString(32)+u,l=":"+l+"R"+u,u=cf++,0<u&&(l+="H"+u.toString(32)),l+=":"}else u=OP++,l=":"+l+"r"+u.toString(32)+":";return o.memoizedState=l},useCacheRefresh:function(){return On().memoizedState=IP.bind(null,De)}};zs.useMemoCache=Cg,zs.useHostTransitionStatus=Lg,zs.useFormState=VT,zs.useActionState=VT,zs.useOptimistic=function(o){var l=On();l.memoizedState=l.baseState=o;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=Ug.bind(null,De,!0,u),u.dispatch=l,[o,l]};var Wr={readContext:dn,use:ff,useCallback:QT,useContext:dn,useEffect:kg,useImperativeHandle:ZT,useInsertionEffect:qT,useLayoutEffect:YT,useMemo:GT,useReducer:hf,useRef:WT,useState:function(){return hf(ur)},useDebugValue:Ig,useDeferredValue:function(o,l){var u=Ut();return JT(u,Je.memoizedState,o,l)},useTransition:function(){var o=hf(ur)[0],l=Ut().memoizedState;return[typeof o=="boolean"?o:$l(o),l]},useSyncExternalStore:OT,useId:iS};Wr.useCacheRefresh=rS,Wr.useMemoCache=Cg,Wr.useHostTransitionStatus=Lg,Wr.useFormState=$T,Wr.useActionState=$T,Wr.useOptimistic=function(o,l){var u=Ut();return DT(u,Je,o,l)};var Vs={readContext:dn,use:ff,useCallback:QT,useContext:dn,useEffect:kg,useImperativeHandle:ZT,useInsertionEffect:qT,useLayoutEffect:YT,useMemo:GT,useReducer:Mg,useRef:WT,useState:function(){return Mg(ur)},useDebugValue:Ig,useDeferredValue:function(o,l){var u=Ut();return Je===null?Dg(u,o,l):JT(u,Je.memoizedState,o,l)},useTransition:function(){var o=Mg(ur)[0],l=Ut().memoizedState;return[typeof o=="boolean"?o:$l(o),l]},useSyncExternalStore:OT,useId:iS};Vs.useCacheRefresh=rS,Vs.useMemoCache=Cg,Vs.useHostTransitionStatus=Lg,Vs.useFormState=HT,Vs.useActionState=HT,Vs.useOptimistic=function(o,l){var u=Ut();return Je!==null?DT(u,Je,o,l):(u.baseState=o,[o,u.queue.dispatch])};function Fg(o,l,u,d){l=o.memoizedState,u=u(d,l),u=u==null?l:x({},l,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var zg={isMounted:function(o){return(o=o._reactInternals)?L(o)===o:!1},enqueueSetState:function(o,l,u){o=o._reactInternals;var d=zn(),g=Yr(d);g.payload=l,u!=null&&(g.callback=u),l=Kr(o,g,d),l!==null&&(En(l,o,d),Xl(l,o,d))},enqueueReplaceState:function(o,l,u){o=o._reactInternals;var d=zn(),g=Yr(d);g.tag=1,g.payload=l,u!=null&&(g.callback=u),l=Kr(o,g,d),l!==null&&(En(l,o,d),Xl(l,o,d))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var u=zn(),d=Yr(u);d.tag=2,l!=null&&(d.callback=l),l=Kr(o,d,u),l!==null&&(En(l,o,u),Xl(l,o,u))}};function lS(o,l,u,d,g,_,E){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,_,E):l.prototype&&l.prototype.isPureReactComponent?!Ml(u,d)||!Ml(g,_):!0}function cS(o,l,u,d){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,d),l.state!==o&&zg.enqueueReplaceState(l,l.state,null)}function $s(o,l){var u=l;if("ref"in l){u={};for(var d in l)d!=="ref"&&(u[d]=l[d])}if(o=o.defaultProps){u===l&&(u=x({},u));for(var g in o)u[g]===void 0&&(u[g]=o[g])}return u}var mf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function uS(o){mf(o)}function fS(o){console.error(o)}function hS(o){mf(o)}function yf(o,l){try{var u=o.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function dS(o,l,u){try{var d=o.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Vg(o,l,u){return u=Yr(u),u.tag=3,u.payload={element:null},u.callback=function(){yf(o,l)},u}function pS(o){return o=Yr(o),o.tag=3,o}function gS(o,l,u,d){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var _=d.value;o.payload=function(){return g(_)},o.callback=function(){dS(l,u,d)}}var E=u.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(o.callback=function(){dS(l,u,d),typeof g!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var k=d.stack;this.componentDidCatch(d.value,{componentStack:k!==null?k:""})})}function BP(o,l,u,d,g){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=u.alternate,l!==null&&Wl(l,u,g,!0),u=ni.current,u!==null){switch(u.tag){case 13:return Bi===null?Sm():u.alternate===null&&At===0&&(At=3),u.flags&=-257,u.flags|=65536,u.lanes=g,d===yg?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([d]):l.add(d),wm(o,d,g)),!1;case 22:return u.flags|=65536,d===yg?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([d]):u.add(d)),wm(o,d,g)),!1}throw Error(i(435,u.tag))}return wm(o,d,g),Sm(),!1}if(je)return l=ni.current,l!==null?(!(l.flags&65536)&&(l.flags|=256),l.flags|=65536,l.lanes=g,d!==mg&&(o=Error(i(422),{cause:d}),Il(Jn(o,u)))):(d!==mg&&(l=Error(i(423),{cause:d}),Il(Jn(l,u))),o=o.current.alternate,o.flags|=65536,g&=-g,o.lanes|=g,d=Jn(d,u),g=Vg(o.stateNode,d,g),nm(o,g),At!==4&&(At=2)),!1;var _=Error(i(520),{cause:d});if(_=Jn(_,u),ec===null?ec=[_]:ec.push(_),At!==4&&(At=2),l===null)return!0;d=Jn(d,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,o=g&-g,u.lanes|=o,o=Vg(u.stateNode,d,o),nm(u,o),!1;case 1:if(l=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ts===null||!ts.has(_))))return u.flags|=65536,g&=-g,u.lanes|=g,g=pS(g),gS(g,o,u,d),nm(u,g),!1}u=u.return}while(u!==null);return!1}var mS=Error(i(461)),Zt=!1;function sn(o,l,u,d){l.child=o===null?TT(l,null,u,d):Ls(l,o.child,u,d)}function yS(o,l,u,d,g){u=u.render;var _=l.ref;if("ref"in d){var E={};for(var k in d)k!=="ref"&&(E[k]=d[k])}else E=d;return Hs(l),d=wg(o,l,u,E,_,g),k=Ag(),o!==null&&!Zt?(xg(o,l,g),fr(o,l,g)):(je&&k&&pg(l),l.flags|=1,sn(o,l,d,g),l.child)}function _S(o,l,u,d,g){if(o===null){var _=u.type;return typeof _=="function"&&!um(_)&&_.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=_,bS(o,l,_,d,g)):(o=Sf(u.type,null,d,l,l.mode,g),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,!Zg(o,g)){var E=_.memoizedProps;if(u=u.compare,u=u!==null?u:Ml,u(E,d)&&o.ref===l.ref)return fr(o,l,g)}return l.flags|=1,o=Jr(_,d),o.ref=l.ref,o.return=l,l.child=o}function bS(o,l,u,d,g){if(o!==null){var _=o.memoizedProps;if(Ml(_,d)&&o.ref===l.ref)if(Zt=!1,l.pendingProps=d=_,Zg(o,g))o.flags&131072&&(Zt=!0);else return l.lanes=o.lanes,fr(o,l,g)}return $g(o,l,u,d,g)}function vS(o,l,u){var d=l.pendingProps,g=d.children,_=(l.stateNode._pendingVisibility&2)!==0,E=o!==null?o.memoizedState:null;if(Hl(o,l),d.mode==="hidden"||_){if(l.flags&128){if(d=E!==null?E.baseLanes|u:u,o!==null){for(g=l.child=o.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;l.childLanes=_&~d}else l.childLanes=0,l.child=null;return TS(o,l,d,u)}if(u&536870912)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&af(l,E!==null?E.cachePool:null),E!==null?ST(l,E):_g(),ET(l);else return l.lanes=l.childLanes=536870912,TS(o,l,E!==null?E.baseLanes|u:u,u)}else E!==null?(af(l,E.cachePool),ST(l,E),jr(),l.memoizedState=null):(o!==null&&af(l,null),_g(),jr());return sn(o,l,g,u),l.child}function TS(o,l,u,d){var g=Sg();return g=g===null?null:{parent:qt._currentValue,pool:g},l.memoizedState={baseLanes:u,cachePool:g},o!==null&&af(l,null),_g(),ET(l),o!==null&&Wl(o,l,d,!0),null}function Hl(o,l){var u=l.ref;if(u===null)o!==null&&o.ref!==null&&(l.flags|=2097664);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(o===null||o.ref!==u)&&(l.flags|=2097664)}}function $g(o,l,u,d,g){return Hs(l),u=wg(o,l,u,d,void 0,g),d=Ag(),o!==null&&!Zt?(xg(o,l,g),fr(o,l,g)):(je&&d&&pg(l),l.flags|=1,sn(o,l,u,g),l.child)}function SS(o,l,u,d,g,_){return Hs(l),l.updateQueue=null,u=CT(l,d,u,g),RT(o),d=Ag(),o!==null&&!Zt?(xg(o,l,_),fr(o,l,_)):(je&&d&&pg(l),l.flags|=1,sn(o,l,u,_),l.child)}function ES(o,l,u,d,g){if(Hs(l),l.stateNode===null){var _=Yo,E=u.contextType;typeof E=="object"&&E!==null&&(_=dn(E)),_=new u(d,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=zg,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=d,_.state=l.memoizedState,_.refs={},em(l),E=u.contextType,_.context=typeof E=="object"&&E!==null?dn(E):Yo,_.state=l.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(Fg(l,u,E,d),_.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(E=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),E!==_.state&&zg.enqueueReplaceState(_,_.state,null),Yl(l,d,_,g),ql(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(o===null){_=l.stateNode;var k=l.memoizedProps,F=$s(u,k);_.props=F;var q=_.context,le=u.contextType;E=Yo,typeof le=="object"&&le!==null&&(E=dn(le));var he=u.getDerivedStateFromProps;le=typeof he=="function"||typeof _.getSnapshotBeforeUpdate=="function",k=l.pendingProps!==k,le||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k||q!==E)&&cS(l,_,d,E),qr=!1;var ee=l.memoizedState;_.state=ee,Yl(l,d,_,g),ql(),q=l.memoizedState,k||ee!==q||qr?(typeof he=="function"&&(Fg(l,u,he,d),q=l.memoizedState),(F=qr||lS(l,u,F,d,ee,q,E))?(le||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=q),_.props=d,_.state=q,_.context=E,d=F):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{_=l.stateNode,tm(o,l),E=l.memoizedProps,le=$s(u,E),_.props=le,he=l.pendingProps,ee=_.context,q=u.contextType,F=Yo,typeof q=="object"&&q!==null&&(F=dn(q)),k=u.getDerivedStateFromProps,(q=typeof k=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(E!==he||ee!==F)&&cS(l,_,d,F),qr=!1,ee=l.memoizedState,_.state=ee,Yl(l,d,_,g),ql();var ae=l.memoizedState;E!==he||ee!==ae||qr||o!==null&&o.dependencies!==null&&_f(o.dependencies)?(typeof k=="function"&&(Fg(l,u,k,d),ae=l.memoizedState),(le=qr||lS(l,u,le,d,ee,ae,F)||o!==null&&o.dependencies!==null&&_f(o.dependencies))?(q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,ae,F),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,ae,F)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||E===o.memoizedProps&&ee===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||E===o.memoizedProps&&ee===o.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=ae),_.props=d,_.state=ae,_.context=F,d=le):(typeof _.componentDidUpdate!="function"||E===o.memoizedProps&&ee===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||E===o.memoizedProps&&ee===o.memoizedState||(l.flags|=1024),d=!1)}return _=d,Hl(o,l),d=(l.flags&128)!==0,_||d?(_=l.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,o!==null&&d?(l.child=Ls(l,o.child,null,g),l.child=Ls(l,null,u,g)):sn(o,l,u,g),l.memoizedState=_.state,o=l.child):o=fr(o,l,g),o}function wS(o,l,u,d){return kl(),l.flags|=256,sn(o,l,u,d),l.child}var jg={dehydrated:null,treeContext:null,retryLane:0};function Hg(o){return{baseLanes:o,cachePool:xT()}}function Wg(o,l,u){return o=o!==null?o.childLanes&~u:0,l&&(o|=oi),o}function AS(o,l,u){var d=l.pendingProps,g=!1,_=(l.flags&128)!==0,E;if((E=_)||(E=o!==null&&o.memoizedState===null?!1:(Xt.current&2)!==0),E&&(g=!0,l.flags&=-129),E=(l.flags&32)!==0,l.flags&=-33,o===null){if(je){if(g?$r(l):jr(),je){var k=rn,F;if(F=k){e:{for(F=k,k=Di;F.nodeType!==8;){if(!k){k=null;break e}if(F=Ti(F.nextSibling),F===null){k=null;break e}}k=F}k!==null?(l.memoizedState={dehydrated:k,treeContext:Is!==null?{id:ar,overflow:lr}:null,retryLane:536870912},F=si(18,null,null,0),F.stateNode=k,F.return=l,l.child=F,Sn=l,rn=null,F=!0):F=!1}F||Bs(l)}if(k=l.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return k.data==="$!"?l.lanes=16:l.lanes=536870912,null;cr(l)}return k=d.children,d=d.fallback,g?(jr(),g=l.mode,k=qg({mode:"hidden",children:k},g),d=Xs(d,g,u,null),k.return=l,d.return=l,k.sibling=d,l.child=k,g=l.child,g.memoizedState=Hg(u),g.childLanes=Wg(o,E,u),l.memoizedState=jg,d):($r(l),Xg(l,k))}if(F=o.memoizedState,F!==null&&(k=F.dehydrated,k!==null)){if(_)l.flags&256?($r(l),l.flags&=-257,l=Yg(o,l,u)):l.memoizedState!==null?(jr(),l.child=o.child,l.flags|=128,l=null):(jr(),g=d.fallback,k=l.mode,d=qg({mode:"visible",children:d.children},k),g=Xs(g,k,u,null),g.flags|=2,d.return=l,g.return=l,d.sibling=g,l.child=d,Ls(l,o.child,null,u),d=l.child,d.memoizedState=Hg(u),d.childLanes=Wg(o,E,u),l.memoizedState=jg,l=g);else if($r(l),k.data==="$!"){if(E=k.nextSibling&&k.nextSibling.dataset,E)var q=E.dgst;E=q,d=Error(i(419)),d.stack="",d.digest=E,Il({value:d,source:null,stack:null}),l=Yg(o,l,u)}else if(Zt||Wl(o,l,u,!1),E=(u&o.childLanes)!==0,Zt||E){if(E=ft,E!==null){if(d=u&-u,d&42)d=1;else switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=64;break;case 268435456:d=134217728;break;default:d=0}if(d=d&(E.suspendedLanes|u)?0:d,d!==0&&d!==F.retryLane)throw F.retryLane=d,Vr(o,d),En(E,o,d),mS}k.data==="$?"||Sm(),l=Yg(o,l,u)}else k.data==="$?"?(l.flags|=128,l.child=o.child,l=QP.bind(null,o),k._reactRetry=l,l=null):(o=F.treeContext,rn=Ti(k.nextSibling),Sn=l,je=!0,bi=null,Di=!1,o!==null&&(ei[ti++]=ar,ei[ti++]=lr,ei[ti++]=Is,ar=o.id,lr=o.overflow,Is=l),l=Xg(l,d.children),l.flags|=4096);return l}return g?(jr(),g=d.fallback,k=l.mode,F=o.child,q=F.sibling,d=Jr(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&31457280,q!==null?g=Jr(q,g):(g=Xs(g,k,u,null),g.flags|=2),g.return=l,d.return=l,d.sibling=g,l.child=d,d=g,g=l.child,k=o.child.memoizedState,k===null?k=Hg(u):(F=k.cachePool,F!==null?(q=qt._currentValue,F=F.parent!==q?{parent:q,pool:q}:F):F=xT(),k={baseLanes:k.baseLanes|u,cachePool:F}),g.memoizedState=k,g.childLanes=Wg(o,E,u),l.memoizedState=jg,d):($r(l),u=o.child,o=u.sibling,u=Jr(u,{mode:"visible",children:d.children}),u.return=l,u.sibling=null,o!==null&&(E=l.deletions,E===null?(l.deletions=[o],l.flags|=16):E.push(o)),l.child=u,l.memoizedState=null,u)}function Xg(o,l){return l=qg({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function qg(o,l){return QS(o,l,0,null)}function Yg(o,l,u){return Ls(l,o.child,null,u),o=Xg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function xS(o,l,u){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l),Gg(o.return,l,u)}function Kg(o,l,u,d,g){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:g}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=u,_.tailMode=g)}function RS(o,l,u){var d=l.pendingProps,g=d.revealOrder,_=d.tail;if(sn(o,l,d.children,u),d=Xt.current,d&2)d=d&1|2,l.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&xS(o,u,l);else if(o.tag===19)xS(o,u,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(ve(Xt,d),g){case"forwards":for(u=l.child,g=null;u!==null;)o=u.alternate,o!==null&&of(o)===null&&(g=u),u=u.sibling;u=g,u===null?(g=l.child,l.child=null):(g=u.sibling,u.sibling=null),Kg(l,!1,g,u,_);break;case"backwards":for(u=null,g=l.child,l.child=null;g!==null;){if(o=g.alternate,o!==null&&of(o)===null){l.child=g;break}o=g.sibling,g.sibling=u,u=g,g=o}Kg(l,!0,u,null,_);break;case"together":Kg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function fr(o,l,u){if(o!==null&&(l.dependencies=o.dependencies),es|=l.lanes,!(u&l.childLanes))if(o!==null){if(Wl(o,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(i(153));if(l.child!==null){for(o=l.child,u=Jr(o,o.pendingProps),l.child=u,u.return=l;o.sibling!==null;)o=o.sibling,u=u.sibling=Jr(o,o.pendingProps),u.return=l;u.sibling=null}return l.child}function Zg(o,l){return o.lanes&l?!0:(o=o.dependencies,!!(o!==null&&_f(o)))}function LP(o,l,u){switch(l.tag){case 3:Ce(l,l.stateNode.containerInfo),Xr(l,qt,o.memoizedState.cache),kl();break;case 27:case 5:Ye(l);break;case 4:Ce(l,l.stateNode.containerInfo);break;case 10:Xr(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?($r(l),l.flags|=128,null):u&l.child.childLanes?AS(o,l,u):($r(l),o=fr(o,l,u),o!==null?o.sibling:null);$r(l);break;case 19:var g=(o.flags&128)!==0;if(d=(u&l.childLanes)!==0,d||(Wl(o,l,u,!1),d=(u&l.childLanes)!==0),g){if(d)return RS(o,l,u);l.flags|=128}if(g=l.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ve(Xt,Xt.current),d)break;return null;case 22:case 23:return l.lanes=0,vS(o,l,u);case 24:Xr(l,qt,o.memoizedState.cache)}return fr(o,l,u)}function CS(o,l,u){if(o!==null)if(o.memoizedProps!==l.pendingProps)Zt=!0;else{if(!Zg(o,u)&&!(l.flags&128))return Zt=!1,LP(o,l,u);Zt=!!(o.flags&131072)}else Zt=!1,je&&l.flags&1048576&&hT(l,ef,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var d=l.elementType,g=d._init;if(d=g(d._payload),l.type=d,typeof d=="function")um(d)?(o=$s(d,o),l.tag=1,l=ES(null,l,d,o,u)):(l.tag=0,l=$g(null,l,d,o,u));else{if(d!=null){if(g=d.$$typeof,g===v){l.tag=11,l=yS(null,l,d,o,u);break e}else if(g===w){l.tag=14,l=_S(null,l,d,o,u);break e}}throw l=j(d)||d,Error(i(306,l,""))}}return l;case 0:return $g(o,l,l.type,l.pendingProps,u);case 1:return d=l.type,g=$s(d,l.pendingProps),ES(o,l,d,g,u);case 3:e:{if(Ce(l,l.stateNode.containerInfo),o===null)throw Error(i(387));var _=l.pendingProps;g=l.memoizedState,d=g.element,tm(o,l),Yl(l,_,null,u);var E=l.memoizedState;if(_=E.cache,Xr(l,qt,_),_!==g.cache&&Jg(l,[qt],u,!0),ql(),_=E.element,g.isDehydrated)if(g={element:_,isDehydrated:!1,cache:E.cache},l.updateQueue.baseState=g,l.memoizedState=g,l.flags&256){l=wS(o,l,_,u);break e}else if(_!==d){d=Jn(Error(i(424)),l),Il(d),l=wS(o,l,_,u);break e}else for(rn=Ti(l.stateNode.containerInfo.firstChild),Sn=l,je=!0,bi=null,Di=!0,u=TT(l,null,_,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(kl(),_===d){l=fr(o,l,u);break e}sn(o,l,_,u)}l=l.child}return l;case 26:return Hl(o,l),o===null?(u=P1(l.type,null,l.pendingProps,null))?l.memoizedState=u:je||(u=l.type,o=l.pendingProps,d=If(bt.current).createElement(u),d[hn]=l,d[Rn]=o,on(d,u,o),Kt(d),l.stateNode=d):l.memoizedState=P1(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ye(l),o===null&&je&&(d=l.stateNode=C1(l.type,l.pendingProps,bt.current),Sn=l,Di=!0,rn=Ti(d.firstChild)),d=l.pendingProps.children,o!==null||je?sn(o,l,d,u):l.child=Ls(l,null,d,u),Hl(o,l),l.child;case 5:return o===null&&je&&((g=d=rn)&&(d=dN(d,l.type,l.pendingProps,Di),d!==null?(l.stateNode=d,Sn=l,rn=Ti(d.firstChild),Di=!1,g=!0):g=!1),g||Bs(l)),Ye(l),g=l.type,_=l.pendingProps,E=o!==null?o.memoizedProps:null,d=_.children,Bm(g,_)?d=null:E!==null&&Bm(g,E)&&(l.flags|=32),l.memoizedState!==null&&(g=wg(o,l,MP,null,null,u),cc._currentValue=g),Hl(o,l),sn(o,l,d,u),l.child;case 6:return o===null&&je&&((o=u=rn)&&(u=pN(u,l.pendingProps,Di),u!==null?(l.stateNode=u,Sn=l,rn=null,o=!0):o=!1),o||Bs(l)),null;case 13:return AS(o,l,u);case 4:return Ce(l,l.stateNode.containerInfo),d=l.pendingProps,o===null?l.child=Ls(l,null,d,u):sn(o,l,d,u),l.child;case 11:return yS(o,l,l.type,l.pendingProps,u);case 7:return sn(o,l,l.pendingProps,u),l.child;case 8:return sn(o,l,l.pendingProps.children,u),l.child;case 12:return sn(o,l,l.pendingProps.children,u),l.child;case 10:return d=l.pendingProps,Xr(l,l.type,d.value),sn(o,l,d.children,u),l.child;case 9:return g=l.type._context,d=l.pendingProps.children,Hs(l),g=dn(g),d=d(g),l.flags|=1,sn(o,l,d,u),l.child;case 14:return _S(o,l,l.type,l.pendingProps,u);case 15:return bS(o,l,l.type,l.pendingProps,u);case 19:return RS(o,l,u);case 22:return vS(o,l,u);case 24:return Hs(l),d=dn(qt),o===null?(g=Sg(),g===null&&(g=ft,_=vg(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=u),g=_),l.memoizedState={parent:d,cache:g},em(l),Xr(l,qt,g)):(o.lanes&u&&(tm(o,l),Yl(l,null,null,u),ql()),g=o.memoizedState,_=l.memoizedState,g.parent!==d?(g={parent:d,cache:d},l.memoizedState=g,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=g),Xr(l,qt,d)):(d=_.cache,Xr(l,qt,d),d!==g.cache&&Jg(l,[qt],u,!0))),sn(o,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}var Qg=me(null),js=null,hr=null;function Xr(o,l,u){ve(Qg,l._currentValue),l._currentValue=u}function dr(o){o._currentValue=Qg.current,Re(Qg)}function Gg(o,l,u){for(;o!==null;){var d=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),o===u)break;o=o.return}}function Jg(o,l,u,d){var g=o.child;for(g!==null&&(g.return=o);g!==null;){var _=g.dependencies;if(_!==null){var E=g.child;_=_.firstContext;e:for(;_!==null;){var k=_;_=g;for(var F=0;F<l.length;F++)if(k.context===l[F]){_.lanes|=u,k=_.alternate,k!==null&&(k.lanes|=u),Gg(_.return,u,o),d||(E=null);break e}_=k.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(i(341));E.lanes|=u,_=E.alternate,_!==null&&(_.lanes|=u),Gg(E,u,o),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===o){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Wl(o,l,u,d){o=null;for(var g=l,_=!1;g!==null;){if(!_){if(g.flags&524288)_=!0;else if(g.flags&262144)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var k=g.type;Bn(g.pendingProps.value,E.value)||(o!==null?o.push(k):o=[k])}}else if(g===kt.current){if(E=g.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(o!==null?o.push(cc):o=[cc])}g=g.return}o!==null&&Jg(l,o,u,d),l.flags|=262144}function _f(o){for(o=o.firstContext;o!==null;){if(!Bn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Hs(o){js=o,hr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function dn(o){return OS(js,o)}function bf(o,l){return js===null&&Hs(o),OS(o,l)}function OS(o,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},hr===null){if(o===null)throw Error(i(308));hr=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else hr=hr.next=l;return u}var qr=!1;function em(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tm(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Yr(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Kr(o,l,u){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,St&2){var g=d.pending;return g===null?l.next=l:(l.next=g.next,g.next=l),d.pending=l,l=Gu(o),uT(o,null,u),l}return Qu(o,d,l,u),Gu(o)}function Xl(o,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194176)!==0)){var d=l.lanes;d&=o.pendingLanes,u|=d,l.lanes=u,_v(o,u)}}function nm(o,l){var u=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var g=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var E={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?g=_=E:_=_.next=E,u=u.next}while(u!==null);_===null?g=_=l:_=_.next=l}else g=_=l;u={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=l}var im=!1;function ql(){if(im){var o=ea;if(o!==null)throw o}}function Yl(o,l,u,d){im=!1;var g=o.updateQueue;qr=!1;var _=g.firstBaseUpdate,E=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var F=k,q=F.next;F.next=null,E===null?_=q:E.next=q,E=F;var le=o.alternate;le!==null&&(le=le.updateQueue,k=le.lastBaseUpdate,k!==E&&(k===null?le.firstBaseUpdate=q:k.next=q,le.lastBaseUpdate=F))}if(_!==null){var he=g.baseState;E=0,le=q=F=null,k=_;do{var ee=k.lane&-536870913,ae=ee!==k.lane;if(ae?(Ve&ee)===ee:(d&ee)===ee){ee!==0&&ee===Jo&&(im=!0),le!==null&&(le=le.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Te=o,Me=k;ee=l;var xt=u;switch(Me.tag){case 1:if(Te=Me.payload,typeof Te=="function"){he=Te.call(xt,he,ee);break e}he=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Me.payload,ee=typeof Te=="function"?Te.call(xt,he,ee):Te,ee==null)break e;he=x({},he,ee);break e;case 2:qr=!0}}ee=k.callback,ee!==null&&(o.flags|=64,ae&&(o.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},le===null?(q=le=ae,F=he):le=le.next=ae,E|=ee;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;ae=k,k=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);le===null&&(F=he),g.baseState=F,g.firstBaseUpdate=q,g.lastBaseUpdate=le,_===null&&(g.shared.lanes=0),es|=E,o.lanes=E,o.memoizedState=he}}function MS(o,l){if(typeof o!="function")throw Error(i(191,o));o.call(l)}function PS(o,l){var u=o.callbacks;if(u!==null)for(o.callbacks=null,o=0;o<u.length;o++)MS(u[o],l)}function Kl(o,l){try{var u=l.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&o)===o){d=void 0;var _=u.create,E=u.inst;d=_(),E.destroy=d}u=u.next}while(u!==g)}}catch(k){ot(l,l.return,k)}}function Zr(o,l,u){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var _=g.next;d=_;do{if((d.tag&o)===o){var E=d.inst,k=E.destroy;if(k!==void 0){E.destroy=void 0,g=l;var F=u;try{k()}catch(q){ot(g,F,q)}}}d=d.next}while(d!==_)}}catch(q){ot(l,l.return,q)}}function NS(o){var l=o.updateQueue;if(l!==null){var u=o.stateNode;try{PS(l,u)}catch(d){ot(o,o.return,d)}}}function kS(o,l,u){u.props=$s(o.type,o.memoizedProps),u.state=o.memoizedState;try{u.componentWillUnmount()}catch(d){ot(o,l,d)}}function Ws(o,l){try{var u=o.ref;if(u!==null){var d=o.stateNode;switch(o.tag){case 26:case 27:case 5:var g=d;break;default:g=d}typeof u=="function"?o.refCleanup=u(g):u.current=g}}catch(_){ot(o,l,_)}}function Ln(o,l){var u=o.ref,d=o.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(g){ot(o,l,g)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){ot(o,l,g)}else u.current=null}function IS(o){var l=o.type,u=o.memoizedProps,d=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(g){ot(o,o.return,g)}}function DS(o,l,u){try{var d=o.stateNode;lN(d,o.type,u,l),d[Rn]=l}catch(g){ot(o,o.return,g)}}function BS(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27||o.tag===4}function rm(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||BS(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==27&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function sm(o,l,u){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?u.nodeType===8?u.parentNode.insertBefore(o,l):u.insertBefore(o,l):(u.nodeType===8?(l=u.parentNode,l.insertBefore(o,u)):(l=u,l.appendChild(o)),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=kf));else if(d!==4&&d!==27&&(o=o.child,o!==null))for(sm(o,l,u),o=o.sibling;o!==null;)sm(o,l,u),o=o.sibling}function vf(o,l,u){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?u.insertBefore(o,l):u.appendChild(o);else if(d!==4&&d!==27&&(o=o.child,o!==null))for(vf(o,l,u),o=o.sibling;o!==null;)vf(o,l,u),o=o.sibling}var pr=!1,wt=!1,om=!1,LS=typeof WeakSet=="function"?WeakSet:Set,Qt=null,US=!1;function UP(o,l){if(o=o.containerInfo,Im=zf,o=tT(o),lg(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var g=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var E=0,k=-1,F=-1,q=0,le=0,he=o,ee=null;t:for(;;){for(var ae;he!==u||g!==0&&he.nodeType!==3||(k=E+g),he!==_||d!==0&&he.nodeType!==3||(F=E+d),he.nodeType===3&&(E+=he.nodeValue.length),(ae=he.firstChild)!==null;)ee=he,he=ae;for(;;){if(he===o)break t;if(ee===u&&++q===g&&(k=E),ee===_&&++le===d&&(F=E),(ae=he.nextSibling)!==null)break;he=ee,ee=he.parentNode}he=ae}u=k===-1||F===-1?null:{start:k,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Dm={focusedElem:o,selectionRange:u},zf=!1,Qt=l;Qt!==null;)if(l=Qt,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Qt=o;else for(;Qt!==null;){switch(l=Qt,_=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if(o&1024&&_!==null){o=void 0,u=l,g=_.memoizedProps,_=_.memoizedState,d=u.stateNode;try{var Te=$s(u.type,g,u.elementType===u.type);o=d.getSnapshotBeforeUpdate(Te,_),d.__reactInternalSnapshotBeforeUpdate=o}catch(Me){ot(u,u.return,Me)}}break;case 3:if(o&1024){if(o=l.stateNode.containerInfo,u=o.nodeType,u===9)Fm(o);else if(u===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Fm(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(o&1024)throw Error(i(163))}if(o=l.sibling,o!==null){o.return=l.return,Qt=o;break}Qt=l.return}return Te=US,US=!1,Te}function FS(o,l,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:mr(o,u),d&4&&Kl(5,u);break;case 1:if(mr(o,u),d&4)if(o=u.stateNode,l===null)try{o.componentDidMount()}catch(k){ot(u,u.return,k)}else{var g=$s(u.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(g,l,o.__reactInternalSnapshotBeforeUpdate)}catch(k){ot(u,u.return,k)}}d&64&&NS(u),d&512&&Ws(u,u.return);break;case 3:if(mr(o,u),d&64&&(d=u.updateQueue,d!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{PS(d,o)}catch(k){ot(u,u.return,k)}}break;case 26:mr(o,u),d&512&&Ws(u,u.return);break;case 27:case 5:mr(o,u),l===null&&d&4&&IS(u),d&512&&Ws(u,u.return);break;case 12:mr(o,u);break;case 13:mr(o,u),d&4&&$S(o,u);break;case 22:if(g=u.memoizedState!==null||pr,!g){l=l!==null&&l.memoizedState!==null||wt;var _=pr,E=wt;pr=g,(wt=l)&&!E?Qr(o,u,(u.subtreeFlags&8772)!==0):mr(o,u),pr=_,wt=E}d&512&&(u.memoizedProps.mode==="manual"?Ws(u,u.return):Ln(u,u.return));break;default:mr(o,u)}}function zS(o){var l=o.alternate;l!==null&&(o.alternate=null,zS(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Xp(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ft=null,Un=!1;function gr(o,l,u){for(u=u.child;u!==null;)VS(o,l,u),u=u.sibling}function VS(o,l,u){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Dn,u)}catch{}switch(u.tag){case 26:wt||Ln(u,l),gr(o,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:wt||Ln(u,l);var d=Ft,g=Un;for(Ft=u.stateNode,gr(o,l,u),u=u.stateNode,l=u.attributes;l.length;)u.removeAttributeNode(l[0]);Xp(u),Ft=d,Un=g;break;case 5:wt||Ln(u,l);case 6:g=Ft;var _=Un;if(Ft=null,gr(o,l,u),Ft=g,Un=_,Ft!==null)if(Un)try{o=Ft,d=u.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)}catch(E){ot(u,l,E)}else try{Ft.removeChild(u.stateNode)}catch(E){ot(u,l,E)}break;case 18:Ft!==null&&(Un?(l=Ft,u=u.stateNode,l.nodeType===8?Um(l.parentNode,u):l.nodeType===1&&Um(l,u),dc(l)):Um(Ft,u.stateNode));break;case 4:d=Ft,g=Un,Ft=u.stateNode.containerInfo,Un=!0,gr(o,l,u),Ft=d,Un=g;break;case 0:case 11:case 14:case 15:wt||Zr(2,u,l),wt||Zr(4,u,l),gr(o,l,u);break;case 1:wt||(Ln(u,l),d=u.stateNode,typeof d.componentWillUnmount=="function"&&kS(u,l,d)),gr(o,l,u);break;case 21:gr(o,l,u);break;case 22:wt||Ln(u,l),wt=(d=wt)||u.memoizedState!==null,gr(o,l,u),wt=d;break;default:gr(o,l,u)}}function $S(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{dc(o)}catch(u){ot(l,l.return,u)}}function FP(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new LS),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new LS),l;default:throw Error(i(435,o.tag))}}function am(o,l){var u=FP(o);l.forEach(function(d){var g=GP.bind(null,o,d);u.has(d)||(u.add(d),d.then(g,g))})}function ii(o,l){var u=l.deletions;if(u!==null)for(var d=0;d<u.length;d++){var g=u[d],_=o,E=l,k=E;e:for(;k!==null;){switch(k.tag){case 27:case 5:Ft=k.stateNode,Un=!1;break e;case 3:Ft=k.stateNode.containerInfo,Un=!0;break e;case 4:Ft=k.stateNode.containerInfo,Un=!0;break e}k=k.return}if(Ft===null)throw Error(i(160));VS(_,E,g),Ft=null,Un=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)jS(l,o),l=l.sibling}var vi=null;function jS(o,l){var u=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ii(l,o),ri(o),d&4&&(Zr(3,o,o.return),Kl(3,o),Zr(5,o,o.return));break;case 1:ii(l,o),ri(o),d&512&&(wt||u===null||Ln(u,u.return)),d&64&&pr&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(u=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var g=vi;if(ii(l,o),ri(o),d&512&&(wt||u===null||Ln(u,u.return)),d&4){var _=u!==null?u.memoizedState:null;if(d=o.memoizedState,u===null)if(d===null)if(o.stateNode===null){e:{d=o.type,u=o.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":_=g.getElementsByTagName("title")[0],(!_||_[Tl]||_[hn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(d),g.head.insertBefore(_,g.querySelector("head > title"))),on(_,d,u),_[hn]=o,Kt(_),d=_;break e;case"link":var E=I1("link","href",g).get(d+(u.href||""));if(E){for(var k=0;k<E.length;k++)if(_=E[k],_.getAttribute("href")===(u.href==null?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){E.splice(k,1);break t}}_=g.createElement(d),on(_,d,u),g.head.appendChild(_);break;case"meta":if(E=I1("meta","content",g).get(d+(u.content||""))){for(k=0;k<E.length;k++)if(_=E[k],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){E.splice(k,1);break t}}_=g.createElement(d),on(_,d,u),g.head.appendChild(_);break;default:throw Error(i(468,d))}_[hn]=o,Kt(_),d=_}o.stateNode=d}else D1(g,o.type,o.stateNode);else o.stateNode=k1(g,d,o.memoizedProps);else _!==d?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,d===null?D1(g,o.type,o.stateNode):k1(g,d,o.memoizedProps)):d===null&&o.stateNode!==null&&DS(o,o.memoizedProps,u.memoizedProps)}break;case 27:if(d&4&&o.alternate===null){g=o.stateNode,_=o.memoizedProps;try{for(var F=g.firstChild;F;){var q=F.nextSibling,le=F.nodeName;F[Tl]||le==="HEAD"||le==="BODY"||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&F.rel.toLowerCase()==="stylesheet"||g.removeChild(F),F=q}for(var he=o.type,ee=g.attributes;ee.length;)g.removeAttributeNode(ee[0]);on(g,he,_),g[hn]=o,g[Rn]=_}catch(Te){ot(o,o.return,Te)}}case 5:if(ii(l,o),ri(o),d&512&&(wt||u===null||Ln(u,u.return)),o.flags&32){g=o.stateNode;try{Vo(g,"")}catch(Te){ot(o,o.return,Te)}}d&4&&o.stateNode!=null&&(g=o.memoizedProps,DS(o,g,u!==null?u.memoizedProps:g)),d&1024&&(om=!0);break;case 6:if(ii(l,o),ri(o),d&4){if(o.stateNode===null)throw Error(i(162));d=o.memoizedProps,u=o.stateNode;try{u.nodeValue=d}catch(Te){ot(o,o.return,Te)}}break;case 3:if(Lf=null,g=vi,vi=Df(l.containerInfo),ii(l,o),vi=g,ri(o),d&4&&u!==null&&u.memoizedState.isDehydrated)try{dc(l.containerInfo)}catch(Te){ot(o,o.return,Te)}om&&(om=!1,HS(o));break;case 4:d=vi,vi=Df(o.stateNode.containerInfo),ii(l,o),ri(o),vi=d;break;case 12:ii(l,o),ri(o);break;case 13:ii(l,o),ri(o),o.child.flags&8192&&o.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(mm=Wt()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,am(o,d)));break;case 22:if(d&512&&(wt||u===null||Ln(u,u.return)),F=o.memoizedState!==null,q=u!==null&&u.memoizedState!==null,le=pr,he=wt,pr=le||F,wt=he||q,ii(l,o),wt=he,pr=le,ri(o),l=o.stateNode,l._current=o,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,d&8192&&(l._visibility=F?l._visibility&-2:l._visibility|1,F&&(l=pr||wt,u===null||q||l||ra(o)),o.memoizedProps===null||o.memoizedProps.mode!=="manual"))e:for(u=null,l=o;;){if(l.tag===5||l.tag===26||l.tag===27){if(u===null){q=u=l;try{if(g=q.stateNode,F)_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=q.stateNode,k=q.memoizedProps.style;var ae=k!=null&&k.hasOwnProperty("display")?k.display:null;E.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Te){ot(q,q.return,Te)}}}else if(l.tag===6){if(u===null){q=l;try{q.stateNode.nodeValue=F?"":q.memoizedProps}catch(Te){ot(q,q.return,Te)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=o.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,am(o,u))));break;case 19:ii(l,o),ri(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,am(o,d)));break;case 21:break;default:ii(l,o),ri(o)}}function ri(o){var l=o.flags;if(l&2){try{if(o.tag!==27){e:{for(var u=o.return;u!==null;){if(BS(u)){var d=u;break e}u=u.return}throw Error(i(160))}switch(d.tag){case 27:var g=d.stateNode,_=rm(o);vf(o,_,g);break;case 5:var E=d.stateNode;d.flags&32&&(Vo(E,""),d.flags&=-33);var k=rm(o);vf(o,k,E);break;case 3:case 4:var F=d.stateNode.containerInfo,q=rm(o);sm(o,q,F);break;default:throw Error(i(161))}}}catch(le){ot(o,o.return,le)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function HS(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;HS(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function mr(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)FS(o,l.alternate,l),l=l.sibling}function ra(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Zr(4,l,l.return),ra(l);break;case 1:Ln(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&kS(l,l.return,u),ra(l);break;case 26:case 27:case 5:Ln(l,l.return),ra(l);break;case 22:Ln(l,l.return),l.memoizedState===null&&ra(l);break;default:ra(l)}o=o.sibling}}function Qr(o,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,g=o,_=l,E=_.flags;switch(_.tag){case 0:case 11:case 15:Qr(g,_,u),Kl(4,_);break;case 1:if(Qr(g,_,u),d=_,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(q){ot(d,d.return,q)}if(d=_,g=d.updateQueue,g!==null){var k=d.stateNode;try{var F=g.shared.hiddenCallbacks;if(F!==null)for(g.shared.hiddenCallbacks=null,g=0;g<F.length;g++)MS(F[g],k)}catch(q){ot(d,d.return,q)}}u&&E&64&&NS(_),Ws(_,_.return);break;case 26:case 27:case 5:Qr(g,_,u),u&&d===null&&E&4&&IS(_),Ws(_,_.return);break;case 12:Qr(g,_,u);break;case 13:Qr(g,_,u),u&&E&4&&$S(g,_);break;case 22:_.memoizedState===null&&Qr(g,_,u),Ws(_,_.return);break;default:Qr(g,_,u)}l=l.sibling}}function lm(o,l){var u=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==u&&(o!=null&&o.refCount++,u!=null&&Fl(u))}function cm(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Fl(o))}function Gr(o,l,u,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)WS(o,l,u,d),l=l.sibling}function WS(o,l,u,d){var g=l.flags;switch(l.tag){case 0:case 11:case 15:Gr(o,l,u,d),g&2048&&Kl(9,l);break;case 3:Gr(o,l,u,d),g&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Fl(o)));break;case 12:if(g&2048){Gr(o,l,u,d),o=l.stateNode;try{var _=l.memoizedProps,E=_.id,k=_.onPostCommit;typeof k=="function"&&k(E,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){ot(l,l.return,F)}}else Gr(o,l,u,d);break;case 23:break;case 22:_=l.stateNode,l.memoizedState!==null?_._visibility&4?Gr(o,l,u,d):Zl(o,l):_._visibility&4?Gr(o,l,u,d):(_._visibility|=4,sa(o,l,u,d,(l.subtreeFlags&10256)!==0)),g&2048&&lm(l.alternate,l);break;case 24:Gr(o,l,u,d),g&2048&&cm(l.alternate,l);break;default:Gr(o,l,u,d)}}function sa(o,l,u,d,g){for(g=g&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var _=o,E=l,k=u,F=d,q=E.flags;switch(E.tag){case 0:case 11:case 15:sa(_,E,k,F,g),Kl(8,E);break;case 23:break;case 22:var le=E.stateNode;E.memoizedState!==null?le._visibility&4?sa(_,E,k,F,g):Zl(_,E):(le._visibility|=4,sa(_,E,k,F,g)),g&&q&2048&&lm(E.alternate,E);break;case 24:sa(_,E,k,F,g),g&&q&2048&&cm(E.alternate,E);break;default:sa(_,E,k,F,g)}l=l.sibling}}function Zl(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=o,d=l,g=d.flags;switch(d.tag){case 22:Zl(u,d),g&2048&&lm(d.alternate,d);break;case 24:Zl(u,d),g&2048&&cm(d.alternate,d);break;default:Zl(u,d)}l=l.sibling}}var Ql=8192;function oa(o){if(o.subtreeFlags&Ql)for(o=o.child;o!==null;)XS(o),o=o.sibling}function XS(o){switch(o.tag){case 26:oa(o),o.flags&Ql&&o.memoizedState!==null&&RN(vi,o.memoizedState,o.memoizedProps);break;case 5:oa(o);break;case 3:case 4:var l=vi;vi=Df(o.stateNode.containerInfo),oa(o),vi=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=Ql,Ql=16777216,oa(o),Ql=l):oa(o));break;default:oa(o)}}function qS(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Gl(o){var l=o.deletions;if(o.flags&16){if(l!==null)for(var u=0;u<l.length;u++){var d=l[u];Qt=d,KS(d,o)}qS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)YS(o),o=o.sibling}function YS(o){switch(o.tag){case 0:case 11:case 15:Gl(o),o.flags&2048&&Zr(9,o,o.return);break;case 3:Gl(o);break;case 12:Gl(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&4&&(o.return===null||o.return.tag!==13)?(l._visibility&=-5,Tf(o)):Gl(o);break;default:Gl(o)}}function Tf(o){var l=o.deletions;if(o.flags&16){if(l!==null)for(var u=0;u<l.length;u++){var d=l[u];Qt=d,KS(d,o)}qS(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Zr(8,l,l.return),Tf(l);break;case 22:u=l.stateNode,u._visibility&4&&(u._visibility&=-5,Tf(l));break;default:Tf(l)}o=o.sibling}}function KS(o,l){for(;Qt!==null;){var u=Qt;switch(u.tag){case 0:case 11:case 15:Zr(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Fl(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,Qt=d;else e:for(u=o;Qt!==null;){d=Qt;var g=d.sibling,_=d.return;if(zS(d),d===u){Qt=null;break e}if(g!==null){g.return=_,Qt=g;break e}Qt=_}}}function zP(o,l,u,d){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(o,l,u,d){return new zP(o,l,u,d)}function um(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Jr(o,l){var u=o.alternate;return u===null?(u=si(o.tag,l,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=l,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&31457280,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,l=o.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u.refCleanup=o.refCleanup,u}function ZS(o,l){o.flags&=31457282;var u=o.alternate;return u===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,l=u.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Sf(o,l,u,d,g,_){var E=0;if(d=o,typeof o=="function")um(o)&&(E=1);else if(typeof o=="string")E=AN(o,u,Qe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case f:return Xs(u.children,g,_,l);case h:E=8,g|=24;break;case p:return o=si(12,u,l,g|2),o.elementType=p,o.lanes=_,o;case T:return o=si(13,u,l,g),o.elementType=T,o.lanes=_,o;case S:return o=si(19,u,l,g),o.elementType=S,o.lanes=_,o;case A:return QS(u,g,_,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case m:case b:E=10;break e;case y:E=9;break e;case v:E=11;break e;case w:E=14;break e;case C:E=16,d=null;break e}E=29,u=Error(i(130,o===null?"null":typeof o,"")),d=null}return l=si(E,u,l,g),l.elementType=o,l.type=d,l.lanes=_,l}function Xs(o,l,u,d){return o=si(7,o,d,l),o.lanes=u,o}function QS(o,l,u,d){o=si(22,o,d,l),o.elementType=A,o.lanes=u;var g={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=g._current;if(_===null)throw Error(i(456));if(!(g._pendingVisibility&2)){var E=Vr(_,2);E!==null&&(g._pendingVisibility|=2,En(E,_,2))}},attach:function(){var _=g._current;if(_===null)throw Error(i(456));if(g._pendingVisibility&2){var E=Vr(_,2);E!==null&&(g._pendingVisibility&=-3,En(E,_,2))}}};return o.stateNode=g,o}function fm(o,l,u){return o=si(6,o,null,l),o.lanes=u,o}function hm(o,l,u){return l=si(4,o.children!==null?o.children:[],o.key,l),l.lanes=u,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function yr(o){o.flags|=4}function GS(o,l){if(l.type!=="stylesheet"||l.state.loading&4)o.flags&=-16777217;else if(o.flags|=16777216,!B1(l)){if(l=ni.current,l!==null&&((Ve&4194176)===Ve?Bi!==null:(Ve&62914560)!==Ve&&!(Ve&536870912)||l!==Bi))throw Bl=yg,gT;o.flags|=8192}}function Ef(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?xn():536870912,o.lanes|=l,la|=l)}function Jl(o,l){if(!je)switch(o.tailMode){case"hidden":l=o.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Tt(o){var l=o.alternate!==null&&o.alternate.child===o.child,u=0,d=0;if(l)for(var g=o.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags&31457280,d|=g.flags&31457280,g.return=o,g=g.sibling;else for(g=o.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=o,g=g.sibling;return o.subtreeFlags|=d,o.childLanes=u,l}function VP(o,l,u){var d=l.pendingProps;switch(gg(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(l),null;case 1:return Tt(l),null;case 3:return u=l.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),dr(qt),xe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(o===null||o.child===null)&&(Nl(l)?yr(l):o===null||o.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,bi!==null&&(vm(bi),bi=null))),Tt(l),null;case 26:return u=l.memoizedState,o===null?(yr(l),u!==null?(Tt(l),GS(l,u)):(Tt(l),l.flags&=-16777217)):u?u!==o.memoizedState?(yr(l),Tt(l),GS(l,u)):(Tt(l),l.flags&=-16777217):(o.memoizedProps!==d&&yr(l),Tt(l),l.flags&=-16777217),null;case 27:vt(l),u=bt.current;var g=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==d&&yr(l);else{if(!d){if(l.stateNode===null)throw Error(i(166));return Tt(l),null}o=Qe.current,Nl(l)?dT(l):(o=C1(g,d,u),l.stateNode=o,yr(l))}return Tt(l),null;case 5:if(vt(l),u=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&yr(l);else{if(!d){if(l.stateNode===null)throw Error(i(166));return Tt(l),null}if(o=Qe.current,Nl(l))dT(l);else{switch(g=If(bt.current),o){case 1:o=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:o=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":o=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":o=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":o=g.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?g.createElement(u,{is:d.is}):g.createElement(u)}}o[hn]=l,o[Rn]=d;e:for(g=l.child;g!==null;){if(g.tag===5||g.tag===6)o.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break e;for(;g.sibling===null;){if(g.return===null||g.return===l)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}l.stateNode=o;e:switch(on(o,u,d),u){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&yr(l)}}return Tt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==d&&yr(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(i(166));if(o=bt.current,Nl(l)){if(o=l.stateNode,u=l.memoizedProps,d=null,g=Sn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}o[hn]=l,o=!!(o.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||S1(o.nodeValue,u)),o||Bs(l)}else o=If(o).createTextNode(d),o[hn]=l,l.stateNode=o}return Tt(l),null;case 13:if(d=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(g=Nl(l),d!==null&&d.dehydrated!==null){if(o===null){if(!g)throw Error(i(318));if(g=l.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[hn]=l}else kl(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;Tt(l),g=!1}else bi!==null&&(vm(bi),bi=null),g=!0;if(!g)return l.flags&256?(cr(l),l):(cr(l),null)}if(cr(l),l.flags&128)return l.lanes=u,l;if(u=d!==null,o=o!==null&&o.memoizedState!==null,u){d=l.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var _=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==g&&(d.flags|=2048)}return u!==o&&u&&(l.child.flags|=8192),Ef(l,l.updateQueue),Tt(l),null;case 4:return xe(),o===null&&Pm(l.stateNode.containerInfo),Tt(l),null;case 10:return dr(l.type),Tt(l),null;case 19:if(Re(Xt),g=l.memoizedState,g===null)return Tt(l),null;if(d=(l.flags&128)!==0,_=g.rendering,_===null)if(d)Jl(g,!1);else{if(At!==0||o!==null&&o.flags&128)for(o=l.child;o!==null;){if(_=of(o),_!==null){for(l.flags|=128,Jl(g,!1),o=_.updateQueue,l.updateQueue=o,Ef(l,o),l.subtreeFlags=0,o=u,u=l.child;u!==null;)ZS(u,o),u=u.sibling;return ve(Xt,Xt.current&1|2),l.child}o=o.sibling}g.tail!==null&&Wt()>wf&&(l.flags|=128,d=!0,Jl(g,!1),l.lanes=4194304)}else{if(!d)if(o=of(_),o!==null){if(l.flags|=128,d=!0,o=o.updateQueue,l.updateQueue=o,Ef(l,o),Jl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!je)return Tt(l),null}else 2*Wt()-g.renderingStartTime>wf&&u!==536870912&&(l.flags|=128,d=!0,Jl(g,!1),l.lanes=4194304);g.isBackwards?(_.sibling=l.child,l.child=_):(o=g.last,o!==null?o.sibling=_:l.child=_,g.last=_)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Wt(),l.sibling=null,o=Xt.current,ve(Xt,d?o&1|2:o&1),l):(Tt(l),null);case 22:case 23:return cr(l),bg(),d=l.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?u&536870912&&!(l.flags&128)&&(Tt(l),l.subtreeFlags&6&&(l.flags|=8192)):Tt(l),u=l.updateQueue,u!==null&&Ef(l,u.retryQueue),u=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==u&&(l.flags|=2048),o!==null&&Re(Us),null;case 24:return u=null,o!==null&&(u=o.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),dr(qt),Tt(l),null;case 25:return null}throw Error(i(156,l.tag))}function $P(o,l){switch(gg(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return dr(qt),xe(),o=l.flags,o&65536&&!(o&128)?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return vt(l),null;case 13:if(cr(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(i(340));kl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Re(Xt),null;case 4:return xe(),null;case 10:return dr(l.type),null;case 22:case 23:return cr(l),bg(),o!==null&&Re(Us),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return dr(qt),null;case 25:return null;default:return null}}function JS(o,l){switch(gg(l),l.tag){case 3:dr(qt),xe();break;case 26:case 27:case 5:vt(l);break;case 4:xe();break;case 13:cr(l);break;case 19:Re(Xt);break;case 10:dr(l.type);break;case 22:case 23:cr(l),bg(),o!==null&&Re(Us);break;case 24:dr(qt)}}var jP={getCacheForType:function(o){var l=dn(qt),u=l.data.get(o);return u===void 0&&(u=o(),l.data.set(o,u)),u}},HP=typeof WeakMap=="function"?WeakMap:Map,St=0,ft=null,Le=null,Ve=0,ht=0,Fn=null,_r=!1,aa=!1,dm=!1,br=0,At=0,es=0,qs=0,pm=0,oi=0,la=0,ec=null,Ui=null,gm=!1,mm=0,wf=1/0,Af=null,ts=null,xf=!1,Ys=null,tc=0,ym=0,_m=null,nc=0,bm=null;function zn(){if(St&2&&Ve!==0)return Ve&-Ve;if(V.T!==null){var o=Jo;return o!==0?o:Rm()}return vv()}function e1(){oi===0&&(oi=!(Ve&536870912)||je?Ne():536870912);var o=ni.current;return o!==null&&(o.flags|=32),oi}function En(o,l,u){(o===ft&&ht===2||o.cancelPendingCommit!==null)&&(ca(o,0),vr(o,Ve,oi,!1)),vl(o,u),(!(St&2)||o!==ft)&&(o===ft&&(!(St&2)&&(qs|=u),At===4&&vr(o,Ve,oi,!1)),Fi(o))}function t1(o,l,u){if(St&6)throw Error(i(327));var d=!u&&(l&60)===0&&(l&o.expiredLanes)===0||Cs(o,l),g=d?qP(o,l):Em(o,l,!0),_=d;do{if(g===0){aa&&!d&&vr(o,l,0,!1);break}else if(g===6)vr(o,l,0,!_r);else{if(u=o.current.alternate,_&&!WP(u)){g=Em(o,l,!1),_=!1;continue}if(g===2){if(_=l,o.errorRecoveryDisabledLanes&_)var E=0;else E=o.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){l=E;e:{var k=o;g=ec;var F=k.current.memoizedState.isDehydrated;if(F&&(ca(k,E).flags|=256),E=Em(k,E,!1),E!==2){if(dm&&!F){k.errorRecoveryDisabledLanes|=_,qs|=_,g=4;break e}_=Ui,Ui=g,_!==null&&vm(_)}g=E}if(_=!1,g!==2)continue}}if(g===1){ca(o,0),vr(o,l,0,!0);break}e:{switch(d=o,g){case 0:case 1:throw Error(i(345));case 4:if((l&4194176)===l){vr(d,l,oi,!_r);break e}break;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(i(329))}if(d.finishedWork=u,d.finishedLanes=l,(l&62914560)===l&&(_=mm+300-Wt(),10<_)){if(vr(d,l,oi,!_r),Io(d,0)!==0)break e;d.timeoutHandle=A1(n1.bind(null,d,u,Ui,Af,gm,l,oi,qs,la,_r,2,-0,0),_);break e}n1(d,u,Ui,Af,gm,l,oi,qs,la,_r,0,-0,0)}}break}while(!0);Fi(o)}function vm(o){Ui===null?Ui=o:Ui.push.apply(Ui,o)}function n1(o,l,u,d,g,_,E,k,F,q,le,he,ee){var ae=l.subtreeFlags;if((ae&8192||(ae&16785408)===16785408)&&(lc={stylesheets:null,count:0,unsuspend:xN},XS(l),l=CN(),l!==null)){o.cancelPendingCommit=l(c1.bind(null,o,u,d,g,E,k,F,1,he,ee)),vr(o,_,E,!q);return}c1(o,u,d,g,E,k,F,le,he,ee)}function WP(o){for(var l=o;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var g=u[d],_=g.getSnapshot;g=g.value;try{if(!Bn(_(),g))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function vr(o,l,u,d){l&=~pm,l&=~qs,o.suspendedLanes|=l,o.pingedLanes&=~l,d&&(o.warmLanes|=l),d=o.expirationTimes;for(var g=l;0<g;){var _=31-Tn(g),E=1<<_;d[_]=-1,g&=~E}u!==0&&yv(o,u,l)}function Rf(){return St&6?!0:(ic(0),!1)}function Tm(){if(Le!==null){if(ht===0)var o=Le.return;else o=Le,hr=js=null,Rg(o),Qo=null,Ll=0,o=Le;for(;o!==null;)JS(o.alternate,o),o=o.return;Le=null}}function ca(o,l){o.finishedWork=null,o.finishedLanes=0;var u=o.timeoutHandle;u!==-1&&(o.timeoutHandle=-1,uN(u)),u=o.cancelPendingCommit,u!==null&&(o.cancelPendingCommit=null,u()),Tm(),ft=o,Le=u=Jr(o.current,null),Ve=l,ht=0,Fn=null,_r=!1,aa=Cs(o,l),dm=!1,la=oi=pm=qs=es=At=0,Ui=ec=null,gm=!1,l&8&&(l|=l&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=l;0<d;){var g=31-Tn(d),_=1<<g;l|=o[g],d&=~_}return br=l,Zu(),u}function i1(o,l){De=null,V.H=Li,l===Dl?(l=_T(),ht=3):l===gT?(l=_T(),ht=4):ht=l===mS?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Fn=l,Le===null&&(At=1,yf(o,Jn(l,o.current)))}function r1(){var o=V.H;return V.H=Li,o===null?Li:o}function s1(){var o=V.A;return V.A=jP,o}function Sm(){At=4,_r||(Ve&4194176)!==Ve&&ni.current!==null||(aa=!0),!(es&134217727)&&!(qs&134217727)||ft===null||vr(ft,Ve,oi,!1)}function Em(o,l,u){var d=St;St|=2;var g=r1(),_=s1();(ft!==o||Ve!==l)&&(Af=null,ca(o,l)),l=!1;var E=At;e:do try{if(ht!==0&&Le!==null){var k=Le,F=Fn;switch(ht){case 8:Tm(),E=6;break e;case 3:case 2:case 6:ni.current===null&&(l=!0);var q=ht;if(ht=0,Fn=null,ua(o,k,F,q),u&&aa){E=0;break e}break;default:q=ht,ht=0,Fn=null,ua(o,k,F,q)}}XP(),E=At;break}catch(le){i1(o,le)}while(!0);return l&&o.shellSuspendCounter++,hr=js=null,St=d,V.H=g,V.A=_,Le===null&&(ft=null,Ve=0,Zu()),E}function XP(){for(;Le!==null;)o1(Le)}function qP(o,l){var u=St;St|=2;var d=r1(),g=s1();ft!==o||Ve!==l?(Af=null,wf=Wt()+500,ca(o,l)):aa=Cs(o,l);e:do try{if(ht!==0&&Le!==null){l=Le;var _=Fn;t:switch(ht){case 1:ht=0,Fn=null,ua(o,l,_,1);break;case 2:if(mT(_)){ht=0,Fn=null,a1(l);break}l=function(){ht===2&&ft===o&&(ht=7),Fi(o)},_.then(l,l);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:mT(_)?(ht=0,Fn=null,a1(l)):(ht=0,Fn=null,ua(o,l,_,7));break;case 5:var E=null;switch(Le.tag){case 26:E=Le.memoizedState;case 5:case 27:var k=Le;if(!E||B1(E)){ht=0,Fn=null;var F=k.sibling;if(F!==null)Le=F;else{var q=k.return;q!==null?(Le=q,Cf(q)):Le=null}break t}}ht=0,Fn=null,ua(o,l,_,5);break;case 6:ht=0,Fn=null,ua(o,l,_,6);break;case 8:Tm(),At=6;break e;default:throw Error(i(462))}}YP();break}catch(le){i1(o,le)}while(!0);return hr=js=null,V.H=d,V.A=g,St=u,Le!==null?0:(ft=null,Ve=0,Zu(),At)}function YP(){for(;Le!==null&&!we();)o1(Le)}function o1(o){var l=CS(o.alternate,o,br);o.memoizedProps=o.pendingProps,l===null?Cf(o):Le=l}function a1(o){var l=o,u=l.alternate;switch(l.tag){case 15:case 0:l=SS(u,l,l.pendingProps,l.type,void 0,Ve);break;case 11:l=SS(u,l,l.pendingProps,l.type.render,l.ref,Ve);break;case 5:Rg(l);default:JS(u,l),l=Le=ZS(l,br),l=CS(u,l,br)}o.memoizedProps=o.pendingProps,l===null?Cf(o):Le=l}function ua(o,l,u,d){hr=js=null,Rg(l),Qo=null,Ll=0;var g=l.return;try{if(BP(o,g,l,u,Ve)){At=1,yf(o,Jn(u,o.current)),Le=null;return}}catch(_){if(g!==null)throw Le=g,_;At=1,yf(o,Jn(u,o.current)),Le=null;return}l.flags&32768?(je||d===1?o=!0:aa||Ve&536870912?o=!1:(_r=o=!0,(d===2||d===3||d===6)&&(d=ni.current,d!==null&&d.tag===13&&(d.flags|=16384))),l1(l,o)):Cf(l)}function Cf(o){var l=o;do{if(l.flags&32768){l1(l,_r);return}o=l.return;var u=VP(l.alternate,l,br);if(u!==null){Le=u;return}if(l=l.sibling,l!==null){Le=l;return}Le=l=o}while(l!==null);At===0&&(At=5)}function l1(o,l){do{var u=$P(o.alternate,o);if(u!==null){u.flags&=32767,Le=u;return}if(u=o.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(o=o.sibling,o!==null)){Le=o;return}Le=o=u}while(o!==null);At=6,Le=null}function c1(o,l,u,d,g,_,E,k,F,q){var le=V.T,he=re.p;try{re.p=2,V.T=null,KP(o,l,u,d,he,g,_,E,k,F,q)}finally{V.T=le,re.p=he}}function KP(o,l,u,d,g,_,E,k){do fa();while(Ys!==null);if(St&6)throw Error(i(327));var F=o.finishedWork;if(d=o.finishedLanes,F===null)return null;if(o.finishedWork=null,o.finishedLanes=0,F===o.current)throw Error(i(177));o.callbackNode=null,o.callbackPriority=0,o.cancelPendingCommit=null;var q=F.lanes|F.childLanes;if(q|=hg,RM(o,d,q,_,E,k),o===ft&&(Le=ft=null,Ve=0),!(F.subtreeFlags&10256)&&!(F.flags&10256)||xf||(xf=!0,ym=q,_m=u,JP(mt,function(){return fa(),null})),u=(F.flags&15990)!==0,F.subtreeFlags&15990||u?(u=V.T,V.T=null,_=re.p,re.p=2,E=St,St|=4,UP(o,F),jS(F,o),bP(Dm,o.containerInfo),zf=!!Im,Dm=Im=null,o.current=F,FS(o,F.alternate,F),ki(),St=E,re.p=_,V.T=u):o.current=F,xf?(xf=!1,Ys=o,tc=d):u1(o,q),q=o.pendingLanes,q===0&&(ts=null),Vp(F.stateNode),Fi(o),l!==null)for(g=o.onRecoverableError,F=0;F<l.length;F++)q=l[F],g(q.value,{componentStack:q.stack});return tc&3&&fa(),q=o.pendingLanes,d&4194218&&q&42?o===bm?nc++:(nc=0,bm=o):nc=0,ic(0),null}function u1(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Fl(l)))}function fa(){if(Ys!==null){var o=Ys,l=ym;ym=0;var u=bv(tc),d=V.T,g=re.p;try{if(re.p=32>u?32:u,V.T=null,Ys===null)var _=!1;else{u=_m,_m=null;var E=Ys,k=tc;if(Ys=null,tc=0,St&6)throw Error(i(331));var F=St;if(St|=4,YS(E.current),WS(E,E.current,k,u),St=F,ic(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Dn,E)}catch{}_=!0}return _}finally{re.p=g,V.T=d,u1(o,l)}}return!1}function f1(o,l,u){l=Jn(u,l),l=Vg(o.stateNode,l,2),o=Kr(o,l,2),o!==null&&(vl(o,2),Fi(o))}function ot(o,l,u){if(o.tag===3)f1(o,o,u);else for(;l!==null;){if(l.tag===3){f1(l,o,u);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ts===null||!ts.has(d))){o=Jn(u,o),u=pS(2),d=Kr(l,u,2),d!==null&&(gS(u,d,l,o),vl(d,2),Fi(d));break}}l=l.return}}function wm(o,l,u){var d=o.pingCache;if(d===null){d=o.pingCache=new HP;var g=new Set;d.set(l,g)}else g=d.get(l),g===void 0&&(g=new Set,d.set(l,g));g.has(u)||(dm=!0,g.add(u),o=ZP.bind(null,o,l,u),l.then(o,o))}function ZP(o,l,u){var d=o.pingCache;d!==null&&d.delete(l),o.pingedLanes|=o.suspendedLanes&u,o.warmLanes&=~u,ft===o&&(Ve&u)===u&&(At===4||At===3&&(Ve&62914560)===Ve&&300>Wt()-mm?!(St&2)&&ca(o,0):pm|=u,la===Ve&&(la=0)),Fi(o)}function h1(o,l){l===0&&(l=xn()),o=Vr(o,l),o!==null&&(vl(o,l),Fi(o))}function QP(o){var l=o.memoizedState,u=0;l!==null&&(u=l.retryLane),h1(o,u)}function GP(o,l){var u=0;switch(o.tag){case 13:var d=o.stateNode,g=o.memoizedState;g!==null&&(u=g.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(l),h1(o,u)}function JP(o,l){return Ht(o,l)}var Of=null,ha=null,Am=!1,Mf=!1,xm=!1,Ks=0;function Fi(o){o!==ha&&o.next===null&&(ha===null?Of=ha=o:ha=ha.next=o),Mf=!0,Am||(Am=!0,tN(eN))}function ic(o,l){if(!xm&&Mf){xm=!0;do for(var u=!1,d=Of;d!==null;){if(o!==0){var g=d.pendingLanes;if(g===0)var _=0;else{var E=d.suspendedLanes,k=d.pingedLanes;_=(1<<31-Tn(42|o)+1)-1,_&=g&~(E&~k),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(u=!0,g1(d,_))}else _=Ve,_=Io(d,d===ft?_:0),!(_&3)||Cs(d,_)||(u=!0,g1(d,_));d=d.next}while(u);xm=!1}}function eN(){Mf=Am=!1;var o=0;Ks!==0&&(cN()&&(o=Ks),Ks=0);for(var l=Wt(),u=null,d=Of;d!==null;){var g=d.next,_=d1(d,l);_===0?(d.next=null,u===null?Of=g:u.next=g,g===null&&(ha=u)):(u=d,(o!==0||_&3)&&(Mf=!0)),d=g}ic(o)}function d1(o,l){for(var u=o.suspendedLanes,d=o.pingedLanes,g=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var E=31-Tn(_),k=1<<E,F=g[E];F===-1?(!(k&u)||k&d)&&(g[E]=Hp(k,l)):F<=l&&(o.expiredLanes|=k),_&=~k}if(l=ft,u=Ve,u=Io(o,o===l?u:0),d=o.callbackNode,u===0||o===l&&ht===2||o.cancelPendingCommit!==null)return d!==null&&d!==null&&fn(d),o.callbackNode=null,o.callbackPriority=0;if(!(u&3)||Cs(o,u)){if(l=u&-u,l===o.callbackPriority)return l;switch(d!==null&&fn(d),bv(u)){case 2:case 8:u=dt;break;case 32:u=mt;break;case 268435456:u=Yn;break;default:u=mt}return d=p1.bind(null,o),u=Ht(u,d),o.callbackPriority=l,o.callbackNode=u,l}return d!==null&&d!==null&&fn(d),o.callbackPriority=2,o.callbackNode=null,2}function p1(o,l){var u=o.callbackNode;if(fa()&&o.callbackNode!==u)return null;var d=Ve;return d=Io(o,o===ft?d:0),d===0?null:(t1(o,d,l),d1(o,Wt()),o.callbackNode!=null&&o.callbackNode===u?p1.bind(null,o):null)}function g1(o,l){if(fa())return null;t1(o,l,!0)}function tN(o){fN(function(){St&6?Ht(Ii,o):o()})}function Rm(){return Ks===0&&(Ks=Ne()),Ks}function m1(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ju(""+o)}function y1(o,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,o.id&&u.setAttribute("form",o.id),l.parentNode.insertBefore(u,l),o=new FormData(o),u.parentNode.removeChild(u),o}function nN(o,l,u,d,g){if(l==="submit"&&u&&u.stateNode===g){var _=m1((g[Rn]||null).action),E=d.submitter;E&&(l=(l=E[Rn]||null)?m1(l.formAction):E.getAttribute("formAction"),l!==null&&(_=l,E=null));var k=new qu("action","action",null,d,g);o.push({event:k,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ks!==0){var F=E?y1(g,E):new FormData(g);Bg(u,{pending:!0,data:F,method:g.method,action:_},null,F)}}else typeof _=="function"&&(k.preventDefault(),F=E?y1(g,E):new FormData(g),Bg(u,{pending:!0,data:F,method:g.method,action:_},_,F))},currentTarget:g}]})}}for(var Cm=0;Cm<cT.length;Cm++){var Om=cT[Cm],iN=Om.toLowerCase(),rN=Om[0].toUpperCase()+Om.slice(1);_i(iN,"on"+rN)}_i(rT,"onAnimationEnd"),_i(sT,"onAnimationIteration"),_i(oT,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(TP,"onTransitionRun"),_i(SP,"onTransitionStart"),_i(EP,"onTransitionCancel"),_i(aT,"onTransitionEnd"),Fo("onMouseEnter",["mouseout","mouseover"]),Fo("onMouseLeave",["mouseout","mouseover"]),Fo("onPointerEnter",["pointerout","pointerover"]),Fo("onPointerLeave",["pointerout","pointerover"]),Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rc));function _1(o,l){l=(l&4)!==0;for(var u=0;u<o.length;u++){var d=o[u],g=d.event;d=d.listeners;e:{var _=void 0;if(l)for(var E=d.length-1;0<=E;E--){var k=d[E],F=k.instance,q=k.currentTarget;if(k=k.listener,F!==_&&g.isPropagationStopped())break e;_=k,g.currentTarget=q;try{_(g)}catch(le){mf(le)}g.currentTarget=null,_=F}else for(E=0;E<d.length;E++){if(k=d[E],F=k.instance,q=k.currentTarget,k=k.listener,F!==_&&g.isPropagationStopped())break e;_=k,g.currentTarget=q;try{_(g)}catch(le){mf(le)}g.currentTarget=null,_=F}}}}function ze(o,l){var u=l[Wp];u===void 0&&(u=l[Wp]=new Set);var d=o+"__bubble";u.has(d)||(b1(l,o,2,!1),u.add(d))}function Mm(o,l,u){var d=0;l&&(d|=4),b1(u,o,d,l)}var Pf="_reactListening"+Math.random().toString(36).slice(2);function Pm(o){if(!o[Pf]){o[Pf]=!0,Sv.forEach(function(u){u!=="selectionchange"&&(sN.has(u)||Mm(u,!1,o),Mm(u,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Pf]||(l[Pf]=!0,Mm("selectionchange",!1,l))}}function b1(o,l,u,d){switch($1(l)){case 2:var g=PN;break;case 8:g=NN;break;default:g=Hm}u=g.bind(null,l,u,o),g=void 0,!Jp||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(g=!0),d?g!==void 0?o.addEventListener(l,u,{capture:!0,passive:g}):o.addEventListener(l,u,!0):g!==void 0?o.addEventListener(l,u,{passive:g}):o.addEventListener(l,u,!1)}function Nm(o,l,u,d,g){var _=d;if(!(l&1)&&!(l&2)&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var k=d.stateNode.containerInfo;if(k===g||k.nodeType===8&&k.parentNode===g)break;if(E===4)for(E=d.return;E!==null;){var F=E.tag;if((F===3||F===4)&&(F=E.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;E=E.return}for(;k!==null;){if(E=Os(k),E===null)return;if(F=E.tag,F===5||F===6||F===26||F===27){d=_=E;continue e}k=k.parentNode}}d=d.return}Iv(function(){var q=_,le=Qp(u),he=[];e:{var ee=lT.get(o);if(ee!==void 0){var ae=qu,Te=o;switch(o){case"keypress":if(Wu(u)===0)break e;case"keydown":case"keyup":ae=GM;break;case"focusin":Te="focus",ae=ig;break;case"focusout":Te="blur",ae=ig;break;case"beforeblur":case"afterblur":ae=ig;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Lv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=zM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=tP;break;case rT:case sT:case oT:ae=jM;break;case aT:ae=iP;break;case"scroll":case"scrollend":ae=UM;break;case"wheel":ae=sP;break;case"copy":case"cut":case"paste":ae=WM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Fv;break;case"toggle":case"beforetoggle":ae=aP}var Me=(l&4)!==0,xt=!Me&&(o==="scroll"||o==="scrollend"),Z=Me?ee!==null?ee+"Capture":null:ee;Me=[];for(var W=q,J;W!==null;){var ce=W;if(J=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||J===null||Z===null||(ce=El(W,Z),ce!=null&&Me.push(sc(W,ce,J))),xt)break;W=W.return}0<Me.length&&(ee=new ae(ee,Te,null,u,le),he.push({event:ee,listeners:Me}))}}if(!(l&7)){e:{if(ee=o==="mouseover"||o==="pointerover",ae=o==="mouseout"||o==="pointerout",ee&&u!==Zp&&(Te=u.relatedTarget||u.fromElement)&&(Os(Te)||Te[Bo]))break e;if((ae||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(Te=u.relatedTarget||u.toElement,ae=q,Te=Te?Os(Te):null,Te!==null&&(xt=L(Te),Me=Te.tag,Te!==xt||Me!==5&&Me!==27&&Me!==6)&&(Te=null)):(ae=null,Te=q),ae!==Te)){if(Me=Lv,ce="onMouseLeave",Z="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&(Me=Fv,ce="onPointerLeave",Z="onPointerEnter",W="pointer"),xt=ae==null?ee:Sl(ae),J=Te==null?ee:Sl(Te),ee=new Me(ce,W+"leave",ae,u,le),ee.target=xt,ee.relatedTarget=J,ce=null,Os(le)===q&&(Me=new Me(Z,W+"enter",Te,u,le),Me.target=J,Me.relatedTarget=xt,ce=Me),xt=ce,ae&&Te)t:{for(Me=ae,Z=Te,W=0,J=Me;J;J=da(J))W++;for(J=0,ce=Z;ce;ce=da(ce))J++;for(;0<W-J;)Me=da(Me),W--;for(;0<J-W;)Z=da(Z),J--;for(;W--;){if(Me===Z||Z!==null&&Me===Z.alternate)break t;Me=da(Me),Z=da(Z)}Me=null}else Me=null;ae!==null&&v1(he,ee,ae,Me,!1),Te!==null&&xt!==null&&v1(he,xt,Te,Me,!0)}}e:{if(ee=q?Sl(q):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var be=qv;else if(Wv(ee))if(Yv)be=yP;else{be=gP;var Be=pP}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?q&&Kp(q.elementType)&&(be=qv):be=mP;if(be&&(be=be(o,q))){Xv(he,be,u,le);break e}Be&&Be(o,ee,q),o==="focusout"&&q&&ee.type==="number"&&q.memoizedProps.value!=null&&Yp(ee,"number",ee.value)}switch(Be=q?Sl(q):window,o){case"focusin":(Wv(Be)||Be.contentEditable==="true")&&(Wo=Be,cg=q,Pl=null);break;case"focusout":Pl=cg=Wo=null;break;case"mousedown":ug=!0;break;case"contextmenu":case"mouseup":case"dragend":ug=!1,nT(he,u,le);break;case"selectionchange":if(vP)break;case"keydown":case"keyup":nT(he,u,le)}var Ee;if(sg)e:{switch(o){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ho?jv(o,u)&&(Ae="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(Ae="onCompositionStart");Ae&&(zv&&u.locale!=="ko"&&(Ho||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ho&&(Ee=Dv()):(zr=le,eg="value"in zr?zr.value:zr.textContent,Ho=!0)),Be=Nf(q,Ae),0<Be.length&&(Ae=new Uv(Ae,o,null,u,le),he.push({event:Ae,listeners:Be}),Ee?Ae.data=Ee:(Ee=Hv(u),Ee!==null&&(Ae.data=Ee)))),(Ee=cP?uP(o,u):fP(o,u))&&(Ae=Nf(q,"onBeforeInput"),0<Ae.length&&(Be=new Uv("onBeforeInput","beforeinput",null,u,le),he.push({event:Be,listeners:Ae}),Be.data=Ee)),nN(he,o,q,u,le)}_1(he,l)})}function sc(o,l,u){return{instance:o,listener:l,currentTarget:u}}function Nf(o,l){for(var u=l+"Capture",d=[];o!==null;){var g=o,_=g.stateNode;g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=El(o,u),g!=null&&d.unshift(sc(o,g,_)),g=El(o,l),g!=null&&d.push(sc(o,g,_))),o=o.return}return d}function da(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function v1(o,l,u,d,g){for(var _=l._reactName,E=[];u!==null&&u!==d;){var k=u,F=k.alternate,q=k.stateNode;if(k=k.tag,F!==null&&F===d)break;k!==5&&k!==26&&k!==27||q===null||(F=q,g?(q=El(u,_),q!=null&&E.unshift(sc(u,q,F))):g||(q=El(u,_),q!=null&&E.push(sc(u,q,F)))),u=u.return}E.length!==0&&o.push({event:l,listeners:E})}var oN=/\r\n?/g,aN=/\u0000|\uFFFD/g;function T1(o){return(typeof o=="string"?o:""+o).replace(oN,`
`).replace(aN,"")}function S1(o,l){return l=T1(l),T1(o)===l}function kf(){}function et(o,l,u,d,g,_){switch(u){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Vo(o,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Vo(o,""+d);break;case"className":zu(o,"class",d);break;case"tabIndex":zu(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":zu(o,u,d);break;case"style":Nv(o,d,_);break;case"data":if(l!=="object"){zu(o,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||u!=="href")){o.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(u);break}d=ju(""+d),o.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(l!=="input"&&et(o,l,"name",g.name,g,null),et(o,l,"formEncType",g.formEncType,g,null),et(o,l,"formMethod",g.formMethod,g,null),et(o,l,"formTarget",g.formTarget,g,null)):(et(o,l,"encType",g.encType,g,null),et(o,l,"method",g.method,g,null),et(o,l,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(u);break}d=ju(""+d),o.setAttribute(u,d);break;case"onClick":d!=null&&(o.onclick=kf);break;case"onScroll":d!=null&&ze("scroll",o);break;case"onScrollEnd":d!=null&&ze("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(i(60));o.innerHTML=u}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}u=ju(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(u,""+d):o.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(u,""):o.removeAttribute(u);break;case"capture":case"download":d===!0?o.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(u,d):o.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(u,d):o.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(u):o.setAttribute(u,d);break;case"popover":ze("beforetoggle",o),ze("toggle",o),Fu(o,"popover",d);break;case"xlinkActuate":or(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":or(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":or(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":or(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":or(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":or(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":or(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":or(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":or(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Fu(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=BM.get(u)||u,Fu(o,u,d))}}function km(o,l,u,d,g,_){switch(u){case"style":Nv(o,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(i(60));o.innerHTML=u}}break;case"children":typeof d=="string"?Vo(o,d):(typeof d=="number"||typeof d=="bigint")&&Vo(o,""+d);break;case"onScroll":d!=null&&ze("scroll",o);break;case"onScrollEnd":d!=null&&ze("scrollend",o);break;case"onClick":d!=null&&(o.onclick=kf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ev.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),l=u.slice(2,g?u.length-7:void 0),_=o[Rn]||null,_=_!=null?_[u]:null,typeof _=="function"&&o.removeEventListener(l,_,g),typeof d=="function")){typeof _!="function"&&_!==null&&(u in o?o[u]=null:o.hasAttribute(u)&&o.removeAttribute(u)),o.addEventListener(l,d,g);break e}u in o?o[u]=d:d===!0?o.setAttribute(u,""):Fu(o,u,d)}}}function on(o,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",o),ze("load",o);var d=!1,g=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var E=u[_];if(E!=null)switch(_){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:et(o,l,_,E,u,null)}}g&&et(o,l,"srcSet",u.srcSet,u,null),d&&et(o,l,"src",u.src,u,null);return;case"input":ze("invalid",o);var k=_=E=g=null,F=null,q=null;for(d in u)if(u.hasOwnProperty(d)){var le=u[d];if(le!=null)switch(d){case"name":g=le;break;case"type":E=le;break;case"checked":F=le;break;case"defaultChecked":q=le;break;case"value":_=le;break;case"defaultValue":k=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,l));break;default:et(o,l,d,le,u,null)}}Cv(o,_,k,F,q,E,g,!1),Vu(o);return;case"select":ze("invalid",o),d=E=_=null;for(g in u)if(u.hasOwnProperty(g)&&(k=u[g],k!=null))switch(g){case"value":_=k;break;case"defaultValue":E=k;break;case"multiple":d=k;default:et(o,l,g,k,u,null)}l=_,u=E,o.multiple=!!d,l!=null?zo(o,!!d,l,!1):u!=null&&zo(o,!!d,u,!0);return;case"textarea":ze("invalid",o),_=g=d=null;for(E in u)if(u.hasOwnProperty(E)&&(k=u[E],k!=null))switch(E){case"value":d=k;break;case"defaultValue":g=k;break;case"children":_=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:et(o,l,E,k,u,null)}Mv(o,d,g,_),Vu(o);return;case"option":for(F in u)if(u.hasOwnProperty(F)&&(d=u[F],d!=null))switch(F){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:et(o,l,F,d,u,null)}return;case"dialog":ze("cancel",o),ze("close",o);break;case"iframe":case"object":ze("load",o);break;case"video":case"audio":for(d=0;d<rc.length;d++)ze(rc[d],o);break;case"image":ze("error",o),ze("load",o);break;case"details":ze("toggle",o);break;case"embed":case"source":case"link":ze("error",o),ze("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in u)if(u.hasOwnProperty(q)&&(d=u[q],d!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:et(o,l,q,d,u,null)}return;default:if(Kp(l)){for(le in u)u.hasOwnProperty(le)&&(d=u[le],d!==void 0&&km(o,l,le,d,u,void 0));return}}for(k in u)u.hasOwnProperty(k)&&(d=u[k],d!=null&&et(o,l,k,d,u,null))}function lN(o,l,u,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,E=null,k=null,F=null,q=null,le=null;for(ae in u){var he=u[ae];if(u.hasOwnProperty(ae)&&he!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":F=he;default:d.hasOwnProperty(ae)||et(o,l,ae,null,d,he)}}for(var ee in d){var ae=d[ee];if(he=u[ee],d.hasOwnProperty(ee)&&(ae!=null||he!=null))switch(ee){case"type":_=ae;break;case"name":g=ae;break;case"checked":q=ae;break;case"defaultChecked":le=ae;break;case"value":E=ae;break;case"defaultValue":k=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,l));break;default:ae!==he&&et(o,l,ee,ae,d,he)}}qp(o,E,k,F,q,le,_,g);return;case"select":ae=E=k=ee=null;for(_ in u)if(F=u[_],u.hasOwnProperty(_)&&F!=null)switch(_){case"value":break;case"multiple":ae=F;default:d.hasOwnProperty(_)||et(o,l,_,null,d,F)}for(g in d)if(_=d[g],F=u[g],d.hasOwnProperty(g)&&(_!=null||F!=null))switch(g){case"value":ee=_;break;case"defaultValue":k=_;break;case"multiple":E=_;default:_!==F&&et(o,l,g,_,d,F)}l=k,u=E,d=ae,ee!=null?zo(o,!!u,ee,!1):!!d!=!!u&&(l!=null?zo(o,!!u,l,!0):zo(o,!!u,u?[]:"",!1));return;case"textarea":ae=ee=null;for(k in u)if(g=u[k],u.hasOwnProperty(k)&&g!=null&&!d.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:et(o,l,k,null,d,g)}for(E in d)if(g=d[E],_=u[E],d.hasOwnProperty(E)&&(g!=null||_!=null))switch(E){case"value":ee=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==_&&et(o,l,E,g,d,_)}Ov(o,ee,ae);return;case"option":for(var Te in u)if(ee=u[Te],u.hasOwnProperty(Te)&&ee!=null&&!d.hasOwnProperty(Te))switch(Te){case"selected":o.selected=!1;break;default:et(o,l,Te,null,d,ee)}for(F in d)if(ee=d[F],ae=u[F],d.hasOwnProperty(F)&&ee!==ae&&(ee!=null||ae!=null))switch(F){case"selected":o.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:et(o,l,F,ee,d,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in u)ee=u[Me],u.hasOwnProperty(Me)&&ee!=null&&!d.hasOwnProperty(Me)&&et(o,l,Me,null,d,ee);for(q in d)if(ee=d[q],ae=u[q],d.hasOwnProperty(q)&&ee!==ae&&(ee!=null||ae!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,l));break;default:et(o,l,q,ee,d,ae)}return;default:if(Kp(l)){for(var xt in u)ee=u[xt],u.hasOwnProperty(xt)&&ee!==void 0&&!d.hasOwnProperty(xt)&&km(o,l,xt,void 0,d,ee);for(le in d)ee=d[le],ae=u[le],!d.hasOwnProperty(le)||ee===ae||ee===void 0&&ae===void 0||km(o,l,le,ee,d,ae);return}}for(var Z in u)ee=u[Z],u.hasOwnProperty(Z)&&ee!=null&&!d.hasOwnProperty(Z)&&et(o,l,Z,null,d,ee);for(he in d)ee=d[he],ae=u[he],!d.hasOwnProperty(he)||ee===ae||ee==null&&ae==null||et(o,l,he,ee,d,ae)}var Im=null,Dm=null;function If(o){return o.nodeType===9?o:o.ownerDocument}function E1(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w1(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Bm(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Lm=null;function cN(){var o=window.event;return o&&o.type==="popstate"?o===Lm?!1:(Lm=o,!0):(Lm=null,!1)}var A1=typeof setTimeout=="function"?setTimeout:void 0,uN=typeof clearTimeout=="function"?clearTimeout:void 0,x1=typeof Promise=="function"?Promise:void 0,fN=typeof queueMicrotask=="function"?queueMicrotask:typeof x1<"u"?function(o){return x1.resolve(null).then(o).catch(hN)}:A1;function hN(o){setTimeout(function(){throw o})}function Um(o,l){var u=l,d=0;do{var g=u.nextSibling;if(o.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(d===0){o.removeChild(g),dc(l);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=g}while(u);dc(l)}function Fm(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Fm(u),Xp(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}o.removeChild(u)}}function dN(o,l,u,d){for(;o.nodeType===1;){var g=u;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[Tl])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==g.rel||o.getAttribute("href")!==(g.href==null?null:g.href)||o.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||o.getAttribute("title")!==(g.title==null?null:g.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(g.src==null?null:g.src)||o.getAttribute("type")!==(g.type==null?null:g.type)||o.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=Ti(o.nextSibling),o===null)break}return null}function pN(o,l,u){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Ti(o.nextSibling),o===null))return null;return o}function Ti(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}function R1(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return o;l--}else u==="/$"&&l++}o=o.previousSibling}return null}function C1(o,l,u){switch(l=If(u),o){case"html":if(o=l.documentElement,!o)throw Error(i(452));return o;case"head":if(o=l.head,!o)throw Error(i(453));return o;case"body":if(o=l.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}var ai=new Map,O1=new Set;function Df(o){return typeof o.getRootNode=="function"?o.getRootNode():o.ownerDocument}var Tr=re.d;re.d={f:gN,r:mN,D:yN,C:_N,L:bN,m:vN,X:SN,S:TN,M:EN};function gN(){var o=Tr.f(),l=Rf();return o||l}function mN(o){var l=Lo(o);l!==null&&l.tag===5&&l.type==="form"?nS(l):Tr.r(o)}var pa=typeof document>"u"?null:document;function M1(o,l,u){var d=pa;if(d&&typeof l=="string"&&l){var g=Qn(l);g='link[rel="'+o+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),O1.has(g)||(O1.add(g),o={rel:o,crossOrigin:u,href:l},d.querySelector(g)===null&&(l=d.createElement("link"),on(l,"link",o),Kt(l),d.head.appendChild(l)))}}function yN(o){Tr.D(o),M1("dns-prefetch",o,null)}function _N(o,l){Tr.C(o,l),M1("preconnect",o,l)}function bN(o,l,u){Tr.L(o,l,u);var d=pa;if(d&&o&&l){var g='link[rel="preload"][as="'+Qn(l)+'"]';l==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+Qn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+Qn(u.imageSizes)+'"]')):g+='[href="'+Qn(o)+'"]';var _=g;switch(l){case"style":_=ga(o);break;case"script":_=ma(o)}ai.has(_)||(o=x({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:o,as:l},u),ai.set(_,o),d.querySelector(g)!==null||l==="style"&&d.querySelector(oc(_))||l==="script"&&d.querySelector(ac(_))||(l=d.createElement("link"),on(l,"link",o),Kt(l),d.head.appendChild(l)))}}function vN(o,l){Tr.m(o,l);var u=pa;if(u&&o){var d=l&&typeof l.as=="string"?l.as:"script",g='link[rel="modulepreload"][as="'+Qn(d)+'"][href="'+Qn(o)+'"]',_=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ma(o)}if(!ai.has(_)&&(o=x({rel:"modulepreload",href:o},l),ai.set(_,o),u.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ac(_)))return}d=u.createElement("link"),on(d,"link",o),Kt(d),u.head.appendChild(d)}}}function TN(o,l,u){Tr.S(o,l,u);var d=pa;if(d&&o){var g=Uo(d).hoistableStyles,_=ga(o);l=l||"default";var E=g.get(_);if(!E){var k={loading:0,preload:null};if(E=d.querySelector(oc(_)))k.loading=5;else{o=x({rel:"stylesheet",href:o,"data-precedence":l},u),(u=ai.get(_))&&zm(o,u);var F=E=d.createElement("link");Kt(F),on(F,"link",o),F._p=new Promise(function(q,le){F.onload=q,F.onerror=le}),F.addEventListener("load",function(){k.loading|=1}),F.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Bf(E,l,d)}E={type:"stylesheet",instance:E,count:1,state:k},g.set(_,E)}}}function SN(o,l){Tr.X(o,l);var u=pa;if(u&&o){var d=Uo(u).hoistableScripts,g=ma(o),_=d.get(g);_||(_=u.querySelector(ac(g)),_||(o=x({src:o,async:!0},l),(l=ai.get(g))&&Vm(o,l),_=u.createElement("script"),Kt(_),on(_,"link",o),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(g,_))}}function EN(o,l){Tr.M(o,l);var u=pa;if(u&&o){var d=Uo(u).hoistableScripts,g=ma(o),_=d.get(g);_||(_=u.querySelector(ac(g)),_||(o=x({src:o,async:!0,type:"module"},l),(l=ai.get(g))&&Vm(o,l),_=u.createElement("script"),Kt(_),on(_,"link",o),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(g,_))}}function P1(o,l,u,d){var g=(g=bt.current)?Df(g):null;if(!g)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=ga(u.href),u=Uo(g).hoistableStyles,d=u.get(l),d||(d={type:"style",instance:null,count:0,state:null},u.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){o=ga(u.href);var _=Uo(g).hoistableStyles,E=_.get(o);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,E),(_=g.querySelector(oc(o)))&&!_._p&&(E.instance=_,E.state.loading=5),ai.has(o)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ai.set(o,u),_||wN(g,o,u,E.state))),l&&d===null)throw Error(i(528,""));return E}if(l&&d!==null)throw Error(i(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ma(u),u=Uo(g).hoistableScripts,d=u.get(l),d||(d={type:"script",instance:null,count:0,state:null},u.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function ga(o){return'href="'+Qn(o)+'"'}function oc(o){return'link[rel="stylesheet"]['+o+"]"}function N1(o){return x({},o,{"data-precedence":o.precedence,precedence:null})}function wN(o,l,u,d){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=o.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),on(l,"link",u),Kt(l),o.head.appendChild(l))}function ma(o){return'[src="'+Qn(o)+'"]'}function ac(o){return"script[async]"+o}function k1(o,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var d=o.querySelector('style[data-href~="'+Qn(u.href)+'"]');if(d)return l.instance=d,Kt(d),d;var g=x({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Kt(d),on(d,"style",g),Bf(d,u.precedence,o),l.instance=d;case"stylesheet":g=ga(u.href);var _=o.querySelector(oc(g));if(_)return l.state.loading|=4,l.instance=_,Kt(_),_;d=N1(u),(g=ai.get(g))&&zm(d,g),_=(o.ownerDocument||o).createElement("link"),Kt(_);var E=_;return E._p=new Promise(function(k,F){E.onload=k,E.onerror=F}),on(_,"link",d),l.state.loading|=4,Bf(_,u.precedence,o),l.instance=_;case"script":return _=ma(u.src),(g=o.querySelector(ac(_)))?(l.instance=g,Kt(g),g):(d=u,(g=ai.get(_))&&(d=x({},u),Vm(d,g)),o=o.ownerDocument||o,g=o.createElement("script"),Kt(g),on(g,"link",d),o.head.appendChild(g),l.instance=g);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&!(l.state.loading&4)&&(d=l.instance,l.state.loading|=4,Bf(d,u.precedence,o));return l.instance}function Bf(o,l,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,_=g,E=0;E<d.length;E++){var k=d[E];if(k.dataset.precedence===l)_=k;else if(_!==g)break}_?_.parentNode.insertBefore(o,_.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(o,l.firstChild))}function zm(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Vm(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Lf=null;function I1(o,l,u){if(Lf===null){var d=new Map,g=Lf=new Map;g.set(u,d)}else g=Lf,d=g.get(u),d||(d=new Map,g.set(u,d));if(d.has(o))return d;for(d.set(o,null),u=u.getElementsByTagName(o),g=0;g<u.length;g++){var _=u[g];if(!(_[Tl]||_[hn]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var E=_.getAttribute(l)||"";E=o+E;var k=d.get(E);k?k.push(_):d.set(E,[_])}}return d}function D1(o,l,u){o=o.ownerDocument||o,o.head.insertBefore(u,l==="title"?o.querySelector("head > title"):null)}function AN(o,l,u){if(u===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function B1(o){return!(o.type==="stylesheet"&&!(o.state.loading&3))}var lc=null;function xN(){}function RN(o,l,u){if(lc===null)throw Error(i(475));var d=lc;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&!(l.state.loading&4)){if(l.instance===null){var g=ga(u.href),_=o.querySelector(oc(g));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=Uf.bind(d),o.then(d,d)),l.state.loading|=4,l.instance=_,Kt(_);return}_=o.ownerDocument||o,u=N1(u),(g=ai.get(g))&&zm(u,g),_=_.createElement("link"),Kt(_);var E=_;E._p=new Promise(function(k,F){E.onload=k,E.onerror=F}),on(_,"link",u),l.instance=_}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,o),(o=l.state.preload)&&!(l.state.loading&3)&&(d.count++,l=Uf.bind(d),o.addEventListener("load",l),o.addEventListener("error",l))}}function CN(){if(lc===null)throw Error(i(475));var o=lc;return o.stylesheets&&o.count===0&&$m(o,o.stylesheets),0<o.count?function(l){var u=setTimeout(function(){if(o.stylesheets&&$m(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(u)}}:null}function Uf(){if(this.count--,this.count===0){if(this.stylesheets)$m(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Ff=null;function $m(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Ff=new Map,l.forEach(ON,o),Ff=null,Uf.call(o))}function ON(o,l){if(!(l.state.loading&4)){var u=Ff.get(o);if(u)var d=u.get(null);else{u=new Map,Ff.set(o,u);for(var g=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var E=g[_];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(u.set(E.dataset.precedence,E),d=E)}d&&u.set(null,d)}g=l.instance,E=g.getAttribute("data-precedence"),_=u.get(E)||d,_===d&&u.set(null,g),u.set(E,g),this.count++,d=Uf.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),_?_.parentNode.insertBefore(g,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(g,o.firstChild)),l.state.loading|=4}}var cc={$$typeof:b,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function MN(o,l,u,d,g,_,E,k){this.tag=1,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Do(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Do(0),this.hiddenUpdates=Do(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function L1(o,l,u,d,g,_,E,k,F,q,le,he){return o=new MN(o,l,u,E,k,F,q,he),l=1,_===!0&&(l|=24),_=si(3,null,null,l),o.current=_,_.stateNode=o,l=vg(),l.refCount++,o.pooledCache=l,l.refCount++,_.memoizedState={element:d,isDehydrated:u,cache:l},em(_),o}function U1(o){return o?(o=Yo,o):Yo}function F1(o,l,u,d,g,_){g=U1(g),d.context===null?d.context=g:d.pendingContext=g,d=Yr(l),d.payload={element:u},_=_===void 0?null:_,_!==null&&(d.callback=_),u=Kr(o,d,l),u!==null&&(En(u,o,l),Xl(u,o,l))}function z1(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<l?u:l}}function jm(o,l){z1(o,l),(o=o.alternate)&&z1(o,l)}function V1(o){if(o.tag===13){var l=Vr(o,67108864);l!==null&&En(l,o,67108864),jm(o,67108864)}}var zf=!0;function PN(o,l,u,d){var g=V.T;V.T=null;var _=re.p;try{re.p=2,Hm(o,l,u,d)}finally{re.p=_,V.T=g}}function NN(o,l,u,d){var g=V.T;V.T=null;var _=re.p;try{re.p=8,Hm(o,l,u,d)}finally{re.p=_,V.T=g}}function Hm(o,l,u,d){if(zf){var g=Wm(d);if(g===null)Nm(o,l,d,Vf,u),j1(o,d);else if(IN(g,o,l,u,d))d.stopPropagation();else if(j1(o,d),l&4&&-1<kN.indexOf(o)){for(;g!==null;){var _=Lo(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var E=rr(_.pendingLanes);if(E!==0){var k=_;for(k.pendingLanes|=2,k.entangledLanes|=2;E;){var F=1<<31-Tn(E);k.entanglements[1]|=F,E&=~F}Fi(_),!(St&6)&&(wf=Wt()+500,ic(0))}}break;case 13:k=Vr(_,2),k!==null&&En(k,_,2),Rf(),jm(_,2)}if(_=Wm(d),_===null&&Nm(o,l,d,Vf,u),_===g)break;g=_}g!==null&&d.stopPropagation()}else Nm(o,l,d,null,u)}}function Wm(o){return o=Qp(o),Xm(o)}var Vf=null;function Xm(o){if(Vf=null,o=Os(o),o!==null){var l=L(o);if(l===null)o=null;else{var u=l.tag;if(u===13){if(o=X(l),o!==null)return o;o=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Vf=o,null}function $1(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ir()){case Ii:return 2;case dt:return 8;case mt:case It:return 32;case Yn:return 268435456;default:return 32}default:return 32}}var qm=!1,ns=null,is=null,rs=null,uc=new Map,fc=new Map,ss=[],kN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j1(o,l){switch(o){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":uc.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(l.pointerId)}}function hc(o,l,u,d,g,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:u,eventSystemFlags:d,nativeEvent:_,targetContainers:[g]},l!==null&&(l=Lo(l),l!==null&&V1(l)),o):(o.eventSystemFlags|=d,l=o.targetContainers,g!==null&&l.indexOf(g)===-1&&l.push(g),o)}function IN(o,l,u,d,g){switch(l){case"focusin":return ns=hc(ns,o,l,u,d,g),!0;case"dragenter":return is=hc(is,o,l,u,d,g),!0;case"mouseover":return rs=hc(rs,o,l,u,d,g),!0;case"pointerover":var _=g.pointerId;return uc.set(_,hc(uc.get(_)||null,o,l,u,d,g)),!0;case"gotpointercapture":return _=g.pointerId,fc.set(_,hc(fc.get(_)||null,o,l,u,d,g)),!0}return!1}function H1(o){var l=Os(o.target);if(l!==null){var u=L(l);if(u!==null){if(l=u.tag,l===13){if(l=X(u),l!==null){o.blockedOn=l,CM(o.priority,function(){if(u.tag===13){var d=zn(),g=Vr(u,d);g!==null&&En(g,u,d),jm(u,d)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function $f(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var u=Wm(o.nativeEvent);if(u===null){u=o.nativeEvent;var d=new u.constructor(u.type,u);Zp=d,u.target.dispatchEvent(d),Zp=null}else return l=Lo(u),l!==null&&V1(l),o.blockedOn=u,!1;l.shift()}return!0}function W1(o,l,u){$f(o)&&u.delete(l)}function DN(){qm=!1,ns!==null&&$f(ns)&&(ns=null),is!==null&&$f(is)&&(is=null),rs!==null&&$f(rs)&&(rs=null),uc.forEach(W1),fc.forEach(W1)}function jf(o,l){o.blockedOn===l&&(o.blockedOn=null,qm||(qm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,DN)))}var Hf=null;function X1(o){Hf!==o&&(Hf=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hf===o&&(Hf=null);for(var l=0;l<o.length;l+=3){var u=o[l],d=o[l+1],g=o[l+2];if(typeof d!="function"){if(Xm(d||u)===null)continue;break}var _=Lo(u);_!==null&&(o.splice(l,3),l-=3,Bg(_,{pending:!0,data:g,method:u.method,action:d},d,g))}}))}function dc(o){function l(F){return jf(F,o)}ns!==null&&jf(ns,o),is!==null&&jf(is,o),rs!==null&&jf(rs,o),uc.forEach(l),fc.forEach(l);for(var u=0;u<ss.length;u++){var d=ss[u];d.blockedOn===o&&(d.blockedOn=null)}for(;0<ss.length&&(u=ss[0],u.blockedOn===null);)H1(u),u.blockedOn===null&&ss.shift();if(u=(o.ownerDocument||o).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var g=u[d],_=u[d+1],E=g[Rn]||null;if(typeof _=="function")E||X1(u);else if(E){var k=null;if(_&&_.hasAttribute("formAction")){if(g=_,E=_[Rn]||null)k=E.formAction;else if(Xm(g)!==null)continue}else k=E.action;typeof k=="function"?u[d+1]=k:(u.splice(d,3),d-=3),X1(u)}}}function Ym(o){this._internalRoot=o}Wf.prototype.render=Ym.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(i(409));var u=l.current,d=zn();F1(u,d,o,l,null,null)},Wf.prototype.unmount=Ym.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;o.tag===0&&fa(),F1(o.current,2,null,o,null,null),Rf(),l[Bo]=null}};function Wf(o){this._internalRoot=o}Wf.prototype.unstable_scheduleHydration=function(o){if(o){var l=vv();o={blockedOn:null,target:o,priority:l};for(var u=0;u<ss.length&&l!==0&&l<ss[u].priority;u++);ss.splice(u,0,o),u===0&&H1(o)}};var q1=e.version;if(q1!=="19.0.0")throw Error(i(527,q1,"19.0.0"));re.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=$(l),o=o!==null?Q(o):null,o=o===null?null:o.stateNode,o};var BN={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:V,findFiberByHostInstance:Os,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xf.isDisabled&&Xf.supportsFiber)try{Dn=Xf.inject(BN),gt=Xf}catch{}}return gc.createRoot=function(o,l){if(!r(o))throw Error(i(299));var u=!1,d="",g=uS,_=fS,E=hS,k=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks)),l=L1(o,1,!1,null,null,u,d,g,_,E,k,null),o[Bo]=l.current,Pm(o.nodeType===8?o.parentNode:o),new Ym(l)},gc.hydrateRoot=function(o,l,u){if(!r(o))throw Error(i(299));var d=!1,g="",_=uS,E=fS,k=hS,F=null,q=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(F=u.unstable_transitionCallbacks),u.formState!==void 0&&(q=u.formState)),l=L1(o,1,!0,l,u??null,d,g,_,E,k,F,q),l.context=U1(null),u=l.current,d=zn(),g=Yr(d),g.callback=null,Kr(u,g,d),l.current.lanes=d,vl(l,d),Fi(l),o[Bo]=l.current,Pm(o),new Wf(l)},gc.version="19.0.0",gc}var iE;function YN(){if(iE)return Qm.exports;iE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qm.exports=qN(),Qm.exports}var KN=YN();const ZN=np(KN),Qc={black:"#000",white:"#fff"},ya={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},_a={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},ba={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},va={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Ta={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},mc={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},QN={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function mo(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(i=>n.searchParams.append("args[]",i)),`Minified MUI error #${t}; visit ${n} for the full message.`}const Rr="$$material";function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ed.apply(null,arguments)}function GN(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function JN(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var ek=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(JN(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=GN(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},t}(),mn="-ms-",td="-moz-",We="-webkit-",LR="comm",V0="rule",$0="decl",tk="@import",UR="@keyframes",nk="@layer",ik=Math.abs,ip=String.fromCharCode,rk=Object.assign;function sk(t,e){return ln(t,0)^45?(((e<<2^ln(t,0))<<2^ln(t,1))<<2^ln(t,2))<<2^ln(t,3):0}function FR(t){return t.trim()}function ok(t,e){return(t=e.exec(t))?t[0]:t}function Xe(t,e,n){return t.replace(e,n)}function s_(t,e){return t.indexOf(e)}function ln(t,e){return t.charCodeAt(e)|0}function Gc(t,e,n){return t.slice(e,n)}function Xi(t){return t.length}function j0(t){return t.length}function qf(t,e){return e.push(t),t}function ak(t,e){return t.map(e).join("")}var rp=1,Qa=1,zR=0,In=0,$t=0,fl="";function sp(t,e,n,i,r,s,a){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:rp,column:Qa,length:a,return:""}}function yc(t,e){return rk(sp("",null,null,"",null,null,0),t,{length:-t.length},e)}function lk(){return $t}function ck(){return $t=In>0?ln(fl,--In):0,Qa--,$t===10&&(Qa=1,rp--),$t}function jn(){return $t=In<zR?ln(fl,In++):0,Qa++,$t===10&&(Qa=1,rp++),$t}function Qi(){return ln(fl,In)}function Nh(){return In}function mu(t,e){return Gc(fl,t,e)}function Jc(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function VR(t){return rp=Qa=1,zR=Xi(fl=t),In=0,[]}function $R(t){return fl="",t}function kh(t){return FR(mu(In-1,o_(t===91?t+2:t===40?t+1:t)))}function uk(t){for(;($t=Qi())&&$t<33;)jn();return Jc(t)>2||Jc($t)>3?"":" "}function fk(t,e){for(;--e&&jn()&&!($t<48||$t>102||$t>57&&$t<65||$t>70&&$t<97););return mu(t,Nh()+(e<6&&Qi()==32&&jn()==32))}function o_(t){for(;jn();)switch($t){case t:return In;case 34:case 39:t!==34&&t!==39&&o_($t);break;case 40:t===41&&o_(t);break;case 92:jn();break}return In}function hk(t,e){for(;jn()&&t+$t!==57;)if(t+$t===84&&Qi()===47)break;return"/*"+mu(e,In-1)+"*"+ip(t===47?t:jn())}function dk(t){for(;!Jc(Qi());)jn();return mu(t,In)}function pk(t){return $R(Ih("",null,null,null,[""],t=VR(t),0,[0],t))}function Ih(t,e,n,i,r,s,a,c,f){for(var h=0,p=0,m=a,y=0,b=0,v=0,T=1,S=1,w=1,C=0,A="",O=r,R=s,D=i,z=A;S;)switch(v=C,C=jn()){case 40:if(v!=108&&ln(z,m-1)==58){s_(z+=Xe(kh(C),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:z+=kh(C);break;case 9:case 10:case 13:case 32:z+=uk(v);break;case 92:z+=fk(Nh()-1,7);continue;case 47:switch(Qi()){case 42:case 47:qf(gk(hk(jn(),Nh()),e,n),f);break;default:z+="/"}break;case 123*T:c[h++]=Xi(z)*w;case 125*T:case 59:case 0:switch(C){case 0:case 125:S=0;case 59+p:w==-1&&(z=Xe(z,/\f/g,"")),b>0&&Xi(z)-m&&qf(b>32?sE(z+";",i,n,m-1):sE(Xe(z," ","")+";",i,n,m-2),f);break;case 59:z+=";";default:if(qf(D=rE(z,e,n,h,p,r,c,A,O=[],R=[],m),s),C===123)if(p===0)Ih(z,e,D,D,O,s,m,c,R);else switch(y===99&&ln(z,3)===110?100:y){case 100:case 108:case 109:case 115:Ih(t,D,D,i&&qf(rE(t,D,D,0,0,r,c,A,r,O=[],m),R),r,R,m,c,i?O:R);break;default:Ih(z,D,D,D,[""],R,0,c,R)}}h=p=b=0,T=w=1,A=z="",m=a;break;case 58:m=1+Xi(z),b=v;default:if(T<1){if(C==123)--T;else if(C==125&&T++==0&&ck()==125)continue}switch(z+=ip(C),C*T){case 38:w=p>0?1:(z+="\f",-1);break;case 44:c[h++]=(Xi(z)-1)*w,w=1;break;case 64:Qi()===45&&(z+=kh(jn())),y=Qi(),p=m=Xi(A=z+=dk(Nh())),C++;break;case 45:v===45&&Xi(z)==2&&(T=0)}}return s}function rE(t,e,n,i,r,s,a,c,f,h,p){for(var m=r-1,y=r===0?s:[""],b=j0(y),v=0,T=0,S=0;v<i;++v)for(var w=0,C=Gc(t,m+1,m=ik(T=a[v])),A=t;w<b;++w)(A=FR(T>0?y[w]+" "+C:Xe(C,/&\f/g,y[w])))&&(f[S++]=A);return sp(t,e,n,r===0?V0:c,f,h,p)}function gk(t,e,n){return sp(t,e,n,LR,ip(lk()),Gc(t,2,-2),0)}function sE(t,e,n,i){return sp(t,e,n,$0,Gc(t,0,i),Gc(t,i+1,-1),i)}function Ha(t,e){for(var n="",i=j0(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function mk(t,e,n,i){switch(t.type){case nk:if(t.children.length)break;case tk:case $0:return t.return=t.return||t.value;case LR:return"";case UR:return t.return=t.value+"{"+Ha(t.children,i)+"}";case V0:t.value=t.props.join(",")}return Xi(n=Ha(t.children,i))?t.return=t.value+"{"+n+"}":""}function yk(t){var e=j0(t);return function(n,i,r,s){for(var a="",c=0;c<e;c++)a+=t[c](n,i,r,s)||"";return a}}function _k(t){return function(e){e.root||(e=e.return)&&t(e)}}function jR(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var bk=function(e,n,i){for(var r=0,s=0;r=s,s=Qi(),r===38&&s===12&&(n[i]=1),!Jc(s);)jn();return mu(e,In)},vk=function(e,n){var i=-1,r=44;do switch(Jc(r)){case 0:r===38&&Qi()===12&&(n[i]=1),e[i]+=bk(In-1,n,i);break;case 2:e[i]+=kh(r);break;case 4:if(r===44){e[++i]=Qi()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=ip(r)}while(r=jn());return e},Tk=function(e,n){return $R(vk(VR(e),n))},oE=new WeakMap,Sk=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!oE.get(i))&&!r){oE.set(e,!0);for(var s=[],a=Tk(n,s),c=i.props,f=0,h=0;f<a.length;f++)for(var p=0;p<c.length;p++,h++)e.props[h]=s[f]?a[f].replace(/&\f/g,c[p]):c[p]+" "+a[f]}}},Ek=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function HR(t,e){switch(sk(t,e)){case 5103:return We+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return We+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return We+t+td+t+mn+t+t;case 6828:case 4268:return We+t+mn+t+t;case 6165:return We+t+mn+"flex-"+t+t;case 5187:return We+t+Xe(t,/(\w+).+(:[^]+)/,We+"box-$1$2"+mn+"flex-$1$2")+t;case 5443:return We+t+mn+"flex-item-"+Xe(t,/flex-|-self/,"")+t;case 4675:return We+t+mn+"flex-line-pack"+Xe(t,/align-content|flex-|-self/,"")+t;case 5548:return We+t+mn+Xe(t,"shrink","negative")+t;case 5292:return We+t+mn+Xe(t,"basis","preferred-size")+t;case 6060:return We+"box-"+Xe(t,"-grow","")+We+t+mn+Xe(t,"grow","positive")+t;case 4554:return We+Xe(t,/([^-])(transform)/g,"$1"+We+"$2")+t;case 6187:return Xe(Xe(Xe(t,/(zoom-|grab)/,We+"$1"),/(image-set)/,We+"$1"),t,"")+t;case 5495:case 3959:return Xe(t,/(image-set\([^]*)/,We+"$1$`$1");case 4968:return Xe(Xe(t,/(.+:)(flex-)?(.*)/,We+"box-pack:$3"+mn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+We+t+t;case 4095:case 3583:case 4068:case 2532:return Xe(t,/(.+)-inline(.+)/,We+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xi(t)-1-e>6)switch(ln(t,e+1)){case 109:if(ln(t,e+4)!==45)break;case 102:return Xe(t,/(.+:)(.+)-([^]+)/,"$1"+We+"$2-$3$1"+td+(ln(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~s_(t,"stretch")?HR(Xe(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ln(t,e+1)!==115)break;case 6444:switch(ln(t,Xi(t)-3-(~s_(t,"!important")&&10))){case 107:return Xe(t,":",":"+We)+t;case 101:return Xe(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+We+(ln(t,14)===45?"inline-":"")+"box$3$1"+We+"$2$3$1"+mn+"$2box$3")+t}break;case 5936:switch(ln(t,e+11)){case 114:return We+t+mn+Xe(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return We+t+mn+Xe(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return We+t+mn+Xe(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return We+t+mn+t+t}return t}var wk=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case $0:e.return=HR(e.value,e.length);break;case UR:return Ha([yc(e,{value:Xe(e.value,"@","@"+We)})],r);case V0:if(e.length)return ak(e.props,function(s){switch(ok(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ha([yc(e,{props:[Xe(s,/:(read-\w+)/,":"+td+"$1")]})],r);case"::placeholder":return Ha([yc(e,{props:[Xe(s,/:(plac\w+)/,":"+We+"input-$1")]}),yc(e,{props:[Xe(s,/:(plac\w+)/,":"+td+"$1")]}),yc(e,{props:[Xe(s,/:(plac\w+)/,mn+"input-$1")]})],r)}return""})}},Ak=[wk],xk=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(T){var S=T.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(T),T.setAttribute("data-s",""))})}var r=e.stylisPlugins||Ak,s={},a,c=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(T){for(var S=T.getAttribute("data-emotion").split(" "),w=1;w<S.length;w++)s[S[w]]=!0;c.push(T)});var f,h=[Sk,Ek];{var p,m=[mk,_k(function(T){p.insert(T)})],y=yk(h.concat(r,m)),b=function(S){return Ha(pk(S),y)};f=function(S,w,C,A){p=C,b(S?S+"{"+w.styles+"}":w.styles),A&&(v.inserted[w.name]=!0)}}var v={key:n,sheet:new ek({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:f};return v.sheet.hydrate(c),v},ty={exports:{}},qe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function Rk(){if(aE)return qe;aE=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,f=t?Symbol.for("react.async_mode"):60111,h=t?Symbol.for("react.concurrent_mode"):60111,p=t?Symbol.for("react.forward_ref"):60112,m=t?Symbol.for("react.suspense"):60113,y=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,v=t?Symbol.for("react.lazy"):60116,T=t?Symbol.for("react.block"):60121,S=t?Symbol.for("react.fundamental"):60117,w=t?Symbol.for("react.responder"):60118,C=t?Symbol.for("react.scope"):60119;function A(R){if(typeof R=="object"&&R!==null){var D=R.$$typeof;switch(D){case e:switch(R=R.type,R){case f:case h:case i:case s:case r:case m:return R;default:switch(R=R&&R.$$typeof,R){case c:case p:case v:case b:case a:return R;default:return D}}case n:return D}}}function O(R){return A(R)===h}return qe.AsyncMode=f,qe.ConcurrentMode=h,qe.ContextConsumer=c,qe.ContextProvider=a,qe.Element=e,qe.ForwardRef=p,qe.Fragment=i,qe.Lazy=v,qe.Memo=b,qe.Portal=n,qe.Profiler=s,qe.StrictMode=r,qe.Suspense=m,qe.isAsyncMode=function(R){return O(R)||A(R)===f},qe.isConcurrentMode=O,qe.isContextConsumer=function(R){return A(R)===c},qe.isContextProvider=function(R){return A(R)===a},qe.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===e},qe.isForwardRef=function(R){return A(R)===p},qe.isFragment=function(R){return A(R)===i},qe.isLazy=function(R){return A(R)===v},qe.isMemo=function(R){return A(R)===b},qe.isPortal=function(R){return A(R)===n},qe.isProfiler=function(R){return A(R)===s},qe.isStrictMode=function(R){return A(R)===r},qe.isSuspense=function(R){return A(R)===m},qe.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===i||R===h||R===s||R===r||R===m||R===y||typeof R=="object"&&R!==null&&(R.$$typeof===v||R.$$typeof===b||R.$$typeof===a||R.$$typeof===c||R.$$typeof===p||R.$$typeof===S||R.$$typeof===w||R.$$typeof===C||R.$$typeof===T)},qe.typeOf=A,qe}var lE;function Ck(){return lE||(lE=1,ty.exports=Rk()),ty.exports}var ny,cE;function Ok(){if(cE)return ny;cE=1;var t=Ck(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=i,s[t.Memo]=r;function a(v){return t.isMemo(v)?r:s[v.$$typeof]||e}var c=Object.defineProperty,f=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,y=Object.prototype;function b(v,T,S){if(typeof T!="string"){if(y){var w=m(T);w&&w!==y&&b(v,w,S)}var C=f(T);h&&(C=C.concat(h(T)));for(var A=a(v),O=a(T),R=0;R<C.length;++R){var D=C[R];if(!n[D]&&!(S&&S[D])&&!(O&&O[D])&&!(A&&A[D])){var z=p(T,D);try{c(v,D,z)}catch{}}}}return v}return ny=b,ny}Ok();var Mk=!0;function WR(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):r&&(i+=r+" ")}),i}var H0=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||Mk===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},W0=function(e,n,i){H0(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Pk(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Nk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},kk=/[A-Z]|^ms/g,Ik=/_EMO_([^_]+?)_([^]*?)_EMO_/g,XR=function(e){return e.charCodeAt(1)===45},uE=function(e){return e!=null&&typeof e!="boolean"},iy=jR(function(t){return XR(t)?t:t.replace(kk,"-$&").toLowerCase()}),fE=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Ik,function(i,r,s){return qi={name:r,styles:s,next:qi},r})}return Nk[e]!==1&&!XR(e)&&typeof n=="number"&&n!==0?n+"px":n};function eu(t,e,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return qi={name:r.name,styles:r.styles,next:qi},r.name;var s=n;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)qi={name:a.name,styles:a.styles,next:qi},a=a.next;var c=s.styles+";";return c}return Dk(t,e,n)}case"function":{if(t!==void 0){var f=qi,h=n(t);return qi=f,eu(t,e,h)}break}}var p=n;if(e==null)return p;var m=e[p];return m!==void 0?m:p}function Dk(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=eu(t,e,n[r])+";";else for(var s in n){var a=n[s];if(typeof a!="object"){var c=a;e!=null&&e[c]!==void 0?i+=s+"{"+e[c]+"}":uE(c)&&(i+=iy(s)+":"+fE(s,c)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var f=0;f<a.length;f++)uE(a[f])&&(i+=iy(s)+":"+fE(s,a[f])+";");else{var h=eu(t,e,a);switch(s){case"animation":case"animationName":{i+=iy(s)+":"+h+";";break}default:i+=s+"{"+h+"}"}}}return i}var hE=/label:\s*([^\s;{]+)\s*(;|$)/g,qi;function yu(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,r="";qi=void 0;var s=t[0];if(s==null||s.raw===void 0)i=!1,r+=eu(n,e,s);else{var a=s;r+=a[0]}for(var c=1;c<t.length;c++)if(r+=eu(n,e,t[c]),i){var f=s;r+=f[c]}hE.lastIndex=0;for(var h="",p;(p=hE.exec(r))!==null;)h+="-"+p[1];var m=Pk(r)+h;return{name:m,styles:r,next:qi}}var Bk=function(e){return e()},qR=r_.useInsertionEffect?r_.useInsertionEffect:!1,YR=qR||Bk,dE=qR||I.useLayoutEffect,KR=I.createContext(typeof HTMLElement<"u"?xk({key:"css"}):null);KR.Provider;var X0=function(e){return I.forwardRef(function(n,i){var r=I.useContext(KR);return e(n,r,i)})},_u=I.createContext({}),q0={}.hasOwnProperty,a_="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Lk=function(e,n){var i={};for(var r in n)q0.call(n,r)&&(i[r]=n[r]);return i[a_]=e,i},Uk=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return H0(n,i,r),YR(function(){return W0(n,i,r)}),null},Fk=X0(function(t,e,n){var i=t.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=t[a_],s=[i],a="";typeof t.className=="string"?a=WR(e.registered,s,t.className):t.className!=null&&(a=t.className+" ");var c=yu(s,void 0,I.useContext(_u));a+=e.key+"-"+c.name;var f={};for(var h in t)q0.call(t,h)&&h!=="css"&&h!==a_&&(f[h]=t[h]);return f.className=a,n&&(f.ref=n),I.createElement(I.Fragment,null,I.createElement(Uk,{cache:e,serialized:c,isStringTag:typeof r=="string"}),I.createElement(r,f))}),zk=Fk,pE=function(e,n){var i=arguments;if(n==null||!q0.call(n,"css"))return I.createElement.apply(void 0,i);var r=i.length,s=new Array(r);s[0]=zk,s[1]=Lk(e,n);for(var a=2;a<r;a++)s[a]=i[a];return I.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(pE||(pE={}));var Vk=X0(function(t,e){var n=t.styles,i=yu([n],void 0,I.useContext(_u)),r=I.useRef();return dE(function(){var s=e.key+"-global",a=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),c=!1,f=document.querySelector('style[data-emotion="'+s+" "+i.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),f!==null&&(c=!0,f.setAttribute("data-emotion",s),a.hydrate([f])),r.current=[a,c],function(){a.flush()}},[e]),dE(function(){var s=r.current,a=s[0],c=s[1];if(c){s[1]=!1;return}if(i.next!==void 0&&W0(e,i.next,!0),a.tags.length){var f=a.tags[a.tags.length-1].nextElementSibling;a.before=f,a.flush()}e.insert("",i,a,!1)},[e,i.name]),null});function Y0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return yu(e)}function bu(){var t=Y0.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var $k=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,jk=jR(function(t){return $k.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Hk=jk,Wk=function(e){return e!=="theme"},gE=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Hk:Wk},mE=function(e,n,i){var r;if(n){var s=n.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},Xk=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return H0(n,i,r),YR(function(){return W0(n,i,r)}),null},qk=function t(e,n){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,s,a;n!==void 0&&(s=n.label,a=n.target);var c=mE(e,n,i),f=c||gE(r),h=!f("as");return function(){var p=arguments,m=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&m.push("label:"+s+";"),p[0]==null||p[0].raw===void 0)m.push.apply(m,p);else{var y=p[0];m.push(y[0]);for(var b=p.length,v=1;v<b;v++)m.push(p[v],y[v])}var T=X0(function(S,w,C){var A=h&&S.as||r,O="",R=[],D=S;if(S.theme==null){D={};for(var z in S)D[z]=S[z];D.theme=I.useContext(_u)}typeof S.className=="string"?O=WR(w.registered,R,S.className):S.className!=null&&(O=S.className+" ");var j=yu(m.concat(R),w.registered,D);O+=w.key+"-"+j.name,a!==void 0&&(O+=" "+a);var V=h&&c===void 0?gE(A):f,x={};for(var H in S)h&&H==="as"||V(H)&&(x[H]=S[H]);return x.className=O,C&&(x.ref=C),I.createElement(I.Fragment,null,I.createElement(Xk,{cache:w,serialized:j,isStringTag:typeof A=="string"}),I.createElement(A,x))});return T.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",T.defaultProps=e.defaultProps,T.__emotion_real=T,T.__emotion_base=r,T.__emotion_styles=m,T.__emotion_forwardProp=c,Object.defineProperty(T,"toString",{value:function(){return"."+a}}),T.withComponent=function(S,w){var C=t(S,ed({},n,w,{shouldForwardProp:mE(T,w,!0)}));return C.apply(void 0,m)},T}},Yk=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],l_=qk.bind(null);Yk.forEach(function(t){l_[t]=l_(t)});function Kk(t){return t==null||Object.keys(t).length===0}function ZR(t){const{styles:e,defaultTheme:n={}}=t,i=typeof e=="function"?r=>e(Kk(r)?n:r):e;return de.jsx(Vk,{styles:i})}/**
 * @mui/styled-engine v6.4.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Zk(t,e){return l_(t,e)}function Qk(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const yE=[];function _E(t){return yE[0]=t,yu(yE)}var ry={exports:{}},tt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function Gk(){if(bE)return tt;bE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),b=Symbol.for("react.client.reference");function v(T){if(typeof T=="object"&&T!==null){var S=T.$$typeof;switch(S){case t:switch(T=T.type,T){case n:case r:case i:case f:case h:return T;default:switch(T=T&&T.$$typeof,T){case a:case c:case m:case p:return T;case s:return T;default:return S}}case e:return S}}}return tt.ContextConsumer=s,tt.ContextProvider=a,tt.Element=t,tt.ForwardRef=c,tt.Fragment=n,tt.Lazy=m,tt.Memo=p,tt.Portal=e,tt.Profiler=r,tt.StrictMode=i,tt.Suspense=f,tt.SuspenseList=h,tt.isContextConsumer=function(T){return v(T)===s},tt.isContextProvider=function(T){return v(T)===a},tt.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===t},tt.isForwardRef=function(T){return v(T)===c},tt.isFragment=function(T){return v(T)===n},tt.isLazy=function(T){return v(T)===m},tt.isMemo=function(T){return v(T)===p},tt.isPortal=function(T){return v(T)===e},tt.isProfiler=function(T){return v(T)===r},tt.isStrictMode=function(T){return v(T)===i},tt.isSuspense=function(T){return v(T)===f},tt.isSuspenseList=function(T){return v(T)===h},tt.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===n||T===r||T===i||T===f||T===h||T===y||typeof T=="object"&&T!==null&&(T.$$typeof===m||T.$$typeof===p||T.$$typeof===a||T.$$typeof===s||T.$$typeof===c||T.$$typeof===b||T.getModuleId!==void 0)},tt.typeOf=v,tt}var vE;function Jk(){return vE||(vE=1,ry.exports=Gk()),ry.exports}var QR=Jk();function Yi(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function GR(t){if(I.isValidElement(t)||QR.isValidElementType(t)||!Yi(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=GR(t[n])}),e}function Hn(t,e,n={clone:!0}){const i=n.clone?{...t}:t;return Yi(t)&&Yi(e)&&Object.keys(e).forEach(r=>{I.isValidElement(e[r])||QR.isValidElementType(e[r])?i[r]=e[r]:Yi(e[r])&&Object.prototype.hasOwnProperty.call(t,r)&&Yi(t[r])?i[r]=Hn(t[r],e[r],n):n.clone?i[r]=Yi(e[r])?GR(e[r]):e[r]:i[r]=e[r]}),i}const eI=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,i)=>n.val-i.val),e.reduce((n,i)=>({...n,[i.key]:i.val}),{})};function tI(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5,...r}=t,s=eI(e),a=Object.keys(s);function c(y){return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n})`}function f(y){return`@media (max-width:${(typeof e[y]=="number"?e[y]:y)-i/100}${n})`}function h(y,b){const v=a.indexOf(b);return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n}) and (max-width:${(v!==-1&&typeof e[a[v]]=="number"?e[a[v]]:b)-i/100}${n})`}function p(y){return a.indexOf(y)+1<a.length?h(y,a[a.indexOf(y)+1]):c(y)}function m(y){const b=a.indexOf(y);return b===0?c(a[1]):b===a.length-1?f(a[b]):h(y,a[a.indexOf(y)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:c,down:f,between:h,only:p,not:m,unit:n,...r}}function nI(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(i=>i.startsWith("@container")).sort((i,r)=>{var a,c;const s=/min-width:\s*([0-9.]+)/;return+(((a=i.match(s))==null?void 0:a[1])||0)-+(((c=r.match(s))==null?void 0:c[1])||0)});return n.length?n.reduce((i,r)=>{const s=e[r];return delete i[r],i[r]=s,i},{...e}):e}function iI(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function rI(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,i,r]=n,s=Number.isNaN(+i)?i||0:+i;return t.containerQueries(r).up(s)}function sI(t){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function n(s,a){s.up=(...c)=>e(t.breakpoints.up(...c),a),s.down=(...c)=>e(t.breakpoints.down(...c),a),s.between=(...c)=>e(t.breakpoints.between(...c),a),s.only=(...c)=>e(t.breakpoints.only(...c),a),s.not=(...c)=>{const f=e(t.breakpoints.not(...c),a);return f.includes("not all and")?f.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):f}}const i={},r=s=>(n(i,s),i);return n(r),{...t,containerQueries:r}}const oI={borderRadius:4};function Uc(t,e){return e?Hn(t,e,{clone:!1}):t}const op={xs:0,sm:600,md:900,lg:1200,xl:1536},TE={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${op[t]}px)`},aI={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:op[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Mr(t,e,n){const i=t.theme||{};if(Array.isArray(e)){const s=i.breakpoints||TE;return e.reduce((a,c,f)=>(a[s.up(s.keys[f])]=n(e[f]),a),{})}if(typeof e=="object"){const s=i.breakpoints||TE;return Object.keys(e).reduce((a,c)=>{if(iI(s.keys,c)){const f=rI(i.containerQueries?i:aI,c);f&&(a[f]=n(e[c],c))}else if(Object.keys(s.values||op).includes(c)){const f=s.up(c);a[f]=n(e[c],c)}else{const f=c;a[f]=e[f]}return a},{})}return n(e)}function lI(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((i,r)=>{const s=t.up(r);return i[s]={},i},{}))||{}}function cI(t,e){return t.reduce((n,i)=>{const r=n[i];return(!r||Object.keys(r).length===0)&&delete n[i],n},e)}function rt(t){if(typeof t!="string")throw new Error(mo(7));return t.charAt(0).toUpperCase()+t.slice(1)}function ap(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const i=`vars.${e}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,t);if(i!=null)return i}return e.split(".").reduce((i,r)=>i&&i[r]!=null?i[r]:null,t)}function nd(t,e,n,i=n){let r;return typeof t=="function"?r=t(n):Array.isArray(t)?r=t[n]||i:r=ap(t,n)||i,e&&(r=e(r,i,t)),r}function Bt(t){const{prop:e,cssProperty:n=t.prop,themeKey:i,transform:r}=t,s=a=>{if(a[e]==null)return null;const c=a[e],f=a.theme,h=ap(f,i)||{};return Mr(a,c,m=>{let y=nd(h,r,m);return m===y&&typeof m=="string"&&(y=nd(h,r,`${e}${m==="default"?"":rt(m)}`,m)),n===!1?y:{[n]:y}})};return s.propTypes={},s.filterProps=[e],s}function uI(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const fI={m:"margin",p:"padding"},hI={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},SE={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},dI=uI(t=>{if(t.length>2)if(SE[t])t=SE[t];else return[t];const[e,n]=t.split(""),i=fI[e],r=hI[n]||"";return Array.isArray(r)?r.map(s=>i+s):[i+r]}),K0=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Z0=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...K0,...Z0];function vu(t,e,n,i){const r=ap(t,e,!0)??n;return typeof r=="number"||typeof r=="string"?s=>typeof s=="string"?s:typeof r=="string"?`calc(${s} * ${r})`:r*s:Array.isArray(r)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),c=r[a];return s>=0?c:typeof c=="number"?-c:`-${c}`}:typeof r=="function"?r:()=>{}}function Q0(t){return vu(t,"spacing",8)}function Tu(t,e){return typeof e=="string"||e==null?e:t(e)}function pI(t,e){return n=>t.reduce((i,r)=>(i[r]=Tu(e,n),i),{})}function gI(t,e,n,i){if(!e.includes(n))return null;const r=dI(n),s=pI(r,i),a=t[n];return Mr(t,a,s)}function JR(t,e){const n=Q0(t.theme);return Object.keys(t).map(i=>gI(t,e,i,n)).reduce(Uc,{})}function Ct(t){return JR(t,K0)}Ct.propTypes={};Ct.filterProps=K0;function Ot(t){return JR(t,Z0)}Ot.propTypes={};Ot.filterProps=Z0;function eC(t=8,e=Q0({spacing:t})){if(t.mui)return t;const n=(...i)=>(i.length===0?[1]:i).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function lp(...t){const e=t.reduce((i,r)=>(r.filterProps.forEach(s=>{i[s]=r}),i),{}),n=i=>Object.keys(i).reduce((r,s)=>e[s]?Uc(r,e[s](i)):r,{});return n.propTypes={},n.filterProps=t.reduce((i,r)=>i.concat(r.filterProps),[]),n}function ci(t){return typeof t!="number"?t:`${t}px solid`}function mi(t,e){return Bt({prop:t,themeKey:"borders",transform:e})}const mI=mi("border",ci),yI=mi("borderTop",ci),_I=mi("borderRight",ci),bI=mi("borderBottom",ci),vI=mi("borderLeft",ci),TI=mi("borderColor"),SI=mi("borderTopColor"),EI=mi("borderRightColor"),wI=mi("borderBottomColor"),AI=mi("borderLeftColor"),xI=mi("outline",ci),RI=mi("outlineColor"),cp=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=vu(t.theme,"shape.borderRadius",4),n=i=>({borderRadius:Tu(e,i)});return Mr(t,t.borderRadius,n)}return null};cp.propTypes={};cp.filterProps=["borderRadius"];lp(mI,yI,_I,bI,vI,TI,SI,EI,wI,AI,cp,xI,RI);const up=t=>{if(t.gap!==void 0&&t.gap!==null){const e=vu(t.theme,"spacing",8),n=i=>({gap:Tu(e,i)});return Mr(t,t.gap,n)}return null};up.propTypes={};up.filterProps=["gap"];const fp=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=vu(t.theme,"spacing",8),n=i=>({columnGap:Tu(e,i)});return Mr(t,t.columnGap,n)}return null};fp.propTypes={};fp.filterProps=["columnGap"];const hp=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=vu(t.theme,"spacing",8),n=i=>({rowGap:Tu(e,i)});return Mr(t,t.rowGap,n)}return null};hp.propTypes={};hp.filterProps=["rowGap"];const CI=Bt({prop:"gridColumn"}),OI=Bt({prop:"gridRow"}),MI=Bt({prop:"gridAutoFlow"}),PI=Bt({prop:"gridAutoColumns"}),NI=Bt({prop:"gridAutoRows"}),kI=Bt({prop:"gridTemplateColumns"}),II=Bt({prop:"gridTemplateRows"}),DI=Bt({prop:"gridTemplateAreas"}),BI=Bt({prop:"gridArea"});lp(up,fp,hp,CI,OI,MI,PI,NI,kI,II,DI,BI);function Wa(t,e){return e==="grey"?e:t}const LI=Bt({prop:"color",themeKey:"palette",transform:Wa}),UI=Bt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Wa}),FI=Bt({prop:"backgroundColor",themeKey:"palette",transform:Wa});lp(LI,UI,FI);function $n(t){return t<=1&&t!==0?`${t*100}%`:t}const zI=Bt({prop:"width",transform:$n}),G0=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,s,a,c,f;const i=((a=(s=(r=t.theme)==null?void 0:r.breakpoints)==null?void 0:s.values)==null?void 0:a[n])||op[n];return i?((f=(c=t.theme)==null?void 0:c.breakpoints)==null?void 0:f.unit)!=="px"?{maxWidth:`${i}${t.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:$n(n)}};return Mr(t,t.maxWidth,e)}return null};G0.filterProps=["maxWidth"];const VI=Bt({prop:"minWidth",transform:$n}),$I=Bt({prop:"height",transform:$n}),jI=Bt({prop:"maxHeight",transform:$n}),HI=Bt({prop:"minHeight",transform:$n});Bt({prop:"size",cssProperty:"width",transform:$n});Bt({prop:"size",cssProperty:"height",transform:$n});const WI=Bt({prop:"boxSizing"});lp(zI,G0,VI,$I,jI,HI,WI);const Su={border:{themeKey:"borders",transform:ci},borderTop:{themeKey:"borders",transform:ci},borderRight:{themeKey:"borders",transform:ci},borderBottom:{themeKey:"borders",transform:ci},borderLeft:{themeKey:"borders",transform:ci},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ci},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:cp},color:{themeKey:"palette",transform:Wa},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Wa},backgroundColor:{themeKey:"palette",transform:Wa},p:{style:Ot},pt:{style:Ot},pr:{style:Ot},pb:{style:Ot},pl:{style:Ot},px:{style:Ot},py:{style:Ot},padding:{style:Ot},paddingTop:{style:Ot},paddingRight:{style:Ot},paddingBottom:{style:Ot},paddingLeft:{style:Ot},paddingX:{style:Ot},paddingY:{style:Ot},paddingInline:{style:Ot},paddingInlineStart:{style:Ot},paddingInlineEnd:{style:Ot},paddingBlock:{style:Ot},paddingBlockStart:{style:Ot},paddingBlockEnd:{style:Ot},m:{style:Ct},mt:{style:Ct},mr:{style:Ct},mb:{style:Ct},ml:{style:Ct},mx:{style:Ct},my:{style:Ct},margin:{style:Ct},marginTop:{style:Ct},marginRight:{style:Ct},marginBottom:{style:Ct},marginLeft:{style:Ct},marginX:{style:Ct},marginY:{style:Ct},marginInline:{style:Ct},marginInlineStart:{style:Ct},marginInlineEnd:{style:Ct},marginBlock:{style:Ct},marginBlockStart:{style:Ct},marginBlockEnd:{style:Ct},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:up},rowGap:{style:hp},columnGap:{style:fp},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:$n},maxWidth:{style:G0},minWidth:{transform:$n},height:{transform:$n},maxHeight:{transform:$n},minHeight:{transform:$n},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function XI(...t){const e=t.reduce((i,r)=>i.concat(Object.keys(r)),[]),n=new Set(e);return t.every(i=>n.size===Object.keys(i).length)}function qI(t,e){return typeof t=="function"?t(e):t}function YI(){function t(n,i,r,s){const a={[n]:i,theme:r},c=s[n];if(!c)return{[n]:i};const{cssProperty:f=n,themeKey:h,transform:p,style:m}=c;if(i==null)return null;if(h==="typography"&&i==="inherit")return{[n]:i};const y=ap(r,h)||{};return m?m(a):Mr(a,i,v=>{let T=nd(y,p,v);return v===T&&typeof v=="string"&&(T=nd(y,p,`${n}${v==="default"?"":rt(v)}`,v)),f===!1?T:{[f]:T}})}function e(n){const{sx:i,theme:r={}}=n||{};if(!i)return null;const s=r.unstable_sxConfig??Su;function a(c){let f=c;if(typeof c=="function")f=c(r);else if(typeof c!="object")return c;if(!f)return null;const h=lI(r.breakpoints),p=Object.keys(h);let m=h;return Object.keys(f).forEach(y=>{const b=qI(f[y],r);if(b!=null)if(typeof b=="object")if(s[y])m=Uc(m,t(y,b,r,s));else{const v=Mr({theme:r},b,T=>({[y]:T}));XI(v,b)?m[y]=e({sx:b,theme:r}):m=Uc(m,v)}else m=Uc(m,t(y,b,r,s))}),nI(r,cI(p,m))}return Array.isArray(i)?i.map(a):a(i)}return e}const yo=YI();yo.filterProps=["sx"];function KI(t,e){var i;const n=this;if(n.vars){if(!((i=n.colorSchemes)!=null&&i[t])||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return n.palette.mode===t?e:{}}function dp(t={},...e){const{breakpoints:n={},palette:i={},spacing:r,shape:s={},...a}=t,c=tI(n),f=eC(r);let h=Hn({breakpoints:c,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:f,shape:{...oI,...s}},a);return h=sI(h),h.applyStyles=KI,h=e.reduce((p,m)=>Hn(p,m),h),h.unstable_sxConfig={...Su,...a==null?void 0:a.unstable_sxConfig},h.unstable_sx=function(m){return yo({sx:m,theme:this})},h}function ZI(t){return Object.keys(t).length===0}function tC(t=null){const e=I.useContext(_u);return!e||ZI(e)?t:e}const QI=dp();function J0(t=QI){return tC(t)}function GI({styles:t,themeId:e,defaultTheme:n={}}){const i=J0(n),r=typeof t=="function"?t(e&&i[e]||i):t;return de.jsx(ZR,{styles:r})}const JI=t=>{var i;const e={systemProps:{},otherProps:{}},n=((i=t==null?void 0:t.theme)==null?void 0:i.unstable_sxConfig)??Su;return Object.keys(t).forEach(r=>{n[r]?e.systemProps[r]=t[r]:e.otherProps[r]=t[r]}),e};function eD(t){const{sx:e,...n}=t,{systemProps:i,otherProps:r}=JI(n);let s;return Array.isArray(e)?s=[i,...e]:typeof e=="function"?s=(...a)=>{const c=e(...a);return Yi(c)?{...i,...c}:i}:s={...i,...e},{...r,sx:s}}const EE=t=>t,tD=()=>{let t=EE;return{configure(e){t=e},generate(e){return t(e)},reset(){t=EE}}},nD=tD();function nC(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=nC(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Ke(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=nC(t))&&(i&&(i+=" "),i+=e);return i}const iD={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function yi(t,e,n="Mui"){const i=iD[e];return i?`${n}-${i}`:`${nD.generate(t)}-${e}`}function Mi(t,e,n="Mui"){const i={};return e.forEach(r=>{i[r]=yi(t,r,n)}),i}function iC(t){const{variants:e,...n}=t,i={variants:e,style:_E(n),isProcessed:!0};return i.style===n||e&&e.forEach(r=>{typeof r.style!="function"&&(r.style=_E(r.style))}),i}const rD=dp();function sy(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function sD(t){return t?(e,n)=>n[t]:null}function oD(t,e,n){t.theme=lD(t.theme)?n:t.theme[e]||t.theme}function Dh(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(i=>Dh(t,i));if(Array.isArray(n==null?void 0:n.variants)){let i;if(n.isProcessed)i=n.style;else{const{variants:r,...s}=n;i=s}return rC(t,n.variants,[i])}return n!=null&&n.isProcessed?n.style:n}function rC(t,e,n=[]){var r;let i;e:for(let s=0;s<e.length;s+=1){const a=e[s];if(typeof a.props=="function"){if(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),!a.props(i))continue}else for(const c in a.props)if(t[c]!==a.props[c]&&((r=t.ownerState)==null?void 0:r[c])!==a.props[c])continue e;typeof a.style=="function"?(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),n.push(a.style(i))):n.push(a.style)}return n}function sC(t={}){const{themeId:e,defaultTheme:n=rD,rootShouldForwardProp:i=sy,slotShouldForwardProp:r=sy}=t;function s(c){oD(c,e,n)}return(c,f={})=>{Qk(c,R=>R.filter(D=>D!==yo));const{name:h,slot:p,skipVariantsResolver:m,skipSx:y,overridesResolver:b=sD(uD(p)),...v}=f,T=m!==void 0?m:p&&p!=="Root"&&p!=="root"||!1,S=y||!1;let w=sy;p==="Root"||p==="root"?w=i:p?w=r:cD(c)&&(w=void 0);const C=Zk(c,{shouldForwardProp:w,label:aD(),...v}),A=R=>{if(typeof R=="function"&&R.__emotion_real!==R)return function(z){return Dh(z,R)};if(Yi(R)){const D=iC(R);return D.variants?function(j){return Dh(j,D)}:D.style}return R},O=(...R)=>{const D=[],z=R.map(A),j=[];if(D.push(s),h&&b&&j.push(function(te){var N,U;const fe=(U=(N=te.theme.components)==null?void 0:N[h])==null?void 0:U.styleOverrides;if(!fe)return null;const pe={};for(const L in fe)pe[L]=Dh(te,fe[L]);return b(te,pe)}),h&&!T&&j.push(function(te){var pe,N;const se=te.theme,fe=(N=(pe=se==null?void 0:se.components)==null?void 0:pe[h])==null?void 0:N.variants;return fe?rC(te,fe):null}),S||j.push(yo),Array.isArray(z[0])){const H=z.shift(),te=new Array(D.length).fill(""),se=new Array(j.length).fill("");let fe;fe=[...te,...H,...se],fe.raw=[...te,...H.raw,...se],D.unshift(fe)}const V=[...D,...z,...j],x=C(...V);return c.muiName&&(x.muiName=c.muiName),x};return C.withConfig&&(O.withConfig=C.withConfig),O}}function aD(t,e){return void 0}function lD(t){for(const e in t)return!1;return!0}function cD(t){return typeof t=="string"&&t.charCodeAt(0)>96}function uD(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const fD=sC();function id(t,e){const n={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const r=i;if(r==="components"||r==="slots")n[r]={...t[r],...n[r]};else if(r==="componentsProps"||r==="slotProps"){const s=t[r],a=e[r];if(!a)n[r]=s||{};else if(!s)n[r]=a;else{n[r]={...a};for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=c;n[r][f]=id(s[f],a[f])}}}else n[r]===void 0&&(n[r]=t[r])}return n}function hD(t){const{theme:e,name:n,props:i}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?i:id(e.components[n].defaultProps,i)}function dD({props:t,name:e,defaultTheme:n,themeId:i}){let r=J0(n);return i&&(r=r[i]||r),hD({theme:r,name:e,props:t})}const Ga=typeof window<"u"?I.useLayoutEffect:I.useEffect;function pD(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function eb(t,e=0,n=1){return pD(t,e,n)}function gD(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,r)=>r<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Ss(t){if(t.type)return t;if(t.charAt(0)==="#")return Ss(gD(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(mo(9,t));let i=t.substring(e+1,t.length-1),r;if(n==="color"){if(i=i.split(" "),r=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(mo(10,r))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:n,values:i,colorSpace:r}}const mD=t=>{const e=Ss(t);return e.values.slice(0,3).map((n,i)=>e.type.includes("hsl")&&i!==0?`${n}%`:n).join(" ")},Mc=(t,e)=>{try{return mD(t)}catch{return t}};function pp(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return e.includes("rgb")?i=i.map((r,s)=>s<3?parseInt(r,10):r):e.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.includes("color")?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function oC(t){t=Ss(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,s=i*Math.min(r,1-r),a=(h,p=(h+n/30)%12)=>r-s*Math.max(Math.min(p-3,9-p,1),-1);let c="rgb";const f=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(c+="a",f.push(e[3])),pp({type:c,values:f})}function c_(t){t=Ss(t);let e=t.type==="hsl"||t.type==="hsla"?Ss(oC(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function yD(t,e){const n=c_(t),i=c_(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function _o(t,e){return t=Ss(t),e=eb(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,pp(t)}function Yf(t,e,n){try{return _o(t,e)}catch{return t}}function tb(t,e){if(t=Ss(t),e=eb(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return pp(t)}function at(t,e,n){try{return tb(t,e)}catch{return t}}function nb(t,e){if(t=Ss(t),e=eb(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return pp(t)}function lt(t,e,n){try{return nb(t,e)}catch{return t}}function _D(t,e=.15){return c_(t)>.5?tb(t,e):nb(t,e)}function Kf(t,e,n){try{return _D(t,e)}catch{return t}}function wE(t){return t&&t.ownerDocument||document}function u_(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let AE=0;function bD(t){const[e,n]=I.useState(t),i=t||e;return I.useEffect(()=>{e==null&&(AE+=1,n(`mui-${AE}`))},[e]),i}const vD={...r_},xE=vD.useId;function aC(t){if(xE!==void 0){const e=xE();return t??e}return bD(t)}function TD({controlled:t,default:e,name:n,state:i="value"}){const{current:r}=I.useRef(t!==void 0),[s,a]=I.useState(e),c=r?t:s,f=I.useCallback(h=>{r||a(h)},[]);return[c,f]}function Xa(t){const e=I.useRef(t);return Ga(()=>{e.current=t}),I.useRef((...n)=>(0,e.current)(...n)).current}function Pr(...t){return I.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{u_(n,e)})},t)}const RE={};function lC(t,e){const n=I.useRef(RE);return n.current===RE&&(n.current=t(e)),n}const SD=[];function ED(t){I.useEffect(t,SD)}class gp{constructor(){M(this,"currentId",null);M(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});M(this,"disposeEffect",()=>this.clear)}static create(){return new gp}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function Da(){const t=lC(gp.create).current;return ED(t.disposeEffect),t}function rd(t){try{return t.matches(":focus-visible")}catch{}return!1}function Pi(t,e,n=void 0){const i={};for(const r in t){const s=t[r];let a="",c=!0;for(let f=0;f<s.length;f+=1){const h=s[f];h&&(a+=(c===!0?"":" ")+e(h),c=!1,n&&n[h]&&(a+=" "+n[h]))}i[r]=a}return i}function wD(t){return typeof t=="string"}function cC(t,e,n){return t===void 0||wD(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function AD(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(i=>i.match(/^on[A-Z]/)&&typeof t[i]=="function"&&!e.includes(i)).forEach(i=>{n[i]=t[i]}),n}function CE(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function uC(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:s}=t;if(!e){const b=Ke(n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),v={...n==null?void 0:n.style,...r==null?void 0:r.style,...i==null?void 0:i.style},T={...n,...r,...i};return b.length>0&&(T.className=b),Object.keys(v).length>0&&(T.style=v),{props:T,internalRef:void 0}}const a=AD({...r,...i}),c=CE(i),f=CE(r),h=e(a),p=Ke(h==null?void 0:h.className,n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),m={...h==null?void 0:h.style,...n==null?void 0:n.style,...r==null?void 0:r.style,...i==null?void 0:i.style},y={...h,...n,...f,...c};return p.length>0&&(y.className=p),Object.keys(m).length>0&&(y.style=m),{props:y,internalRef:h.ref}}function fC(t,e,n){return typeof t=="function"?t(e,n):t}function xD(t){var m;const{elementType:e,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:r=!1,...s}=t,a=r?{}:fC(n,i),{props:c,internalRef:f}=uC({...s,externalSlotProps:a}),h=Pr(f,a==null?void 0:a.ref,(m=t.additionalProps)==null?void 0:m.ref);return cC(e,{...c,ref:h},i)}function ib(t){var e;return parseInt(I.version,10)>=19?((e=t==null?void 0:t.props)==null?void 0:e.ref)||null:(t==null?void 0:t.ref)||null}const hC=I.createContext(null);function rb(){return I.useContext(hC)}const RD=typeof Symbol=="function"&&Symbol.for,CD=RD?Symbol.for("mui.nested"):"__THEME_NESTED__";function OD(t,e){return typeof e=="function"?e(t):{...t,...e}}function MD(t){const{children:e,theme:n}=t,i=rb(),r=I.useMemo(()=>{const s=i===null?{...n}:OD(i,n);return s!=null&&(s[CD]=i!==null),s},[n,i]);return de.jsx(hC.Provider,{value:r,children:e})}const dC=I.createContext();function PD({value:t,...e}){return de.jsx(dC.Provider,{value:t??!0,...e})}const pC=()=>I.useContext(dC)??!1,gC=I.createContext(void 0);function ND({value:t,children:e}){return de.jsx(gC.Provider,{value:t,children:e})}function kD(t){const{theme:e,name:n,props:i}=t;if(!e||!e.components||!e.components[n])return i;const r=e.components[n];return r.defaultProps?id(r.defaultProps,i):!r.styleOverrides&&!r.variants?id(r,i):i}function ID({props:t,name:e}){const n=I.useContext(gC);return kD({props:t,name:e,theme:{components:n}})}const OE={};function ME(t,e,n,i=!1){return I.useMemo(()=>{const r=t&&e[t]||e;if(typeof n=="function"){const s=n(r),a=t?{...e,[t]:s}:s;return i?()=>a:a}return t?{...e,[t]:n}:{...e,...n}},[t,e,n,i])}function mC(t){const{children:e,theme:n,themeId:i}=t,r=tC(OE),s=rb()||OE,a=ME(i,r,n),c=ME(i,s,n,!0),f=(i?a[i]:a).direction==="rtl";return de.jsx(MD,{theme:c,children:de.jsx(_u.Provider,{value:a,children:de.jsx(PD,{value:f,children:de.jsx(ND,{value:i?a[i].components:a.components,children:e})})})})}const PE={theme:void 0};function DD(t){let e,n;return function(r){let s=e;return(s===void 0||r.theme!==n)&&(PE.theme=r.theme,s=iC(t(PE)),e=s,n=r.theme),s}}const sb="mode",ob="color-scheme",BD="data-color-scheme";function LD(t){const{defaultMode:e="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:i="dark",modeStorageKey:r=sb,colorSchemeStorageKey:s=ob,attribute:a=BD,colorSchemeNode:c="document.documentElement",nonce:f}=t||{};let h="",p=a;if(a==="class"&&(p=".%s"),a==="data"&&(p="[data-%s]"),p.startsWith(".")){const y=p.substring(1);h+=`${c}.classList.remove('${y}'.replace('%s', light), '${y}'.replace('%s', dark));
      ${c}.classList.add('${y}'.replace('%s', colorScheme));`}const m=p.match(/\[([^\]]+)\]/);if(m){const[y,b]=m[1].split("=");b||(h+=`${c}.removeAttribute('${y}'.replace('%s', light));
      ${c}.removeAttribute('${y}'.replace('%s', dark));`),h+=`
      ${c}.setAttribute('${y}'.replace('%s', colorScheme), ${b?`${b}.replace('%s', colorScheme)`:'""'});`}else h+=`${c}.setAttribute('${p}', colorScheme);`;return de.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${r}') || '${e}';
  const dark = localStorage.getItem('${s}-dark') || '${i}';
  const light = localStorage.getItem('${s}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${h}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function NE(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function yC(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function UD(t){return yC(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function oy(t,e){if(typeof window>"u")return;let n;try{n=localStorage.getItem(t)||void 0,n||localStorage.setItem(t,e)}catch{}return n||e}function FD(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:i,supportedColorSchemes:r=[],modeStorageKey:s=sb,colorSchemeStorageKey:a=ob,storageWindow:c=typeof window>"u"?void 0:window,noSsr:f=!1}=t,h=r.join(","),p=r.length>1,[m,y]=I.useState(()=>{const O=oy(s,e),R=oy(`${a}-light`,n),D=oy(`${a}-dark`,i);return{mode:O,systemMode:NE(O),lightColorScheme:R,darkColorScheme:D}}),[b,v]=I.useState(f||!p);I.useEffect(()=>{v(!0)},[]);const T=UD(m),S=I.useCallback(O=>{y(R=>{if(O===R.mode)return R;const D=O??e;try{localStorage.setItem(s,D)}catch{}return{...R,mode:D,systemMode:NE(D)}})},[s,e]),w=I.useCallback(O=>{O?typeof O=="string"?O&&!h.includes(O)?console.error(`\`${O}\` does not exist in \`theme.colorSchemes\`.`):y(R=>{const D={...R};return yC(R,z=>{try{localStorage.setItem(`${a}-${z}`,O)}catch{}z==="light"&&(D.lightColorScheme=O),z==="dark"&&(D.darkColorScheme=O)}),D}):y(R=>{const D={...R},z=O.light===null?n:O.light,j=O.dark===null?i:O.dark;if(z)if(!h.includes(z))console.error(`\`${z}\` does not exist in \`theme.colorSchemes\`.`);else{D.lightColorScheme=z;try{localStorage.setItem(`${a}-light`,z)}catch{}}if(j)if(!h.includes(j))console.error(`\`${j}\` does not exist in \`theme.colorSchemes\`.`);else{D.darkColorScheme=j;try{localStorage.setItem(`${a}-dark`,j)}catch{}}return D}):y(R=>{try{localStorage.setItem(`${a}-light`,n),localStorage.setItem(`${a}-dark`,i)}catch{}return{...R,lightColorScheme:n,darkColorScheme:i}})},[h,a,n,i]),C=I.useCallback(O=>{m.mode==="system"&&y(R=>{const D=O!=null&&O.matches?"dark":"light";return R.systemMode===D?R:{...R,systemMode:D}})},[m.mode]),A=I.useRef(C);return A.current=C,I.useEffect(()=>{if(typeof window.matchMedia!="function"||!p)return;const O=(...D)=>A.current(...D),R=window.matchMedia("(prefers-color-scheme: dark)");return R.addListener(O),O(R),()=>{R.removeListener(O)}},[p]),I.useEffect(()=>{if(c&&p){const O=R=>{const D=R.newValue;typeof R.key=="string"&&R.key.startsWith(a)&&(!D||h.match(D))&&(R.key.endsWith("light")&&w({light:D}),R.key.endsWith("dark")&&w({dark:D})),R.key===s&&(!D||["light","dark","system"].includes(D))&&S(D||e)};return c.addEventListener("storage",O),()=>{c.removeEventListener("storage",O)}}},[w,S,s,a,h,e,c,p]),{...m,mode:b?m.mode:void 0,systemMode:b?m.systemMode:void 0,colorScheme:b?T:void 0,setMode:S,setColorScheme:w}}const zD="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function VD(t){const{themeId:e,theme:n={},modeStorageKey:i=sb,colorSchemeStorageKey:r=ob,disableTransitionOnChange:s=!1,defaultColorScheme:a,resolveTheme:c}=t,f={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},h=I.createContext(void 0),p=()=>I.useContext(h)||f,m={},y={};function b(w){var ki,Wt,ir,Ii;const{children:C,theme:A,modeStorageKey:O=i,colorSchemeStorageKey:R=r,disableTransitionOnChange:D=s,storageWindow:z=typeof window>"u"?void 0:window,documentNode:j=typeof document>"u"?void 0:document,colorSchemeNode:V=typeof document>"u"?void 0:document.documentElement,disableNestedContext:x=!1,disableStyleSheetGeneration:H=!1,defaultMode:te="system",noSsr:se}=w,fe=I.useRef(!1),pe=rb(),N=I.useContext(h),U=!!N&&!x,L=I.useMemo(()=>A||(typeof n=="function"?n():n),[A]),X=L[e],P=X||L,{colorSchemes:$=m,components:Q=y,cssVarPrefix:ne}=P,re=Object.keys($).filter(dt=>!!$[dt]).join(","),ue=I.useMemo(()=>re.split(","),[re]),ye=typeof a=="string"?a:a.light,Se=typeof a=="string"?a:a.dark,me=$[ye]&&$[Se]?te:((Wt=(ki=$[P.defaultColorScheme])==null?void 0:ki.palette)==null?void 0:Wt.mode)||((ir=P.palette)==null?void 0:ir.mode),{mode:Re,setMode:ve,systemMode:Qe,lightColorScheme:Ge,darkColorScheme:bt,colorScheme:kt,setColorScheme:Ce}=FD({supportedColorSchemes:ue,defaultLightColorScheme:ye,defaultDarkColorScheme:Se,modeStorageKey:O,colorSchemeStorageKey:R,defaultMode:me,storageWindow:z,noSsr:se});let xe=Re,Ye=kt;U&&(xe=N.mode,Ye=N.colorScheme);const vt=I.useMemo(()=>{var Yn;const dt=Ye||P.defaultColorScheme,mt=((Yn=P.generateThemeVars)==null?void 0:Yn.call(P))||P.vars,It={...P,components:Q,colorSchemes:$,cssVarPrefix:ne,vars:mt};if(typeof It.generateSpacing=="function"&&(It.spacing=It.generateSpacing()),dt){const pt=$[dt];pt&&typeof pt=="object"&&Object.keys(pt).forEach(nn=>{pt[nn]&&typeof pt[nn]=="object"?It[nn]={...It[nn],...pt[nn]}:It[nn]=pt[nn]})}return c?c(It):It},[P,Ye,Q,$,ne]),tn=P.colorSchemeSelector;Ga(()=>{if(Ye&&V&&tn&&tn!=="media"){const dt=tn;let mt=tn;if(dt==="class"&&(mt=".%s"),dt==="data"&&(mt="[data-%s]"),dt!=null&&dt.startsWith("data-")&&!dt.includes("%s")&&(mt=`[${dt}="%s"]`),mt.startsWith("."))V.classList.remove(...ue.map(It=>mt.substring(1).replace("%s",It))),V.classList.add(mt.substring(1).replace("%s",Ye));else{const It=mt.replace("%s",Ye).match(/\[([^\]]+)\]/);if(It){const[Yn,pt]=It[1].split("=");pt||ue.forEach(nn=>{V.removeAttribute(Yn.replace(Ye,nn))}),V.setAttribute(Yn,pt?pt.replace(/"|'/g,""):"")}else V.setAttribute(mt,Ye)}}},[Ye,tn,V,ue]),I.useEffect(()=>{let dt;if(D&&fe.current&&j){const mt=j.createElement("style");mt.appendChild(j.createTextNode(zD)),j.head.appendChild(mt),window.getComputedStyle(j.body),dt=setTimeout(()=>{j.head.removeChild(mt)},1)}return()=>{clearTimeout(dt)}},[Ye,D,j]),I.useEffect(()=>(fe.current=!0,()=>{fe.current=!1}),[]);const Ht=I.useMemo(()=>({allColorSchemes:ue,colorScheme:Ye,darkColorScheme:bt,lightColorScheme:Ge,mode:xe,setColorScheme:Ce,setMode:ve,systemMode:Qe}),[ue,Ye,bt,Ge,xe,Ce,ve,Qe,vt.colorSchemeSelector]);let fn=!0;(H||P.cssVariables===!1||U&&(pe==null?void 0:pe.cssVarPrefix)===ne)&&(fn=!1);const we=de.jsxs(I.Fragment,{children:[de.jsx(mC,{themeId:X?e:void 0,theme:vt,children:C}),fn&&de.jsx(ZR,{styles:((Ii=vt.generateStyleSheets)==null?void 0:Ii.call(vt))||[]})]});return U?we:de.jsx(h.Provider,{value:Ht,children:we})}const v=typeof a=="string"?a:a.light,T=typeof a=="string"?a:a.dark;return{CssVarsProvider:b,useColorScheme:p,getInitColorSchemeScript:w=>LD({colorSchemeStorageKey:r,defaultLightColorScheme:v,defaultDarkColorScheme:T,modeStorageKey:i,...w})}}function $D(t=""){function e(...i){if(!i.length)return"";const r=i[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${r}${e(...i.slice(1))})`:`, ${r}`}return(i,...r)=>`var(--${t?`${t}-`:""}${i}${e(...r)})`}const kE=(t,e,n,i=[])=>{let r=t;e.forEach((s,a)=>{a===e.length-1?Array.isArray(r)?r[Number(s)]=n:r&&typeof r=="object"&&(r[s]=n):r&&typeof r=="object"&&(r[s]||(r[s]=i.includes(s)?[]:{}),r=r[s])})},jD=(t,e,n)=>{function i(r,s=[],a=[]){Object.entries(r).forEach(([c,f])=>{(!n||n&&!n([...s,c]))&&f!=null&&(typeof f=="object"&&Object.keys(f).length>0?i(f,[...s,c],Array.isArray(f)?[...a,c]:a):e([...s,c],f,a))})}i(t)},HD=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>t.includes(i))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function ay(t,e){const{prefix:n,shouldSkipGeneratingVar:i}=e||{},r={},s={},a={};return jD(t,(c,f,h)=>{if((typeof f=="string"||typeof f=="number")&&(!i||!i(c,f))){const p=`--${n?`${n}-`:""}${c.join("-")}`,m=HD(c,f);Object.assign(r,{[p]:m}),kE(s,c,`var(${p})`,h),kE(a,c,`var(${p}, ${m})`,h)}},c=>c[0]==="vars"),{css:r,vars:s,varsWithDefaults:a}}function WD(t,e={}){const{getSelector:n=S,disableCssColorScheme:i,colorSchemeSelector:r}=e,{colorSchemes:s={},components:a,defaultColorScheme:c="light",...f}=t,{vars:h,css:p,varsWithDefaults:m}=ay(f,e);let y=m;const b={},{[c]:v,...T}=s;if(Object.entries(T||{}).forEach(([A,O])=>{const{vars:R,css:D,varsWithDefaults:z}=ay(O,e);y=Hn(y,z),b[A]={css:D,vars:R}}),v){const{css:A,vars:O,varsWithDefaults:R}=ay(v,e);y=Hn(y,R),b[c]={css:A,vars:O}}function S(A,O){var D,z;let R=r;if(r==="class"&&(R=".%s"),r==="data"&&(R="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(R=`[${r}="%s"]`),A){if(R==="media")return t.defaultColorScheme===A?":root":{[`@media (prefers-color-scheme: ${((z=(D=s[A])==null?void 0:D.palette)==null?void 0:z.mode)||A})`]:{":root":O}};if(R)return t.defaultColorScheme===A?`:root, ${R.replace("%s",String(A))}`:R.replace("%s",String(A))}return":root"}return{vars:y,generateThemeVars:()=>{let A={...h};return Object.entries(b).forEach(([,{vars:O}])=>{A=Hn(A,O)}),A},generateStyleSheets:()=>{var j,V;const A=[],O=t.defaultColorScheme||"light";function R(x,H){Object.keys(H).length&&A.push(typeof x=="string"?{[x]:{...H}}:x)}R(n(void 0,{...p}),p);const{[O]:D,...z}=b;if(D){const{css:x}=D,H=(V=(j=s[O])==null?void 0:j.palette)==null?void 0:V.mode,te=!i&&H?{colorScheme:H,...x}:{...x};R(n(O,{...te}),te)}return Object.entries(z).forEach(([x,{css:H}])=>{var fe,pe;const te=(pe=(fe=s[x])==null?void 0:fe.palette)==null?void 0:pe.mode,se=!i&&te?{colorScheme:te,...H}:{...H};R(n(x,{...se}),se)}),A}}}function XD(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const qD=dp(),YD=fD("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${rt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),KD=t=>dD({props:t,name:"MuiContainer",defaultTheme:qD}),ZD=(t,e)=>{const n=f=>yi(e,f),{classes:i,fixed:r,disableGutters:s,maxWidth:a}=t,c={root:["root",a&&`maxWidth${rt(String(a))}`,r&&"fixed",s&&"disableGutters"]};return Pi(c,n,i)};function QD(t={}){const{createStyledComponent:e=YD,useThemeProps:n=KD,componentName:i="MuiContainer"}=t,r=e(({theme:a,ownerState:c})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!c.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}}),({theme:a,ownerState:c})=>c.fixed&&Object.keys(a.breakpoints.values).reduce((f,h)=>{const p=h,m=a.breakpoints.values[p];return m!==0&&(f[a.breakpoints.up(p)]={maxWidth:`${m}${a.breakpoints.unit}`}),f},{}),({theme:a,ownerState:c})=>({...c.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},...c.maxWidth&&c.maxWidth!=="xs"&&{[a.breakpoints.up(c.maxWidth)]:{maxWidth:`${a.breakpoints.values[c.maxWidth]}${a.breakpoints.unit}`}}}));return I.forwardRef(function(c,f){const h=n(c),{className:p,component:m="div",disableGutters:y=!1,fixed:b=!1,maxWidth:v="lg",classes:T,...S}=h,w={...h,component:m,disableGutters:y,fixed:b,maxWidth:v},C=ZD(w,i);return de.jsx(r,{as:m,ownerState:w,className:Ke(C.root,p),ref:f,...S})})}function _C(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qc.white,default:Qc.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const GD=_C();function bC(){return{text:{primary:Qc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const IE=bC();function DE(t,e,n,i){const r=i.light||i,s=i.dark||i*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=nb(t.main,r):e==="dark"&&(t.dark=tb(t.main,s)))}function JD(t="light"){return t==="dark"?{main:ba[200],light:ba[50],dark:ba[400]}:{main:ba[700],light:ba[400],dark:ba[800]}}function eB(t="light"){return t==="dark"?{main:_a[200],light:_a[50],dark:_a[400]}:{main:_a[500],light:_a[300],dark:_a[700]}}function tB(t="light"){return t==="dark"?{main:ya[500],light:ya[300],dark:ya[700]}:{main:ya[700],light:ya[400],dark:ya[800]}}function nB(t="light"){return t==="dark"?{main:va[400],light:va[300],dark:va[700]}:{main:va[700],light:va[500],dark:va[900]}}function iB(t="light"){return t==="dark"?{main:Ta[400],light:Ta[300],dark:Ta[700]}:{main:Ta[800],light:Ta[500],dark:Ta[900]}}function rB(t="light"){return t==="dark"?{main:mc[400],light:mc[300],dark:mc[700]}:{main:"#ed6c02",light:mc[500],dark:mc[900]}}function ab(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:i=.2,...r}=t,s=t.primary||JD(e),a=t.secondary||eB(e),c=t.error||tB(e),f=t.info||nB(e),h=t.success||iB(e),p=t.warning||rB(e);function m(T){return yD(T,IE.text.primary)>=n?IE.text.primary:GD.text.primary}const y=({color:T,name:S,mainShade:w=500,lightShade:C=300,darkShade:A=700})=>{if(T={...T},!T.main&&T[w]&&(T.main=T[w]),!T.hasOwnProperty("main"))throw new Error(mo(11,S?` (${S})`:"",w));if(typeof T.main!="string")throw new Error(mo(12,S?` (${S})`:"",JSON.stringify(T.main)));return DE(T,"light",C,i),DE(T,"dark",A,i),T.contrastText||(T.contrastText=m(T.main)),T};let b;return e==="light"?b=_C():e==="dark"&&(b=bC()),Hn({common:{...Qc},mode:e,primary:y({color:s,name:"primary"}),secondary:y({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:c,name:"error"}),warning:y({color:p,name:"warning"}),info:y({color:f,name:"info"}),success:y({color:h,name:"success"}),grey:QN,contrastThreshold:n,getContrastText:m,augmentColor:y,tonalOffset:i,...b},r)}function sB(t){const e={};return Object.entries(t).forEach(i=>{const[r,s]=i;typeof s=="object"&&(e[r]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function oB(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function aB(t){return Math.round(t*1e5)/1e5}const BE={textTransform:"uppercase"},LE='"Roboto", "Helvetica", "Arial", sans-serif';function vC(t,e){const{fontFamily:n=LE,fontSize:i=14,fontWeightLight:r=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:c=700,htmlFontSize:f=16,allVariants:h,pxToRem:p,...m}=typeof e=="function"?e(t):e,y=i/14,b=p||(S=>`${S/f*y}rem`),v=(S,w,C,A,O)=>({fontFamily:n,fontWeight:S,fontSize:b(w),lineHeight:C,...n===LE?{letterSpacing:`${aB(A/w)}em`}:{},...O,...h}),T={h1:v(r,96,1.167,-1.5),h2:v(r,60,1.2,-.5),h3:v(s,48,1.167,0),h4:v(s,34,1.235,.25),h5:v(s,24,1.334,0),h6:v(a,20,1.6,.15),subtitle1:v(s,16,1.75,.15),subtitle2:v(a,14,1.57,.1),body1:v(s,16,1.5,.15),body2:v(s,14,1.43,.15),button:v(a,14,1.75,.4,BE),caption:v(s,12,1.66,.4),overline:v(s,12,2.66,1,BE),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Hn({htmlFontSize:f,pxToRem:b,fontFamily:n,fontSize:i,fontWeightLight:r,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:c,...T},m,{clone:!1})}const lB=.2,cB=.14,uB=.12;function yt(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${lB})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${cB})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${uB})`].join(",")}const fB=["none",yt(0,2,1,-1,0,1,1,0,0,1,3,0),yt(0,3,1,-2,0,2,2,0,0,1,5,0),yt(0,3,3,-2,0,3,4,0,0,1,8,0),yt(0,2,4,-1,0,4,5,0,0,1,10,0),yt(0,3,5,-1,0,5,8,0,0,1,14,0),yt(0,3,5,-1,0,6,10,0,0,1,18,0),yt(0,4,5,-2,0,7,10,1,0,2,16,1),yt(0,5,5,-3,0,8,10,1,0,3,14,2),yt(0,5,6,-3,0,9,12,1,0,3,16,2),yt(0,6,6,-3,0,10,14,1,0,4,18,3),yt(0,6,7,-4,0,11,15,1,0,4,20,3),yt(0,7,8,-4,0,12,17,2,0,5,22,4),yt(0,7,8,-4,0,13,19,2,0,5,24,4),yt(0,7,9,-4,0,14,21,2,0,5,26,4),yt(0,8,9,-5,0,15,22,2,0,6,28,5),yt(0,8,10,-5,0,16,24,2,0,6,30,5),yt(0,8,11,-5,0,17,26,2,0,6,32,5),yt(0,9,11,-5,0,18,28,2,0,7,34,6),yt(0,9,12,-6,0,19,29,2,0,7,36,6),yt(0,10,13,-6,0,20,31,3,0,8,38,7),yt(0,10,13,-6,0,21,33,3,0,8,40,7),yt(0,10,14,-6,0,22,35,3,0,8,42,7),yt(0,11,14,-7,0,23,36,3,0,9,44,8),yt(0,11,15,-7,0,24,38,3,0,9,46,8)],hB={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},dB={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function UE(t){return`${Math.round(t)}ms`}function pB(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function gB(t){const e={...hB,...t.easing},n={...dB,...t.duration};return{getAutoHeightDuration:pB,create:(r=["all"],s={})=>{const{duration:a=n.standard,easing:c=e.easeInOut,delay:f=0,...h}=s;return(Array.isArray(r)?r:[r]).map(p=>`${p} ${typeof a=="string"?a:UE(a)} ${c} ${typeof f=="string"?f:UE(f)}`).join(",")},...t,easing:e,duration:n}}const mB={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function yB(t){return Yi(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function TC(t={}){const e={...t};function n(i){const r=Object.entries(i);for(let s=0;s<r.length;s++){const[a,c]=r[s];!yB(c)||a.startsWith("unstable_")?delete i[a]:Yi(c)&&(i[a]={...c},n(i[a]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function f_(t={},...e){const{breakpoints:n,mixins:i={},spacing:r,palette:s={},transitions:a={},typography:c={},shape:f,...h}=t;if(t.vars)throw new Error(mo(20));const p=ab(s),m=dp(t);let y=Hn(m,{mixins:oB(m.breakpoints,i),palette:p,shadows:fB.slice(),typography:vC(p,c),transitions:gB(a),zIndex:{...mB}});return y=Hn(y,h),y=e.reduce((b,v)=>Hn(b,v),y),y.unstable_sxConfig={...Su,...h==null?void 0:h.unstable_sxConfig},y.unstable_sx=function(v){return yo({sx:v,theme:this})},y.toRuntimeSource=TC,y}function h_(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const _B=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=h_(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function SC(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function EC(t){return t==="dark"?_B:[]}function bB(t){const{palette:e={mode:"light"},opacity:n,overlays:i,...r}=t,s=ab(e);return{palette:s,opacity:{...SC(s.mode),...n},overlays:i||EC(s.mode),...r}}function vB(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const TB=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],SB=t=>(e,n)=>{const i=t.rootSelector||":root",r=t.colorSchemeSelector;let s=r;if(r==="class"&&(s=".%s"),r==="data"&&(s="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(s=`[${r}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const a={};return TB(t.cssVarPrefix).forEach(c=>{a[c]=n[c],delete n[c]}),s==="media"?{[i]:n,"@media (prefers-color-scheme: dark)":{[i]:a}}:s?{[s.replace("%s",e)]:a,[`${i}, ${s.replace("%s",e)}`]:n}:{[i]:{...n,...a}}}if(s&&s!=="media")return`${i}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[i]:n}};if(s)return s.replace("%s",String(e))}return i};function EB(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function oe(t,e,n){!t[e]&&n&&(t[e]=n)}function Pc(t){return typeof t!="string"||!t.startsWith("hsl")?t:oC(t)}function Sr(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Mc(Pc(t[e])))}function wB(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const zi=t=>{try{return t()}catch{}},AB=(t="mui")=>$D(t);function ly(t,e,n,i){if(!e)return;e=e===!0?{}:e;const r=i==="dark"?"dark":"light";if(!n){t[i]=bB({...e,palette:{mode:r,...e==null?void 0:e.palette}});return}const{palette:s,...a}=f_({...n,palette:{mode:r,...e==null?void 0:e.palette}});return t[i]={...e,palette:s,opacity:{...SC(r),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||EC(r)},a}function xB(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:i,disableCssColorScheme:r=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=vB,colorSchemeSelector:c=n.light&&n.dark?"media":void 0,rootSelector:f=":root",...h}=t,p=Object.keys(n)[0],m=i||(n.light&&p!=="light"?"light":p),y=AB(s),{[m]:b,light:v,dark:T,...S}=n,w={...S};let C=b;if((m==="dark"&&!("dark"in n)||m==="light"&&!("light"in n))&&(C=!0),!C)throw new Error(mo(21,m));const A=ly(w,C,h,m);v&&!w.light&&ly(w,v,void 0,"light"),T&&!w.dark&&ly(w,T,void 0,"dark");let O={defaultColorScheme:m,...A,cssVarPrefix:s,colorSchemeSelector:c,rootSelector:f,getCssVar:y,colorSchemes:w,font:{...sB(A.typography),...A.font},spacing:wB(h.spacing)};Object.keys(O.colorSchemes).forEach(V=>{const x=O.colorSchemes[V].palette,H=te=>{const se=te.split("-"),fe=se[1],pe=se[2];return y(te,x[fe][pe])};if(x.mode==="light"&&(oe(x.common,"background","#fff"),oe(x.common,"onBackground","#000")),x.mode==="dark"&&(oe(x.common,"background","#000"),oe(x.common,"onBackground","#fff")),EB(x,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),x.mode==="light"){oe(x.Alert,"errorColor",at(x.error.light,.6)),oe(x.Alert,"infoColor",at(x.info.light,.6)),oe(x.Alert,"successColor",at(x.success.light,.6)),oe(x.Alert,"warningColor",at(x.warning.light,.6)),oe(x.Alert,"errorFilledBg",H("palette-error-main")),oe(x.Alert,"infoFilledBg",H("palette-info-main")),oe(x.Alert,"successFilledBg",H("palette-success-main")),oe(x.Alert,"warningFilledBg",H("palette-warning-main")),oe(x.Alert,"errorFilledColor",zi(()=>x.getContrastText(x.error.main))),oe(x.Alert,"infoFilledColor",zi(()=>x.getContrastText(x.info.main))),oe(x.Alert,"successFilledColor",zi(()=>x.getContrastText(x.success.main))),oe(x.Alert,"warningFilledColor",zi(()=>x.getContrastText(x.warning.main))),oe(x.Alert,"errorStandardBg",lt(x.error.light,.9)),oe(x.Alert,"infoStandardBg",lt(x.info.light,.9)),oe(x.Alert,"successStandardBg",lt(x.success.light,.9)),oe(x.Alert,"warningStandardBg",lt(x.warning.light,.9)),oe(x.Alert,"errorIconColor",H("palette-error-main")),oe(x.Alert,"infoIconColor",H("palette-info-main")),oe(x.Alert,"successIconColor",H("palette-success-main")),oe(x.Alert,"warningIconColor",H("palette-warning-main")),oe(x.AppBar,"defaultBg",H("palette-grey-100")),oe(x.Avatar,"defaultBg",H("palette-grey-400")),oe(x.Button,"inheritContainedBg",H("palette-grey-300")),oe(x.Button,"inheritContainedHoverBg",H("palette-grey-A100")),oe(x.Chip,"defaultBorder",H("palette-grey-400")),oe(x.Chip,"defaultAvatarColor",H("palette-grey-700")),oe(x.Chip,"defaultIconColor",H("palette-grey-700")),oe(x.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),oe(x.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),oe(x.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),oe(x.LinearProgress,"primaryBg",lt(x.primary.main,.62)),oe(x.LinearProgress,"secondaryBg",lt(x.secondary.main,.62)),oe(x.LinearProgress,"errorBg",lt(x.error.main,.62)),oe(x.LinearProgress,"infoBg",lt(x.info.main,.62)),oe(x.LinearProgress,"successBg",lt(x.success.main,.62)),oe(x.LinearProgress,"warningBg",lt(x.warning.main,.62)),oe(x.Skeleton,"bg",`rgba(${H("palette-text-primaryChannel")} / 0.11)`),oe(x.Slider,"primaryTrack",lt(x.primary.main,.62)),oe(x.Slider,"secondaryTrack",lt(x.secondary.main,.62)),oe(x.Slider,"errorTrack",lt(x.error.main,.62)),oe(x.Slider,"infoTrack",lt(x.info.main,.62)),oe(x.Slider,"successTrack",lt(x.success.main,.62)),oe(x.Slider,"warningTrack",lt(x.warning.main,.62));const te=Kf(x.background.default,.8);oe(x.SnackbarContent,"bg",te),oe(x.SnackbarContent,"color",zi(()=>x.getContrastText(te))),oe(x.SpeedDialAction,"fabHoverBg",Kf(x.background.paper,.15)),oe(x.StepConnector,"border",H("palette-grey-400")),oe(x.StepContent,"border",H("palette-grey-400")),oe(x.Switch,"defaultColor",H("palette-common-white")),oe(x.Switch,"defaultDisabledColor",H("palette-grey-100")),oe(x.Switch,"primaryDisabledColor",lt(x.primary.main,.62)),oe(x.Switch,"secondaryDisabledColor",lt(x.secondary.main,.62)),oe(x.Switch,"errorDisabledColor",lt(x.error.main,.62)),oe(x.Switch,"infoDisabledColor",lt(x.info.main,.62)),oe(x.Switch,"successDisabledColor",lt(x.success.main,.62)),oe(x.Switch,"warningDisabledColor",lt(x.warning.main,.62)),oe(x.TableCell,"border",lt(Yf(x.divider,1),.88)),oe(x.Tooltip,"bg",Yf(x.grey[700],.92))}if(x.mode==="dark"){oe(x.Alert,"errorColor",lt(x.error.light,.6)),oe(x.Alert,"infoColor",lt(x.info.light,.6)),oe(x.Alert,"successColor",lt(x.success.light,.6)),oe(x.Alert,"warningColor",lt(x.warning.light,.6)),oe(x.Alert,"errorFilledBg",H("palette-error-dark")),oe(x.Alert,"infoFilledBg",H("palette-info-dark")),oe(x.Alert,"successFilledBg",H("palette-success-dark")),oe(x.Alert,"warningFilledBg",H("palette-warning-dark")),oe(x.Alert,"errorFilledColor",zi(()=>x.getContrastText(x.error.dark))),oe(x.Alert,"infoFilledColor",zi(()=>x.getContrastText(x.info.dark))),oe(x.Alert,"successFilledColor",zi(()=>x.getContrastText(x.success.dark))),oe(x.Alert,"warningFilledColor",zi(()=>x.getContrastText(x.warning.dark))),oe(x.Alert,"errorStandardBg",at(x.error.light,.9)),oe(x.Alert,"infoStandardBg",at(x.info.light,.9)),oe(x.Alert,"successStandardBg",at(x.success.light,.9)),oe(x.Alert,"warningStandardBg",at(x.warning.light,.9)),oe(x.Alert,"errorIconColor",H("palette-error-main")),oe(x.Alert,"infoIconColor",H("palette-info-main")),oe(x.Alert,"successIconColor",H("palette-success-main")),oe(x.Alert,"warningIconColor",H("palette-warning-main")),oe(x.AppBar,"defaultBg",H("palette-grey-900")),oe(x.AppBar,"darkBg",H("palette-background-paper")),oe(x.AppBar,"darkColor",H("palette-text-primary")),oe(x.Avatar,"defaultBg",H("palette-grey-600")),oe(x.Button,"inheritContainedBg",H("palette-grey-800")),oe(x.Button,"inheritContainedHoverBg",H("palette-grey-700")),oe(x.Chip,"defaultBorder",H("palette-grey-700")),oe(x.Chip,"defaultAvatarColor",H("palette-grey-300")),oe(x.Chip,"defaultIconColor",H("palette-grey-300")),oe(x.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),oe(x.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),oe(x.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),oe(x.LinearProgress,"primaryBg",at(x.primary.main,.5)),oe(x.LinearProgress,"secondaryBg",at(x.secondary.main,.5)),oe(x.LinearProgress,"errorBg",at(x.error.main,.5)),oe(x.LinearProgress,"infoBg",at(x.info.main,.5)),oe(x.LinearProgress,"successBg",at(x.success.main,.5)),oe(x.LinearProgress,"warningBg",at(x.warning.main,.5)),oe(x.Skeleton,"bg",`rgba(${H("palette-text-primaryChannel")} / 0.13)`),oe(x.Slider,"primaryTrack",at(x.primary.main,.5)),oe(x.Slider,"secondaryTrack",at(x.secondary.main,.5)),oe(x.Slider,"errorTrack",at(x.error.main,.5)),oe(x.Slider,"infoTrack",at(x.info.main,.5)),oe(x.Slider,"successTrack",at(x.success.main,.5)),oe(x.Slider,"warningTrack",at(x.warning.main,.5));const te=Kf(x.background.default,.98);oe(x.SnackbarContent,"bg",te),oe(x.SnackbarContent,"color",zi(()=>x.getContrastText(te))),oe(x.SpeedDialAction,"fabHoverBg",Kf(x.background.paper,.15)),oe(x.StepConnector,"border",H("palette-grey-600")),oe(x.StepContent,"border",H("palette-grey-600")),oe(x.Switch,"defaultColor",H("palette-grey-300")),oe(x.Switch,"defaultDisabledColor",H("palette-grey-600")),oe(x.Switch,"primaryDisabledColor",at(x.primary.main,.55)),oe(x.Switch,"secondaryDisabledColor",at(x.secondary.main,.55)),oe(x.Switch,"errorDisabledColor",at(x.error.main,.55)),oe(x.Switch,"infoDisabledColor",at(x.info.main,.55)),oe(x.Switch,"successDisabledColor",at(x.success.main,.55)),oe(x.Switch,"warningDisabledColor",at(x.warning.main,.55)),oe(x.TableCell,"border",at(Yf(x.divider,1),.68)),oe(x.Tooltip,"bg",Yf(x.grey[700],.92))}Sr(x.background,"default"),Sr(x.background,"paper"),Sr(x.common,"background"),Sr(x.common,"onBackground"),Sr(x,"divider"),Object.keys(x).forEach(te=>{const se=x[te];te!=="tonalOffset"&&se&&typeof se=="object"&&(se.main&&oe(x[te],"mainChannel",Mc(Pc(se.main))),se.light&&oe(x[te],"lightChannel",Mc(Pc(se.light))),se.dark&&oe(x[te],"darkChannel",Mc(Pc(se.dark))),se.contrastText&&oe(x[te],"contrastTextChannel",Mc(Pc(se.contrastText))),te==="text"&&(Sr(x[te],"primary"),Sr(x[te],"secondary")),te==="action"&&(se.active&&Sr(x[te],"active"),se.selected&&Sr(x[te],"selected")))})}),O=e.reduce((V,x)=>Hn(V,x),O);const R={prefix:s,disableCssColorScheme:r,shouldSkipGeneratingVar:a,getSelector:SB(O)},{vars:D,generateThemeVars:z,generateStyleSheets:j}=WD(O,R);return O.vars=D,Object.entries(O.colorSchemes[O.defaultColorScheme]).forEach(([V,x])=>{O[V]=x}),O.generateThemeVars=z,O.generateStyleSheets=j,O.generateSpacing=function(){return eC(h.spacing,Q0(this))},O.getColorSchemeSelector=XD(c),O.spacing=O.generateSpacing(),O.shouldSkipGeneratingVar=a,O.unstable_sxConfig={...Su,...h==null?void 0:h.unstable_sxConfig},O.unstable_sx=function(x){return yo({sx:x,theme:this})},O.toRuntimeSource=TC,O}function FE(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:ab({...n===!0?{}:n.palette,mode:e})})}function mp(t={},...e){const{palette:n,cssVariables:i=!1,colorSchemes:r=n?void 0:{light:!0},defaultColorScheme:s=n==null?void 0:n.mode,...a}=t,c=s||"light",f=r==null?void 0:r[c],h={...r,...n?{[c]:{...typeof f!="boolean"&&f,palette:n}}:void 0};if(i===!1){if(!("colorSchemes"in t))return f_(t,...e);let p=n;"palette"in t||h[c]&&(h[c]!==!0?p=h[c].palette:c==="dark"&&(p={mode:"dark"}));const m=f_({...t,palette:p},...e);return m.defaultColorScheme=c,m.colorSchemes=h,m.palette.mode==="light"&&(m.colorSchemes.light={...h.light!==!0&&h.light,palette:m.palette},FE(m,"dark",h.dark)),m.palette.mode==="dark"&&(m.colorSchemes.dark={...h.dark!==!0&&h.dark,palette:m.palette},FE(m,"light",h.light)),m}return!n&&!("light"in h)&&c==="light"&&(h.light=!0),xB({...a,colorSchemes:h,defaultColorScheme:c,...typeof i!="boolean"&&i},...e)}const lb=mp();function cb(){const t=J0(lb);return t[Rr]||t}function RB(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const CB=t=>RB(t)&&t!=="classes",en=sC({themeId:Rr,defaultTheme:lb,rootShouldForwardProp:CB});function zE({theme:t,...e}){const n=Rr in t?t[Rr]:void 0;return de.jsx(mC,{...e,themeId:n?Rr:void 0,theme:n||t})}const Zf={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:OB}=VD({themeId:Rr,theme:()=>mp({cssVariables:!0}),colorSchemeStorageKey:Zf.colorSchemeStorageKey,modeStorageKey:Zf.modeStorageKey,defaultColorScheme:{light:Zf.defaultLightColorScheme,dark:Zf.defaultDarkColorScheme},resolveTheme:t=>{const e={...t,typography:vC(t.palette,t.typography)};return e.unstable_sx=function(i){return yo({sx:i,theme:this})},e}}),MB=OB;function PB({theme:t,...e}){return typeof t=="function"?de.jsx(zE,{theme:t,...e}):"colorSchemes"in(Rr in t?t[Rr]:t)?de.jsx(MB,{theme:t,...e}):de.jsx(zE,{theme:t,...e})}function NB(t){return de.jsx(GI,{...t,defaultTheme:lb,themeId:Rr})}function wC(t){return function(n){return de.jsx(NB,{styles:typeof t=="function"?i=>t({theme:i,...n}):t})}}function kB(){return eD}const di=DD;function qn(t){return ID(t)}function IB(t){return yi("MuiSvgIcon",t)}Mi("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const DB=t=>{const{color:e,fontSize:n,classes:i}=t,r={root:["root",e!=="inherit"&&`color${rt(e)}`,`fontSize${rt(n)}`]};return Pi(r,IB,i)},BB=en("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${rt(n.color)}`],e[`fontSize${rt(n.fontSize)}`]]}})(di(({theme:t})=>{var e,n,i,r,s,a,c,f,h,p,m,y,b,v;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(r=(e=t.transitions)==null?void 0:e.create)==null?void 0:r.call(e,"fill",{duration:(i=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:i.shorter}),variants:[{props:T=>!T.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(s=t.typography)==null?void 0:s.pxToRem)==null?void 0:a.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((f=(c=t.typography)==null?void 0:c.pxToRem)==null?void 0:f.call(c,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((p=(h=t.typography)==null?void 0:h.pxToRem)==null?void 0:p.call(h,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,T])=>T&&T.main).map(([T])=>{var S,w;return{props:{color:T},style:{color:(w=(S=(t.vars??t).palette)==null?void 0:S[T])==null?void 0:w.main}}}),{props:{color:"action"},style:{color:(y=(m=(t.vars??t).palette)==null?void 0:m.action)==null?void 0:y.active}},{props:{color:"disabled"},style:{color:(v=(b=(t.vars??t).palette)==null?void 0:b.action)==null?void 0:v.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),d_=I.forwardRef(function(e,n){const i=qn({props:e,name:"MuiSvgIcon"}),{children:r,className:s,color:a="inherit",component:c="svg",fontSize:f="medium",htmlColor:h,inheritViewBox:p=!1,titleAccess:m,viewBox:y="0 0 24 24",...b}=i,v=I.isValidElement(r)&&r.type==="svg",T={...i,color:a,component:c,fontSize:f,instanceFontSize:e.fontSize,inheritViewBox:p,viewBox:y,hasSvgAsChild:v},S={};p||(S.viewBox=y);const w=DB(T);return de.jsxs(BB,{as:c,className:Ke(w.root,s),focusable:"false",color:h,"aria-hidden":m?void 0:!0,role:m?"img":void 0,ref:n,...S,...b,...v&&r.props,ownerState:T,children:[v?r.props.children:r,m?de.jsx("title",{children:m}):null]})});d_.muiName="SvgIcon";function AC(t,e){function n(i,r){return de.jsx(d_,{"data-testid":`${e}Icon`,ref:r,...i,children:t})}return n.muiName=d_.muiName,I.memo(I.forwardRef(n))}function xC(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function p_(t,e){return p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},p_(t,e)}function RC(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,p_(t,e)}var CC=BR();const Qf=np(CC),VE={disabled:!1},sd=Fe.createContext(null);var LB=function(e){return e.scrollTop},Nc="unmounted",Js="exited",eo="entering",ka="entered",g_="exiting",Br=function(t){RC(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var a=r,c=a&&!a.isMounting?i.enter:i.appear,f;return s.appearStatus=null,i.in?c?(f=Js,s.appearStatus=eo):f=ka:i.unmountOnExit||i.mountOnEnter?f=Nc:f=Js,s.state={status:f},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var a=r.in;return a&&s.status===Nc?{status:Js}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==eo&&a!==ka&&(s=eo):(a===eo||a===ka)&&(s=g_)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s,a,c;return s=a=c=r,r!=null&&typeof r!="number"&&(s=r.exit,a=r.enter,c=r.appear!==void 0?r.appear:a),{exit:s,enter:a,appear:c}},n.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===eo){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Qf.findDOMNode(this);a&&LB(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Js&&this.setState({status:Nc})},n.performEnter=function(r){var s=this,a=this.props.enter,c=this.context?this.context.isMounting:r,f=this.props.nodeRef?[c]:[Qf.findDOMNode(this),c],h=f[0],p=f[1],m=this.getTimeouts(),y=c?m.appear:m.enter;if(!r&&!a||VE.disabled){this.safeSetState({status:ka},function(){s.props.onEntered(h)});return}this.props.onEnter(h,p),this.safeSetState({status:eo},function(){s.props.onEntering(h,p),s.onTransitionEnd(y,function(){s.safeSetState({status:ka},function(){s.props.onEntered(h,p)})})})},n.performExit=function(){var r=this,s=this.props.exit,a=this.getTimeouts(),c=this.props.nodeRef?void 0:Qf.findDOMNode(this);if(!s||VE.disabled){this.safeSetState({status:Js},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:g_},function(){r.props.onExiting(c),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:Js},function(){r.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,a=!0;return this.nextCallback=function(c){a&&(a=!1,s.nextCallback=null,r(c))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:Qf.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!a||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],h=f[0],p=f[1];this.props.addEndListener(h,p)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Nc)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var c=xC(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Fe.createElement(sd.Provider,{value:null},typeof a=="function"?a(r,c):Fe.cloneElement(Fe.Children.only(a),c))},e}(Fe.Component);Br.contextType=sd;Br.propTypes={};function Sa(){}Br.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Sa,onEntering:Sa,onEntered:Sa,onExit:Sa,onExiting:Sa,onExited:Sa};Br.UNMOUNTED=Nc;Br.EXITED=Js;Br.ENTERING=eo;Br.ENTERED=ka;Br.EXITING=g_;function UB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ub(t,e){var n=function(s){return e&&I.isValidElement(s)?e(s):s},i=Object.create(null);return t&&I.Children.map(t,function(r){return r}).forEach(function(r){i[r.key]=n(r)}),i}function FB(t,e){t=t||{},e=e||{};function n(p){return p in e?e[p]:t[p]}var i=Object.create(null),r=[];for(var s in t)s in e?r.length&&(i[s]=r,r=[]):r.push(s);var a,c={};for(var f in e){if(i[f])for(a=0;a<i[f].length;a++){var h=i[f][a];c[i[f][a]]=n(h)}c[f]=n(f)}for(a=0;a<r.length;a++)c[r[a]]=n(r[a]);return c}function ro(t,e,n){return n[e]!=null?n[e]:t.props[e]}function zB(t,e){return ub(t.children,function(n){return I.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:ro(n,"appear",t),enter:ro(n,"enter",t),exit:ro(n,"exit",t)})})}function VB(t,e,n){var i=ub(t.children),r=FB(e,i);return Object.keys(r).forEach(function(s){var a=r[s];if(I.isValidElement(a)){var c=s in e,f=s in i,h=e[s],p=I.isValidElement(h)&&!h.props.in;f&&(!c||p)?r[s]=I.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:ro(a,"exit",t),enter:ro(a,"enter",t)}):!f&&c&&!p?r[s]=I.cloneElement(a,{in:!1}):f&&c&&I.isValidElement(h)&&(r[s]=I.cloneElement(a,{onExited:n.bind(null,a),in:h.props.in,exit:ro(a,"exit",t),enter:ro(a,"enter",t)}))}}),r}var $B=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},jB={component:"div",childFactory:function(e){return e}},fb=function(t){RC(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var a=s.handleExited.bind(UB(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,s){var a=s.children,c=s.handleExited,f=s.firstRender;return{children:f?zB(r,c):VB(r,a,c),firstRender:!1}},n.handleExited=function(r,s){var a=ub(this.props.children);r.key in a||(r.props.onExited&&r.props.onExited(s),this.mounted&&this.setState(function(c){var f=ed({},c.children);return delete f[r.key],{children:f}}))},n.render=function(){var r=this.props,s=r.component,a=r.childFactory,c=xC(r,["component","childFactory"]),f=this.state.contextValue,h=$B(this.state.children).map(a);return delete c.appear,delete c.enter,delete c.exit,s===null?Fe.createElement(sd.Provider,{value:f},h):Fe.createElement(sd.Provider,{value:f},Fe.createElement(s,c,h))},e}(Fe.Component);fb.propTypes={};fb.defaultProps=jB;const HB=t=>t.scrollTop;function $E(t,e){const{timeout:n,easing:i,style:r={}}=t;return{duration:r.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:r.transitionTimingFunction??(typeof i=="object"?i[e.mode]:i),delay:r.transitionDelay}}function WB(t){return yi("MuiPaper",t)}Mi("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const XB=t=>{const{square:e,elevation:n,variant:i,classes:r}=t,s={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${n}`]};return Pi(s,WB,r)},qB=en("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(di(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),YB=I.forwardRef(function(e,n){var b;const i=qn({props:e,name:"MuiPaper"}),r=cb(),{className:s,component:a="div",elevation:c=1,square:f=!1,variant:h="elevation",...p}=i,m={...i,component:a,elevation:c,square:f,variant:h},y=XB(m);return de.jsx(qB,{as:a,ownerState:m,className:Ke(y.root,s),ref:n,...p,style:{...h==="elevation"&&{"--Paper-shadow":(r.vars||r).shadows[c],...r.vars&&{"--Paper-overlay":(b=r.vars.overlays)==null?void 0:b[c]},...!r.vars&&r.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${_o("#fff",h_(c))}, ${_o("#fff",h_(c))})`}},...p.style}})});function Gf(t,e){const{className:n,elementType:i,ownerState:r,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:c=!1,...f}=e,{component:h,slots:p={[t]:void 0},slotProps:m={[t]:void 0},...y}=s,b=p[t]||i,v=fC(m[t],r),{props:{component:T,...S},internalRef:w}=uC({className:n,...f,externalForwardedProps:t==="root"?y:void 0,externalSlotProps:v}),C=Pr(w,v==null?void 0:v.ref,e.ref),A=t==="root"?T||h:T,O=cC(b,{...t==="root"&&!h&&!p[t]&&a,...t!=="root"&&!p[t]&&a,...S,...A&&!c&&{as:A},...A&&c&&{component:A},ref:C},r);return[b,O]}class od{constructor(){M(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new od}static use(){const e=lC(od.create).current,[n,i]=I.useState(!1);return e.shouldMount=n,e.setShouldMount=i,I.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=ZB(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function KB(){return od.use()}function ZB(){let t,e;const n=new Promise((i,r)=>{t=i,e=r});return n.resolve=t,n.reject=e,n}function QB(t){const{className:e,classes:n,pulsate:i=!1,rippleX:r,rippleY:s,rippleSize:a,in:c,onExited:f,timeout:h}=t,[p,m]=I.useState(!1),y=Ke(e,n.ripple,n.rippleVisible,i&&n.ripplePulsate),b={width:a,height:a,top:-(a/2)+s,left:-(a/2)+r},v=Ke(n.child,p&&n.childLeaving,i&&n.childPulsate);return!c&&!p&&m(!0),I.useEffect(()=>{if(!c&&f!=null){const T=setTimeout(f,h);return()=>{clearTimeout(T)}}},[f,c,h]),de.jsx("span",{className:y,style:b,children:de.jsx("span",{className:v})})}const li=Mi("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),m_=550,GB=80,JB=bu`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,eL=bu`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,tL=bu`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,nL=en("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),iL=en(QB,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${li.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${JB};
    animation-duration: ${m_}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${li.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${li.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${li.childLeaving} {
    opacity: 0;
    animation-name: ${eL};
    animation-duration: ${m_}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${li.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${tL};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,rL=I.forwardRef(function(e,n){const i=qn({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:s={},className:a,...c}=i,[f,h]=I.useState([]),p=I.useRef(0),m=I.useRef(null);I.useEffect(()=>{m.current&&(m.current(),m.current=null)},[f]);const y=I.useRef(!1),b=Da(),v=I.useRef(null),T=I.useRef(null),S=I.useCallback(O=>{const{pulsate:R,rippleX:D,rippleY:z,rippleSize:j,cb:V}=O;h(x=>[...x,de.jsx(iL,{classes:{ripple:Ke(s.ripple,li.ripple),rippleVisible:Ke(s.rippleVisible,li.rippleVisible),ripplePulsate:Ke(s.ripplePulsate,li.ripplePulsate),child:Ke(s.child,li.child),childLeaving:Ke(s.childLeaving,li.childLeaving),childPulsate:Ke(s.childPulsate,li.childPulsate)},timeout:m_,pulsate:R,rippleX:D,rippleY:z,rippleSize:j},p.current)]),p.current+=1,m.current=V},[s]),w=I.useCallback((O={},R={},D=()=>{})=>{const{pulsate:z=!1,center:j=r||R.pulsate,fakeElement:V=!1}=R;if((O==null?void 0:O.type)==="mousedown"&&y.current){y.current=!1;return}(O==null?void 0:O.type)==="touchstart"&&(y.current=!0);const x=V?null:T.current,H=x?x.getBoundingClientRect():{width:0,height:0,left:0,top:0};let te,se,fe;if(j||O===void 0||O.clientX===0&&O.clientY===0||!O.clientX&&!O.touches)te=Math.round(H.width/2),se=Math.round(H.height/2);else{const{clientX:pe,clientY:N}=O.touches&&O.touches.length>0?O.touches[0]:O;te=Math.round(pe-H.left),se=Math.round(N-H.top)}if(j)fe=Math.sqrt((2*H.width**2+H.height**2)/3),fe%2===0&&(fe+=1);else{const pe=Math.max(Math.abs((x?x.clientWidth:0)-te),te)*2+2,N=Math.max(Math.abs((x?x.clientHeight:0)-se),se)*2+2;fe=Math.sqrt(pe**2+N**2)}O!=null&&O.touches?v.current===null&&(v.current=()=>{S({pulsate:z,rippleX:te,rippleY:se,rippleSize:fe,cb:D})},b.start(GB,()=>{v.current&&(v.current(),v.current=null)})):S({pulsate:z,rippleX:te,rippleY:se,rippleSize:fe,cb:D})},[r,S,b]),C=I.useCallback(()=>{w({},{pulsate:!0})},[w]),A=I.useCallback((O,R)=>{if(b.clear(),(O==null?void 0:O.type)==="touchend"&&v.current){v.current(),v.current=null,b.start(0,()=>{A(O,R)});return}v.current=null,h(D=>D.length>0?D.slice(1):D),m.current=R},[b]);return I.useImperativeHandle(n,()=>({pulsate:C,start:w,stop:A}),[C,w,A]),de.jsx(nL,{className:Ke(li.root,s.root,a),ref:T,...c,children:de.jsx(fb,{component:null,exit:!0,children:f})})});function sL(t){return yi("MuiButtonBase",t)}const oL=Mi("MuiButtonBase",["root","disabled","focusVisible"]),aL=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:i,classes:r}=t,a=Pi({root:["root",e&&"disabled",n&&"focusVisible"]},sL,r);return n&&i&&(a.root+=` ${i}`),a},lL=en("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${oL.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),cL=I.forwardRef(function(e,n){const i=qn({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:s=!1,children:a,className:c,component:f="button",disabled:h=!1,disableRipple:p=!1,disableTouchRipple:m=!1,focusRipple:y=!1,focusVisibleClassName:b,LinkComponent:v="a",onBlur:T,onClick:S,onContextMenu:w,onDragLeave:C,onFocus:A,onFocusVisible:O,onKeyDown:R,onKeyUp:D,onMouseDown:z,onMouseLeave:j,onMouseUp:V,onTouchEnd:x,onTouchMove:H,onTouchStart:te,tabIndex:se=0,TouchRippleProps:fe,touchRippleRef:pe,type:N,...U}=i,L=I.useRef(null),X=KB(),P=Pr(X.ref,pe),[$,Q]=I.useState(!1);h&&$&&Q(!1),I.useImperativeHandle(r,()=>({focusVisible:()=>{Q(!0),L.current.focus()}}),[]);const ne=X.shouldMount&&!p&&!h;I.useEffect(()=>{$&&y&&!p&&X.pulsate()},[p,y,$,X]);const re=Er(X,"start",z,m),ue=Er(X,"stop",w,m),ye=Er(X,"stop",C,m),Se=Er(X,"stop",V,m),me=Er(X,"stop",we=>{$&&we.preventDefault(),j&&j(we)},m),Re=Er(X,"start",te,m),ve=Er(X,"stop",x,m),Qe=Er(X,"stop",H,m),Ge=Er(X,"stop",we=>{rd(we.target)||Q(!1),T&&T(we)},!1),bt=Xa(we=>{L.current||(L.current=we.currentTarget),rd(we.target)&&(Q(!0),O&&O(we)),A&&A(we)}),kt=()=>{const we=L.current;return f&&f!=="button"&&!(we.tagName==="A"&&we.href)},Ce=Xa(we=>{y&&!we.repeat&&$&&we.key===" "&&X.stop(we,()=>{X.start(we)}),we.target===we.currentTarget&&kt()&&we.key===" "&&we.preventDefault(),R&&R(we),we.target===we.currentTarget&&kt()&&we.key==="Enter"&&!h&&(we.preventDefault(),S&&S(we))}),xe=Xa(we=>{y&&we.key===" "&&$&&!we.defaultPrevented&&X.stop(we,()=>{X.pulsate(we)}),D&&D(we),S&&we.target===we.currentTarget&&kt()&&we.key===" "&&!we.defaultPrevented&&S(we)});let Ye=f;Ye==="button"&&(U.href||U.to)&&(Ye=v);const vt={};Ye==="button"?(vt.type=N===void 0?"button":N,vt.disabled=h):(!U.href&&!U.to&&(vt.role="button"),h&&(vt["aria-disabled"]=h));const tn=Pr(n,L),Ht={...i,centerRipple:s,component:f,disabled:h,disableRipple:p,disableTouchRipple:m,focusRipple:y,tabIndex:se,focusVisible:$},fn=aL(Ht);return de.jsxs(lL,{as:Ye,className:Ke(fn.root,c),ownerState:Ht,onBlur:Ge,onClick:S,onContextMenu:ue,onFocus:bt,onKeyDown:Ce,onKeyUp:xe,onMouseDown:re,onMouseLeave:me,onMouseUp:Se,onDragLeave:ye,onTouchEnd:ve,onTouchMove:Qe,onTouchStart:Re,ref:tn,tabIndex:h?-1:se,type:N,...vt,...U,children:[a,ne?de.jsx(rL,{ref:P,center:s,...fe}):null]})});function Er(t,e,n,i=!1){return Xa(r=>(n&&n(r),i||t[e](r),!0))}function uL(t){return typeof t.main=="string"}function fL(t,e=[]){if(!uL(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function tu(t=[]){return([,e])=>e&&fL(e,t)}function hL(t){return yi("MuiCircularProgress",t)}Mi("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const as=44,y_=bu`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,__=bu`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,dL=typeof y_!="string"?Y0`
        animation: ${y_} 1.4s linear infinite;
      `:null,pL=typeof __!="string"?Y0`
        animation: ${__} 1.4s ease-in-out infinite;
      `:null,gL=t=>{const{classes:e,variant:n,color:i,disableShrink:r}=t,s={root:["root",n,`color${rt(i)}`],svg:["svg"],circle:["circle",`circle${rt(n)}`,r&&"circleDisableShrink"]};return Pi(s,hL,e)},mL=en("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${rt(n.color)}`]]}})(di(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:dL||{animation:`${y_} 1.4s linear infinite`}},...Object.entries(t.palette).filter(tu()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),yL=en("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),_L=en("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${rt(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(di(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:pL||{animation:`${__} 1.4s ease-in-out infinite`}}]}))),bL=I.forwardRef(function(e,n){const i=qn({props:e,name:"MuiCircularProgress"}),{className:r,color:s="primary",disableShrink:a=!1,size:c=40,style:f,thickness:h=3.6,value:p=0,variant:m="indeterminate",...y}=i,b={...i,color:s,disableShrink:a,size:c,thickness:h,value:p,variant:m},v=gL(b),T={},S={},w={};if(m==="determinate"){const C=2*Math.PI*((as-h)/2);T.strokeDasharray=C.toFixed(3),w["aria-valuenow"]=Math.round(p),T.strokeDashoffset=`${((100-p)/100*C).toFixed(3)}px`,S.transform="rotate(-90deg)"}return de.jsx(mL,{className:Ke(v.root,r),style:{width:c,height:c,...S,...f},ownerState:b,ref:n,role:"progressbar",...w,...y,children:de.jsx(yL,{className:v.svg,ownerState:b,viewBox:`${as/2} ${as/2} ${as} ${as}`,children:de.jsx(_L,{className:v.circle,style:T,ownerState:b,cx:as,cy:as,r:(as-h)/2,fill:"none",strokeWidth:h})})})});function vL(t){return yi("MuiIconButton",t)}const jE=Mi("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),TL=t=>{const{classes:e,disabled:n,color:i,edge:r,size:s,loading:a}=t,c={root:["root",a&&"loading",n&&"disabled",i!=="default"&&`color${rt(i)}`,r&&`edge${rt(r)}`,`size${rt(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Pi(c,vL,e)},SL=en(cL,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${rt(n.color)}`],n.edge&&e[`edge${rt(n.edge)}`],e[`size${rt(n.size)}`]]}})(di(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:_o(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),di(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(tu()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(tu()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:_o((t.vars||t).palette[e].main,t.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${jE.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${jE.loading}`]:{color:"transparent"}}))),EL=en("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(t,e)=>e.loadingIndicator})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),cy=I.forwardRef(function(e,n){const i=qn({props:e,name:"MuiIconButton"}),{edge:r=!1,children:s,className:a,color:c="default",disabled:f=!1,disableFocusRipple:h=!1,size:p="medium",id:m,loading:y=null,loadingIndicator:b,...v}=i,T=aC(m),S=b??de.jsx(bL,{"aria-labelledby":T,color:"inherit",size:16}),w={...i,edge:r,color:c,disabled:f,disableFocusRipple:h,loading:y,loadingIndicator:S,size:p},C=TL(w);return de.jsxs(SL,{id:y?T:m,className:Ke(C.root,a),centerRipple:!0,focusRipple:!h,disabled:f||y,ref:n,...v,ownerState:w,children:[typeof y=="boolean"&&de.jsx("span",{className:C.loadingWrapper,style:{display:"contents"},children:de.jsx(EL,{className:C.loadingIndicator,ownerState:w,children:y&&S})}),s]})});function wL(t){return yi("MuiTypography",t)}Mi("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const AL={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},xL=kB(),RL=t=>{const{align:e,gutterBottom:n,noWrap:i,paragraph:r,variant:s,classes:a}=t,c={root:["root",s,t.align!=="inherit"&&`align${rt(e)}`,n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return Pi(c,wL,a)},CL=en("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${rt(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(di(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,i])=>n!=="inherit"&&i&&typeof i=="object").map(([n,i])=>({props:{variant:n},style:i})),...Object.entries(t.palette).filter(tu()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${rt(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),HE={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},OC=I.forwardRef(function(e,n){const{color:i,...r}=qn({props:e,name:"MuiTypography"}),s=!AL[i],a=xL({...r,...s&&{color:i}}),{align:c="inherit",className:f,component:h,gutterBottom:p=!1,noWrap:m=!1,paragraph:y=!1,variant:b="body1",variantMapping:v=HE,...T}=a,S={...a,align:c,color:i,className:f,component:h,gutterBottom:p,noWrap:m,paragraph:y,variant:b,variantMapping:v},w=h||(y?"p":v[b]||HE[b])||"span",C=RL(S);return de.jsx(CL,{as:w,ref:n,className:Ke(C.root,f),...T,ownerState:S,style:{...c!=="inherit"&&{"--Typography-textAlign":c},...T.style}})});function OL(t){return yi("MuiAppBar",t)}Mi("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const ML=t=>{const{color:e,position:n,classes:i}=t,r={root:["root",`color${rt(e)}`,`position${rt(n)}`]};return Pi(r,OL,i)},WE=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,PL=en(YB,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${rt(n.position)}`],e[`color${rt(n.color)}`]]}})(di(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(tu(["contrastText"])).map(([e])=>({props:{color:e},style:{"--AppBar-background":(t.vars??t).palette[e].main,"--AppBar-color":(t.vars??t).palette[e].contrastText}})),{props:e=>e.enableColorOnDark===!0&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>e.enableColorOnDark===!1&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?WE(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?WE(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),MC=I.forwardRef(function(e,n){const i=qn({props:e,name:"MuiAppBar"}),{className:r,color:s="primary",enableColorOnDark:a=!1,position:c="fixed",...f}=i,h={...i,color:s,position:c,enableColorOnDark:a},p=ML(h);return de.jsx(PL,{square:!0,component:"header",ownerState:h,elevation:4,className:Ke(p.root,r,c==="fixed"&&"mui-fixed"),ref:n,...f})});var Mn="top",pi="bottom",gi="right",Pn="left",hb="auto",Eu=[Mn,pi,gi,Pn],Ja="start",nu="end",NL="clippingParents",PC="viewport",_c="popper",kL="reference",XE=Eu.reduce(function(t,e){return t.concat([e+"-"+Ja,e+"-"+nu])},[]),NC=[].concat(Eu,[hb]).reduce(function(t,e){return t.concat([e,e+"-"+Ja,e+"-"+nu])},[]),IL="beforeRead",DL="read",BL="afterRead",LL="beforeMain",UL="main",FL="afterMain",zL="beforeWrite",VL="write",$L="afterWrite",jL=[IL,DL,BL,LL,UL,FL,zL,VL,$L];function Ji(t){return t?(t.nodeName||"").toLowerCase():null}function Xn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function bo(t){var e=Xn(t).Element;return t instanceof e||t instanceof Element}function ui(t){var e=Xn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function db(t){if(typeof ShadowRoot>"u")return!1;var e=Xn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function HL(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!ui(s)||!Ji(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(a){var c=r[a];c===!1?s.removeAttribute(a):s.setAttribute(a,c===!0?"":c)}))})}function WL(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),c=a.reduce(function(f,h){return f[h]="",f},{});!ui(r)||!Ji(r)||(Object.assign(r.style,c),Object.keys(s).forEach(function(f){r.removeAttribute(f)}))})}}const XL={name:"applyStyles",enabled:!0,phase:"write",fn:HL,effect:WL,requires:["computeStyles"]};function Gi(t){return t.split("-")[0]}var ao=Math.max,ad=Math.min,el=Math.round;function b_(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function kC(){return!/^((?!chrome|android).)*safari/i.test(b_())}function tl(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&ui(t)&&(r=t.offsetWidth>0&&el(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&el(i.height)/t.offsetHeight||1);var a=bo(t)?Xn(t):window,c=a.visualViewport,f=!kC()&&n,h=(i.left+(f&&c?c.offsetLeft:0))/r,p=(i.top+(f&&c?c.offsetTop:0))/s,m=i.width/r,y=i.height/s;return{width:m,height:y,top:p,right:h+m,bottom:p+y,left:h,x:h,y:p}}function pb(t){var e=tl(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function IC(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&db(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Nr(t){return Xn(t).getComputedStyle(t)}function qL(t){return["table","td","th"].indexOf(Ji(t))>=0}function Rs(t){return((bo(t)?t.ownerDocument:t.document)||window.document).documentElement}function yp(t){return Ji(t)==="html"?t:t.assignedSlot||t.parentNode||(db(t)?t.host:null)||Rs(t)}function qE(t){return!ui(t)||Nr(t).position==="fixed"?null:t.offsetParent}function YL(t){var e=/firefox/i.test(b_()),n=/Trident/i.test(b_());if(n&&ui(t)){var i=Nr(t);if(i.position==="fixed")return null}var r=yp(t);for(db(r)&&(r=r.host);ui(r)&&["html","body"].indexOf(Ji(r))<0;){var s=Nr(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function wu(t){for(var e=Xn(t),n=qE(t);n&&qL(n)&&Nr(n).position==="static";)n=qE(n);return n&&(Ji(n)==="html"||Ji(n)==="body"&&Nr(n).position==="static")?e:n||YL(t)||e}function gb(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Fc(t,e,n){return ao(t,ad(e,n))}function KL(t,e,n){var i=Fc(t,e,n);return i>n?n:i}function DC(){return{top:0,right:0,bottom:0,left:0}}function BC(t){return Object.assign({},DC(),t)}function LC(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var ZL=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,BC(typeof e!="number"?e:LC(e,Eu))};function QL(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,c=Gi(n.placement),f=gb(c),h=[Pn,gi].indexOf(c)>=0,p=h?"height":"width";if(!(!s||!a)){var m=ZL(r.padding,n),y=pb(s),b=f==="y"?Mn:Pn,v=f==="y"?pi:gi,T=n.rects.reference[p]+n.rects.reference[f]-a[f]-n.rects.popper[p],S=a[f]-n.rects.reference[f],w=wu(s),C=w?f==="y"?w.clientHeight||0:w.clientWidth||0:0,A=T/2-S/2,O=m[b],R=C-y[p]-m[v],D=C/2-y[p]/2+A,z=Fc(O,D,R),j=f;n.modifiersData[i]=(e={},e[j]=z,e.centerOffset=z-D,e)}}function GL(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||IC(e.elements.popper,r)&&(e.elements.arrow=r))}const JL={name:"arrow",enabled:!0,phase:"main",fn:QL,effect:GL,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nl(t){return t.split("-")[1]}var e4={top:"auto",right:"auto",bottom:"auto",left:"auto"};function t4(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:el(n*r)/r||0,y:el(i*r)/r||0}}function YE(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,a=t.offsets,c=t.position,f=t.gpuAcceleration,h=t.adaptive,p=t.roundOffsets,m=t.isFixed,y=a.x,b=y===void 0?0:y,v=a.y,T=v===void 0?0:v,S=typeof p=="function"?p({x:b,y:T}):{x:b,y:T};b=S.x,T=S.y;var w=a.hasOwnProperty("x"),C=a.hasOwnProperty("y"),A=Pn,O=Mn,R=window;if(h){var D=wu(n),z="clientHeight",j="clientWidth";if(D===Xn(n)&&(D=Rs(n),Nr(D).position!=="static"&&c==="absolute"&&(z="scrollHeight",j="scrollWidth")),D=D,r===Mn||(r===Pn||r===gi)&&s===nu){O=pi;var V=m&&D===R&&R.visualViewport?R.visualViewport.height:D[z];T-=V-i.height,T*=f?1:-1}if(r===Pn||(r===Mn||r===pi)&&s===nu){A=gi;var x=m&&D===R&&R.visualViewport?R.visualViewport.width:D[j];b-=x-i.width,b*=f?1:-1}}var H=Object.assign({position:c},h&&e4),te=p===!0?t4({x:b,y:T},Xn(n)):{x:b,y:T};if(b=te.x,T=te.y,f){var se;return Object.assign({},H,(se={},se[O]=C?"0":"",se[A]=w?"0":"",se.transform=(R.devicePixelRatio||1)<=1?"translate("+b+"px, "+T+"px)":"translate3d("+b+"px, "+T+"px, 0)",se))}return Object.assign({},H,(e={},e[O]=C?T+"px":"",e[A]=w?b+"px":"",e.transform="",e))}function n4(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,a=s===void 0?!0:s,c=n.roundOffsets,f=c===void 0?!0:c,h={placement:Gi(e.placement),variation:nl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,YE(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:f})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,YE(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const i4={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:n4,data:{}};var Jf={passive:!0};function r4(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,a=i.resize,c=a===void 0?!0:a,f=Xn(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&h.forEach(function(p){p.addEventListener("scroll",n.update,Jf)}),c&&f.addEventListener("resize",n.update,Jf),function(){s&&h.forEach(function(p){p.removeEventListener("scroll",n.update,Jf)}),c&&f.removeEventListener("resize",n.update,Jf)}}const s4={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:r4,data:{}};var o4={left:"right",right:"left",bottom:"top",top:"bottom"};function Bh(t){return t.replace(/left|right|bottom|top/g,function(e){return o4[e]})}var a4={start:"end",end:"start"};function KE(t){return t.replace(/start|end/g,function(e){return a4[e]})}function mb(t){var e=Xn(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function yb(t){return tl(Rs(t)).left+mb(t).scrollLeft}function l4(t,e){var n=Xn(t),i=Rs(t),r=n.visualViewport,s=i.clientWidth,a=i.clientHeight,c=0,f=0;if(r){s=r.width,a=r.height;var h=kC();(h||!h&&e==="fixed")&&(c=r.offsetLeft,f=r.offsetTop)}return{width:s,height:a,x:c+yb(t),y:f}}function c4(t){var e,n=Rs(t),i=mb(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=ao(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=ao(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-i.scrollLeft+yb(t),f=-i.scrollTop;return Nr(r||n).direction==="rtl"&&(c+=ao(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:a,x:c,y:f}}function _b(t){var e=Nr(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function UC(t){return["html","body","#document"].indexOf(Ji(t))>=0?t.ownerDocument.body:ui(t)&&_b(t)?t:UC(yp(t))}function zc(t,e){var n;e===void 0&&(e=[]);var i=UC(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=Xn(i),a=r?[s].concat(s.visualViewport||[],_b(i)?i:[]):i,c=e.concat(a);return r?c:c.concat(zc(yp(a)))}function v_(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function u4(t,e){var n=tl(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function ZE(t,e,n){return e===PC?v_(l4(t,n)):bo(e)?u4(e,n):v_(c4(Rs(t)))}function f4(t){var e=zc(yp(t)),n=["absolute","fixed"].indexOf(Nr(t).position)>=0,i=n&&ui(t)?wu(t):t;return bo(i)?e.filter(function(r){return bo(r)&&IC(r,i)&&Ji(r)!=="body"}):[]}function h4(t,e,n,i){var r=e==="clippingParents"?f4(t):[].concat(e),s=[].concat(r,[n]),a=s[0],c=s.reduce(function(f,h){var p=ZE(t,h,i);return f.top=ao(p.top,f.top),f.right=ad(p.right,f.right),f.bottom=ad(p.bottom,f.bottom),f.left=ao(p.left,f.left),f},ZE(t,a,i));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function FC(t){var e=t.reference,n=t.element,i=t.placement,r=i?Gi(i):null,s=i?nl(i):null,a=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,f;switch(r){case Mn:f={x:a,y:e.y-n.height};break;case pi:f={x:a,y:e.y+e.height};break;case gi:f={x:e.x+e.width,y:c};break;case Pn:f={x:e.x-n.width,y:c};break;default:f={x:e.x,y:e.y}}var h=r?gb(r):null;if(h!=null){var p=h==="y"?"height":"width";switch(s){case Ja:f[h]=f[h]-(e[p]/2-n[p]/2);break;case nu:f[h]=f[h]+(e[p]/2-n[p]/2);break}}return f}function iu(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.strategy,a=s===void 0?t.strategy:s,c=n.boundary,f=c===void 0?NL:c,h=n.rootBoundary,p=h===void 0?PC:h,m=n.elementContext,y=m===void 0?_c:m,b=n.altBoundary,v=b===void 0?!1:b,T=n.padding,S=T===void 0?0:T,w=BC(typeof S!="number"?S:LC(S,Eu)),C=y===_c?kL:_c,A=t.rects.popper,O=t.elements[v?C:y],R=h4(bo(O)?O:O.contextElement||Rs(t.elements.popper),f,p,a),D=tl(t.elements.reference),z=FC({reference:D,element:A,placement:r}),j=v_(Object.assign({},A,z)),V=y===_c?j:D,x={top:R.top-V.top+w.top,bottom:V.bottom-R.bottom+w.bottom,left:R.left-V.left+w.left,right:V.right-R.right+w.right},H=t.modifiersData.offset;if(y===_c&&H){var te=H[r];Object.keys(x).forEach(function(se){var fe=[gi,pi].indexOf(se)>=0?1:-1,pe=[Mn,pi].indexOf(se)>=0?"y":"x";x[se]+=te[pe]*fe})}return x}function d4(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,a=n.padding,c=n.flipVariations,f=n.allowedAutoPlacements,h=f===void 0?NC:f,p=nl(i),m=p?c?XE:XE.filter(function(v){return nl(v)===p}):Eu,y=m.filter(function(v){return h.indexOf(v)>=0});y.length===0&&(y=m);var b=y.reduce(function(v,T){return v[T]=iu(t,{placement:T,boundary:r,rootBoundary:s,padding:a})[Gi(T)],v},{});return Object.keys(b).sort(function(v,T){return b[v]-b[T]})}function p4(t){if(Gi(t)===hb)return[];var e=Bh(t);return[KE(t),e,KE(e)]}function g4(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,a=n.altAxis,c=a===void 0?!0:a,f=n.fallbackPlacements,h=n.padding,p=n.boundary,m=n.rootBoundary,y=n.altBoundary,b=n.flipVariations,v=b===void 0?!0:b,T=n.allowedAutoPlacements,S=e.options.placement,w=Gi(S),C=w===S,A=f||(C||!v?[Bh(S)]:p4(S)),O=[S].concat(A).reduce(function(re,ue){return re.concat(Gi(ue)===hb?d4(e,{placement:ue,boundary:p,rootBoundary:m,padding:h,flipVariations:v,allowedAutoPlacements:T}):ue)},[]),R=e.rects.reference,D=e.rects.popper,z=new Map,j=!0,V=O[0],x=0;x<O.length;x++){var H=O[x],te=Gi(H),se=nl(H)===Ja,fe=[Mn,pi].indexOf(te)>=0,pe=fe?"width":"height",N=iu(e,{placement:H,boundary:p,rootBoundary:m,altBoundary:y,padding:h}),U=fe?se?gi:Pn:se?pi:Mn;R[pe]>D[pe]&&(U=Bh(U));var L=Bh(U),X=[];if(s&&X.push(N[te]<=0),c&&X.push(N[U]<=0,N[L]<=0),X.every(function(re){return re})){V=H,j=!1;break}z.set(H,X)}if(j)for(var P=v?3:1,$=function(ue){var ye=O.find(function(Se){var me=z.get(Se);if(me)return me.slice(0,ue).every(function(Re){return Re})});if(ye)return V=ye,"break"},Q=P;Q>0;Q--){var ne=$(Q);if(ne==="break")break}e.placement!==V&&(e.modifiersData[i]._skip=!0,e.placement=V,e.reset=!0)}}const m4={name:"flip",enabled:!0,phase:"main",fn:g4,requiresIfExists:["offset"],data:{_skip:!1}};function QE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function GE(t){return[Mn,gi,pi,Pn].some(function(e){return t[e]>=0})}function y4(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,a=iu(e,{elementContext:"reference"}),c=iu(e,{altBoundary:!0}),f=QE(a,i),h=QE(c,r,s),p=GE(f),m=GE(h);e.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":m})}const _4={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:y4};function b4(t,e,n){var i=Gi(t),r=[Pn,Mn].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=s[0],c=s[1];return a=a||0,c=(c||0)*r,[Pn,gi].indexOf(i)>=0?{x:c,y:a}:{x:a,y:c}}function v4(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,a=NC.reduce(function(p,m){return p[m]=b4(m,e.rects,s),p},{}),c=a[e.placement],f=c.x,h=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=f,e.modifiersData.popperOffsets.y+=h),e.modifiersData[i]=a}const T4={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:v4};function S4(t){var e=t.state,n=t.name;e.modifiersData[n]=FC({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const E4={name:"popperOffsets",enabled:!0,phase:"read",fn:S4,data:{}};function w4(t){return t==="x"?"y":"x"}function A4(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,a=n.altAxis,c=a===void 0?!1:a,f=n.boundary,h=n.rootBoundary,p=n.altBoundary,m=n.padding,y=n.tether,b=y===void 0?!0:y,v=n.tetherOffset,T=v===void 0?0:v,S=iu(e,{boundary:f,rootBoundary:h,padding:m,altBoundary:p}),w=Gi(e.placement),C=nl(e.placement),A=!C,O=gb(w),R=w4(O),D=e.modifiersData.popperOffsets,z=e.rects.reference,j=e.rects.popper,V=typeof T=="function"?T(Object.assign({},e.rects,{placement:e.placement})):T,x=typeof V=="number"?{mainAxis:V,altAxis:V}:Object.assign({mainAxis:0,altAxis:0},V),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,te={x:0,y:0};if(D){if(s){var se,fe=O==="y"?Mn:Pn,pe=O==="y"?pi:gi,N=O==="y"?"height":"width",U=D[O],L=U+S[fe],X=U-S[pe],P=b?-j[N]/2:0,$=C===Ja?z[N]:j[N],Q=C===Ja?-j[N]:-z[N],ne=e.elements.arrow,re=b&&ne?pb(ne):{width:0,height:0},ue=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:DC(),ye=ue[fe],Se=ue[pe],me=Fc(0,z[N],re[N]),Re=A?z[N]/2-P-me-ye-x.mainAxis:$-me-ye-x.mainAxis,ve=A?-z[N]/2+P+me+Se+x.mainAxis:Q+me+Se+x.mainAxis,Qe=e.elements.arrow&&wu(e.elements.arrow),Ge=Qe?O==="y"?Qe.clientTop||0:Qe.clientLeft||0:0,bt=(se=H==null?void 0:H[O])!=null?se:0,kt=U+Re-bt-Ge,Ce=U+ve-bt,xe=Fc(b?ad(L,kt):L,U,b?ao(X,Ce):X);D[O]=xe,te[O]=xe-U}if(c){var Ye,vt=O==="x"?Mn:Pn,tn=O==="x"?pi:gi,Ht=D[R],fn=R==="y"?"height":"width",we=Ht+S[vt],ki=Ht-S[tn],Wt=[Mn,Pn].indexOf(w)!==-1,ir=(Ye=H==null?void 0:H[R])!=null?Ye:0,Ii=Wt?we:Ht-z[fn]-j[fn]-ir+x.altAxis,dt=Wt?Ht+z[fn]+j[fn]-ir-x.altAxis:ki,mt=b&&Wt?KL(Ii,Ht,dt):Fc(b?Ii:we,Ht,b?dt:ki);D[R]=mt,te[R]=mt-Ht}e.modifiersData[i]=te}}const x4={name:"preventOverflow",enabled:!0,phase:"main",fn:A4,requiresIfExists:["offset"]};function R4(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function C4(t){return t===Xn(t)||!ui(t)?mb(t):R4(t)}function O4(t){var e=t.getBoundingClientRect(),n=el(e.width)/t.offsetWidth||1,i=el(e.height)/t.offsetHeight||1;return n!==1||i!==1}function M4(t,e,n){n===void 0&&(n=!1);var i=ui(e),r=ui(e)&&O4(e),s=Rs(e),a=tl(t,r,n),c={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(i||!i&&!n)&&((Ji(e)!=="body"||_b(s))&&(c=C4(e)),ui(e)?(f=tl(e,!0),f.x+=e.clientLeft,f.y+=e.clientTop):s&&(f.x=yb(s))),{x:a.left+c.scrollLeft-f.x,y:a.top+c.scrollTop-f.y,width:a.width,height:a.height}}function P4(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(c){if(!n.has(c)){var f=e.get(c);f&&r(f)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function N4(t){var e=P4(t);return jL.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function k4(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function I4(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var JE={placement:"bottom",modifiers:[],strategy:"absolute"};function ew(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function D4(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?JE:r;return function(c,f,h){h===void 0&&(h=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},JE,s),modifiersData:{},elements:{reference:c,popper:f},attributes:{},styles:{}},m=[],y=!1,b={state:p,setOptions:function(w){var C=typeof w=="function"?w(p.options):w;T(),p.options=Object.assign({},s,p.options,C),p.scrollParents={reference:bo(c)?zc(c):c.contextElement?zc(c.contextElement):[],popper:zc(f)};var A=N4(I4([].concat(i,p.options.modifiers)));return p.orderedModifiers=A.filter(function(O){return O.enabled}),v(),b.update()},forceUpdate:function(){if(!y){var w=p.elements,C=w.reference,A=w.popper;if(ew(C,A)){p.rects={reference:M4(C,wu(A),p.options.strategy==="fixed"),popper:pb(A)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(x){return p.modifiersData[x.name]=Object.assign({},x.data)});for(var O=0;O<p.orderedModifiers.length;O++){if(p.reset===!0){p.reset=!1,O=-1;continue}var R=p.orderedModifiers[O],D=R.fn,z=R.options,j=z===void 0?{}:z,V=R.name;typeof D=="function"&&(p=D({state:p,options:j,name:V,instance:b})||p)}}}},update:k4(function(){return new Promise(function(S){b.forceUpdate(),S(p)})}),destroy:function(){T(),y=!0}};if(!ew(c,f))return b;b.setOptions(h).then(function(S){!y&&h.onFirstUpdate&&h.onFirstUpdate(S)});function v(){p.orderedModifiers.forEach(function(S){var w=S.name,C=S.options,A=C===void 0?{}:C,O=S.effect;if(typeof O=="function"){var R=O({state:p,name:w,instance:b,options:A}),D=function(){};m.push(R||D)}})}function T(){m.forEach(function(S){return S()}),m=[]}return b}}var B4=[s4,E4,i4,XL,T4,m4,x4,JL,_4],L4=D4({defaultModifiers:B4});function U4(t){return typeof t=="function"?t():t}const F4=I.forwardRef(function(e,n){const{children:i,container:r,disablePortal:s=!1}=e,[a,c]=I.useState(null),f=Pr(I.isValidElement(i)?ib(i):null,n);if(Ga(()=>{s||c(U4(r)||document.body)},[r,s]),Ga(()=>{if(a&&!s)return u_(n,a),()=>{u_(n,null)}},[n,a,s]),s){if(I.isValidElement(i)){const h={ref:f};return I.cloneElement(i,h)}return i}return a&&CC.createPortal(i,a)});function z4(t){return yi("MuiPopper",t)}Mi("MuiPopper",["root"]);function V4(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function T_(t){return typeof t=="function"?t():t}function $4(t){return t.nodeType!==void 0}const j4=t=>{const{classes:e}=t;return Pi({root:["root"]},z4,e)},H4={},W4=I.forwardRef(function(e,n){const{anchorEl:i,children:r,direction:s,disablePortal:a,modifiers:c,open:f,placement:h,popperOptions:p,popperRef:m,slotProps:y={},slots:b={},TransitionProps:v,ownerState:T,...S}=e,w=I.useRef(null),C=Pr(w,n),A=I.useRef(null),O=Pr(A,m),R=I.useRef(O);Ga(()=>{R.current=O},[O]),I.useImperativeHandle(m,()=>A.current,[]);const D=V4(h,s),[z,j]=I.useState(D),[V,x]=I.useState(T_(i));I.useEffect(()=>{A.current&&A.current.forceUpdate()}),I.useEffect(()=>{i&&x(T_(i))},[i]),Ga(()=>{if(!V||!f)return;const pe=L=>{j(L.placement)};let N=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:L})=>{pe(L)}}];c!=null&&(N=N.concat(c)),p&&p.modifiers!=null&&(N=N.concat(p.modifiers));const U=L4(V,w.current,{placement:D,...p,modifiers:N});return R.current(U),()=>{U.destroy(),R.current(null)}},[V,a,c,f,p,D]);const H={placement:z};v!==null&&(H.TransitionProps=v);const te=j4(e),se=b.root??"div",fe=xD({elementType:se,externalSlotProps:y.root,externalForwardedProps:S,additionalProps:{role:"tooltip",ref:C},ownerState:e,className:te.root});return de.jsx(se,{...fe,children:typeof r=="function"?r(H):r})}),X4=I.forwardRef(function(e,n){const{anchorEl:i,children:r,container:s,direction:a="ltr",disablePortal:c=!1,keepMounted:f=!1,modifiers:h,open:p,placement:m="bottom",popperOptions:y=H4,popperRef:b,style:v,transition:T=!1,slotProps:S={},slots:w={},...C}=e,[A,O]=I.useState(!0),R=()=>{O(!1)},D=()=>{O(!0)};if(!f&&!p&&(!T||A))return null;let z;if(s)z=s;else if(i){const x=T_(i);z=x&&$4(x)?wE(x).body:wE(null).body}const j=!p&&f&&(!T||A)?"none":void 0,V=T?{in:p,onEnter:R,onExited:D}:void 0;return de.jsx(F4,{disablePortal:c,container:z,children:de.jsx(W4,{anchorEl:i,direction:a,disablePortal:c,modifiers:h,ref:n,open:T?!A:p,placement:m,popperOptions:y,popperRef:b,slotProps:S,slots:w,...C,style:{position:"fixed",top:0,left:0,display:j,...v},TransitionProps:V,children:r})})}),q4=en(X4,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),zC=I.forwardRef(function(e,n){const i=pC(),r=qn({props:e,name:"MuiPopper"}),{anchorEl:s,component:a,components:c,componentsProps:f,container:h,disablePortal:p,keepMounted:m,modifiers:y,open:b,placement:v,popperOptions:T,popperRef:S,transition:w,slots:C,slotProps:A,...O}=r,R=(C==null?void 0:C.root)??(c==null?void 0:c.Root),D={anchorEl:s,container:h,disablePortal:p,keepMounted:m,modifiers:y,open:b,placement:v,popperOptions:T,popperRef:S,transition:w,...O};return de.jsx(q4,{as:a,direction:i?"rtl":"ltr",slots:{root:R},slotProps:A??f,...D,ref:n})}),bb=QD({createStyledComponent:en("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${rt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>qn({props:t,name:"MuiContainer"})}),S_=typeof wC({})=="function",Y4=(t,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!t.vars&&{colorScheme:t.palette.mode}}),K4=t=>({color:(t.vars||t).palette.text.primary,...t.typography.body1,backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),VC=(t,e=!1)=>{var s,a;const n={};e&&t.colorSchemes&&typeof t.getColorSchemeSelector=="function"&&Object.entries(t.colorSchemes).forEach(([c,f])=>{var p,m;const h=t.getColorSchemeSelector(c);h.startsWith("@")?n[h]={":root":{colorScheme:(p=f.palette)==null?void 0:p.mode}}:n[h.replace(/\s*&/,"")]={colorScheme:(m=f.palette)==null?void 0:m.mode}});let i={html:Y4(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:{margin:0,...K4(t),"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}},...n};const r=(a=(s=t.components)==null?void 0:s.MuiCssBaseline)==null?void 0:a.styleOverrides;return r&&(i=[i,r]),i},Lh="mui-ecs",Z4=t=>{const e=VC(t,!1),n=Array.isArray(e)?e[0]:e;return!t.vars&&n&&(n.html[`:root:has(${Lh})`]={colorScheme:t.palette.mode}),t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([i,r])=>{var a,c;const s=t.getColorSchemeSelector(i);s.startsWith("@")?n[s]={[`:root:not(:has(.${Lh}))`]:{colorScheme:(a=r.palette)==null?void 0:a.mode}}:n[s.replace(/\s*&/,"")]={[`&:not(:has(.${Lh}))`]:{colorScheme:(c=r.palette)==null?void 0:c.mode}}}),e},Q4=wC(S_?({theme:t,enableColorScheme:e})=>VC(t,e):({theme:t})=>Z4(t));function G4(t){const e=qn({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:i=!1}=e;return de.jsxs(I.Fragment,{children:[S_&&de.jsx(Q4,{enableColorScheme:i}),!S_&&!i&&de.jsx("span",{className:Lh,style:{display:"none"}}),n]})}function E_(t){return`scale(${t}, ${t**2})`}const J4={entering:{opacity:1,transform:E_(1)},entered:{opacity:1,transform:"none"}},uy=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),w_=I.forwardRef(function(e,n){const{addEndListener:i,appear:r=!0,children:s,easing:a,in:c,onEnter:f,onEntered:h,onEntering:p,onExit:m,onExited:y,onExiting:b,style:v,timeout:T="auto",TransitionComponent:S=Br,...w}=e,C=Da(),A=I.useRef(),O=cb(),R=I.useRef(null),D=Pr(R,ib(s),n),z=pe=>N=>{if(pe){const U=R.current;N===void 0?pe(U):pe(U,N)}},j=z(p),V=z((pe,N)=>{HB(pe);const{duration:U,delay:L,easing:X}=$E({style:v,timeout:T,easing:a},{mode:"enter"});let P;T==="auto"?(P=O.transitions.getAutoHeightDuration(pe.clientHeight),A.current=P):P=U,pe.style.transition=[O.transitions.create("opacity",{duration:P,delay:L}),O.transitions.create("transform",{duration:uy?P:P*.666,delay:L,easing:X})].join(","),f&&f(pe,N)}),x=z(h),H=z(b),te=z(pe=>{const{duration:N,delay:U,easing:L}=$E({style:v,timeout:T,easing:a},{mode:"exit"});let X;T==="auto"?(X=O.transitions.getAutoHeightDuration(pe.clientHeight),A.current=X):X=N,pe.style.transition=[O.transitions.create("opacity",{duration:X,delay:U}),O.transitions.create("transform",{duration:uy?X:X*.666,delay:uy?U:U||X*.333,easing:L})].join(","),pe.style.opacity=0,pe.style.transform=E_(.75),m&&m(pe)}),se=z(y),fe=pe=>{T==="auto"&&C.start(A.current||0,pe),i&&i(R.current,pe)};return de.jsx(S,{appear:r,in:c,nodeRef:R,onEnter:V,onEntered:x,onEntering:j,onExit:te,onExited:se,onExiting:H,addEndListener:fe,timeout:T==="auto"?null:T,...w,children:(pe,{ownerState:N,...U})=>I.cloneElement(s,{style:{opacity:0,transform:E_(.75),visibility:pe==="exited"&&!c?"hidden":void 0,...J4[pe],...v,...s.props.style},ref:D,...U})})});w_&&(w_.muiSupportAuto=!0);function e6(t){return yi("MuiTooltip",t)}const Mt=Mi("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function t6(t){return Math.round(t*1e5)/1e5}const n6=t=>{const{classes:e,disableInteractive:n,arrow:i,touch:r,placement:s}=t,a={popper:["popper",!n&&"popperInteractive",i&&"popperArrow"],tooltip:["tooltip",i&&"tooltipArrow",r&&"touch",`tooltipPlacement${rt(s.split("-")[0])}`],arrow:["arrow"]};return Pi(a,e6,e)},i6=en(zC,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(di(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${Mt.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Mt.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Mt.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Mt.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Mt.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Mt.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Mt.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Mt.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),r6=en("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${rt(n.placement.split("-")[0])}`]]}})(di(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:_o(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${Mt.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Mt.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Mt.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Mt.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${t6(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${Mt.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Mt.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${Mt.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Mt.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${Mt.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Mt.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${Mt.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Mt.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Mt.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Mt.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),s6=en("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(di(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:_o(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let eh=!1;const tw=new gp;let bc={x:0,y:0};function th(t,e){return(n,...i)=>{e&&e(n,...i),t(n,...i)}}const nw=I.forwardRef(function(e,n){const i=qn({props:e,name:"MuiTooltip"}),{arrow:r=!1,children:s,classes:a,components:c={},componentsProps:f={},describeChild:h=!1,disableFocusListener:p=!1,disableHoverListener:m=!1,disableInteractive:y=!1,disableTouchListener:b=!1,enterDelay:v=100,enterNextDelay:T=0,enterTouchDelay:S=700,followCursor:w=!1,id:C,leaveDelay:A=0,leaveTouchDelay:O=1500,onClose:R,onOpen:D,open:z,placement:j="bottom",PopperComponent:V,PopperProps:x={},slotProps:H={},slots:te={},title:se,TransitionComponent:fe,TransitionProps:pe,...N}=i,U=I.isValidElement(s)?s:de.jsx("span",{children:s}),L=cb(),X=pC(),[P,$]=I.useState(),[Q,ne]=I.useState(null),re=I.useRef(!1),ue=y||w,ye=Da(),Se=Da(),me=Da(),Re=Da(),[ve,Qe]=TD({controlled:z,default:!1,name:"Tooltip",state:"open"});let Ge=ve;const bt=aC(C),kt=I.useRef(),Ce=Xa(()=>{kt.current!==void 0&&(document.body.style.WebkitUserSelect=kt.current,kt.current=void 0),Re.clear()});I.useEffect(()=>Ce,[Ce]);const xe=Ne=>{tw.clear(),eh=!0,Qe(!0),D&&!Ge&&D(Ne)},Ye=Xa(Ne=>{tw.start(800+A,()=>{eh=!1}),Qe(!1),R&&Ge&&R(Ne),ye.start(L.transitions.duration.shortest,()=>{re.current=!1})}),vt=Ne=>{re.current&&Ne.type!=="touchstart"||(P&&P.removeAttribute("title"),Se.clear(),me.clear(),v||eh&&T?Se.start(eh?T:v,()=>{xe(Ne)}):xe(Ne))},tn=Ne=>{Se.clear(),me.start(A,()=>{Ye(Ne)})},[,Ht]=I.useState(!1),fn=Ne=>{rd(Ne.target)||(Ht(!1),tn(Ne))},we=Ne=>{P||$(Ne.currentTarget),rd(Ne.target)&&(Ht(!0),vt(Ne))},ki=Ne=>{re.current=!0;const xn=U.props;xn.onTouchStart&&xn.onTouchStart(Ne)},Wt=Ne=>{ki(Ne),me.clear(),ye.clear(),Ce(),kt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Re.start(S,()=>{document.body.style.WebkitUserSelect=kt.current,vt(Ne)})},ir=Ne=>{U.props.onTouchEnd&&U.props.onTouchEnd(Ne),Ce(),me.start(O,()=>{Ye(Ne)})};I.useEffect(()=>{if(!Ge)return;function Ne(xn){xn.key==="Escape"&&Ye(xn)}return document.addEventListener("keydown",Ne),()=>{document.removeEventListener("keydown",Ne)}},[Ye,Ge]);const Ii=Pr(ib(U),$,n);!se&&se!==0&&(Ge=!1);const dt=I.useRef(),mt=Ne=>{const xn=U.props;xn.onMouseMove&&xn.onMouseMove(Ne),bc={x:Ne.clientX,y:Ne.clientY},dt.current&&dt.current.update()},It={},Yn=typeof se=="string";h?(It.title=!Ge&&Yn&&!m?se:null,It["aria-describedby"]=Ge?bt:null):(It["aria-label"]=Yn?se:null,It["aria-labelledby"]=Ge&&!Yn?bt:null);const pt={...It,...N,...U.props,className:Ke(N.className,U.props.className),onTouchStart:ki,ref:Ii,...w?{onMouseMove:mt}:{}},nn={};b||(pt.onTouchStart=Wt,pt.onTouchEnd=ir),m||(pt.onMouseOver=th(vt,pt.onMouseOver),pt.onMouseLeave=th(tn,pt.onMouseLeave),ue||(nn.onMouseOver=vt,nn.onMouseLeave=tn)),p||(pt.onFocus=th(we,pt.onFocus),pt.onBlur=th(fn,pt.onBlur),ue||(nn.onFocus=we,nn.onBlur=fn));const Dn={...i,isRtl:X,arrow:r,disableInteractive:ue,placement:j,PopperComponentProp:V,touch:re.current},gt=typeof H.popper=="function"?H.popper(Dn):H.popper,Vp=I.useMemo(()=>{var xn,Do;let Ne=[{name:"arrow",enabled:!!Q,options:{element:Q,padding:4}}];return(xn=x.popperOptions)!=null&&xn.modifiers&&(Ne=Ne.concat(x.popperOptions.modifiers)),(Do=gt==null?void 0:gt.popperOptions)!=null&&Do.modifiers&&(Ne=Ne.concat(gt.popperOptions.modifiers)),{...x.popperOptions,...gt==null?void 0:gt.popperOptions,modifiers:Ne}},[Q,x.popperOptions,gt==null?void 0:gt.popperOptions]),Kn=n6(Dn),Tn=typeof H.transition=="function"?H.transition(Dn):H.transition,Po={slots:{popper:c.Popper,transition:c.Transition??fe,tooltip:c.Tooltip,arrow:c.Arrow,...te},slotProps:{arrow:H.arrow??f.arrow,popper:{...x,...gt??f.popper},tooltip:H.tooltip??f.tooltip,transition:{...pe,...Tn??f.transition}}},[$p,jp]=Gf("popper",{elementType:i6,externalForwardedProps:Po,ownerState:Dn,className:Ke(Kn.popper,x==null?void 0:x.className)}),[No,ko]=Gf("transition",{elementType:w_,externalForwardedProps:Po,ownerState:Dn}),[rr,Io]=Gf("tooltip",{elementType:r6,className:Kn.tooltip,externalForwardedProps:Po,ownerState:Dn}),[Cs,Hp]=Gf("arrow",{elementType:s6,className:Kn.arrow,externalForwardedProps:Po,ownerState:Dn,ref:ne});return de.jsxs(I.Fragment,{children:[I.cloneElement(U,pt),de.jsx($p,{as:V??zC,placement:j,anchorEl:w?{getBoundingClientRect:()=>({top:bc.y,left:bc.x,right:bc.x,bottom:bc.y,width:0,height:0})}:P,popperRef:dt,open:P?Ge:!1,id:bt,transition:!0,...nn,...jp,popperOptions:Vp,children:({TransitionProps:Ne})=>de.jsx(No,{timeout:L.transitions.duration.shorter,...Ne,...ko,children:de.jsxs(rr,{...Io,children:[se,r?de.jsx(Cs,{...Hp}):null]})})})]})});function o6(t){return yi("MuiToolbar",t)}Mi("MuiToolbar",["root","gutters","regular","dense"]);const a6=t=>{const{classes:e,disableGutters:n,variant:i}=t;return Pi({root:["root",!n&&"gutters",i]},o6,e)},l6=en("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(di(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),$C=I.forwardRef(function(e,n){const i=qn({props:e,name:"MuiToolbar"}),{className:r,component:s="div",disableGutters:a=!1,variant:c="regular",...f}=i,h={...i,component:s,disableGutters:a,variant:c},p=a6(h);return de.jsx(l6,{as:s,className:Ke(p.root,r),ref:n,ownerState:h,...f})});var vc={},iw;function c6(){if(iw)return vc;iw=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.parse=a,vc.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function a(y,b){const v=new s,T=y.length;if(T<2)return v;const S=(b==null?void 0:b.decode)||p;let w=0;do{const C=y.indexOf("=",w);if(C===-1)break;const A=y.indexOf(";",w),O=A===-1?T:A;if(C>O){w=y.lastIndexOf(";",C-1)+1;continue}const R=c(y,w,C),D=f(y,C,R),z=y.slice(R,D);if(v[z]===void 0){let j=c(y,C+1,O),V=f(y,O,j);const x=S(y.slice(j,V));v[z]=x}w=O+1}while(w<T);return v}function c(y,b,v){do{const T=y.charCodeAt(b);if(T!==32&&T!==9)return b}while(++b<v);return v}function f(y,b,v){for(;b>v;){const T=y.charCodeAt(--b);if(T!==32&&T!==9)return b+1}return v}function h(y,b,v){const T=(v==null?void 0:v.encode)||encodeURIComponent;if(!t.test(y))throw new TypeError(`argument name is invalid: ${y}`);const S=T(b);if(!e.test(S))throw new TypeError(`argument val is invalid: ${b}`);let w=y+"="+S;if(!v)return w;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);w+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);w+="; Domain="+v.domain}if(v.path){if(!i.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);w+="; Path="+v.path}if(v.expires){if(!m(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);w+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(w+="; HttpOnly"),v.secure&&(w+="; Secure"),v.partitioned&&(w+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return w}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return r.call(y)==="[object Date]"}return vc}c6();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rw="popstate";function u6(t={}){function e(r,s){let{pathname:a="/",search:c="",hash:f=""}=Ao(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),A_("",{pathname:a,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let f=r.location.href,h=f.indexOf("#");c=h===-1?f:f.slice(0,h)}return c+"#"+(typeof s=="string"?s:ru(s))}function i(r,s){Ci(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return h6(e,n,i,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ci(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f6(){return Math.random().toString(36).substring(2,10)}function sw(t,e){return{usr:t.state,key:t.key,idx:e}}function A_(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ao(e):e,state:n,key:e&&e.key||i||f6()}}function ru({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function h6(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,c="POP",f=null,h=p();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function p(){return(a.state||{idx:null}).idx}function m(){c="POP";let S=p(),w=S==null?null:S-h;h=S,f&&f({action:c,location:T.location,delta:w})}function y(S,w){c="PUSH";let C=A_(T.location,S,w);n&&n(C,S),h=p()+1;let A=sw(C,h),O=T.createHref(C);try{a.pushState(A,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(O)}s&&f&&f({action:c,location:T.location,delta:1})}function b(S,w){c="REPLACE";let C=A_(T.location,S,w);n&&n(C,S),h=p();let A=sw(C,h),O=T.createHref(C);a.replaceState(A,"",O),s&&f&&f({action:c,location:T.location,delta:0})}function v(S){let w=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof S=="string"?S:ru(S);return C=C.replace(/ $/,"%20"),Et(w,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,w)}let T={get action(){return c},get location(){return t(r,a)},listen(S){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(rw,m),f=S,()=>{r.removeEventListener(rw,m),f=null}},createHref(S){return e(r,S)},createURL:v,encodeLocation(S){let w=v(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:y,replace:b,go(S){return a.go(S)}};return T}function jC(t,e,n="/"){return d6(t,e,n,!1)}function d6(t,e,n,i){let r=typeof e=="string"?Ao(e):e,s=Es(r.pathname||"/",n);if(s==null)return null;let a=HC(t);p6(a);let c=null;for(let f=0;c==null&&f<a.length;++f){let h=A6(s);c=E6(a[f],h,i)}return c}function HC(t,e=[],n=[],i=""){let r=(s,a,c)=>{let f={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};f.relativePath.startsWith("/")&&(Et(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let h=Cr([i,f.relativePath]),p=n.concat(f);s.children&&s.children.length>0&&(Et(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),HC(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:T6(h,s.index),routesMeta:p})};return t.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))r(s,a);else for(let f of WC(s.path))r(s,a,f)}),e}function WC(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=WC(i.join("/")),c=[];return c.push(...a.map(f=>f===""?s:[s,f].join("/"))),r&&c.push(...a),c.map(f=>t.startsWith("/")&&f===""?"/":f)}function p6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:S6(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var g6=/^:[\w-]+$/,m6=3,y6=2,_6=1,b6=10,v6=-2,ow=t=>t==="*";function T6(t,e){let n=t.split("/"),i=n.length;return n.some(ow)&&(i+=v6),e&&(i+=y6),n.filter(r=>!ow(r)).reduce((r,s)=>r+(g6.test(s)?m6:s===""?_6:b6),i)}function S6(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function E6(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let c=0;c<i.length;++c){let f=i[c],h=c===i.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=ld({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),y=f.route;if(!m&&h&&n&&!i[i.length-1].route.index&&(m=ld({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!m)return null;Object.assign(r,m.params),a.push({params:r,pathname:Cr([s,m.pathname]),pathnameBase:O6(Cr([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=Cr([s,m.pathnameBase]))}return a}function ld(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=w6(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((h,{paramName:p,isOptional:m},y)=>{if(p==="*"){let v=c[y]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const b=c[y];return m&&!b?h[p]=void 0:h[p]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:t}}function w6(t,e=!1,n=!0){Ci(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,f)=>(i.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function A6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ci(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Es(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function x6(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ao(t):t;return{pathname:n?n.startsWith("/")?n:R6(n,e):e,search:M6(i),hash:P6(r)}}function R6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function fy(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function C6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function XC(t){let e=C6(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function qC(t,e,n,i=!1){let r;typeof t=="string"?r=Ao(t):(r={...t},Et(!r.pathname||!r.pathname.includes("?"),fy("?","pathname","search",r)),Et(!r.pathname||!r.pathname.includes("#"),fy("#","pathname","hash",r)),Et(!r.search||!r.search.includes("#"),fy("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!i&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;r.pathname=y.join("/")}c=m>=0?e[m]:"/"}let f=x6(r,c),h=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var Cr=t=>t.join("/").replace(/\/\/+/g,"/"),O6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),M6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function N6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var YC=["POST","PUT","PATCH","DELETE"];new Set(YC);var k6=["GET",...YC];new Set(k6);var hl=I.createContext(null);hl.displayName="DataRouter";var _p=I.createContext(null);_p.displayName="DataRouterState";var KC=I.createContext({isTransitioning:!1});KC.displayName="ViewTransition";var I6=I.createContext(new Map);I6.displayName="Fetchers";var D6=I.createContext(null);D6.displayName="Await";var er=I.createContext(null);er.displayName="Navigation";var Au=I.createContext(null);Au.displayName="Location";var Lr=I.createContext({outlet:null,matches:[],isDataRoute:!1});Lr.displayName="Route";var vb=I.createContext(null);vb.displayName="RouteError";function B6(t,{relative:e}={}){Et(xu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=I.useContext(er),{hash:r,pathname:s,search:a}=Ru(t,{relative:e}),c=s;return n!=="/"&&(c=s==="/"?n:Cr([n,s])),i.createHref({pathname:c,search:a,hash:r})}function xu(){return I.useContext(Au)!=null}function xo(){return Et(xu(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Au).location}var ZC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QC(t){I.useContext(er).static||I.useLayoutEffect(t)}function L6(){let{isDataRoute:t}=I.useContext(Lr);return t?Z6():U6()}function U6(){Et(xu(),"useNavigate() may be used only in the context of a <Router> component.");let t=I.useContext(hl),{basename:e,navigator:n}=I.useContext(er),{matches:i}=I.useContext(Lr),{pathname:r}=xo(),s=JSON.stringify(XC(i)),a=I.useRef(!1);return QC(()=>{a.current=!0}),I.useCallback((f,h={})=>{if(Ci(a.current,ZC),!a.current)return;if(typeof f=="number"){n.go(f);return}let p=qC(f,JSON.parse(s),r,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Cr([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,s,r,t])}I.createContext(null);function Ru(t,{relative:e}={}){let{matches:n}=I.useContext(Lr),{pathname:i}=xo(),r=JSON.stringify(XC(n));return I.useMemo(()=>qC(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function F6(t,e){return GC(t,e)}function GC(t,e,n,i){var C;Et(xu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:s}=I.useContext(er),{matches:a}=I.useContext(Lr),c=a[a.length-1],f=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let A=m&&m.path||"";JC(h,!m||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let y=xo(),b;if(e){let A=typeof e=="string"?Ao(e):e;Et(p==="/"||((C=A.pathname)==null?void 0:C.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${A.pathname}" was given in the \`location\` prop.`),b=A}else b=y;let v=b.pathname||"/",T=v;if(p!=="/"){let A=p.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let S=!s&&n&&n.matches&&n.matches.length>0?n.matches:jC(t,{pathname:T});Ci(m||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ci(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=H6(S&&S.map(A=>Object.assign({},A,{params:Object.assign({},f,A.params),pathname:Cr([p,r.encodeLocation?r.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:Cr([p,r.encodeLocation?r.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,n,i);return e&&w?I.createElement(Au.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},w):w}function z6(){let t=K6(),e=N6(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:s},"ErrorBoundary")," or"," ",I.createElement("code",{style:s},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:r},n):null,a)}var V6=I.createElement(z6,null),$6=class extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?I.createElement(Lr.Provider,{value:this.props.routeContext},I.createElement(vb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function j6({routeContext:t,match:e,children:n}){let i=I.useContext(hl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Lr.Provider,{value:t},n)}function H6(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,s=n==null?void 0:n.errors;if(s!=null){let f=r.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);Et(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,f+1))}let a=!1,c=-1;if(n)for(let f=0;f<r.length;f++){let h=r[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:p,errors:m}=n,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){a=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}return r.reduceRight((f,h,p)=>{let m,y=!1,b=null,v=null;n&&(m=s&&h.route.id?s[h.route.id]:void 0,b=h.route.errorElement||V6,a&&(c<0&&p===0?(JC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):c===p&&(y=!0,v=h.route.hydrateFallbackElement||null)));let T=e.concat(r.slice(0,p+1)),S=()=>{let w;return m?w=b:y?w=v:h.route.Component?w=I.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=f,I.createElement(j6,{match:h,routeContext:{outlet:f,matches:T,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?I.createElement($6,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):S()},null)}function Tb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W6(t){let e=I.useContext(hl);return Et(e,Tb(t)),e}function X6(t){let e=I.useContext(_p);return Et(e,Tb(t)),e}function q6(t){let e=I.useContext(Lr);return Et(e,Tb(t)),e}function Sb(t){let e=q6(t),n=e.matches[e.matches.length-1];return Et(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Y6(){return Sb("useRouteId")}function K6(){var i;let t=I.useContext(vb),e=X6("useRouteError"),n=Sb("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function Z6(){let{router:t}=W6("useNavigate"),e=Sb("useNavigate"),n=I.useRef(!1);return QC(()=>{n.current=!0}),I.useCallback(async(r,s={})=>{Ci(n.current,ZC),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var aw={};function JC(t,e,n){!e&&!aw[t]&&(aw[t]=!0,Ci(!1,n))}I.memo(Q6);function Q6({routes:t,future:e,state:n}){return GC(t,void 0,n,e)}function x_(t){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function G6({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){Et(!xu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=Ao(n));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:y="default"}=n,b=I.useMemo(()=>{let v=Es(f,a);return v==null?null:{location:{pathname:v,search:h,hash:p,state:m,key:y},navigationType:i}},[a,f,h,p,m,y,i]);return Ci(b!=null,`<Router basename="${a}"> is not able to match the URL "${f}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:I.createElement(er.Provider,{value:c},I.createElement(Au.Provider,{children:e,value:b}))}function J6({children:t,location:e}){return F6(R_(t),e)}function R_(t,e=[]){let n=[];return I.Children.forEach(t,(i,r)=>{if(!I.isValidElement(i))return;let s=[...e,r];if(i.type===I.Fragment){n.push.apply(n,R_(i.props.children,s));return}Et(i.type===x_,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=R_(i.props.children,s)),n.push(a)}),n}var Uh="get",Fh="application/x-www-form-urlencoded";function bp(t){return t!=null&&typeof t.tagName=="string"}function eU(t){return bp(t)&&t.tagName.toLowerCase()==="button"}function tU(t){return bp(t)&&t.tagName.toLowerCase()==="form"}function nU(t){return bp(t)&&t.tagName.toLowerCase()==="input"}function iU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rU(t,e){return t.button===0&&(!e||e==="_self")&&!iU(t)}var nh=null;function sU(){if(nh===null)try{new FormData(document.createElement("form"),0),nh=!1}catch{nh=!0}return nh}var oU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hy(t){return t!=null&&!oU.has(t)?(Ci(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fh}"`),null):t}function aU(t,e){let n,i,r,s,a;if(tU(t)){let c=t.getAttribute("action");i=c?Es(c,e):null,n=t.getAttribute("method")||Uh,r=hy(t.getAttribute("enctype"))||Fh,s=new FormData(t)}else if(eU(t)||nU(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||c.getAttribute("action");if(i=f?Es(f,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Uh,r=hy(t.getAttribute("formenctype"))||hy(c.getAttribute("enctype"))||Fh,s=new FormData(c,t),!sU()){let{name:h,type:p,value:m}=t;if(p==="image"){let y=h?`${h}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else h&&s.append(h,m)}}else{if(bp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Uh,i=null,r=Fh,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}function Eb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function lU(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cU(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function uU(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await lU(s,n);return a.links?a.links():[]}return[]}));return pU(i.flat(1).filter(cU).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function lw(t,e,n,i,r,s){let a=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,c=(f,h)=>{var p;return n[h].pathname!==f.pathname||((p=n[h].route.path)==null?void 0:p.endsWith("*"))&&n[h].params["*"]!==f.params["*"]};return s==="assets"?e.filter((f,h)=>a(f,h)||c(f,h)):s==="data"?e.filter((f,h)=>{var m;let p=i.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(a(f,h)||c(f,h))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function fU(t,e,{includeHydrateFallback:n}={}){return hU(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function hU(t){return[...new Set(t)]}function dU(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function pU(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(dU(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function gU(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function mU(){let t=I.useContext(hl);return Eb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function yU(){let t=I.useContext(_p);return Eb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var wb=I.createContext(void 0);wb.displayName="FrameworkContext";function e2(){let t=I.useContext(wb);return Eb(t,"You must render this element inside a <HydratedRouter> element"),t}function _U(t,e){let n=I.useContext(wb),[i,r]=I.useState(!1),[s,a]=I.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,y=I.useRef(null);I.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let T=w=>{w.forEach(C=>{a(C.isIntersecting)})},S=new IntersectionObserver(T,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[t]),I.useEffect(()=>{if(i){let T=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(T)}}},[i]);let b=()=>{r(!0)},v=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,y,{}]:[s,y,{onFocus:Tc(c,b),onBlur:Tc(f,v),onMouseEnter:Tc(h,b),onMouseLeave:Tc(p,v),onTouchStart:Tc(m,b)}]:[!1,y,{}]}function Tc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function bU({page:t,...e}){let{router:n}=mU(),i=I.useMemo(()=>jC(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?I.createElement(TU,{page:t,matches:i,...e}):null}function vU(t){let{manifest:e,routeModules:n}=e2(),[i,r]=I.useState([]);return I.useEffect(()=>{let s=!1;return uU(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function TU({page:t,matches:e,...n}){let i=xo(),{manifest:r,routeModules:s}=e2(),{loaderData:a,matches:c}=yU(),f=I.useMemo(()=>lw(t,e,c,r,i,"data"),[t,e,c,r,i]),h=I.useMemo(()=>lw(t,e,c,r,i,"assets"),[t,e,c,r,i]),p=I.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let b=new Set,v=!1;if(e.forEach(S=>{var C;let w=r.routes[S.route.id];!w||!w.hasLoader||(!f.some(A=>A.route.id===S.route.id)&&S.route.id in a&&((C=s[S.route.id])!=null&&C.shouldRevalidate)||w.hasClientLoader?v=!0:b.add(S.route.id))}),b.size===0)return[];let T=gU(t);return v&&b.size>0&&T.searchParams.set("_routes",e.filter(S=>b.has(S.route.id)).map(S=>S.route.id).join(",")),[T.pathname+T.search]},[a,i,r,f,e,t,s]),m=I.useMemo(()=>fU(h,r),[h,r]),y=vU(h);return I.createElement(I.Fragment,null,p.map(b=>I.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),m.map(b=>I.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),y.map(({key:b,link:v})=>I.createElement("link",{key:b,...v})))}function SU(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var t2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{t2&&(window.__reactRouterVersion="7.2.0")}catch{}function EU({basename:t,children:e,window:n}){let i=I.useRef();i.current==null&&(i.current=u6({window:n,v5Compat:!0}));let r=i.current,[s,a]=I.useState({action:r.action,location:r.location}),c=I.useCallback(f=>{I.startTransition(()=>a(f))},[a]);return I.useLayoutEffect(()=>r.listen(c),[r,c]),I.createElement(G6,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var n2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i2=I.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:c,target:f,to:h,preventScrollReset:p,viewTransition:m,...y},b){let{basename:v}=I.useContext(er),T=typeof h=="string"&&n2.test(h),S,w=!1;if(typeof h=="string"&&T&&(S=h,t2))try{let V=new URL(window.location.href),x=h.startsWith("//")?new URL(V.protocol+h):new URL(h),H=Es(x.pathname,v);x.origin===V.origin&&H!=null?h=H+x.search+x.hash:w=!0}catch{Ci(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=B6(h,{relative:r}),[A,O,R]=_U(i,y),D=RU(h,{replace:a,state:c,target:f,preventScrollReset:p,relative:r,viewTransition:m});function z(V){e&&e(V),V.defaultPrevented||D(V)}let j=I.createElement("a",{...y,...R,href:S||C,onClick:w||s?e:z,ref:SU(b,O),target:f,"data-discover":!T&&n==="render"?"true":void 0});return A&&!T?I.createElement(I.Fragment,null,j,I.createElement(bU,{page:C})):j});i2.displayName="Link";var wU=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:c,children:f,...h},p){let m=Ru(a,{relative:h.relative}),y=xo(),b=I.useContext(_p),{navigator:v,basename:T}=I.useContext(er),S=b!=null&&NU(m)&&c===!0,w=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,C=y.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(C=C.toLowerCase(),A=A?A.toLowerCase():null,w=w.toLowerCase()),A&&T&&(A=Es(A,T)||A);const O=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let R=C===w||!r&&C.startsWith(w)&&C.charAt(O)==="/",D=A!=null&&(A===w||!r&&A.startsWith(w)&&A.charAt(w.length)==="/"),z={isActive:R,isPending:D,isTransitioning:S},j=R?e:void 0,V;typeof i=="function"?V=i(z):V=[i,R?"active":null,D?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let x=typeof s=="function"?s(z):s;return I.createElement(i2,{...h,"aria-current":j,className:V,ref:p,style:x,to:a,viewTransition:c},typeof f=="function"?f(z):f)});wU.displayName="NavLink";var AU=I.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Uh,action:c,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:m,...y},b)=>{let v=MU(),T=PU(c,{relative:h}),S=a.toLowerCase()==="get"?"get":"post",w=typeof c=="string"&&n2.test(c),C=A=>{if(f&&f(A),A.defaultPrevented)return;A.preventDefault();let O=A.nativeEvent.submitter,R=(O==null?void 0:O.getAttribute("formmethod"))||a;v(O||A.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:r,state:s,relative:h,preventScrollReset:p,viewTransition:m})};return I.createElement("form",{ref:b,method:S,action:T,onSubmit:i?f:C,...y,"data-discover":!w&&t==="render"?"true":void 0})});AU.displayName="Form";function xU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r2(t){let e=I.useContext(hl);return Et(e,xU(t)),e}function RU(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let c=L6(),f=xo(),h=Ru(t,{relative:s});return I.useCallback(p=>{if(rU(p,e)){p.preventDefault();let m=n!==void 0?n:ru(f)===ru(h);c(t,{replace:m,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[f,c,h,n,i,e,t,r,s,a])}var CU=0,OU=()=>`__${String(++CU)}__`;function MU(){let{router:t}=r2("useSubmit"),{basename:e}=I.useContext(er),n=Y6();return I.useCallback(async(i,r={})=>{let{action:s,method:a,encType:c,formData:f,body:h}=aU(i,e);if(r.navigate===!1){let p=r.fetcherKey||OU();await t.fetch(p,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:f,body:h,formMethod:r.method||a,formEncType:r.encType||c,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:f,body:h,formMethod:r.method||a,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function PU(t,{relative:e}={}){let{basename:n}=I.useContext(er),i=I.useContext(Lr);Et(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Ru(t||".",{relative:e})},a=xo();if(t==null){s.search=a.search;let c=new URLSearchParams(s.search),f=c.getAll("index");if(f.some(p=>p==="")){c.delete("index"),f.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();s.search=p?`?${p}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Cr([n,s.pathname])),ru(s)}function NU(t,e={}){let n=I.useContext(KC);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=r2("useViewTransitionState"),r=Ru(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Es(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Es(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ld(r.pathname,a)!=null||ld(r.pathname,s)!=null}new TextEncoder;const kU=AC(de.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"}),"Map"),IU=AC(de.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),DU=(t,e,n,i)=>{var s,a,c,f;const r=[n,{code:e,...i||{}}];if((a=(s=t==null?void 0:t.services)==null?void 0:s.logger)!=null&&a.forward)return t.services.logger.forward(r,"warn","react-i18next::",!0);lo(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),(f=(c=t==null?void 0:t.services)==null?void 0:c.logger)!=null&&f.warn?t.services.logger.warn(...r):console!=null&&console.warn&&console.warn(...r)},cw={},C_=(t,e,n,i)=>{lo(n)&&cw[n]||(lo(n)&&(cw[n]=new Date),DU(t,e,n,i))},s2=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},O_=(t,e,n)=>{t.loadNamespaces(e,s2(t,n))},uw=(t,e,n,i)=>{if(lo(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return O_(t,n,i);n.forEach(r=>{t.options.ns.indexOf(r)<0&&t.options.ns.push(r)}),t.loadLanguages(e,s2(t,i))},BU=(t,e,n={})=>!e.languages||!e.languages.length?(C_(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,r)=>{var s;if(((s=n.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,t))return!1}}),lo=t=>typeof t=="string",LU=t=>typeof t=="object"&&t!==null,UU=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,FU={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},zU=t=>FU[t],VU=t=>t.replace(UU,zU);let M_={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:VU};const $U=(t={})=>{M_={...M_,...t}},jU=()=>M_;let o2;const HU=t=>{o2=t},WU=()=>o2,XU={type:"3rdParty",init(t){$U(t.options.react),HU(t)}},qU=I.createContext();class YU{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const KU=(t,e)=>{const n=I.useRef();return I.useEffect(()=>{n.current=t},[t,e]),n.current},a2=(t,e,n,i)=>t.getFixedT(e,n,i),ZU=(t,e,n,i)=>I.useCallback(a2(t,e,n,i),[t,e,n,i]),Cu=(t,e={})=>{var O,R,D,z;const{i18n:n}=e,{i18n:i,defaultNS:r}=I.useContext(qU)||{},s=n||i||WU();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new YU),!s){C_(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const j=(x,H)=>lo(H)?H:LU(H)&&lo(H.defaultValue)?H.defaultValue:Array.isArray(x)?x[x.length-1]:x,V=[j,{},!1];return V.t=j,V.i18n={},V.ready=!1,V}(O=s.options.react)!=null&&O.wait&&C_(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...jU(),...s.options.react,...e},{useSuspense:c,keyPrefix:f}=a;let h=r||((R=s.options)==null?void 0:R.defaultNS);h=lo(h)?[h]:h||["translation"],(z=(D=s.reportNamespaces).addUsedNamespaces)==null||z.call(D,h);const p=(s.isInitialized||s.initializedStoreOnce)&&h.every(j=>BU(j,s,a)),m=ZU(s,e.lng||null,a.nsMode==="fallback"?h:h[0],f),y=()=>m,b=()=>a2(s,e.lng||null,a.nsMode==="fallback"?h:h[0],f),[v,T]=I.useState(y);let S=h.join();e.lng&&(S=`${e.lng}${S}`);const w=KU(S),C=I.useRef(!0);I.useEffect(()=>{const{bindI18n:j,bindI18nStore:V}=a;C.current=!0,!p&&!c&&(e.lng?uw(s,e.lng,h,()=>{C.current&&T(b)}):O_(s,h,()=>{C.current&&T(b)})),p&&w&&w!==S&&C.current&&T(b);const x=()=>{C.current&&T(b)};return j&&(s==null||s.on(j,x)),V&&(s==null||s.store.on(V,x)),()=>{C.current=!1,s&&(j==null||j.split(" ").forEach(H=>s.off(H,x))),V&&s&&V.split(" ").forEach(H=>s.store.off(H,x))}},[s,S]),I.useEffect(()=>{C.current&&p&&T(y)},[s,f,p]);const A=[v,s,p];if(A.t=v,A.i18n=s,A.ready=p,p||!p&&!c)return A;throw new Promise(j=>{e.lng?uw(s,e.lng,h,()=>j()):O_(s,h,()=>j())})},QU=""+new URL("logo_color-Nussm146.png",import.meta.url).href;function GU(){const{t}=Cu(),e=QU;return de.jsx(de.Fragment,{children:de.jsx(bb,{children:de.jsx(MC,{color:"secondary",children:de.jsxs($C,{children:[de.jsx(cy,{size:"large",edge:"start",color:"inherit",href:"./","aria-label":"menu",sx:{m:0,p:0,mr:2},children:de.jsx("img",{src:e,height:40,alt:"Alert Viewer"})}),de.jsx(OC,{variant:"h1",component:"div",sx:{flexGrow:1},children:t("app.title")}),de.jsx(nw,{title:t("map.tooltip"),children:de.jsx(cy,{onClick:()=>{},href:"./",variant:"outlined",children:de.jsx(kU,{})})}),de.jsx(nw,{title:t("trajectory.tooltip"),children:de.jsx(cy,{onClick:()=>{},href:"./#/trajectory",variant:"outlined",children:de.jsx(IU,{})})})]})})})})}function l2(t,e){return function(){return t.apply(e,arguments)}}const{toString:JU}=Object.prototype,{getPrototypeOf:Ab}=Object,vp=(t=>e=>{const n=JU.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ni=t=>(t=t.toLowerCase(),e=>vp(e)===t),Tp=t=>e=>typeof e===t,{isArray:dl}=Array,su=Tp("undefined");function eF(t){return t!==null&&!su(t)&&t.constructor!==null&&!su(t.constructor)&&Wn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const c2=Ni("ArrayBuffer");function tF(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&c2(t.buffer),e}const nF=Tp("string"),Wn=Tp("function"),u2=Tp("number"),Sp=t=>t!==null&&typeof t=="object",iF=t=>t===!0||t===!1,zh=t=>{if(vp(t)!=="object")return!1;const e=Ab(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},rF=Ni("Date"),sF=Ni("File"),oF=Ni("Blob"),aF=Ni("FileList"),lF=t=>Sp(t)&&Wn(t.pipe),cF=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Wn(t.append)&&((e=vp(t))==="formdata"||e==="object"&&Wn(t.toString)&&t.toString()==="[object FormData]"))},uF=Ni("URLSearchParams"),[fF,hF,dF,pF]=["ReadableStream","Request","Response","Headers"].map(Ni),gF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ou(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),dl(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let c;for(i=0;i<a;i++)c=s[i],e.call(null,t[c],c,t)}}function f2(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const so=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,h2=t=>!su(t)&&t!==so;function P_(){const{caseless:t}=h2(this)&&this||{},e={},n=(i,r)=>{const s=t&&f2(e,r)||r;zh(e[s])&&zh(i)?e[s]=P_(e[s],i):zh(i)?e[s]=P_({},i):dl(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Ou(arguments[i],n);return e}const mF=(t,e,n,{allOwnKeys:i}={})=>(Ou(e,(r,s)=>{n&&Wn(r)?t[s]=l2(r,n):t[s]=r},{allOwnKeys:i}),t),yF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_F=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},bF=(t,e,n,i)=>{let r,s,a;const c={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)a=r[s],(!i||i(a,t,e))&&!c[a]&&(e[a]=t[a],c[a]=!0);t=n!==!1&&Ab(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},vF=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},TF=t=>{if(!t)return null;if(dl(t))return t;let e=t.length;if(!u2(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},SF=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ab(Uint8Array)),EF=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},wF=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},AF=Ni("HTMLFormElement"),xF=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),fw=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),RF=Ni("RegExp"),d2=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Ou(n,(r,s)=>{let a;(a=e(r,s,t))!==!1&&(i[s]=a||r)}),Object.defineProperties(t,i)},CF=t=>{d2(t,(e,n)=>{if(Wn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Wn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},OF=(t,e)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return dl(t)?i(t):i(String(t).split(e)),n},MF=()=>{},PF=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,dy="abcdefghijklmnopqrstuvwxyz",hw="0123456789",p2={DIGIT:hw,ALPHA:dy,ALPHA_DIGIT:dy+dy.toUpperCase()+hw},NF=(t=16,e=p2.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function kF(t){return!!(t&&Wn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const IF=t=>{const e=new Array(10),n=(i,r)=>{if(Sp(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=dl(i)?[]:{};return Ou(i,(a,c)=>{const f=n(a,r+1);!su(f)&&(s[c]=f)}),e[r]=void 0,s}}return i};return n(t,0)},DF=Ni("AsyncFunction"),BF=t=>t&&(Sp(t)||Wn(t))&&Wn(t.then)&&Wn(t.catch),g2=((t,e)=>t?setImmediate:e?((n,i)=>(so.addEventListener("message",({source:r,data:s})=>{r===so&&s===n&&i.length&&i.shift()()},!1),r=>{i.push(r),so.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Wn(so.postMessage)),LF=typeof queueMicrotask<"u"?queueMicrotask.bind(so):typeof process<"u"&&process.nextTick||g2,ie={isArray:dl,isArrayBuffer:c2,isBuffer:eF,isFormData:cF,isArrayBufferView:tF,isString:nF,isNumber:u2,isBoolean:iF,isObject:Sp,isPlainObject:zh,isReadableStream:fF,isRequest:hF,isResponse:dF,isHeaders:pF,isUndefined:su,isDate:rF,isFile:sF,isBlob:oF,isRegExp:RF,isFunction:Wn,isStream:lF,isURLSearchParams:uF,isTypedArray:SF,isFileList:aF,forEach:Ou,merge:P_,extend:mF,trim:gF,stripBOM:yF,inherits:_F,toFlatObject:bF,kindOf:vp,kindOfTest:Ni,endsWith:vF,toArray:TF,forEachEntry:EF,matchAll:wF,isHTMLForm:AF,hasOwnProperty:fw,hasOwnProp:fw,reduceDescriptors:d2,freezeMethods:CF,toObjectSet:OF,toCamelCase:xF,noop:MF,toFiniteNumber:PF,findKey:f2,global:so,isContextDefined:h2,ALPHABET:p2,generateString:NF,isSpecCompliantForm:kF,toJSONObject:IF,isAsyncFn:DF,isThenable:BF,setImmediate:g2,asap:LF};function ke(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}ie.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}});const m2=ke.prototype,y2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{y2[t]={value:t}});Object.defineProperties(ke,y2);Object.defineProperty(m2,"isAxiosError",{value:!0});ke.from=(t,e,n,i,r,s)=>{const a=Object.create(m2);return ie.toFlatObject(t,a,function(f){return f!==Error.prototype},c=>c!=="isAxiosError"),ke.call(a,t.message,e,n,i,r),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const UF=null;function N_(t){return ie.isPlainObject(t)||ie.isArray(t)}function _2(t){return ie.endsWith(t,"[]")?t.slice(0,-2):t}function dw(t,e,n){return t?t.concat(e).map(function(r,s){return r=_2(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function FF(t){return ie.isArray(t)&&!t.some(N_)}const zF=ie.toFlatObject(ie,{},null,function(e){return/^is[A-Z]/.test(e)});function Ep(t,e,n){if(!ie.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ie.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,S){return!ie.isUndefined(S[T])});const i=n.metaTokens,r=n.visitor||p,s=n.dots,a=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(e);if(!ie.isFunction(r))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(ie.isDate(v))return v.toISOString();if(!f&&ie.isBlob(v))throw new ke("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(v)||ie.isTypedArray(v)?f&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function p(v,T,S){let w=v;if(v&&!S&&typeof v=="object"){if(ie.endsWith(T,"{}"))T=i?T:T.slice(0,-2),v=JSON.stringify(v);else if(ie.isArray(v)&&FF(v)||(ie.isFileList(v)||ie.endsWith(T,"[]"))&&(w=ie.toArray(v)))return T=_2(T),w.forEach(function(A,O){!(ie.isUndefined(A)||A===null)&&e.append(a===!0?dw([T],O,s):a===null?T:T+"[]",h(A))}),!1}return N_(v)?!0:(e.append(dw(S,T,s),h(v)),!1)}const m=[],y=Object.assign(zF,{defaultVisitor:p,convertValue:h,isVisitable:N_});function b(v,T){if(!ie.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+T.join("."));m.push(v),ie.forEach(v,function(w,C){(!(ie.isUndefined(w)||w===null)&&r.call(e,w,ie.isString(C)?C.trim():C,T,y))===!0&&b(w,T?T.concat(C):[C])}),m.pop()}}if(!ie.isObject(t))throw new TypeError("data must be an object");return b(t),e}function pw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function xb(t,e){this._pairs=[],t&&Ep(t,this,e)}const b2=xb.prototype;b2.append=function(e,n){this._pairs.push([e,n])};b2.toString=function(e){const n=e?function(i){return e.call(this,i,pw)}:pw;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function VF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function v2(t,e,n){if(!e)return t;const i=n&&n.encode||VF;ie.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(e,n):s=ie.isURLSearchParams(e)?e.toString():new xb(e,n).toString(i),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class gw{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,function(i){i!==null&&e(i)})}}const T2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$F=typeof URLSearchParams<"u"?URLSearchParams:xb,jF=typeof FormData<"u"?FormData:null,HF=typeof Blob<"u"?Blob:null,WF={isBrowser:!0,classes:{URLSearchParams:$F,FormData:jF,Blob:HF},protocols:["http","https","file","blob","url","data"]},Rb=typeof window<"u"&&typeof document<"u",k_=typeof navigator=="object"&&navigator||void 0,XF=Rb&&(!k_||["ReactNative","NativeScript","NS"].indexOf(k_.product)<0),qF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",YF=Rb&&window.location.href||"http://localhost",KF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Rb,hasStandardBrowserEnv:XF,hasStandardBrowserWebWorkerEnv:qF,navigator:k_,origin:YF},Symbol.toStringTag,{value:"Module"})),bn={...KF,...WF};function ZF(t,e){return Ep(t,new bn.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,s){return bn.isNode&&ie.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function QF(t){return ie.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function GF(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}function S2(t){function e(n,i,r,s){let a=n[s++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),f=s>=n.length;return a=!a&&ie.isArray(r)?r.length:a,f?(ie.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!c):((!r[a]||!ie.isObject(r[a]))&&(r[a]=[]),e(n,i,r[a],s)&&ie.isArray(r[a])&&(r[a]=GF(r[a])),!c)}if(ie.isFormData(t)&&ie.isFunction(t.entries)){const n={};return ie.forEachEntry(t,(i,r)=>{e(QF(i),r,n,0)}),n}return null}function JF(t,e,n){if(ie.isString(t))try{return(e||JSON.parse)(t),ie.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Mu={transitional:T2,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=ie.isObject(e);if(s&&ie.isHTMLForm(e)&&(e=new FormData(e)),ie.isFormData(e))return r?JSON.stringify(S2(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e)||ie.isReadableStream(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return ZF(e,this.formSerializer).toString();if((c=ie.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Ep(c?{"files[]":e}:e,f&&new f,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),JF(e)):e}],transformResponse:[function(e){const n=this.transitional||Mu.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(ie.isResponse(e)||ie.isReadableStream(e))return e;if(e&&ie.isString(e)&&(i&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(c){if(a)throw c.name==="SyntaxError"?ke.from(c,ke.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bn.classes.FormData,Blob:bn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],t=>{Mu.headers[t]={}});const e5=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),t5=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),i=a.substring(r+1).trim(),!(!n||e[n]&&e5[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},mw=Symbol("internals");function Sc(t){return t&&String(t).trim().toLowerCase()}function Vh(t){return t===!1||t==null?t:ie.isArray(t)?t.map(Vh):String(t)}function n5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const i5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function py(t,e,n,i,r){if(ie.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!ie.isString(e)){if(ie.isString(i))return e.indexOf(i)!==-1;if(ie.isRegExp(i))return i.test(e)}}function r5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function s5(t,e){const n=ie.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,s,a){return this[i].call(this,e,r,s,a)},configurable:!0})})}let Nn=class{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function s(c,f,h){const p=Sc(f);if(!p)throw new Error("header name must be a non-empty string");const m=ie.findKey(r,p);(!m||r[m]===void 0||h===!0||h===void 0&&r[m]!==!1)&&(r[m||f]=Vh(c))}const a=(c,f)=>ie.forEach(c,(h,p)=>s(h,p,f));if(ie.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(ie.isString(e)&&(e=e.trim())&&!i5(e))a(t5(e),n);else if(ie.isHeaders(e))for(const[c,f]of e.entries())s(f,c,i);else e!=null&&s(n,e,i);return this}get(e,n){if(e=Sc(e),e){const i=ie.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return n5(r);if(ie.isFunction(n))return n.call(this,r,i);if(ie.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Sc(e),e){const i=ie.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||py(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function s(a){if(a=Sc(a),a){const c=ie.findKey(i,a);c&&(!n||py(i,i[c],c,n))&&(delete i[c],r=!0)}}return ie.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!e||py(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,i={};return ie.forEach(this,(r,s)=>{const a=ie.findKey(i,s);if(a){n[a]=Vh(r),delete n[s];return}const c=e?r5(s):String(s).trim();c!==s&&delete n[s],n[c]=Vh(r),i[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ie.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&ie.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[mw]=this[mw]={accessors:{}}).accessors,r=this.prototype;function s(a){const c=Sc(a);i[c]||(s5(r,a),i[c]=!0)}return ie.isArray(e)?e.forEach(s):s(e),this}};Nn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(Nn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});ie.freezeMethods(Nn);function gy(t,e){const n=this||Mu,i=e||n,r=Nn.from(i.headers);let s=i.data;return ie.forEach(t,function(c){s=c.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function E2(t){return!!(t&&t.__CANCEL__)}function pl(t,e,n){ke.call(this,t??"canceled",ke.ERR_CANCELED,e,n),this.name="CanceledError"}ie.inherits(pl,ke,{__CANCEL__:!0});function w2(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new ke("Request failed with status code "+n.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function o5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function a5(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(f){const h=Date.now(),p=i[s];a||(a=h),n[r]=f,i[r]=h;let m=s,y=0;for(;m!==r;)y+=n[m++],m=m%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),h-a<e)return;const b=p&&h-p;return b?Math.round(y*1e3/b):void 0}}function l5(t,e){let n=0,i=1e3/e,r,s;const a=(h,p=Date.now())=>{n=p,r=null,s&&(clearTimeout(s),s=null),t.apply(null,h)};return[(...h)=>{const p=Date.now(),m=p-n;m>=i?a(h,p):(r=h,s||(s=setTimeout(()=>{s=null,a(r)},i-m)))},()=>r&&a(r)]}const cd=(t,e,n=3)=>{let i=0;const r=a5(50,250);return l5(s=>{const a=s.loaded,c=s.lengthComputable?s.total:void 0,f=a-i,h=r(f),p=a<=c;i=a;const m={loaded:a,total:c,progress:c?a/c:void 0,bytes:f,rate:h||void 0,estimated:h&&c&&p?(c-a)/h:void 0,event:s,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(m)},n)},yw=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},_w=t=>(...e)=>ie.asap(()=>t(...e)),c5=bn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,bn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(bn.origin),bn.navigator&&/(msie|trident)/i.test(bn.navigator.userAgent)):()=>!0,u5=bn.hasStandardBrowserEnv?{write(t,e,n,i,r,s){const a=[t+"="+encodeURIComponent(e)];ie.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ie.isString(i)&&a.push("path="+i),ie.isString(r)&&a.push("domain="+r),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function f5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function h5(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function A2(t,e){return t&&!f5(e)?h5(t,e):e}const bw=t=>t instanceof Nn?{...t}:t;function vo(t,e){e=e||{};const n={};function i(h,p,m,y){return ie.isPlainObject(h)&&ie.isPlainObject(p)?ie.merge.call({caseless:y},h,p):ie.isPlainObject(p)?ie.merge({},p):ie.isArray(p)?p.slice():p}function r(h,p,m,y){if(ie.isUndefined(p)){if(!ie.isUndefined(h))return i(void 0,h,m,y)}else return i(h,p,m,y)}function s(h,p){if(!ie.isUndefined(p))return i(void 0,p)}function a(h,p){if(ie.isUndefined(p)){if(!ie.isUndefined(h))return i(void 0,h)}else return i(void 0,p)}function c(h,p,m){if(m in e)return i(h,p);if(m in t)return i(void 0,h)}const f={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(h,p,m)=>r(bw(h),bw(p),m,!0)};return ie.forEach(Object.keys(Object.assign({},t,e)),function(p){const m=f[p]||r,y=m(t[p],e[p],p);ie.isUndefined(y)&&m!==c||(n[p]=y)}),n}const x2=t=>{const e=vo({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:a,auth:c}=e;e.headers=a=Nn.from(a),e.url=v2(A2(e.baseURL,e.url),t.params,t.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let f;if(ie.isFormData(n)){if(bn.hasStandardBrowserEnv||bn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((f=a.getContentType())!==!1){const[h,...p]=f?f.split(";").map(m=>m.trim()).filter(Boolean):[];a.setContentType([h||"multipart/form-data",...p].join("; "))}}if(bn.hasStandardBrowserEnv&&(i&&ie.isFunction(i)&&(i=i(e)),i||i!==!1&&c5(e.url))){const h=r&&s&&u5.read(s);h&&a.set(r,h)}return e},d5=typeof XMLHttpRequest<"u",p5=d5&&function(t){return new Promise(function(n,i){const r=x2(t);let s=r.data;const a=Nn.from(r.headers).normalize();let{responseType:c,onUploadProgress:f,onDownloadProgress:h}=r,p,m,y,b,v;function T(){b&&b(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(p),r.signal&&r.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(r.method.toUpperCase(),r.url,!0),S.timeout=r.timeout;function w(){if(!S)return;const A=Nn.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),R={data:!c||c==="text"||c==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:A,config:t,request:S};w2(function(z){n(z),T()},function(z){i(z),T()},R),S=null}"onloadend"in S?S.onloadend=w:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(w)},S.onabort=function(){S&&(i(new ke("Request aborted",ke.ECONNABORTED,t,S)),S=null)},S.onerror=function(){i(new ke("Network Error",ke.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let O=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const R=r.transitional||T2;r.timeoutErrorMessage&&(O=r.timeoutErrorMessage),i(new ke(O,R.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,t,S)),S=null},s===void 0&&a.setContentType(null),"setRequestHeader"in S&&ie.forEach(a.toJSON(),function(O,R){S.setRequestHeader(R,O)}),ie.isUndefined(r.withCredentials)||(S.withCredentials=!!r.withCredentials),c&&c!=="json"&&(S.responseType=r.responseType),h&&([y,v]=cd(h,!0),S.addEventListener("progress",y)),f&&S.upload&&([m,b]=cd(f),S.upload.addEventListener("progress",m),S.upload.addEventListener("loadend",b)),(r.cancelToken||r.signal)&&(p=A=>{S&&(i(!A||A.type?new pl(null,t,S):A),S.abort(),S=null)},r.cancelToken&&r.cancelToken.subscribe(p),r.signal&&(r.signal.aborted?p():r.signal.addEventListener("abort",p)));const C=o5(r.url);if(C&&bn.protocols.indexOf(C)===-1){i(new ke("Unsupported protocol "+C+":",ke.ERR_BAD_REQUEST,t));return}S.send(s||null)})},g5=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,r;const s=function(h){if(!r){r=!0,c();const p=h instanceof Error?h:this.reason;i.abort(p instanceof ke?p:new pl(p instanceof Error?p.message:p))}};let a=e&&setTimeout(()=>{a=null,s(new ke(`timeout ${e} of ms exceeded`,ke.ETIMEDOUT))},e);const c=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),t=null)};t.forEach(h=>h.addEventListener("abort",s));const{signal:f}=i;return f.unsubscribe=()=>ie.asap(c),f}},m5=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},y5=async function*(t,e){for await(const n of _5(t))yield*m5(n,e)},_5=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},vw=(t,e,n,i)=>{const r=y5(t,e);let s=0,a,c=f=>{a||(a=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:h,value:p}=await r.next();if(h){c(),f.close();return}let m=p.byteLength;if(n){let y=s+=m;n(y)}f.enqueue(new Uint8Array(p))}catch(h){throw c(h),h}},cancel(f){return c(f),r.return()}},{highWaterMark:2})},wp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",R2=wp&&typeof ReadableStream=="function",b5=wp&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),C2=(t,...e)=>{try{return!!t(...e)}catch{return!1}},v5=R2&&C2(()=>{let t=!1;const e=new Request(bn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Tw=64*1024,I_=R2&&C2(()=>ie.isReadableStream(new Response("").body)),ud={stream:I_&&(t=>t.body)};wp&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ud[e]&&(ud[e]=ie.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new ke(`Response type '${e}' is not supported`,ke.ERR_NOT_SUPPORT,i)})})})(new Response);const T5=async t=>{if(t==null)return 0;if(ie.isBlob(t))return t.size;if(ie.isSpecCompliantForm(t))return(await new Request(bn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(t)||ie.isArrayBuffer(t))return t.byteLength;if(ie.isURLSearchParams(t)&&(t=t+""),ie.isString(t))return(await b5(t)).byteLength},S5=async(t,e)=>{const n=ie.toFiniteNumber(t.getContentLength());return n??T5(e)},E5=wp&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:s,timeout:a,onDownloadProgress:c,onUploadProgress:f,responseType:h,headers:p,withCredentials:m="same-origin",fetchOptions:y}=x2(t);h=h?(h+"").toLowerCase():"text";let b=g5([r,s&&s.toAbortSignal()],a),v;const T=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let S;try{if(f&&v5&&n!=="get"&&n!=="head"&&(S=await S5(p,i))!==0){let R=new Request(e,{method:"POST",body:i,duplex:"half"}),D;if(ie.isFormData(i)&&(D=R.headers.get("content-type"))&&p.setContentType(D),R.body){const[z,j]=yw(S,cd(_w(f)));i=vw(R.body,Tw,z,j)}}ie.isString(m)||(m=m?"include":"omit");const w="credentials"in Request.prototype;v=new Request(e,{...y,signal:b,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:i,duplex:"half",credentials:w?m:void 0});let C=await fetch(v);const A=I_&&(h==="stream"||h==="response");if(I_&&(c||A&&T)){const R={};["status","statusText","headers"].forEach(V=>{R[V]=C[V]});const D=ie.toFiniteNumber(C.headers.get("content-length")),[z,j]=c&&yw(D,cd(_w(c),!0))||[];C=new Response(vw(C.body,Tw,z,()=>{j&&j(),T&&T()}),R)}h=h||"text";let O=await ud[ie.findKey(ud,h)||"text"](C,t);return!A&&T&&T(),await new Promise((R,D)=>{w2(R,D,{data:O,headers:Nn.from(C.headers),status:C.status,statusText:C.statusText,config:t,request:v})})}catch(w){throw T&&T(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,t,v),{cause:w.cause||w}):ke.from(w,w&&w.code,t,v)}}),D_={http:UF,xhr:p5,fetch:E5};ie.forEach(D_,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Sw=t=>`- ${t}`,w5=t=>ie.isFunction(t)||t===null||t===!1,O2={getAdapter:t=>{t=ie.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let s=0;s<e;s++){n=t[s];let a;if(i=n,!w5(n)&&(i=D_[(a=String(n)).toLowerCase()],i===void 0))throw new ke(`Unknown adapter '${a}'`);if(i)break;r[a||"#"+s]=i}if(!i){const s=Object.entries(r).map(([c,f])=>`adapter ${c} `+(f===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(Sw).join(`
`):" "+Sw(s[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:D_};function my(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new pl(null,t)}function Ew(t){return my(t),t.headers=Nn.from(t.headers),t.data=gy.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),O2.getAdapter(t.adapter||Mu.adapter)(t).then(function(i){return my(t),i.data=gy.call(t,t.transformResponse,i),i.headers=Nn.from(i.headers),i},function(i){return E2(i)||(my(t),i&&i.response&&(i.response.data=gy.call(t,t.transformResponse,i.response),i.response.headers=Nn.from(i.response.headers))),Promise.reject(i)})}const M2="1.7.9",Ap={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ap[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const ww={};Ap.transitional=function(e,n,i){function r(s,a){return"[Axios v"+M2+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,c)=>{if(e===!1)throw new ke(r(a," has been removed"+(n?" in "+n:"")),ke.ERR_DEPRECATED);return n&&!ww[a]&&(ww[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,c):!0}};Ap.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function A5(t,e,n){if(typeof t!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],a=e[s];if(a){const c=t[s],f=c===void 0||a(c,s,t);if(f!==!0)throw new ke("option "+s+" must be "+f,ke.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ke("Unknown option "+s,ke.ERR_BAD_OPTION)}}const $h={assertOptions:A5,validators:Ap},Vi=$h.validators;let co=class{constructor(e){this.defaults=e,this.interceptors={request:new gw,response:new gw}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=vo(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&$h.assertOptions(i,{silentJSONParsing:Vi.transitional(Vi.boolean),forcedJSONParsing:Vi.transitional(Vi.boolean),clarifyTimeoutError:Vi.transitional(Vi.boolean)},!1),r!=null&&(ie.isFunction(r)?n.paramsSerializer={serialize:r}:$h.assertOptions(r,{encode:Vi.function,serialize:Vi.function},!0)),$h.assertOptions(n,{baseUrl:Vi.spelling("baseURL"),withXsrfToken:Vi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&ie.merge(s.common,s[n.method]);s&&ie.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),n.headers=Nn.concat(a,s);const c=[];let f=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(f=f&&T.synchronous,c.unshift(T.fulfilled,T.rejected))});const h=[];this.interceptors.response.forEach(function(T){h.push(T.fulfilled,T.rejected)});let p,m=0,y;if(!f){const v=[Ew.bind(this),void 0];for(v.unshift.apply(v,c),v.push.apply(v,h),y=v.length,p=Promise.resolve(n);m<y;)p=p.then(v[m++],v[m++]);return p}y=c.length;let b=n;for(m=0;m<y;){const v=c[m++],T=c[m++];try{b=v(b)}catch(S){T.call(this,S);break}}try{p=Ew.call(this,b)}catch(v){return Promise.reject(v)}for(m=0,y=h.length;m<y;)p=p.then(h[m++],h[m++]);return p}getUri(e){e=vo(this.defaults,e);const n=A2(e.baseURL,e.url);return v2(n,e.params,e.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(e){co.prototype[e]=function(n,i){return this.request(vo(i||{},{method:e,url:n,data:(i||{}).data}))}});ie.forEach(["post","put","patch"],function(e){function n(i){return function(s,a,c){return this.request(vo(c||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}co.prototype[e]=n(),co.prototype[e+"Form"]=n(!0)});let x5=class P2{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(c=>{i.subscribe(c),s=c}).then(r);return a.cancel=function(){i.unsubscribe(s)},a},e(function(s,a,c){i.reason||(i.reason=new pl(s,a,c),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new P2(function(r){e=r}),cancel:e}}};function R5(t){return function(n){return t.apply(null,n)}}function C5(t){return ie.isObject(t)&&t.isAxiosError===!0}const B_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(B_).forEach(([t,e])=>{B_[e]=t});function N2(t){const e=new co(t),n=l2(co.prototype.request,e);return ie.extend(n,co.prototype,e,{allOwnKeys:!0}),ie.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return N2(vo(t,r))},n}const it=N2(Mu);it.Axios=co;it.CanceledError=pl;it.CancelToken=x5;it.isCancel=E2;it.VERSION=M2;it.toFormData=Ep;it.AxiosError=ke;it.Cancel=it.CanceledError;it.all=function(e){return Promise.all(e)};it.spread=R5;it.isAxiosError=C5;it.mergeConfig=vo;it.AxiosHeaders=Nn;it.formToJSON=t=>S2(ie.isHTMLForm(t)?new FormData(t):t);it.getAdapter=O2.getAdapter;it.HttpStatusCode=B_;it.default=it;const{Axios:cee,AxiosError:uee,CanceledError:fee,isCancel:hee,CancelToken:dee,VERSION:pee,all:gee,Cancel:mee,isAxiosError:yee,spread:_ee,toFormData:bee,AxiosHeaders:vee,HttpStatusCode:Tee,formToJSON:See,getAdapter:Eee,mergeConfig:wee}=it;function O5(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}O5(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Pu=t=>typeof t=="number"&&!isNaN(t),To=t=>typeof t=="string",kr=t=>typeof t=="function",M5=t=>To(t)||Pu(t),L_=t=>To(t)||kr(t)?t:null,P5=(t,e)=>t===!1||Pu(t)&&t>0?t:e,U_=t=>I.isValidElement(t)||To(t)||kr(t)||Pu(t);function N5(t,e,n=300){let{scrollHeight:i,style:r}=t;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition=`all ${n}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(e,n)})})}function k5({enter:t,exit:e,appendPosition:n=!1,collapse:i=!0,collapseDuration:r=300}){return function({children:s,position:a,preventExitTransition:c,done:f,nodeRef:h,isIn:p,playToast:m}){let y=n?`${t}--${a}`:t,b=n?`${e}--${a}`:e,v=I.useRef(0);return I.useLayoutEffect(()=>{let T=h.current,S=y.split(" "),w=C=>{C.target===h.current&&(m(),T.removeEventListener("animationend",w),T.removeEventListener("animationcancel",w),v.current===0&&C.type!=="animationcancel"&&T.classList.remove(...S))};T.classList.add(...S),T.addEventListener("animationend",w),T.addEventListener("animationcancel",w)},[]),I.useEffect(()=>{let T=h.current,S=()=>{T.removeEventListener("animationend",S),i?N5(T,f,r):f()};p||(c?S():(v.current=1,T.className+=` ${b}`,T.addEventListener("animationend",S)))},[p]),Fe.createElement(Fe.Fragment,null,s)}}function Aw(t,e){return{content:k2(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function k2(t,e,n=!1){return I.isValidElement(t)&&!To(t.type)?I.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):kr(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function I5({closeToast:t,theme:e,ariaLabel:n="close"}){return Fe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:i=>{i.stopPropagation(),t(!0)},"aria-label":n},Fe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Fe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function D5({delay:t,isRunning:e,closeToast:n,type:i="default",hide:r,className:s,controlledProgress:a,progress:c,rtl:f,isIn:h,theme:p}){let m=r||a&&c===0,y={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};a&&(y.transform=`scaleX(${c})`);let b=Ke("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${p}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":f}),v=kr(s)?s({rtl:f,type:i,defaultClassName:b}):Ke(b,s),T={[a&&c>=1?"onTransitionEnd":"onAnimationEnd"]:a&&c<1?null:()=>{h&&n()}};return Fe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},Fe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${p} Toastify__progress-bar--${i}`}),Fe.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:v,style:y,...T}))}var B5=1,I2=()=>`${B5++}`;function L5(t,e,n){let i=1,r=0,s=[],a=[],c=e,f=new Map,h=new Set,p=C=>(h.add(C),()=>h.delete(C)),m=()=>{a=Array.from(f.values()),h.forEach(C=>C())},y=({containerId:C,toastId:A,updateId:O})=>{let R=C?C!==t:t!==1,D=f.has(A)&&O==null;return R||D},b=(C,A)=>{f.forEach(O=>{var R;(A==null||A===O.props.toastId)&&((R=O.toggle)==null||R.call(O,C))})},v=C=>{var A,O;(O=(A=C.props)==null?void 0:A.onClose)==null||O.call(A,C.removalReason),C.isActive=!1},T=C=>{if(C==null)f.forEach(v);else{let A=f.get(C);A&&v(A)}m()},S=()=>{r-=s.length,s=[]},w=C=>{var A,O;let{toastId:R,updateId:D}=C.props,z=D==null;C.staleId&&f.delete(C.staleId),C.isActive=!0,f.set(R,C),m(),n(Aw(C,z?"added":"updated")),z&&((O=(A=C.props).onOpen)==null||O.call(A))};return{id:t,props:c,observe:p,toggle:b,removeToast:T,toasts:f,clearQueue:S,buildToast:(C,A)=>{if(y(A))return;let{toastId:O,updateId:R,data:D,staleId:z,delay:j}=A,V=R==null;V&&r++;let x={...c,style:c.toastStyle,key:i++,...Object.fromEntries(Object.entries(A).filter(([te,se])=>se!=null)),toastId:O,updateId:R,data:D,isIn:!1,className:L_(A.className||c.toastClassName),progressClassName:L_(A.progressClassName||c.progressClassName),autoClose:A.isLoading?!1:P5(A.autoClose,c.autoClose),closeToast(te){f.get(O).removalReason=te,T(O)},deleteToast(){let te=f.get(O);if(te!=null){if(n(Aw(te,"removed")),f.delete(O),r--,r<0&&(r=0),s.length>0){w(s.shift());return}m()}}};x.closeButton=c.closeButton,A.closeButton===!1||U_(A.closeButton)?x.closeButton=A.closeButton:A.closeButton===!0&&(x.closeButton=U_(c.closeButton)?c.closeButton:!0);let H={content:C,props:x,staleId:z};c.limit&&c.limit>0&&r>c.limit&&V?s.push(H):Pu(j)?setTimeout(()=>{w(H)},j):w(H)},setProps(C){c=C},setToggle:(C,A)=>{let O=f.get(C);O&&(O.toggle=A)},isToastActive:C=>{var A;return(A=f.get(C))==null?void 0:A.isActive},getSnapshot:()=>a}}var wn=new Map,ou=[],F_=new Set,U5=t=>F_.forEach(e=>e(t)),D2=()=>wn.size>0;function F5(){ou.forEach(t=>L2(t.content,t.options)),ou=[]}var z5=(t,{containerId:e})=>{var n;return(n=wn.get(e||1))==null?void 0:n.toasts.get(t)};function B2(t,e){var n;if(e)return!!((n=wn.get(e))!=null&&n.isToastActive(t));let i=!1;return wn.forEach(r=>{r.isToastActive(t)&&(i=!0)}),i}function V5(t){if(!D2()){ou=ou.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||M5(t))wn.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=wn.get(t.containerId);e?e.removeToast(t.id):wn.forEach(n=>{n.removeToast(t.id)})}}var $5=(t={})=>{wn.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function L2(t,e){U_(t)&&(D2()||ou.push({content:t,options:e}),wn.forEach(n=>{n.buildToast(t,e)}))}function j5(t){var e;(e=wn.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function U2(t,e){wn.forEach(n=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===n.id)&&n.toggle(t,e==null?void 0:e.id)})}function H5(t){let e=t.containerId||1;return{subscribe(n){let i=L5(e,t,U5);wn.set(e,i);let r=i.observe(n);return F5(),()=>{r(),wn.delete(e)}},setProps(n){var i;(i=wn.get(e))==null||i.setProps(n)},getSnapshot(){var n;return(n=wn.get(e))==null?void 0:n.getSnapshot()}}}function W5(t){return F_.add(t),()=>{F_.delete(t)}}function X5(t){return t&&(To(t.toastId)||Pu(t.toastId))?t.toastId:I2()}function Nu(t,e){return L2(t,e),e.toastId}function xp(t,e){return{...e,type:e&&e.type||t,toastId:X5(e)}}function Rp(t){return(e,n)=>Nu(e,xp(t,n))}function Ze(t,e){return Nu(t,xp("default",e))}Ze.loading=(t,e)=>Nu(t,xp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function q5(t,{pending:e,error:n,success:i},r){let s;e&&(s=To(e)?Ze.loading(e,r):Ze.loading(e.render,{...r,...e}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(h,p,m)=>{if(p==null){Ze.dismiss(s);return}let y={type:h,...a,...r,data:m},b=To(p)?{render:p}:p;return s?Ze.update(s,{...y,...b}):Ze(b.render,{...y,...b}),m},f=kr(t)?t():t;return f.then(h=>c("success",i,h)).catch(h=>c("error",n,h)),f}Ze.promise=q5;Ze.success=Rp("success");Ze.info=Rp("info");Ze.error=Rp("error");Ze.warning=Rp("warning");Ze.warn=Ze.warning;Ze.dark=(t,e)=>Nu(t,xp("default",{theme:"dark",...e}));function Y5(t){V5(t)}Ze.dismiss=Y5;Ze.clearWaitingQueue=$5;Ze.isActive=B2;Ze.update=(t,e={})=>{let n=z5(t,e);if(n){let{props:i,content:r}=n,s={delay:100,...i,...e,toastId:e.toastId||t,updateId:I2()};s.toastId!==t&&(s.staleId=t);let a=s.render||r;delete s.render,Nu(a,s)}};Ze.done=t=>{Ze.update(t,{progress:1})};Ze.onChange=W5;Ze.play=t=>U2(!0,t);Ze.pause=t=>U2(!1,t);function K5(t){var e;let{subscribe:n,getSnapshot:i,setProps:r}=I.useRef(H5(t)).current;r(t);let s=(e=I.useSyncExternalStore(n,i,i))==null?void 0:e.slice();function a(c){if(!s)return[];let f=new Map;return t.newestOnTop&&s.reverse(),s.forEach(h=>{let{position:p}=h.props;f.has(p)||f.set(p,[]),f.get(p).push(h)}),Array.from(f,h=>c(h[0],h[1]))}return{getToastToRender:a,isToastActive:B2,count:s==null?void 0:s.length}}function Z5(t){let[e,n]=I.useState(!1),[i,r]=I.useState(!1),s=I.useRef(null),a=I.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:f,closeToast:h,onClick:p,closeOnClick:m}=t;j5({id:t.toastId,containerId:t.containerId,fn:n}),I.useEffect(()=>{if(t.pauseOnFocusLoss)return y(),()=>{b()}},[t.pauseOnFocusLoss]);function y(){document.hasFocus()||w(),window.addEventListener("focus",S),window.addEventListener("blur",w)}function b(){window.removeEventListener("focus",S),window.removeEventListener("blur",w)}function v(z){if(t.draggable===!0||t.draggable===z.pointerType){C();let j=s.current;a.canCloseOnClick=!0,a.canDrag=!0,j.style.transition="none",t.draggableDirection==="x"?(a.start=z.clientX,a.removalDistance=j.offsetWidth*(t.draggablePercent/100)):(a.start=z.clientY,a.removalDistance=j.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function T(z){let{top:j,bottom:V,left:x,right:H}=s.current.getBoundingClientRect();z.nativeEvent.type!=="touchend"&&t.pauseOnHover&&z.clientX>=x&&z.clientX<=H&&z.clientY>=j&&z.clientY<=V?w():S()}function S(){n(!0)}function w(){n(!1)}function C(){a.didMove=!1,document.addEventListener("pointermove",O),document.addEventListener("pointerup",R)}function A(){document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",R)}function O(z){let j=s.current;if(a.canDrag&&j){a.didMove=!0,e&&w(),t.draggableDirection==="x"?a.delta=z.clientX-a.start:a.delta=z.clientY-a.start,a.start!==z.clientX&&(a.canCloseOnClick=!1);let V=t.draggableDirection==="x"?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;j.style.transform=`translate3d(${V},0)`,j.style.opacity=`${1-Math.abs(a.delta/a.removalDistance)}`}}function R(){A();let z=s.current;if(a.canDrag&&a.didMove&&z){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance){r(!0),t.closeToast(!0),t.collapseAll();return}z.style.transition="transform 0.2s, opacity 0.2s",z.style.removeProperty("transform"),z.style.removeProperty("opacity")}}let D={onPointerDown:v,onPointerUp:T};return c&&f&&(D.onMouseEnter=w,t.stacked||(D.onMouseLeave=S)),m&&(D.onClick=z=>{p&&p(z),a.canCloseOnClick&&h(!0)}),{playToast:S,pauseToast:w,isRunning:e,preventExitTransition:i,toastRef:s,eventHandlers:D}}var Q5=typeof window<"u"?I.useLayoutEffect:I.useEffect,Cp=({theme:t,type:e,isLoading:n,...i})=>Fe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...i});function G5(t){return Fe.createElement(Cp,{...t},Fe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function J5(t){return Fe.createElement(Cp,{...t},Fe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function e8(t){return Fe.createElement(Cp,{...t},Fe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function t8(t){return Fe.createElement(Cp,{...t},Fe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function n8(){return Fe.createElement("div",{className:"Toastify__spinner"})}var z_={info:J5,warning:G5,success:e8,error:t8,spinner:n8},i8=t=>t in z_;function r8({theme:t,type:e,isLoading:n,icon:i}){let r=null,s={theme:t,type:e};return i===!1||(kr(i)?r=i({...s,isLoading:n}):I.isValidElement(i)?r=I.cloneElement(i,s):n?r=z_.spinner():i8(e)&&(r=z_[e](s))),r}var s8=t=>{let{isRunning:e,preventExitTransition:n,toastRef:i,eventHandlers:r,playToast:s}=Z5(t),{closeButton:a,children:c,autoClose:f,onClick:h,type:p,hideProgressBar:m,closeToast:y,transition:b,position:v,className:T,style:S,progressClassName:w,updateId:C,role:A,progress:O,rtl:R,toastId:D,deleteToast:z,isIn:j,isLoading:V,closeOnClick:x,theme:H,ariaLabel:te}=t,se=Ke("Toastify__toast",`Toastify__toast-theme--${H}`,`Toastify__toast--${p}`,{"Toastify__toast--rtl":R},{"Toastify__toast--close-on-click":x}),fe=kr(T)?T({rtl:R,position:v,type:p,defaultClassName:se}):Ke(se,T),pe=r8(t),N=!!O||!f,U={closeToast:y,type:p,theme:H},L=null;return a===!1||(kr(a)?L=a(U):I.isValidElement(a)?L=I.cloneElement(a,U):L=I5(U)),Fe.createElement(b,{isIn:j,done:z,position:v,preventExitTransition:n,nodeRef:i,playToast:s},Fe.createElement("div",{id:D,tabIndex:0,onClick:h,"data-in":j,className:fe,...r,style:S,ref:i,...j&&{role:A,"aria-label":te}},pe!=null&&Fe.createElement("div",{className:Ke("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!V})},pe),k2(c,t,!e),L,!t.customProgressBar&&Fe.createElement(D5,{...C&&!N?{key:`p-${C}`}:{},rtl:R,theme:H,delay:f,isRunning:e,isIn:j,closeToast:y,hide:m,type:p,className:w,controlledProgress:N,progress:O||0})))},o8=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),a8=k5(o8("bounce",!0)),l8={position:"top-right",transition:a8,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function c8(t){let e={...l8,...t},n=t.stacked,[i,r]=I.useState(!0),s=I.useRef(null),{getToastToRender:a,isToastActive:c,count:f}=K5(e),{className:h,style:p,rtl:m,containerId:y,hotKeys:b}=e;function v(S){let w=Ke("Toastify__toast-container",`Toastify__toast-container--${S}`,{"Toastify__toast-container--rtl":m});return kr(h)?h({position:S,rtl:m,defaultClassName:w}):Ke(w,L_(h))}function T(){n&&(r(!0),Ze.play())}return Q5(()=>{var S;if(n){let w=s.current.querySelectorAll('[data-in="true"]'),C=12,A=(S=e.position)==null?void 0:S.includes("top"),O=0,R=0;Array.from(w).reverse().forEach((D,z)=>{let j=D;j.classList.add("Toastify__toast--stacked"),z>0&&(j.dataset.collapsed=`${i}`),j.dataset.pos||(j.dataset.pos=A?"top":"bot");let V=O*(i?.2:1)+(i?0:C*z);j.style.setProperty("--y",`${A?V:V*-1}px`),j.style.setProperty("--g",`${C}`),j.style.setProperty("--s",`${1-(i?R:0)}`),O+=j.offsetHeight,R+=.025})}},[i,f,n]),I.useEffect(()=>{function S(w){var C;let A=s.current;b(w)&&((C=A.querySelector('[tabIndex="0"]'))==null||C.focus(),r(!1),Ze.pause()),w.key==="Escape"&&(document.activeElement===A||A!=null&&A.contains(document.activeElement))&&(r(!0),Ze.play())}return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[b]),Fe.createElement("section",{ref:s,className:"Toastify",id:y,onMouseEnter:()=>{n&&(r(!1),Ze.pause())},onMouseLeave:T,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},a((S,w)=>{let C=w.length?{...p}:{...p,pointerEvents:"none"};return Fe.createElement("div",{tabIndex:-1,className:v(S),"data-stacked":n,style:C,key:`c-${S}`},w.map(({content:A,props:O})=>Fe.createElement(s8,{...O,stacked:n,collapseAll:T,isIn:c(O.toastId,O.containerId),key:`t-${O.key}`},A)))}))}function u8(t){const{t:e}=Cu();return it.interceptors.response.handlers.length===0&&it.interceptors.response.use(function(n){return n},function(n){let i="error.unknown";if(n!=null&&n.request&&(navigator.onLine?(i="error.serverOffline",console.error("Server cannot be reached.")):(i="error.userOffline",console.log("User seems to be offline. Cannot complete request."))),n!=null&&n.response){const{config:r,data:s,status:a}=n.response;switch(r.method){case"get":i="error.general.get";break;case"delete":i="error.general.delete";break;case"post":i="error.general.create";break;case"put":i="error.general.update";break;default:i="error.unknown"}s.messageKey&&(i=s.messageKey),console.error(`A ${r.method} request failed with status code ${a}:`,s,r)}return Ze.error(e(i)),Promise.reject(n)}),t.children}const f8=""+new URL("logo_color-Nussm146.png",import.meta.url).href;function h8(){const t=f8,{t:e}=Cu();return de.jsx(bb,{color:"secondary",children:de.jsx(MC,{color:"secondary",sx:{position:"fixed",top:"auto",bottom:0},children:de.jsxs($C,{sx:{justifyContent:"center"},children:[de.jsx("img",{src:t,height:30,alt:""}),de.jsx(OC,{sx:{marginLeft:1},children:e("home.copyright")})]})})})}function fd(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const Cb=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),xw=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);xw&&parseFloat(xw[1]);const ih=globalThis,Ea=globalThis.process||{},d8=globalThis.navigator||{};function F2(t){var i,r;if(typeof window<"u"&&((i=window.process)==null?void 0:i.type)==="renderer"||typeof process<"u"&&((r=process.versions)!=null&&r.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function Ro(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||F2()}function p8(t){return Ro()?F2()?"Electron":(d8.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const z2="4.1.0";function g8(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class m8{constructor(e,n,i="sessionStorage"){this.storage=g8(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function y8(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function _8(t,e=8){const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}var hd;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(hd||(hd={}));const b8=10;function Rw(t){return typeof t!="string"?t:(t=t.toUpperCase(),hd[t]||hd.WHITE)}function v8(t,e,n){return!Ro&&typeof t=="string"&&(e&&(t=`\x1B[${Rw(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${Rw(n)+b8}m${t}\x1B[49m`)),t}function T8(t,e=["constructor"]){const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),r=t;for(const s of i){const a=r[s];typeof a=="function"&&(e.find(c=>s===c)||(r[s]=a.bind(t)))}}function Ob(t,e){if(!t)throw new Error("Assertion failed")}function wa(){var e,n,i;let t;if(Ro()&&ih.performance)t=(n=(e=ih==null?void 0:ih.performance)==null?void 0:e.now)==null?void 0:n.call(e);else if("hrtime"in Ea){const r=(i=Ea==null?void 0:Ea.hrtime)==null?void 0:i.call(Ea);t=r[0]*1e3+r[1]/1e6}else t=Date.now();return t}const Aa={debug:Ro()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},S8={enabled:!0,level:0};function xa(){}const Cw={},Ow={once:!0};class ku{constructor({id:e}={id:""}){this.VERSION=z2,this._startTs=wa(),this._deltaTs=wa(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new m8(`__probe-${this.id}__`,S8),this.timeStamp(`${this.id} started`),T8(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((wa()-this._startTs).toPrecision(10))}getDelta(){return Number((wa()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){if(!e)throw new Error(n||"Assertion failed")}warn(e){return this._getLogFunction(0,e,Aa.warn,arguments,Ow)}error(e){return this._getLogFunction(0,e,Aa.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,Aa.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Aa.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Aa.debug||Aa.info,arguments,Ow)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||xa,i&&[i],{tag:w8(n)}):xa}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||xa)}group(e,n,i={collapsed:!1}){const r=Mw({logLevel:e,message:n,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n,i={}){return this.group(e,n,Object.assign({},i,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||xa)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=V2(e)}_getLogFunction(e,n,i,r,s){if(this._shouldLog(e)){s=Mw({logLevel:e,message:n,args:r,opts:s}),i=i||s.method,Ob(i),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=wa();const a=s.tag||s.message;if(s.once&&a)if(!Cw[a])Cw[a]=wa();else return xa;return n=E8(this.id,s.message,s),i.bind(console,n,...s.args)}return xa}}ku.VERSION=z2;function V2(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Ob(Number.isFinite(e)&&e>=0),e}function Mw(t){const{logLevel:e,message:n}=t;t.logLevel=V2(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const r=typeof t.message;return Ob(r==="string"||r==="object"),Object.assign(t,{args:i},t.opts)}function E8(t,e,n){if(typeof e=="string"){const i=n.time?_8(y8(n.total)):"";e=n.time?`${t}: ${i}  ${e}`:`${t}: ${e}`,e=v8(e,n.color,n.background)}return e}function w8(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const yy="4.3.2",A8=yy[0]>="0"&&yy[0]<="9"?`v${yy}`:"";function x8(){const t=new ku({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=A8,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}const R8=x8();function C8(t,e){return $2(t||{},e)}function $2(t,e,n=0){if(n>3)return e;const i={...t};for(const[r,s]of Object.entries(e))s&&typeof s=="object"&&!Array.isArray(s)?i[r]=$2(i[r]||{},e[r],n+1):i[r]=e[r];return i}const O8="latest";function M8(){var t;return(t=globalThis._loadersgl_)!=null&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.2"),globalThis._loadersgl_.version}const P8=M8();function ws(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const uo=typeof process!="object"||String(process)!=="[object process]"||process.browser,N8=typeof window<"u"&&typeof window.orientation<"u",Pw=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Pw&&parseFloat(Pw[1]);class k8{constructor(e,n){M(this,"name");M(this,"workerThread");M(this,"isRunning",!0);M(this,"result");M(this,"_resolve",()=>{});M(this,"_reject",()=>{});this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){ws(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){ws(this.isRunning),this.isRunning=!1,this._reject(e)}}class _y{terminate(){}}const by=new Map;function I8(t){ws(t.source&&!t.url||!t.source&&t.url);let e=by.get(t.source||t.url);return e||(t.url&&(e=D8(t.url),by.set(t.url,e)),t.source&&(e=j2(t.source),by.set(t.source,e))),ws(e),e}function D8(t){if(!t.startsWith("http"))return t;const e=B8(t);return j2(e)}function j2(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function B8(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function H2(t,e=!0,n){const i=n||new Set;if(t){if(Nw(t))i.add(t);else if(Nw(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const r in t)H2(t[r],e,i)}}return n===void 0?Array.from(i):[]}function Nw(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const vy=()=>{};class V_{constructor(e){M(this,"name");M(this,"source");M(this,"url");M(this,"terminated",!1);M(this,"worker");M(this,"onMessage");M(this,"onError");M(this,"_loadableURL","");const{name:n,source:i,url:r}=e;ws(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=vy,this.onError=s=>console.log(s),this.worker=uo?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&uo||typeof _y<"u"&&!uo}destroy(){this.onMessage=vy,this.onError=vy,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||H2(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,e.message&&(n+=`${e.message} in `),e.lineno&&(n+=`:${e.lineno}:${e.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=I8({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new _y(i,{eval:!1})}else if(this.source)e=new _y(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class L8{constructor(e){M(this,"name","unnamed");M(this,"source");M(this,"url");M(this,"maxConcurrency",1);M(this,"maxMobileConcurrency",1);M(this,"onDebug",()=>{});M(this,"reuseWorkers",!0);M(this,"props",{});M(this,"jobQueue",[]);M(this,"idleQueue",[]);M(this,"count",0);M(this,"isDestroyed",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return V_.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(r,s,a)=>r.done(a),i=(r,s)=>r.error(s)){const r=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:i,onStart:s}),this));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const i=new k8(n.name,e);e.onMessage=r=>n.onMessage(i,r.type,r.payload),e.onError=r=>n.onError(i,r),n.onStart(i);try{await i.result}catch(r){console.error(`Worker exception: ${r}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!uo||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new V_({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return N8?this.maxMobileConcurrency:this.maxConcurrency}}const U8={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},ps=class ps{constructor(e){M(this,"props");M(this,"workerPools",new Map);this.props={...U8},this.setProps(e),this.workerPools=new Map}static isSupported(){return V_.isSupported()}static getWorkerFarm(e={}){return ps._workerFarm=ps._workerFarm||new ps({}),ps._workerFarm.setProps(e),ps._workerFarm}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let s=this.workerPools.get(n);return s||(s=new L8({name:n,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};M(ps,"_workerFarm");let dd=ps;function F8(t,e={}){const n=e[t.id]||{},i=uo?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let r=n.workerUrl;if(!r&&t.id==="compression"&&(r=e.workerUrl),e._workerType==="test"&&(uo?r=`modules/${t.module}/dist/${i}`:r=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!r){let s=t.version;s==="latest"&&(s=O8);const a=s?`@${s}`:"";r=`https://unpkg.com/@loaders.gl/${t.module}${a}/dist/${i}`}return ws(r),r}function z8(t,e=P8){ws(t,"no worker provided");const n=t.version;return!(!e||!n)}function V8(t,e){return!dd.isSupported()||!uo&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function $8(t,e,n,i,r){const s=t.id,a=F8(t,n),f=dd.getWorkerFarm(n).getWorkerPool({name:s,url:a});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const h=await f.startJob("process-on-worker",j8.bind(null,r));return h.postMessage("process",{input:e,options:n,context:i}),await(await h.result).result}async function j8(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:a}=i;try{const c=await t(s,a);e.postMessage("done",{id:r,result:c})}catch(c){const f=c instanceof Error?c.message:"unknown error";e.postMessage("error",{id:r,error:f})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function H8(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}function W8(...t){return X8(t)}function X8(t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,a)=>s+a.byteLength,0),i=new Uint8Array(n);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}async function q8(t){const e=[];for await(const n of t)e.push(n);return W8(...e)}function kw(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class Iw{constructor(e,n){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=n,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=kw(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(kw()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Iu{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,n="count"){return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const n of Object.values(this.stats))e(n)}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(n=>this._getOrCreate(n))}_getOrCreate(e){const{name:n,type:i}=e;let r=this.stats[n];return r||(e instanceof Iw?r=e:r=new Iw(n,i),this.stats[n]=r),r}}const Y8="Queued Requests",K8="Active Requests",Z8="Cancelled Requests",Q8="Queued Requests Ever",G8="Active Requests Ever",J8={id:"request-scheduler",throttleRequests:!0,maxRequests:6,debounceTime:0};class ez{constructor(e={}){M(this,"props");M(this,"stats");M(this,"activeRequestCount",0);M(this,"requestQueue",[]);M(this,"requestMap",new Map);M(this,"updateTimer",null);this.props={...J8,...e},this.stats=new Iu({id:this.props.id}),this.stats.get(Y8),this.stats.get(K8),this.stats.get(Z8),this.stats.get(Q8),this.stats.get(G8)}scheduleRequest(e,n=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const i={handle:e,priority:0,getPriority:n},r=new Promise(s=>(i.resolve=s,i));return this.requestQueue.push(i),this.requestMap.set(e,r),this._issueNewRequests(),r}_issueRequest(e){const{handle:n,resolve:i}=e;let r=!1;const s=()=>{r||(r=!0,this.requestMap.delete(n),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,i?i({done:s}):Promise.resolve({done:s})}_issueNewRequests(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>this._issueNewRequestsAsync(),this.props.debounceTime)}_issueNewRequestsAsync(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(e!==0){this._updateAllRequests();for(let n=0;n<e;++n){const i=this.requestQueue.shift();i&&this._issueRequest(i)}}}_updateAllRequests(){const e=this.requestQueue;for(let n=0;n<e.length;++n){const i=e[n];this._updateRequest(i)||(e.splice(n,1),this.requestMap.delete(i.handle),n--)}e.sort((n,i)=>n.priority-i.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),e.priority<0?(e.resolve(null),!1):!0}}let tz="";const Dw={};function nz(t){for(const e in Dw)if(t.startsWith(e)){const n=Dw[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${tz}${t}`),t}function iz(t){return t&&typeof t=="object"&&t.isBuffer}function W2(t){if(iz(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function X2(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function rz(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const sz=t=>typeof t=="boolean",Vc=t=>typeof t=="function",Du=t=>t!==null&&typeof t=="object",Bw=t=>Du(t)&&t.constructor==={}.constructor,oz=t=>!!t&&typeof t[Symbol.iterator]=="function",az=t=>t&&typeof t[Symbol.asyncIterator]=="function",Co=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Oo=t=>typeof Blob<"u"&&t instanceof Blob,lz=t=>t&&typeof t=="object"&&t.isBuffer,cz=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Du(t)&&Vc(t.tee)&&Vc(t.cancel)&&Vc(t.getReader),uz=t=>Du(t)&&Vc(t.read)&&Vc(t.pipe)&&sz(t.readable),q2=t=>cz(t)||uz(t);class fz extends Error{constructor(n,i){super(n);M(this,"reason");M(this,"url");M(this,"response");this.reason=i.reason,this.url=i.url,this.response=i.response}}const hz=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,dz=/^([-\w.]+\/[-\w.+]+)/;function Lw(t,e){return t.toLowerCase()===e.toLowerCase()}function pz(t){const e=dz.exec(t);return e?e[1]:t}function Uw(t){const e=hz.exec(t);return e?e[1]:""}const Y2=/\?.*/;function gz(t){const e=t.match(Y2);return e&&e[0]}function Mb(t){return t.replace(Y2,"")}function mz(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function Op(t){return Co(t)?t.url:Oo(t)?t.name||"":typeof t=="string"?t:""}function Pb(t){if(Co(t)){const e=t,n=e.headers.get("content-type")||"",i=Mb(e.url);return pz(n)||Uw(i)}return Oo(t)?t.type||"":typeof t=="string"?Uw(t):""}function yz(t){return Co(t)?t.headers["content-length"]||-1:Oo(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function K2(t){if(Co(t))return t;const e={},n=yz(t);n>=0&&(e["content-length"]=String(n));const i=Op(t),r=Pb(t);r&&(e["content-type"]=r);const s=await vz(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const a=new Response(t,{headers:e});return Object.defineProperty(a,"url",{value:i}),a}async function _z(t){if(!t.ok)throw await bz(t)}async function bz(t){const e=mz(t.url);let n=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;n=n.length>100?`${n.slice(0,100)}...`:n;const i={reason:t.statusText,url:t.url,response:t};try{const r=t.headers.get("Content-Type");i.reason=!t.bodyUsed&&(r!=null&&r.includes("application/json"))?await t.json():await t.text()}catch{}return new fz(n,i)}async function vz(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(i=>{const r=new FileReader;r.onload=s=>{var a;return i((a=s==null?void 0:s.target)==null?void 0:a.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5);return`data:base64,${Tz(n)}`}return null}function Tz(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}function Sz(t){return!Ez(t)&&!wz(t)}function Ez(t){return t.startsWith("http:")||t.startsWith("https:")}function wz(t){return t.startsWith("data:")}async function Fw(t,e){var n,i;if(typeof t=="string"){const r=nz(t);return Sz(r)&&(n=globalThis.loaders)!=null&&n.fetchNode?(i=globalThis.loaders)==null?void 0:i.fetchNode(r,e):await fetch(r,e)}return await K2(t)}const zw=new ku({id:"loaders.gl"});class Az{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class xz{constructor(){M(this,"console");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const Z2={fetch:null,mimeType:void 0,nothrow:!1,log:new xz,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Cb,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Rz={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Q2(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function G2(){const t=Q2();return t.globalOptions=t.globalOptions||{...Z2},t.globalOptions}function Cz(t,e,n,i){return n=n||[],n=Array.isArray(n)?n:[n],Oz(t,n),Pz(e,t,i)}function Oz(t,e){Vw(t,null,Z2,Rz,e);for(const n of e){const i=t&&t[n.id]||{},r=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Vw(i,n.id,r,s,e)}}function Vw(t,e,n,i,r){const s=e||"Top level",a=e?`${e}.`:"";for(const c in t){const f=!e&&Du(t[c]),h=c==="baseUri"&&!e,p=c==="workerUrl"&&e;if(!(c in n)&&!h&&!p){if(c in i)zw.warn(`${s} loader option '${a}${c}' no longer supported, use '${i[c]}'`)();else if(!f){const m=Mz(c,r);zw.warn(`${s} loader option '${a}${c}' not recognized. ${m}`)()}}}}function Mz(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(t===s)return`Did you mean '${r.id}.${s}'?`;const a=s.toLowerCase();(n.startsWith(a)||a.startsWith(n))&&(i=i||`Did you mean '${r.id}.${s}'?`)}return i}function Pz(t,e,n){const r={...t.options||{}};return Nz(r,n),r.log===null&&(r.log=new Az),$w(r,G2()),$w(r,e),r}function $w(t,e){for(const n in e)if(n in e){const i=e[n];Bw(i)&&Bw(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function Nz(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Nb(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t==null?void 0:t.extensions)):!1}function kb(t){fd(t,"null loader"),fd(Nb(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t!=null&&t.parseTextSync||t!=null&&t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const J2=()=>{const t=Q2();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function kz(t){const e=J2();t=Array.isArray(t)?t:[t];for(const n of t){const i=kb(n);e.find(r=>i===r)||e.unshift(i)}}function Iz(){return J2()}const Dz=/\.([^.]+)$/;async function Bz(t,e=[],n,i){if(!e3(t))return null;let r=jw(t,e,{...n,nothrow:!0},i);if(r)return r;if(Oo(t)&&(t=await t.slice(0,10).arrayBuffer(),r=jw(t,e,n,i)),!r&&!(n!=null&&n.nothrow))throw new Error(t3(t));return r}function jw(t,e=[],n,i){if(!e3(t))return null;if(e&&!Array.isArray(e))return kb(e);let r=[];e&&(r=r.concat(e)),n!=null&&n.ignoreRegisteredLoaders||r.push(...Iz()),Uz(r);const s=Lz(t,r,n,i);if(!s&&!(n!=null&&n.nothrow))throw new Error(t3(t));return s}function Lz(t,e,n,i){const r=Op(t),s=Pb(t),a=Mb(r)||(i==null?void 0:i.url);let c=null,f="";return n!=null&&n.mimeType&&(c=Ty(e,n==null?void 0:n.mimeType),f=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),c=c||Fz(e,a),f=f||(c?`matched url ${a}`:""),c=c||Ty(e,s),f=f||(c?`matched MIME type ${s}`:""),c=c||Vz(e,t),f=f||(c?`matched initial data ${n3(t)}`:""),n!=null&&n.fallbackMimeType&&(c=c||Ty(e,n==null?void 0:n.fallbackMimeType),f=f||(c?`matched fallback MIME type ${s}`:"")),f&&R8.log(1,`selectLoader selected ${c==null?void 0:c.name}: ${f}.`),c}function e3(t){return!(t instanceof Response&&t.status===204)}function t3(t){const e=Op(t),n=Pb(t);let i="No valid loader found (";i+=e?`${X2(e)}, `:"no url provided, ",i+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const r=t?n3(t):"";return i+=r?` first bytes: "${r}"`:"first bytes: not available",i+=")",i}function Uz(t){for(const e of t)kb(e)}function Fz(t,e){const n=e&&Dz.exec(e),i=n&&n[1];return i?zz(t,i):null}function zz(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}function Ty(t,e){var n;for(const i of t)if((n=i.mimeTypes)!=null&&n.some(r=>Lw(e,r))||Lw(e,`application/x.${i.id}`))return i;return null}function Vz(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if($z(e,n))return n}else if(ArrayBuffer.isView(e)){if(Hw(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&Hw(e,0,n))return n;return null}function $z(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function Hw(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>jz(t,e,n,r))}function jz(t,e,n,i){if(i instanceof ArrayBuffer)return H8(i,t,i.byteLength);switch(typeof i){case"function":return i(t);case"string":const r=$_(t,e,i.length);return i===r;default:return!1}}function n3(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?$_(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?$_(t,0,e):""}function $_(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}const Hz=256*1024;function*Wz(t,e){const n=(e==null?void 0:e.chunkSize)||Hz;let i=0;const r=new TextEncoder;for(;i<t.length;){const s=Math.min(t.length-i,n),a=t.slice(i,i+s);i+=s,yield r.encode(a)}}const Xz=256*1024;function*qz(t,e={}){const{chunkSize:n=Xz}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),s=new ArrayBuffer(r),a=new Uint8Array(t,i,r);new Uint8Array(s).set(a),i+=r,yield s}}const Yz=1024*1024;async function*Kz(t,e){const n=(e==null?void 0:e.chunkSize)||Yz;let i=0;for(;i<t.size;){const r=i+n,s=await t.slice(i,r).arrayBuffer();i=r,yield s}}function Ww(t,e){return Cb?Zz(t,e):Qz(t)}async function*Zz(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();e!=null&&e._streamReadAhead&&(i=n.read());const{done:s,value:a}=await r;if(s)return;yield W2(a)}}catch{n.releaseLock()}}async function*Qz(t,e){for await(const n of t)yield W2(n)}function Gz(t,e){if(typeof t=="string")return Wz(t,e);if(t instanceof ArrayBuffer)return qz(t,e);if(Oo(t))return Kz(t,e);if(q2(t))return Ww(t,e);if(Co(t))return Ww(t.body,e);throw new Error("makeIterator")}const i3="Cannot convert supplied data type";function Jz(t,e,n){if(e.text&&typeof t=="string")return t;if(lz(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(t.byteOffset!==0||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(i3)}async function eV(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||i)return Jz(t,e);if(Oo(t)&&(t=await K2(t)),Co(t)){const r=t;return await _z(r),e.binary?await r.arrayBuffer():await r.text()}if(q2(t)&&(t=Gz(t,n)),oz(t)||az(t))return q8(t);throw new Error(i3)}function r3(t,e){const n=G2(),i=t||n;return typeof i.fetch=="function"?i.fetch:Du(i.fetch)?r=>Fw(r,i.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:Fw}function tV(t,e,n){if(n)return n;const i={fetch:r3(e,t),...t};if(i.url){const r=Mb(i.url);i.baseUrl=r,i.queryString=gz(i.url),i.filename=X2(r),i.baseUrl=rz(r)}return Array.isArray(i.loaders)||(i.loaders=null),i}function nV(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:void 0}async function pd(t,e,n,i){e&&!Array.isArray(e)&&!Nb(e)&&(i=void 0,n=e,e=void 0),t=await t,n=n||{};const r=Op(t),a=nV(e,i),c=await Bz(t,a,n);return c?(n=Cz(n,c,a,r),i=tV({url:r,_parse:pd,loaders:a},n,i||null),await iV(c,t,n,i)):null}async function iV(t,e,n,i){if(z8(t),n=C8(t.options,n),Co(e)){const s=e,{ok:a,redirected:c,status:f,statusText:h,type:p,url:m}=s,y=Object.fromEntries(s.headers.entries());i.response={headers:y,ok:a,redirected:c,status:f,statusText:h,type:p,url:m}}e=await eV(e,t,n);const r=t;if(r.parseTextSync&&typeof e=="string")return r.parseTextSync(e,n,i);if(V8(t,n))return await $8(t,e,n,i,pd);if(r.parseText&&typeof e=="string")return await r.parseText(e,n,i);if(r.parse)return await r.parse(e,n,i);throw ws(!r.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}async function gd(t,e,n,i){let r,s;!Array.isArray(e)&&!Nb(e)?(r=[],s=e):(r=e,s=n);const a=r3(s);let c=t;return typeof t=="string"&&(c=await a(t)),Oo(t)&&(c=await a(t)),Array.isArray(r)?await pd(c,r,s):await pd(c,r,s)}const rV="4.3.2";var DR;const sV=(DR=globalThis.loaders)==null?void 0:DR.parseImageNode,j_=typeof Image<"u",H_=typeof ImageBitmap<"u",oV=!!sV,W_=Cb?!0:oV;function aV(t){switch(t){case"auto":return H_||j_||W_;case"imagebitmap":return H_;case"image":return j_;case"data":return W_;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function lV(){if(H_)return"imagebitmap";if(j_)return"image";if(W_)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function cV(t){const e=fV(t);if(!e)throw new Error("Not an image");return e}function uV(t){switch(cV(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function fV(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const hV=/^data:image\/svg\+xml/,dV=/\.svg((\?|#).*)?$/;function Ib(t){return t&&(hV.test(t)||dV.test(t))}function pV(t,e){if(Ib(e)){let i=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(i)}`}return s3(t,e)}function s3(t,e){if(Ib(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function o3(t,e,n){const i=pV(t,n),r=self.URL||self.webkitURL,s=typeof i!="string"&&r.createObjectURL(i);try{return await gV(s||i,e)}finally{s&&r.revokeObjectURL(s)}}async function gV(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>{const a=s instanceof Error?s.message:"error";r(new Error(a))}}catch(s){r(s)}})}const mV={};let Xw=!0;async function yV(t,e,n){let i;Ib(n)?i=await o3(t,e,n):i=s3(t,n);const r=e&&e.imagebitmap;return await _V(i,r)}async function _V(t,e=null){if((bV(e)||!Xw)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),Xw=!1}return await createImageBitmap(t)}function bV(t){for(const e in t||mV)return!1;return!0}function vV(t){return!wV(t,"ftyp",4)||!(t[8]&96)?null:TV(t)}function TV(t){switch(SV(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function SV(t,e,n){return String.fromCharCode(...t.slice(e,n))}function EV(t){return[...t].map(e=>e.charCodeAt(0))}function wV(t,e,n=0){const i=EV(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}const Ki=!1,$c=!0;function a3(t){const e=Bu(t);return xV(e)||OV(e)||RV(e)||CV(e)||AV(e)}function AV(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=vV(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function xV(t){const e=Bu(t);return e.byteLength>=24&&e.getUint32(0,Ki)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Ki),height:e.getUint32(20,Ki)}:null}function RV(t){const e=Bu(t);return e.byteLength>=10&&e.getUint32(0,Ki)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,$c),height:e.getUint16(8,$c)}:null}function CV(t){const e=Bu(t);return e.byteLength>=14&&e.getUint16(0,Ki)===16973&&e.getUint32(2,$c)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,$c),height:e.getUint32(22,$c)}:null}function OV(t){const e=Bu(t);if(!(e.byteLength>=3&&e.getUint16(0,Ki)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:i,sofMarkers:r}=MV();let s=2;for(;s+9<e.byteLength;){const a=e.getUint16(s,Ki);if(r.has(a))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Ki),width:e.getUint16(s+7,Ki)};if(!i.has(a))return null;s+=2,s+=e.getUint16(s,Ki)}return null}function MV(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Bu(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function PV(t,e){var r;const{mimeType:n}=a3(t)||{},i=(r=globalThis.loaders)==null?void 0:r.parseImageNode;return fd(i),await i(t,n)}async function NV(t,e,n){e=e||{};const r=(e.image||{}).type||"auto",{url:s}=n||{},a=kV(r);let c;switch(a){case"imagebitmap":c=await yV(t,e,s);break;case"image":c=await o3(t,e,s);break;case"data":c=await PV(t);break;default:fd(!1)}return r==="data"&&(c=uV(c)),c}function kV(t){switch(t){case"auto":case"data":return lV();default:return aV(t),t}}const IV=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],DV=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],BV={image:{type:"auto",decode:!0}},LV={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:rV,mimeTypes:DV,extensions:IV,parse:NV,tests:[t=>!!a3(new DataView(t))],options:BV},Ue=new ku({id:"deck"});let X_={};function UV(t){X_=t}function yn(t,e,n,i){Ue.level>0&&X_[t]&&X_[t].call(null,e,n,i)}function FV(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const zV={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:FV,parseTextSync:JSON.parse};function VV(){const t="9.1.3",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(Ue.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:Ue,_registerLoggers:UV},kz([zV,[LV,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const $V=VV();function Db(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Sy={number:{type:"number",validate(t,e){return Number.isFinite(t)&&typeof e=="object"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:"array",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function jV(t){const e={};for(const[n,i]of Object.entries(t))e[n]=HV(i);return e}function HV(t){let e=qw(t);if(e!=="object")return{value:t,...Sy[e],type:e};if(typeof t=="object")return t?t.type!==void 0?{...t,...Sy[t.type],type:t.type}:t.value===void 0?{type:"object",value:t}:(e=qw(t.value),{...t,...Sy[e],type:e}):{type:"object",value:null};throw new Error("props")}function qw(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const WV=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,XV=`#ifdef MODULE_MATERIAL
  fragColor = material_filterColor(fragColor);
#endif

#ifdef MODULE_LIGHTING
  fragColor = lighting_filterColor(fragColor);
#endif

#ifdef MODULE_FOG
  fragColor = fog_filterColor(fragColor);
#endif

#ifdef MODULE_PICKING
  fragColor = picking_filterHighlightColor(fragColor);
  fragColor = picking_filterPickingColor(fragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,qV={vertex:WV,fragment:XV},Yw=/void\s+main\s*\([^)]*\)\s*\{\n?/,Kw=/}\n?[^{}]*$/,Ey=[],jh="__LUMA_INJECT_DECLARATIONS__";function YV(t){const e={vertex:{},fragment:{}};for(const n in t){let i=t[n];const r=KV(n);typeof i=="string"&&(i={order:0,injection:i}),e[r][n]=i}return e}function KV(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function md(t,e,n,i=!1){const r=e==="vertex";for(const s in n){const a=n[s];a.sort((f,h)=>f.order-h.order),Ey.length=a.length;for(let f=0,h=a.length;f<h;++f)Ey[f]=a[f].injection;const c=`${Ey.join(`
`)}
`;switch(s){case"vs:#decl":r&&(t=t.replace(jh,c));break;case"vs:#main-start":r&&(t=t.replace(Yw,f=>f+c));break;case"vs:#main-end":r&&(t=t.replace(Kw,f=>c+f));break;case"fs:#decl":r||(t=t.replace(jh,c));break;case"fs:#main-start":r||(t=t.replace(Yw,f=>f+c));break;case"fs:#main-end":r||(t=t.replace(Kw,f=>c+f));break;default:t=t.replace(s,f=>f+c)}}return t=t.replace(jh,""),i&&(t=t.replace(/\}\s*$/,s=>s+qV[e])),t}function yd(t){t.map(e=>ZV(e))}function ZV(t){if(t.instance)return;yd(t.dependencies||[]);const{propTypes:e={},deprecations:n=[],inject:i={}}=t,r={normalizedInjections:YV(i),parsedDeprecations:QV(n)};e&&(r.propValidators=jV(e)),t.instance=r;let s={};e&&(s=Object.entries(e).reduce((a,[c,f])=>{const h=f==null?void 0:f.value;return h&&(a[c]=h),a},{})),t.defaultUniforms={...t.defaultUniforms,...s}}function l3(t,e,n){var i;(i=t.deprecations)==null||i.forEach(r=>{var s;(s=r.regex)!=null&&s.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}function QV(t){return t.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp(`\\b${e.old}\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),t}function Bb(t){yd(t);const e={},n={};c3({modules:t,level:0,moduleMap:e,moduleDepth:n});const i=Object.keys(n).sort((r,s)=>n[s]-n[r]).map(r=>e[r]);return yd(i),i}function c3(t){const{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(r[s.name]===void 0||r[s.name]<n)&&(r[s.name]=n);for(const s of e)s.dependencies&&c3({modules:s.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function GV(t){switch(t==null?void 0:t.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
// Apple optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Headless Chrome's software shader 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// If the GPU doesn't have full 32 bits precision, will causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function JV(t,e){var i;if(Number(((i=t.match(/^#version[ \t]+(\d+)/m))==null?void 0:i[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return t=Zw(t,e$),t;case"fragment":return t=Zw(t,t$),t;default:throw new Error(e)}}const u3=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],e$=[...u3,[q_("attribute"),"in $1"],[q_("varying"),"out $1"]],t$=[...u3,[q_("varying"),"in $1"]];function Zw(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}function q_(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function f3(t,e){let n="";for(const i in t){const r=t[i];if(n+=`void ${r.signature} {
`,r.header&&(n+=`  ${r.header}`),e[i]){const s=e[i];s.sort((a,c)=>a.order-c.order);for(const a of s)n+=`  ${a.injection}
`}r.footer&&(n+=`  ${r.footer}`),n+=`}
`}return n}function h3(t){const e={vertex:{},fragment:{}};for(const n of t){let i,r;typeof n!="string"?(i=n,r=i.hook):(i={},r=n),r=r.trim();const[s,a]=r.split(":"),c=r.replace(/\(.+/,""),f=Object.assign(i,{signature:a});switch(s){case"vs":e.vertex[c]=f;break;case"fs":e.fragment[c]=f;break;default:throw new Error(s)}}return e}function n$(t,e){return{name:i$(t,e),language:"glsl",version:r$(t)}}function i$(t,e="unnamed"){const i=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return i?i[1]:e}function r$(t){let e=100;const n=t.match(/[^\s]+/g);if(n&&n.length>=2&&n[0]==="#version"){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}const d3=`

${jh}
`,s$=`precision highp float;
`;function o$(t){const e=Bb(t.modules||[]);return{source:l$(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:p3(e)}}function a$(t){const{vs:e,fs:n}=t,i=Bb(t.modules||[]);return{vs:Qw(t.platformInfo,{...t,source:e,stage:"vertex",modules:i}),fs:Qw(t.platformInfo,{...t,source:n,stage:"fragment",modules:i}),getUniforms:p3(i)}}function l$(t,e){var T;const{source:n,stage:i,modules:r,hookFunctions:s=[],inject:a={},log:c}=e;Db(typeof n=="string","shader source must be a string");const f=n;let h="";const p=h3(s),m={},y={},b={};for(const S in a){const w=typeof a[S]=="string"?{injection:a[S],order:0}:a[S],C=/^(v|f)s:(#)?([\w-]+)$/.exec(S);if(C){const A=C[2],O=C[3];A?O==="decl"?y[S]=[w]:b[S]=[w]:m[S]=[w]}else b[S]=[w]}const v=r;for(const S of v){c&&l3(S,f,c);const w=g3(S,"wgsl");h+=w;const C=((T=S.injections)==null?void 0:T[i])||{};for(const A in C){const O=/^(v|f)s:#([\w-]+)$/.exec(A);if(O){const D=O[2]==="decl"?y:b;D[A]=D[A]||[],D[A].push(C[A])}else m[A]=m[A]||[],m[A].push(C[A])}}return h+=d3,h=md(h,i,y),h+=f3(p[i],m),h+=f,h=md(h,i,b),h}function Qw(t,e){var z;const{id:n,source:i,stage:r,language:s="glsl",modules:a,defines:c={},hookFunctions:f=[],inject:h={},prologue:p=!0,log:m}=e;Db(typeof i=="string","shader source must be a string");const y=s==="glsl"?n$(i).version:-1,b=t.shaderLanguageVersion,v=y===100?"#version 100":"#version 300 es",S=i.split(`
`).slice(1).join(`
`),w={};a.forEach(j=>{Object.assign(w,j.defines)}),Object.assign(w,c);let C="";switch(s){case"wgsl":break;case"glsl":C=p?`${v}

// ----- PROLOGUE -------------------------
${c$({id:n,source:i,stage:r})}
${`#define SHADER_TYPE_${r.toUpperCase()}`}

${GV(t)}
${r==="fragment"?s$:""}

// ----- APPLICATION DEFINES -------------------------

${u$(w)}

`:`${v}
`;break}const A=h3(f),O={},R={},D={};for(const j in h){const V=typeof h[j]=="string"?{injection:h[j],order:0}:h[j],x=/^(v|f)s:(#)?([\w-]+)$/.exec(j);if(x){const H=x[2],te=x[3];H?te==="decl"?R[j]=[V]:D[j]=[V]:O[j]=[V]}else D[j]=[V]}for(const j of a){m&&l3(j,S,m);const V=g3(j,r);C+=V;const x=((z=j.instance)==null?void 0:z.normalizedInjections[r])||{};for(const H in x){const te=/^(v|f)s:#([\w-]+)$/.exec(H);if(te){const fe=te[2]==="decl"?R:D;fe[H]=fe[H]||[],fe[H].push(x[H])}else O[H]=O[H]||[],O[H].push(x[H])}}return C+="// ----- MAIN SHADER SOURCE -------------------------",C+=d3,C=md(C,r,R),C+=f3(A[r],O),C+=S,C=md(C,r,D),s==="glsl"&&y!==b&&(C=JV(C,r)),C.trim()}function p3(t){return function(n){var r;const i={};for(const s of t){const a=(r=s.getUniforms)==null?void 0:r.call(s,n,i);Object.assign(i,a)}return i}}function c$(t){const{id:e,source:n,stage:i}=t;return e&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${e}_${i}`:""}function u$(t={}){let e="";for(const n in t){const i=t[n];(i||Number.isFinite(i))&&(e+=`#define ${n.toUpperCase()} ${t[n]}
`)}return e}function g3(t,e){let n;switch(e){case"vertex":n=t.vs||"";break;case"fragment":n=t.fs||"";break;case"wgsl":n=t.source||"";break;default:Db(!1)}if(!t.name)throw new Error("Shader module must have a name");const i=t.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let r=`// ----- MODULE ${t.name} ---------------

`;return e!=="wgsl"&&(r+=`#define MODULE_${i}
`),r+=`${n}
`,r}const f$=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,h$=/^\s*\#\s*endif\s*$/;function d$(t,e){var a;const n=t.split(`
`),i=[];let r=!0,s=null;for(const c of n){const f=c.match(f$),h=c.match(h$);f?(s=f[1],r=!!((a=e==null?void 0:e.defines)!=null&&a[s])):h?r=!0:r&&i.push(c)}return i.join(`
`)}const io=class io{constructor(){M(this,"_hookFunctions",[]);M(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return io.defaultShaderAssembler=io.defaultShaderAssembler||new io,io.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(n=>n.name===(typeof e=="string"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n)}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){const n=this._getModuleList(e.modules),i=this._hookFunctions,{source:r,getUniforms:s}=o$({...e,source:e.source,modules:n,hookFunctions:i});return{source:e.platformInfo.shaderLanguage==="wgsl"?d$(r):r,getUniforms:s,modules:n}}assembleGLSLShaderPair(e){const n=this._getModuleList(e.modules),i=this._hookFunctions;return{...a$({...e,vs:e.vs,fs:e.fs,modules:n,hookFunctions:i}),modules:n}}_getModuleList(e=[]){const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,a=this._defaultModules.length;s<a;++s){const c=this._defaultModules[s],f=c.name;n[r++]=c,i[f]=!0}for(let s=0,a=e.length;s<a;++s){const c=e[s],f=c.name;i[f]||(n[r++]=c,i[f]=!0)}return n.length=r,yd(n),n}};M(io,"defaultShaderAssembler");let _d=io;const p$=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,g$=`#version 300 es
${p$}`;function m$(t){const{input:e,inputChannels:n,output:i}={};if(!e)return g$;if(!n)throw new Error("inputChannels");const r=y$(n),s=_$(e,n);return`#version 300 es
in ${r} ${e};
out vec4 ${i};
void main() {
  ${i} = ${s};
}`}function y$(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}function _$(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}class b${constructor(){M(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new Iu({id:e})),this.stats.get(e)}}const m3=new b$,ge=new ku({id:"luma.gl"}),wy={};function Mp(t="id"){wy[t]=wy[t]||1;const e=wy[t]++;return`${t}-${e}`}var i_;let st=(i_=class{constructor(e,n,i){M(this,"id");M(this,"props");M(this,"userData",{});M(this,"_device");M(this,"destroyed",!1);M(this,"allocatedBytes",0);M(this,"_attachedResources",new Set);if(!e)throw new Error("no device");this._device=e,this.props=v$(n,i);const r=this.props.id!=="undefined"?this.props.id:Mp(this[Symbol.toStringTag]);this.props.id=r,this.id=r,this.userData=this.props.userData||{},this.addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get(`${n}s Active`).decrementCount()}trackAllocatedMemory(e,n=this[Symbol.toStringTag]){const i=this._device.statsManager.getStats("Resource Counts");i.get("GPU Memory").addCount(e),i.get(`${n} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").subtractCount(this.allocatedBytes),n.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${n}s Created`).incrementCount(),e.get(`${n}s Active`).incrementCount()}},M(i_,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),i_);function v$(t,e){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}var Vt;let Nt=(Vt=class extends st{constructor(n,i){const r={...i};(i.usage||0)&Vt.INDEX&&!i.indexType&&(i.data instanceof Uint32Array?r.indexType="uint32":i.data instanceof Uint16Array&&(r.indexType="uint16")),delete r.data;super(n,r,Vt.defaultProps);M(this,"usage");M(this,"indexType");M(this,"updateTimestamp");M(this,"debugData",new ArrayBuffer(0));this.usage=r.usage||0,this.indexType=r.indexType,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}clone(n){return this.device.createBuffer({...this.props,...n})}readSyncWebGL(n,i){throw new Error("not implemented")}_setDebugData(n,i,r){const s=ArrayBuffer.isView(n)?n.buffer:n,a=Math.min(n?n.byteLength:r,Vt.DEBUG_DATA_MAX_LENGTH);s===null?this.debugData=new ArrayBuffer(a):i===0&&r===s.byteLength?this.debugData=s.slice(0,a):this.debugData=s.slice(i,i+a)}},M(Vt,"defaultProps",{...st.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),M(Vt,"MAP_READ",1),M(Vt,"MAP_WRITE",2),M(Vt,"COPY_SRC",4),M(Vt,"COPY_DST",8),M(Vt,"INDEX",16),M(Vt,"VERTEX",32),M(Vt,"UNIFORM",64),M(Vt,"STORAGE",128),M(Vt,"INDIRECT",256),M(Vt,"QUERY_RESOLVE",512),M(Vt,"DEBUG_DATA_MAX_LENGTH",32),Vt);function y3(t){const e=Gw[t],n=T$(e),i=t.includes("norm"),r=!i&&!t.startsWith("float"),s=t.startsWith("s");return{dataType:Gw[t],byteLength:n,integer:r,signed:s,normalized:i}}function T$(t){return S$[t]}const Gw={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},S$={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},gn="texture-compression-bc",nt="texture-compression-astc",$i="texture-compression-etc2",E$="texture-compression-etc1-webgl",rh="texture-compression-pvrtc-webgl",Ay="texture-compression-atc-webgl",sh="float32-renderable-webgl",xy="float16-renderable-webgl",w$="rgb9e5ufloat-renderable-webgl",Ry="snorm8-renderable-webgl",Ec="norm16-renderable-webgl",Cy="snorm16-renderable-webgl",oh="float32-filterable",Jw="float16-filterable-webgl";function _3(t){const e=A$[t];if(!e)throw new Error(`Unsupported texture format ${t}`);return e}const A$={r8unorm:{},r8snorm:{render:Ry},r8uint:{},r8sint:{},rg8unorm:{},rg8snorm:{render:Ry},rg8uint:{},rg8sint:{},r16uint:{},r16sint:{},r16float:{render:xy,filter:"float16-filterable-webgl"},"r16unorm-webgl":{f:Ec},"r16snorm-webgl":{f:Cy},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},"rgb8unorm-webgl":{},"rgb8snorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},rgba8snorm:{render:Ry},rgba8uint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{},rg16sint:{},rg16float:{render:xy,filter:Jw},"rg16unorm-webgl":{render:Ec},"rg16snorm-webgl":{render:Cy},r32uint:{},r32sint:{},r32float:{render:sh,filter:oh},rgb9e5ufloat:{channels:"rgb",packed:!0,render:w$},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:sh},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},"rgb10a2uint-webgl":{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1,wgpu:!1},"rgb16unorm-webgl":{f:Ec},"rgb16snorm-webgl":{f:Ec},rg32uint:{},rg32sint:{},rg32float:{render:!1,filter:oh},rgba16uint:{},rgba16sint:{},rgba16float:{render:xy,filter:Jw},"rgba16unorm-webgl":{render:Ec},"rgba16snorm-webgl":{render:Cy},"rgb32float-webgl":{render:sh,filter:oh},rgba32uint:{},rgba32sint:{},rgba32float:{render:sh,filter:oh},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:gn},"bc1-rgb-unorm-srgb-webgl":{f:gn},"bc1-rgba-unorm":{f:gn},"bc1-rgba-unorm-srgb":{f:gn},"bc2-rgba-unorm":{f:gn},"bc2-rgba-unorm-srgb":{f:gn},"bc3-rgba-unorm":{f:gn},"bc3-rgba-unorm-srgb":{f:gn},"bc4-r-unorm":{f:gn},"bc4-r-snorm":{f:gn},"bc5-rg-unorm":{f:gn},"bc5-rg-snorm":{f:gn},"bc6h-rgb-ufloat":{f:gn},"bc6h-rgb-float":{f:gn},"bc7-rgba-unorm":{f:gn},"bc7-rgba-unorm-srgb":{f:gn},"etc2-rgb8unorm":{f:$i},"etc2-rgb8unorm-srgb":{f:$i},"etc2-rgb8a1unorm":{f:$i},"etc2-rgb8a1unorm-srgb":{f:$i},"etc2-rgba8unorm":{f:$i},"etc2-rgba8unorm-srgb":{f:$i},"eac-r11unorm":{f:$i},"eac-r11snorm":{f:$i},"eac-rg11unorm":{f:$i},"eac-rg11snorm":{f:$i},"astc-4x4-unorm":{f:nt},"astc-4x4-unorm-srgb":{f:nt},"astc-5x4-unorm":{f:nt},"astc-5x4-unorm-srgb":{f:nt},"astc-5x5-unorm":{f:nt},"astc-5x5-unorm-srgb":{f:nt},"astc-6x5-unorm":{f:nt},"astc-6x5-unorm-srgb":{f:nt},"astc-6x6-unorm":{f:nt},"astc-6x6-unorm-srgb":{f:nt},"astc-8x5-unorm":{f:nt},"astc-8x5-unorm-srgb":{f:nt},"astc-8x6-unorm":{f:nt},"astc-8x6-unorm-srgb":{f:nt},"astc-8x8-unorm":{f:nt},"astc-8x8-unorm-srgb":{f:nt},"astc-10x5-unorm":{f:nt},"astc-10x5-unorm-srgb":{f:nt},"astc-10x6-unorm":{f:nt},"astc-10x6-unorm-srgb":{f:nt},"astc-10x8-unorm":{f:nt},"astc-10x8-unorm-srgb":{f:nt},"astc-10x10-unorm":{f:nt},"astc-10x10-unorm-srgb":{f:nt},"astc-12x10-unorm":{f:nt},"astc-12x10-unorm-srgb":{f:nt},"astc-12x12-unorm":{f:nt},"astc-12x12-unorm-srgb":{f:nt},"pvrtc-rgb4unorm-webgl":{f:rh},"pvrtc-rgba4unorm-webgl":{f:rh},"pvrtc-rbg2unorm-webgl":{f:rh},"pvrtc-rgba2unorm-webgl":{f:rh},"etc1-rbg-unorm-webgl":{f:E$},"atc-rgb-unorm-webgl":{f:Ay},"atc-rgba-unorm-webgl":{f:Ay},"atc-rgbai-unorm-webgl":{f:Ay}},x$=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],R$=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;function b3(t){return x$.some(e=>t.startsWith(e))}function Lb(t){let e=C$(t);if(b3(t)){e.channels="rgb",e.components=3,e.bytesPerPixel=1,e.srgb=!1,e.compressed=!0;const i=O$(t);i&&(e.blockWidth=i.blockWidth,e.blockHeight=i.blockHeight)}const n=R$.exec(t);if(n){const[,i,r,s,a,c]=n,f=`${s}${r}`,h=y3(f),p=h.byteLength*8,m=i.length,y=[p,m>=2?p:0,m>=3?p:0,m>=4?p:0];e={format:t,attachment:e.attachment,dataType:h.dataType,components:m,channels:i,integer:h.integer,signed:h.signed,normalized:h.normalized,bitsPerChannel:y,bytesPerPixel:h.byteLength*i.length,packed:e.packed,srgb:e.srgb},c==="-webgl"&&(e.webgl=!0),a==="-srgb"&&(e.srgb=!0)}return t.endsWith("-webgl")&&(e.webgl=!0),t.endsWith("-srgb")&&(e.srgb=!0),e}function C$(t){var s;const e=_3(t),n=e.bytesPerPixel||1,i=e.bitsPerChannel||[8,8,8,8];return delete e.bitsPerChannel,delete e.bytesPerPixel,delete e.f,delete e.render,delete e.filter,delete e.blend,delete e.store,{...e,format:t,attachment:e.attachment||"color",channels:e.channels||"r",components:e.components||((s=e.channels)==null?void 0:s.length)||1,bytesPerPixel:n,bitsPerChannel:i,dataType:e.dataType||"uint8",srgb:e.srgb??!1,packed:e.packed??!1,webgl:e.webgl??!1,integer:e.integer??!1,signed:e.signed??!1,normalized:e.normalized??!1,compressed:e.compressed??!1}}function O$(t){const n=/.*-(\d+)x(\d+)-.*/.exec(t);if(n){const[,i,r]=n;return{blockWidth:Number(i),blockHeight:Number(r)}}return null}function M$(t){const e=_3(t),n={format:t,create:e.f??!0,render:e.render??!0,filter:e.filter??!0,blend:e.blend??!0,store:e.store??!0},i=Lb(t),r=t.startsWith("depth")||t.startsWith("stencil"),s=i==null?void 0:i.signed,a=i==null?void 0:i.integer,c=i==null?void 0:i.webgl;return n.render&&(n.render=!s),n.filter&&(n.filter=!r&&!s&&!a&&!c),n}class P${}class N${constructor(e=[],n){M(this,"features");M(this,"disabledFeatures");this.features=new Set(e),this.disabledFeatures=n||{}}*[Symbol.iterator](){yield*this.features}has(e){var n;return!((n=this.disabledFeatures)!=null&&n[e])&&this.features.has(e)}}const Vd=class Vd{constructor(e){M(this,"id");M(this,"props");M(this,"userData",{});M(this,"statsManager",m3);M(this,"timestamp",0);M(this,"_reused",!1);M(this,"_lumaData",{});this.props={...Vd.defaultProps,...e},this.id=this.props.id||Mp(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}getTextureFormatCapabilities(e){const n=M$(e),i=a=>(typeof a=="string"?this.features.has(a):a)??!0,r=i(n.create),s={format:e,create:r,render:r&&i(n.render),filter:r&&i(n.filter),blend:r&&i(n.blend),store:r&&i(n.store)};return this._getDeviceSpecificTextureFormatCapabilities(s)}isTextureFormatSupported(e,n){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return b3(e)}loseDevice(){return!1}reportError(e){this.props.onError(e)}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}createCommandEncoder(e={}){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,n){throw new Error("not implemented")}readPixelsToBufferWebGL(e,n){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,n){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}static _getCanvasContextProps(e){return e.createCanvasContext===!0?{}:e.createCanvasContext}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const n={...e};return(e.usage||0)&Nt.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?n.indexType="uint32":e.data instanceof Uint16Array?n.indexType="uint16":ge.warn("indices buffer content must be of integer type")()),n}};M(Vd,"defaultProps",{id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,onError:e=>ge.error(e.message)(),_reuseDevices:!1,_requestMaxLimits:!0,_factoryDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_resourceDefaults:{},webgl:{},debug:ge.get("debug")||void 0,debugShaders:ge.get("debug-shaders")||void 0,debugFramebuffers:!!ge.get("debug-framebuffers"),debugWebGL:!!ge.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_handle:void 0});let vs=Vd;const k$=Ro()&&typeof document<"u",I$=()=>k$&&document.readyState==="complete",D$="set luma.log.level=1 (or higher) to trace rendering",eA="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.",gs=class gs{constructor(){M(this,"stats",m3);M(this,"log",ge);M(this,"VERSION","9.1.4");M(this,"spector");M(this,"preregisteredAdapters",new Map);if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw ge.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),ge.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");ge.error("This version of luma.gl has already been initialized")()}ge.log(1,`${this.VERSION} - ${D$}`)(),globalThis.luma=this}registerAdapters(e){for(const n of e)this.preregisteredAdapters.set(n.type,n)}getSupportedAdapters(e=[]){const n=this.getAdapterMap(e);return Array.from(n).map(([,i])=>i).filter(i=>{var r;return(r=i.isSupported)==null?void 0:r.call(i)}).map(i=>i.type)}getBestAvailableAdapter(e=[]){var i,r,s,a;const n=this.getAdapterMap(e);return(r=(i=n.get("webgpu"))==null?void 0:i.isSupported)!=null&&r.call(i)?"webgpu":(a=(s=n.get("webgl"))==null?void 0:s.isSupported)!=null&&a.call(s)?"webgl":null}setDefaultDeviceProps(e){Object.assign(gs.defaultProps,e)}async createDevice(e={}){var c;e={...gs.defaultProps,...e},e.waitForPageLoad&&await gs.pageLoaded;const n=this.getAdapterMap(e.adapters);let i=e.type||"";i==="best-available"&&(i=this.getBestAvailableAdapter(e.adapters)||i);const s=(this.getAdapterMap(e.adapters)||n).get(i),a=await((c=s==null?void 0:s.create)==null?void 0:c.call(s,e));if(a)return a;throw new Error(eA)}async attachDevice(e){var a;const n=this.getAdapterMap(e.adapters);let i="";e.handle instanceof WebGL2RenderingContext&&(i="webgl"),e.createCanvasContext&&await gs.pageLoaded,e.handle===null&&(i="unknown");const r=n.get(i),s=await((a=r==null?void 0:r.attach)==null?void 0:a.call(r,null));if(s)return s;throw new Error(eA)}enforceWebGL2(e=!0,n=[]){var s;const r=this.getAdapterMap(n).get("webgl");r||ge.warn("enforceWebGL2: webgl adapter not found")(),(s=r==null?void 0:r.enforceWebGL2)==null||s.call(r,e)}getAdapterMap(e=[]){const n=new Map(this.preregisteredAdapters);for(const i of e)n.set(i.type,i);return n}registerDevices(e){ge.warn("luma.registerDevices() is deprecated, use luma.registerAdapters() instead");for(const n of e){const i=n.adapter;i&&this.preregisteredAdapters.set(i.type,i)}}};M(gs,"defaultProps",{...vs.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0}),M(gs,"pageLoaded",B$().then(()=>{ge.probe(2,"DOM is loaded")()}));let Y_=gs;const K_=new Y_;function B$(){return I$()||typeof window>"u"?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>t())})}class L${}const $d=class $d{constructor(e){M(this,"id");M(this,"props");M(this,"canvas");M(this,"htmlCanvas");M(this,"offscreenCanvas");M(this,"type");M(this,"width",1);M(this,"height",1);M(this,"resizeObserver");M(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...$d.defaultProps,...e},e=this.props,!Ro()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(e.canvas)typeof e.canvas=="string"?this.canvas=F$(e.canvas):this.canvas=e.canvas;else{const n=z$(e),i=U$((e==null?void 0:e.container)||null);i.insertBefore(n,i.firstChild),this.canvas=n,e!=null&&e.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver(n=>{for(const i of n)i.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}getDevicePixelRatio(e){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(e=e===void 0?this.props.useDevicePixels:e,!e||e<=0)?1:e===!0?typeof window<"u"&&window.devicePixelRatio||1:e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),n=this.canvas;return n.parentElement?[n.clientWidth*e,n.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,n]=this.getPixelSize();return e/n}cssToDeviceRatio(){var e;try{const[n]=this.getDrawingBufferSize(),i=this._canvasSizeInfo.clientWidth||((e=this.htmlCanvas)==null?void 0:e.clientWidth);return i?n/i:1}catch{return 1}}cssToDevicePixels(e,n=!0){const i=this.cssToDeviceRatio(),[r,s]=this.getDrawingBufferSize();return V$(e,i,r,s,n)}setDevicePixelRatio(e,n={}){if(!this.htmlCanvas)return;let i="width"in n?n.width:this.htmlCanvas.clientWidth,r="height"in n?n.height:this.htmlCanvas.clientHeight;(!i||!r)&&(ge.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=this.htmlCanvas.width||1,r=this.htmlCanvas.height||1);const s=this._canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let a=e;const c=Math.floor(i*a),f=Math.floor(r*a);if(this.htmlCanvas.width=c,this.htmlCanvas.height=f,this.device.gl){const[p,m]=this.getDrawingBufferSize();(p!==c||m!==f)&&(a=Math.min(p/i,m/r),this.htmlCanvas.width=Math.floor(i*a),this.htmlCanvas.height=Math.floor(r*a),ge.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=i,this._canvasSizeInfo.clientHeight=r,this._canvasSizeInfo.devicePixelRatio=e}}}getDrawingBufferSize(){const e=this.device.gl;return e?[e.drawingBufferWidth,e.drawingBufferHeight]:this.getPixelSize()}_setAutoCreatedCanvasId(e){var n;((n=this.htmlCanvas)==null?void 0:n.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=e)}};M($d,"defaultProps",{canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb"});let Z_=$d;function U$(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e)throw new Error(`${t} is not an HTML element`);return e}else if(t)return t;return document.body}function F$(t){const e=document.getElementById(t);if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}function z$(t){const{width:e,height:n}=t,i=document.createElement("canvas");return i.id=Mp("lumagl-auto-created-canvas"),i.width=e||1,i.height=n||1,i.style.width=Number.isFinite(e)?`${e}px`:"100%",i.style.height=Number.isFinite(n)?`${n}px`:"100%",i}function V$(t,e,n,i,r){const s=t,a=tA(s[0],e,n);let c=nA(s[1],e,i,r),f=tA(s[0]+1,e,n);const h=f===n-1?f:f-1;f=nA(s[1]+1,e,i,r);let p;return r?(f=f===0?f:f+1,p=c,c=f):p=f===i-1?f:f-1,{x:a,y:c,width:Math.max(h-a+1,1),height:Math.max(p-c+1,1)}}function tA(t,e,n){return Math.min(Math.round(t*e),n-1)}function nA(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const an=class an extends st{constructor(n,i){i=an.normalizeProps(n,i);super(n,i,an.defaultProps);M(this,"dimension");M(this,"format");M(this,"width");M(this,"height");M(this,"depth");M(this,"mipLevels");M(this,"updateTimestamp");if(this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.props.width===void 0||this.props.height===void 0){const r=an.getTextureDataSize(this.props.data);this.width=(r==null?void 0:r.width)||1,this.height=(r==null?void 0:r.height)||1}this.props.mipmaps&&this.props.mipLevels===void 0&&(this.props.mipLevels="pyramid"),this.mipLevels=this.props.mipLevels==="pyramid"?an.getMipLevelCount(this.width,this.height):this.props.mipLevels||1,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}clone(n){return this.device.createTexture({...this.props,...n})}static isExternalImage(n){return typeof ImageData<"u"&&n instanceof ImageData||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement||typeof VideoFrame<"u"&&n instanceof VideoFrame||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}static getExternalImageSize(n){if(typeof ImageData<"u"&&n instanceof ImageData||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height};if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)return{width:n.naturalWidth,height:n.naturalHeight};if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)return{width:n.videoWidth,height:n.videoHeight};if(typeof VideoFrame<"u"&&n instanceof VideoFrame)return{width:n.displayWidth,height:n.displayHeight};throw new Error("Unknown image type")}static isTextureLevelData(n){const i=n==null?void 0:n.data;return ArrayBuffer.isView(i)}static getTextureDataSize(n){if(!n||ArrayBuffer.isView(n))return null;if(Array.isArray(n))return an.getTextureDataSize(n[0]);if(an.isExternalImage(n))return an.getExternalImageSize(n);if(n&&typeof n=="object"&&n.constructor===Object){const r=Object.values(n)[0];return{width:r.width,height:r.height}}throw new Error("texture size deduction failed")}static normalizeTextureData(n,i){let r;return ArrayBuffer.isView(n)?r=[{data:n,width:i.width,height:i.height}]:Array.isArray(n)?r=n:r=[n],r}static getMipLevelCount(n,i){return Math.floor(Math.log2(Math.max(n,i)))+1}static getCubeFaceDepth(n){switch(n){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(n)}}static normalizeProps(n,i){var f,h;const r={...i},s=((h=(f=n==null?void 0:n.props)==null?void 0:f._resourceDefaults)==null?void 0:h.texture)||{};Object.assign(r,s);const{width:a,height:c}=r;return typeof a=="number"&&(r.width=Math.max(1,Math.ceil(a))),typeof c=="number"&&(r.height=Math.max(1,Math.ceil(c))),r}};M(an,"COPY_SRC",1),M(an,"COPY_DST",2),M(an,"TEXTURE",4),M(an,"STORAGE",8),M(an,"RENDER_ATTACHMENT",16),M(an,"CubeFaces",["+X","-X","+Y","-Y","+Z","-Z"]),M(an,"defaultProps",{...st.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!1,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,sampler:{},view:void 0,flipY:void 0}),M(an,"defaultCopyExternalImageOptions",{image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1});let Pt=an;const jd=class jd extends st{get[Symbol.toStringTag](){return"TextureView"}constructor(e,n){super(e,n,jd.defaultProps)}};M(jd,"defaultProps",{...st.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let bd=jd;function $$(t,e,n){let i="";const r=e.split(/\r?\n/),s=t.slice().sort((a,c)=>a.lineNum-c.lineNum);switch((n==null?void 0:n.showSourceCode)||"no"){case"all":let a=0;for(let c=1;c<=r.length;c++)for(i+=v3(r[c-1],c,n);s.length>a&&s[a].lineNum===c;){const f=s[a++];i+=iA(f,r,f.lineNum,{...n,inlineSource:!1})}return i;case"issues":case"no":for(const c of t)i+=iA(c,r,c.lineNum,{inlineSource:(n==null?void 0:n.showSourceCode)!=="no"});return i}}function iA(t,e,n,i){if(i!=null&&i.inlineSource){const s=j$(e,n),a=t.linePos>0?`${" ".repeat(t.linePos+5)}^^^
`:"";return`
${s}${a}${t.type.toUpperCase()}: ${t.message}

`}const r=t.type==="error"?"red":"#8B4000";return i!=null&&i.html?`<div class='luma-compiler-log-error' style="color:${r};"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function j$(t,e,n){let i="";for(let r=e-2;r<=e;r++){const s=t[r-1];s!==void 0&&(i+=v3(s,e,n))}return i}function v3(t,e,n){const i=n!=null&&n.html?W$(t):t;return`${H$(String(e),4)}: ${i}${n!=null&&n.html?"<br/>":`
`}`}function H$(t,e){let n="";for(let i=t.length;i<e;++i)n+=" ";return n+t}function W$(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const Hd=class Hd extends st{constructor(n,i){i={...i,debugShaders:i.debugShaders||n.props.debugShaders||"errors"};super(n,{id:X$(i),...i},Hd.defaultProps);M(this,"stage");M(this,"source");M(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const n=this.props.debugShaders;switch(n){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const i=await this.getCompilationInfo();n==="warnings"&&(i==null?void 0:i.length)===0||this._displayShaderLog(i)}_displayShaderLog(n){var h;if(typeof document>"u"||!(document!=null&&document.createElement))return;const i=T3(this.source),r=`${this.stage} ${i}`;let s=$$(n,this.source,{showSourceCode:"all",html:!0});const a=this.getTranslatedSource();a&&(s+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${a}</pre></code>`);const c=document.createElement("Button");c.innerHTML=`
<h1>Shader Compilation Error in ${r}</h1><br /><br />
<code style="user-select:text;"><pre>
${s}
</pre></code>`,c.style.top="10px",c.style.left="10px",c.style.position="absolute",c.style.zIndex="9999",c.style.width="100%",c.style.textAlign="left",document.body.appendChild(c),(h=document.getElementsByClassName("luma-compiler-log-error")[0])==null||h.scrollIntoView(),c.onclick=()=>{const p=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(p)}}};M(Hd,"defaultProps",{...st.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0});let vd=Hd;function X$(t){return T3(t.source)||t.id||Mp(`unnamed ${t.stage}-shader`)}function T3(t,e="unnamed"){const i=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return i?i[1]:e}const Kc=class Kc extends st{get[Symbol.toStringTag](){return"Sampler"}constructor(e,n){n=Kc.normalizeProps(e,n),super(e,n,Kc.defaultProps)}static normalizeProps(e,n){var s,a;const i=((a=(s=e==null?void 0:e.props)==null?void 0:s._resourceDefaults)==null?void 0:a.sampler)||{};return{...n,...i}}};M(Kc,"defaultProps",{...st.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let Td=Kc;const Wd=class Wd extends st{constructor(n,i={}){super(n,i,Wd.defaultProps);M(this,"width");M(this,"height");this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}clone(n){const i=this.colorAttachments.map(s=>s.texture.clone(n)),r=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(n);return this.device.createFramebuffer({...this.props,colorAttachments:i,depthStencilAttachment:r})}resize(n){let i=!n;if(n){const[r,s]=Array.isArray(n)?n:[n.width,n.height];i=i||s!==this.height||r!==this.width,this.width=r,this.height=s}i&&(ge.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((i,r)=>{if(typeof i=="string"){const s=this.createColorTexture(i,r);return this.attachResource(s),s.view}return i instanceof Pt?i.view:i});const n=this.props.depthStencilAttachment;if(n)if(typeof n=="string"){const i=this.createDepthStencilTexture(n);this.attachResource(i),this.depthStencilAttachment=i.view}else n instanceof Pt?this.depthStencilAttachment=n.view:this.depthStencilAttachment=n}createColorTexture(n,i){return this.device.createTexture({id:`${this.id}-color-attachment-${i}`,usage:Pt.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(n){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:Pt.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(n,i){for(let r=0;r<this.colorAttachments.length;++r)if(this.colorAttachments[r]){const s=this.colorAttachments[r].texture.clone({width:n,height:i});this.destroyAttachedResource(this.colorAttachments[r]),this.colorAttachments[r]=s.view,this.attachResource(s.view)}if(this.depthStencilAttachment){const r=this.depthStencilAttachment.texture.clone({width:n,height:i});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=r.view,this.attachResource(r)}this.updateAttachments()}};M(Wd,"defaultProps",{...st.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let Sd=Wd;const Xd=class Xd extends st{constructor(n,i){super(n,i,Xd.defaultProps);M(this,"shaderLayout");M(this,"bufferLayout");M(this,"linkStatus","pending");M(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(n){throw new Error("Use uniform blocks")}};M(Xd,"defaultProps",{...st.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let il=Xd;const Ei=class Ei extends st{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,n){n=Ei.normalizeProps(e,n),super(e,n,Ei.defaultProps)}static normalizeProps(e,n){var s;return{...(s=e.props._resourceDefaults)==null?void 0:s.renderPass,...n}}};M(Ei,"defaultClearColor",[0,0,0,1]),M(Ei,"defaultClearDepth",1),M(Ei,"defaultClearStencil",0),M(Ei,"defaultProps",{...st.defaultProps,framebuffer:null,parameters:void 0,clearColor:Ei.defaultClearColor,clearColors:void 0,clearDepth:Ei.defaultClearDepth,clearStencil:Ei.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let Q_=Ei;const qd=class qd extends st{constructor(n,i){super(n,i,qd.defaultProps);M(this,"hash","");M(this,"shaderLayout");this.shaderLayout=i.shaderLayout}get[Symbol.toStringTag](){return"ComputePipeline"}};M(qd,"defaultProps",{...st.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let Ed=qd;const Yd=class Yd extends st{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,n){super(e,n,Yd.defaultProps)}};M(Yd,"defaultProps",{...st.defaultProps,measureExecutionTime:void 0});let G_=Yd;const Kd=class Kd extends st{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,n){super(e,n,Kd.defaultProps)}};M(Kd,"defaultProps",{...st.defaultProps});let J_=Kd;function q$(t){const[e,n]=K$[t],i=e==="i32"||e==="u32",r=e!=="u32",s=Z$[e]*n,a=Y$(e,n);return{dataType:e,components:n,defaultVertexFormat:a,byteLength:s,integer:i,signed:r}}function Y$(t,e){let n;switch(t){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return e===1?n:`${n}x${e}`}const K$={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},Z$={f32:4,f16:2,i32:4,u32:4};function S3(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[n,i]=t.split("x"),r=n,s=i?parseInt(i):1,a=y3(r),c={type:r,components:s,byteLength:a.byteLength*s,integer:a.integer,signed:a.signed,normalized:a.normalized};return e&&(c.webglOnly=!0),c}function E3(t,e){const n={};for(const i of t.attributes){const r=G$(t,e,i.name);r&&(n[i.name]=r)}return n}function Q$(t,e,n=16){const i=E3(t,e),r=new Array(n).fill(null);for(const s of Object.values(i))r[s.location]=s;return r}function G$(t,e,n){const i=J$(t,n),r=e7(e,n);if(!i)return null;const s=q$(i.type),a=(r==null?void 0:r.vertexFormat)||s.defaultVertexFormat,c=S3(a);return{attributeName:(r==null?void 0:r.attributeName)||i.name,bufferName:(r==null?void 0:r.bufferName)||i.name,location:i.location,shaderType:i.type,shaderDataType:s.dataType,shaderComponents:s.components,vertexFormat:a,bufferDataType:c.type,bufferComponents:c.components,normalized:c.normalized,integer:s.integer,stepMode:(r==null?void 0:r.stepMode)||i.stepMode||"vertex",byteOffset:(r==null?void 0:r.byteOffset)||0,byteStride:(r==null?void 0:r.byteStride)||0}}function J$(t,e){const n=t.attributes.find(i=>i.name===e);return n||ge.warn(`shader layout attribute "${e}" not present in shader`),n||null}function e7(t,e){t7(t);let n=n7(t,e);return n||(n=i7(t,e),n)?n:(ge.warn(`layout for attribute "${e}" not present in buffer layout`),null)}function t7(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&ge.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function n7(t,e){for(const n of t)if(n.format&&n.name===e)return{attributeName:n.name,bufferName:e,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}function i7(t,e){var n;for(const i of t){let r=i.byteStride;if(typeof i.byteStride!="number")for(const a of i.attributes||[]){const c=S3(a.format);r+=c.byteLength}const s=(n=i.attributes)==null?void 0:n.find(a=>a.attribute===e);if(s)return{attributeName:s.attribute,bufferName:i.name,stepMode:i.stepMode,vertexFormat:s.format,byteOffset:s.byteOffset,byteStride:r}}return null}const Zd=class Zd extends st{constructor(n,i){super(n,i,Zd.defaultProps);M(this,"maxVertexAttributes");M(this,"attributeInfos");M(this,"indexBuffer",null);M(this,"attributes");this.maxVertexAttributes=n.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null);const{shaderLayout:r,bufferLayout:s}=i.renderPipeline||{};if(!r||!s)throw new Error("VertexArray");this.attributeInfos=Q$(r,s,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(n,i){this.device.reportError(new Error("constant attributes not supported"))}};M(Zd,"defaultProps",{...st.defaultProps,renderPipeline:null});let e0=Zd;const Qd=class Qd extends st{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,n){super(e,n,Qd.defaultProps)}};M(Qd,"defaultProps",{...st.defaultProps,layout:void 0,buffers:{}});let t0=Qd;const Gd=class Gd extends st{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,n){super(e,n,Gd.defaultProps)}};M(Gd,"defaultProps",{...st.defaultProps,type:void 0,count:void 0});let n0=Gd;const r7={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function s7(t){return r7[t]}function o7(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}let ah;function w3(t){return(!ah||ah.byteLength<t)&&(ah=new ArrayBuffer(t)),ah}function a7(t,e){const n=w3(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function l7(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function wd(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":l7(t)}const rA=1024;class c7{constructor(e){M(this,"layout",{});M(this,"byteLength");let n=0;for(const[r,s]of Object.entries(e)){const a=s7(s),{type:c,components:f}=a;n=o7(n,f);const h=n;n+=f,this.layout[r]={type:c,size:f,offset:h}}n+=(4-n%4)%4;const i=n*4;this.byteLength=Math.max(i,rA)}getData(e){const n=Math.max(this.byteLength,rA),i=w3(n),r={i32:new Int32Array(i),u32:new Uint32Array(i),f32:new Float32Array(i),f16:new Uint16Array(i)};for(const[s,a]of Object.entries(e)){const c=this.layout[s];if(!c){ge.warn(`Supplied uniform value ${s} not present in uniform block layout`)();continue}const{type:f,size:h,offset:p}=c,m=r[f];if(h===1){if(typeof a!="number"&&typeof a!="boolean"){ge.warn(`Supplied value for single component uniform ${s} is not a number: ${a}`)();continue}m[p]=Number(a)}else{if(!wd(a)){ge.warn(`Supplied value for multi component / array uniform ${s} is not a numeric array: ${a}`)();continue}m.set(a,p)}}return new Uint8Array(i)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}function u7(t,e,n=16){if(t!==e)return!1;const i=t,r=e;if(!wd(i))return!1;if(wd(r)&&i.length===r.length){for(let s=0;s<i.length;++s)if(r[s]!==i[s])return!1}return!0}function f7(t){return wd(t)?t.slice():t}class h7{constructor(e){M(this,"name");M(this,"uniforms",{});M(this,"modifiedUniforms",{});M(this,"modified",!0);M(this,"bindingLayout",{});M(this,"needsRedraw","initialized");var n;if(this.name=(e==null?void 0:e.name)||"unnamed",e!=null&&e.name&&(e!=null&&e.shaderLayout)){const i=(n=e==null?void 0:e.shaderLayout.bindings)==null?void 0:n.find(s=>s.type==="uniform"&&s.name===(e==null?void 0:e.name));if(!i)throw new Error(e==null?void 0:e.name);const r=i;for(const s of r.uniforms||[])this.bindingLayout[s.name]=s}}setUniforms(e){for(const[n,i]of Object.entries(e))this._setUniform(n,i),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${n}=${i}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,n){u7(this.uniforms[e],n)||(this.uniforms[e]=f7(n),this.modifiedUniforms[e]=!0,this.modified=!0)}}class d7{constructor(e){M(this,"uniformBlocks",new Map);M(this,"uniformBufferLayouts",new Map);M(this,"uniformBuffers",new Map);for(const[n,i]of Object.entries(e)){const r=n,s=new c7(i.uniformTypes||{});this.uniformBufferLayouts.set(r,s);const a=new h7({name:n});a.setUniforms(i.defaultUniforms||{}),this.uniformBlocks.set(r,a)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){var n;for(const[i,r]of Object.entries(e))(n=this.uniformBlocks.get(i))==null||n.setUniforms(r);this.updateUniformBuffers()}getUniformBufferByteLength(e){var n;return((n=this.uniformBufferLayouts.get(e))==null?void 0:n.byteLength)||0}getUniformBufferData(e){var i,r;const n=((i=this.uniformBlocks.get(e))==null?void 0:i.getAllUniforms())||{};return(r=this.uniformBufferLayouts.get(e))==null?void 0:r.getData(n)}createUniformBuffer(e,n,i){i&&this.setUniforms(i);const r=this.getUniformBufferByteLength(n),s=e.createBuffer({usage:Nt.UNIFORM|Nt.COPY_DST,byteLength:r}),a=this.getUniformBufferData(n);return s.write(a),s}getManagedUniformBuffer(e,n){if(!this.uniformBuffers.get(n)){const i=this.getUniformBufferByteLength(n),r=e.createBuffer({usage:Nt.UNIFORM|Nt.COPY_DST,byteLength:i});this.uniformBuffers.set(n,r)}return this.uniformBuffers.get(n)}updateUniformBuffers(){let e=!1;for(const n of this.uniformBlocks.keys()){const i=this.updateUniformBuffer(n);e||(e=i)}return e&&ge.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){var s;const n=this.uniformBlocks.get(e);let i=this.uniformBuffers.get(e),r=!1;if(i&&(n!=null&&n.needsRedraw)){r||(r=n.needsRedraw);const a=this.getUniformBufferData(e);i=this.uniformBuffers.get(e),i==null||i.write(a);const c=(s=this.uniformBlocks.get(e))==null?void 0:s.getAllUniforms();ge.log(4,`Writing to uniform buffer ${String(e)}`,a,c)()}return r}}function A3(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(e.constructor.name)}}function x3(t){switch(t){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(t)}}function p7(t,e,n){if(!e||e>4)throw new Error(`size ${e}`);const i=e;let r=A3(t);if(r==="uint8"&&n&&i===1)return"unorm8-webgl";if(r==="uint8"&&n&&i===3)return"unorm8x3-webgl";if(r==="uint8"||r==="sint8"){if(i===1||i===3)throw new Error(`size: ${e}`);return n&&(r=r.replace("int","norm")),`${r}x${i}`}if(r==="uint16"||r==="sint16"){if(i===1||i===3)throw new Error(`size: ${e}`);return n&&(r=r.replace("int","norm")),`${r}x${i}`}return i===1?r:`${r}x${i}`}class Oy{constructor(e){M(this,"bufferLayouts");this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find(n=>n.name===e)||null}getAttributeNamesForBuffer(e){var n;return e.attributes?(n=e.attributes)==null?void 0:n.map(i=>i.attribute):[e.name]}mergeBufferLayouts(e,n){const i=[...e];for(const r of n){const s=i.findIndex(a=>a.name===r.name);s<0?i.push(r):i[s]=r}return i}}class g7{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class Ur{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(e){throw new Error("Cannot evaluate node")}evaluateString(e){return this.evaluate(e).toString()}search(e){}searchBlock(e,n){if(e){n(Ad.instance);for(const i of e)i instanceof Array?this.searchBlock(i,n):i.search(n);n(xd.instance)}}}class Ad extends Ur{}Ad.instance=new Ad;class xd extends Ur{}xd.instance=new xd;class _t extends Ur{constructor(){super()}}class i0 extends _t{constructor(e,n,i,r,s,a){super(),this.calls=new Set,this.name=e,this.args=n,this.returnType=i,this.body=r,this.startLine=s,this.endLine=a}get astNodeType(){return"function"}search(e){this.searchBlock(this.body,e)}}class m7 extends _t{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class y7 extends _t{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class _7 extends _t{constructor(e){super(),this.body=e}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class b7 extends _t{constructor(e,n,i,r){super(),this.init=e,this.condition=n,this.increment=i,this.body=r}get astNodeType(){return"for"}search(e){var n,i,r;(n=this.init)===null||n===void 0||n.search(e),(i=this.condition)===null||i===void 0||i.search(e),(r=this.increment)===null||r===void 0||r.search(e),this.searchBlock(this.body,e)}}class no extends _t{constructor(e,n,i,r,s){super(),this.name=e,this.type=n,this.storage=i,this.access=r,this.value=s}get astNodeType(){return"var"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class R3 extends _t{constructor(e,n,i){super(),this.name=e,this.type=n,this.value=i}get astNodeType(){return"override"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class r0 extends _t{constructor(e,n,i,r,s){super(),this.name=e,this.type=n,this.storage=i,this.access=r,this.value=s}get astNodeType(){return"let"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class sA extends _t{constructor(e,n,i,r,s){super(),this.name=e,this.type=n,this.storage=i,this.access=r,this.value=s}get astNodeType(){return"const"}evaluate(e){return this.value.evaluate(e)}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}var rl;(function(t){t.increment="++",t.decrement="--"})(rl||(rl={}));(function(t){function e(n){const i=n;if(i=="parse")throw new Error("Invalid value for IncrementOperator");return t[i]}t.parse=e})(rl||(rl={}));class v7 extends _t{constructor(e,n){super(),this.operator=e,this.variable=n}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}var au;(function(t){t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(au||(au={}));(function(t){function e(n){const i=n;if(i=="parse")throw new Error("Invalid value for AssignOperator");return i}t.parse=e})(au||(au={}));class T7 extends _t{constructor(e,n,i){super(),this.operator=e,this.variable=n,this.value=i}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class C3 extends _t{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"call"}search(e){for(const n of this.args)n.search(e);e(this)}}class S7 extends _t{constructor(e,n){super(),this.body=e,this.continuing=n}get astNodeType(){return"loop"}}class E7 extends _t{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"body"}}class w7 extends _t{constructor(e,n,i,r){super(),this.condition=e,this.body=n,this.elseif=i,this.else=r}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class A7 extends _t{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class x7 extends _t{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class R7 extends _t{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class C7 extends _t{constructor(e,n){super(),this.severity=e,this.rule=n}get astNodeType(){return"diagnostic"}}class O3 extends _t{constructor(e,n){super(),this.name=e,this.type=n}get astNodeType(){return"alias"}}class O7 extends _t{constructor(){super()}get astNodeType(){return"discard"}}class M7 extends _t{constructor(){super()}get astNodeType(){return"break"}}class P7 extends _t{constructor(){super()}get astNodeType(){return"continue"}}class Mo extends _t{constructor(e){super(),this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class to extends Mo{constructor(e,n,i,r){super(e),this.members=n,this.startLine=i,this.endLine=r}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let n=0;n<this.members.length;n++)if(this.members[n].name==e)return n;return-1}}class M3 extends Mo{constructor(e,n,i){super(e),this.format=n,this.access=i}get astNodeType(){return"template"}}class N7 extends Mo{constructor(e,n,i,r){super(e),this.storage=n,this.type=i,this.access=r}get astNodeType(){return"pointer"}}class P3 extends Mo{constructor(e,n,i,r){super(e),this.attributes=n,this.format=i,this.count=r}get astNodeType(){return"array"}get isArray(){return!0}}class kc extends Mo{constructor(e,n,i){super(e),this.format=n,this.access=i}get astNodeType(){return"sampler"}}class tr extends Ur{constructor(){super()}}class k7 extends tr{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class Ba extends tr{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const n of this.args)n.search(e)}evaluate(e){return this.args[0].evaluate(e)}}class N3 extends tr{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"callExpr"}evaluate(e){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(e));case"acos":return Math.acos(this.args[0].evaluate(e));case"acosh":return Math.acosh(this.args[0].evaluate(e));case"asin":return Math.asin(this.args[0].evaluate(e));case"asinh":return Math.asinh(this.args[0].evaluate(e));case"atan":return Math.atan(this.args[0].evaluate(e));case"atan2":return Math.atan2(this.args[0].evaluate(e),this.args[1].evaluate(e));case"atanh":return Math.atanh(this.args[0].evaluate(e));case"ceil":return Math.ceil(this.args[0].evaluate(e));case"clamp":return Math.min(Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e)),this.args[2].evaluate(e));case"cos":return Math.cos(this.args[0].evaluate(e));case"degrees":return this.args[0].evaluate(e)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(e)-this.args[1].evaluate(e),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(e));case"exp2":return Math.pow(2,this.args[0].evaluate(e));case"floor":return Math.floor(this.args[0].evaluate(e));case"fma":return this.args[0].evaluate(e)*this.args[1].evaluate(e)+this.args[2].evaluate(e);case"fract":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(e));case"log":return Math.log(this.args[0].evaluate(e));case"log2":return Math.log2(this.args[0].evaluate(e));case"max":return Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e));case"min":return Math.min(this.args[0].evaluate(e),this.args[1].evaluate(e));case"mix":return this.args[0].evaluate(e)*(1-this.args[2].evaluate(e))+this.args[1].evaluate(e)*this.args[2].evaluate(e);case"modf":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"pow":return Math.pow(this.args[0].evaluate(e),this.args[1].evaluate(e));case"radians":return this.args[0].evaluate(e)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(e));case"sign":return Math.sign(this.args[0].evaluate(e));case"sin":return Math.sin(this.args[0].evaluate(e));case"sinh":return Math.sinh(this.args[0].evaluate(e));case"saturate":return Math.min(Math.max(this.args[0].evaluate(e),0),1);case"smoothstep":return this.args[0].evaluate(e)*this.args[0].evaluate(e)*(3-2*this.args[0].evaluate(e));case"sqrt":return Math.sqrt(this.args[0].evaluate(e));case"step":return this.args[0].evaluate(e)<this.args[1].evaluate(e)?0:1;case"tan":return Math.tan(this.args[0].evaluate(e));case"tanh":return Math.tanh(this.args[0].evaluate(e));case"trunc":return Math.trunc(this.args[0].evaluate(e));default:throw new Error("Non const function: "+this.name)}}search(e){for(const n of this.args)n.search(e);e(this)}}class s0 extends tr{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}evaluate(e){const n=e.constants.get(this.name);if(!n)throw new Error("Cannot evaluate node");return n.evaluate(e)}}class oA extends tr{constructor(e,n){super(),this.name=e,this.initializer=n}get astNodeType(){return"constExpr"}evaluate(e){var n,i;if(this.initializer instanceof Ba){const r=(n=this.postfix)===null||n===void 0?void 0:n.evaluateString(e),s=(i=this.initializer.type)===null||i===void 0?void 0:i.name,a=e.structs.get(s),c=a==null?void 0:a.getMemberIndex(r);return c!==void 0&&c!=-1?this.initializer.args[c].evaluate(e):this.initializer.evaluate(e)}return this.initializer.evaluate(e)}search(e){this.initializer.search(e)}}class aA extends tr{constructor(e){super(),this.value=e}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class I7 extends tr{constructor(e,n){super(),this.type=e,this.value=n}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class lA extends tr{constructor(e){super(),this.contents=e}get astNodeType(){return"groupExpr"}evaluate(e){return this.contents[0].evaluate(e)}search(e){this.searchBlock(this.contents,e)}}class D7 extends tr{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class k3 extends tr{constructor(){super()}}class B7 extends k3{constructor(e,n){super(),this.operator=e,this.right=n}get astNodeType(){return"unaryOp"}evaluate(e){switch(this.operator){case"+":return this.right.evaluate(e);case"-":return-this.right.evaluate(e);case"!":return this.right.evaluate(e)?0:1;case"~":return~this.right.evaluate(e);default:throw new Error("Unknown unary operator: "+this.operator)}}search(e){this.right.search(e)}}class ji extends k3{constructor(e,n,i){super(),this.operator=e,this.left=n,this.right=i}get astNodeType(){return"binaryOp"}evaluate(e){switch(this.operator){case"+":return this.left.evaluate(e)+this.right.evaluate(e);case"-":return this.left.evaluate(e)-this.right.evaluate(e);case"*":return this.left.evaluate(e)*this.right.evaluate(e);case"/":return this.left.evaluate(e)/this.right.evaluate(e);case"%":return this.left.evaluate(e)%this.right.evaluate(e);case"==":return this.left.evaluate(e)==this.right.evaluate(e)?1:0;case"!=":return this.left.evaluate(e)!=this.right.evaluate(e)?1:0;case"<":return this.left.evaluate(e)<this.right.evaluate(e)?1:0;case">":return this.left.evaluate(e)>this.right.evaluate(e)?1:0;case"<=":return this.left.evaluate(e)<=this.right.evaluate(e)?1:0;case">=":return this.left.evaluate(e)>=this.right.evaluate(e)?1:0;case"&&":return this.left.evaluate(e)&&this.right.evaluate(e)?1:0;case"||":return this.left.evaluate(e)||this.right.evaluate(e)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(e){this.left.search(e),this.right.search(e)}}class I3 extends Ur{constructor(){super()}}class L7 extends I3{constructor(e,n){super(),this.selector=e,this.body=n}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class U7 extends I3{constructor(e){super(),this.body=e}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class F7 extends Ur{constructor(e,n,i){super(),this.name=e,this.type=n,this.attributes=i}get astNodeType(){return"argument"}}class z7 extends Ur{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class V7 extends Ur{constructor(e,n,i){super(),this.name=e,this.type=n,this.attributes=i}get astNodeType(){return"member"}}let $7=class extends Ur{constructor(e,n){super(),this.name=e,this.value=n}get astNodeType(){return"attribute"}};var G,Y;(function(t){t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(Y||(Y={}));class K{constructor(e,n,i){this.name=e,this.type=n,this.rule=i}toString(){return this.name}}class B{}G=B;B.none=new K("",Y.reserved,"");B.eof=new K("EOF",Y.token,"");B.reserved={asm:new K("asm",Y.reserved,"asm"),bf16:new K("bf16",Y.reserved,"bf16"),do:new K("do",Y.reserved,"do"),enum:new K("enum",Y.reserved,"enum"),f16:new K("f16",Y.reserved,"f16"),f64:new K("f64",Y.reserved,"f64"),handle:new K("handle",Y.reserved,"handle"),i8:new K("i8",Y.reserved,"i8"),i16:new K("i16",Y.reserved,"i16"),i64:new K("i64",Y.reserved,"i64"),mat:new K("mat",Y.reserved,"mat"),premerge:new K("premerge",Y.reserved,"premerge"),regardless:new K("regardless",Y.reserved,"regardless"),typedef:new K("typedef",Y.reserved,"typedef"),u8:new K("u8",Y.reserved,"u8"),u16:new K("u16",Y.reserved,"u16"),u64:new K("u64",Y.reserved,"u64"),unless:new K("unless",Y.reserved,"unless"),using:new K("using",Y.reserved,"using"),vec:new K("vec",Y.reserved,"vec"),void:new K("void",Y.reserved,"void")};B.keywords={array:new K("array",Y.keyword,"array"),atomic:new K("atomic",Y.keyword,"atomic"),bool:new K("bool",Y.keyword,"bool"),f32:new K("f32",Y.keyword,"f32"),i32:new K("i32",Y.keyword,"i32"),mat2x2:new K("mat2x2",Y.keyword,"mat2x2"),mat2x3:new K("mat2x3",Y.keyword,"mat2x3"),mat2x4:new K("mat2x4",Y.keyword,"mat2x4"),mat3x2:new K("mat3x2",Y.keyword,"mat3x2"),mat3x3:new K("mat3x3",Y.keyword,"mat3x3"),mat3x4:new K("mat3x4",Y.keyword,"mat3x4"),mat4x2:new K("mat4x2",Y.keyword,"mat4x2"),mat4x3:new K("mat4x3",Y.keyword,"mat4x3"),mat4x4:new K("mat4x4",Y.keyword,"mat4x4"),ptr:new K("ptr",Y.keyword,"ptr"),sampler:new K("sampler",Y.keyword,"sampler"),sampler_comparison:new K("sampler_comparison",Y.keyword,"sampler_comparison"),struct:new K("struct",Y.keyword,"struct"),texture_1d:new K("texture_1d",Y.keyword,"texture_1d"),texture_2d:new K("texture_2d",Y.keyword,"texture_2d"),texture_2d_array:new K("texture_2d_array",Y.keyword,"texture_2d_array"),texture_3d:new K("texture_3d",Y.keyword,"texture_3d"),texture_cube:new K("texture_cube",Y.keyword,"texture_cube"),texture_cube_array:new K("texture_cube_array",Y.keyword,"texture_cube_array"),texture_multisampled_2d:new K("texture_multisampled_2d",Y.keyword,"texture_multisampled_2d"),texture_storage_1d:new K("texture_storage_1d",Y.keyword,"texture_storage_1d"),texture_storage_2d:new K("texture_storage_2d",Y.keyword,"texture_storage_2d"),texture_storage_2d_array:new K("texture_storage_2d_array",Y.keyword,"texture_storage_2d_array"),texture_storage_3d:new K("texture_storage_3d",Y.keyword,"texture_storage_3d"),texture_depth_2d:new K("texture_depth_2d",Y.keyword,"texture_depth_2d"),texture_depth_2d_array:new K("texture_depth_2d_array",Y.keyword,"texture_depth_2d_array"),texture_depth_cube:new K("texture_depth_cube",Y.keyword,"texture_depth_cube"),texture_depth_cube_array:new K("texture_depth_cube_array",Y.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new K("texture_depth_multisampled_2d",Y.keyword,"texture_depth_multisampled_2d"),texture_external:new K("texture_external",Y.keyword,"texture_external"),u32:new K("u32",Y.keyword,"u32"),vec2:new K("vec2",Y.keyword,"vec2"),vec3:new K("vec3",Y.keyword,"vec3"),vec4:new K("vec4",Y.keyword,"vec4"),bitcast:new K("bitcast",Y.keyword,"bitcast"),block:new K("block",Y.keyword,"block"),break:new K("break",Y.keyword,"break"),case:new K("case",Y.keyword,"case"),continue:new K("continue",Y.keyword,"continue"),continuing:new K("continuing",Y.keyword,"continuing"),default:new K("default",Y.keyword,"default"),diagnostic:new K("diagnostic",Y.keyword,"diagnostic"),discard:new K("discard",Y.keyword,"discard"),else:new K("else",Y.keyword,"else"),enable:new K("enable",Y.keyword,"enable"),fallthrough:new K("fallthrough",Y.keyword,"fallthrough"),false:new K("false",Y.keyword,"false"),fn:new K("fn",Y.keyword,"fn"),for:new K("for",Y.keyword,"for"),function:new K("function",Y.keyword,"function"),if:new K("if",Y.keyword,"if"),let:new K("let",Y.keyword,"let"),const:new K("const",Y.keyword,"const"),loop:new K("loop",Y.keyword,"loop"),while:new K("while",Y.keyword,"while"),private:new K("private",Y.keyword,"private"),read:new K("read",Y.keyword,"read"),read_write:new K("read_write",Y.keyword,"read_write"),return:new K("return",Y.keyword,"return"),requires:new K("requires",Y.keyword,"requires"),storage:new K("storage",Y.keyword,"storage"),switch:new K("switch",Y.keyword,"switch"),true:new K("true",Y.keyword,"true"),alias:new K("alias",Y.keyword,"alias"),type:new K("type",Y.keyword,"type"),uniform:new K("uniform",Y.keyword,"uniform"),var:new K("var",Y.keyword,"var"),override:new K("override",Y.keyword,"override"),workgroup:new K("workgroup",Y.keyword,"workgroup"),write:new K("write",Y.keyword,"write"),r8unorm:new K("r8unorm",Y.keyword,"r8unorm"),r8snorm:new K("r8snorm",Y.keyword,"r8snorm"),r8uint:new K("r8uint",Y.keyword,"r8uint"),r8sint:new K("r8sint",Y.keyword,"r8sint"),r16uint:new K("r16uint",Y.keyword,"r16uint"),r16sint:new K("r16sint",Y.keyword,"r16sint"),r16float:new K("r16float",Y.keyword,"r16float"),rg8unorm:new K("rg8unorm",Y.keyword,"rg8unorm"),rg8snorm:new K("rg8snorm",Y.keyword,"rg8snorm"),rg8uint:new K("rg8uint",Y.keyword,"rg8uint"),rg8sint:new K("rg8sint",Y.keyword,"rg8sint"),r32uint:new K("r32uint",Y.keyword,"r32uint"),r32sint:new K("r32sint",Y.keyword,"r32sint"),r32float:new K("r32float",Y.keyword,"r32float"),rg16uint:new K("rg16uint",Y.keyword,"rg16uint"),rg16sint:new K("rg16sint",Y.keyword,"rg16sint"),rg16float:new K("rg16float",Y.keyword,"rg16float"),rgba8unorm:new K("rgba8unorm",Y.keyword,"rgba8unorm"),rgba8unorm_srgb:new K("rgba8unorm_srgb",Y.keyword,"rgba8unorm_srgb"),rgba8snorm:new K("rgba8snorm",Y.keyword,"rgba8snorm"),rgba8uint:new K("rgba8uint",Y.keyword,"rgba8uint"),rgba8sint:new K("rgba8sint",Y.keyword,"rgba8sint"),bgra8unorm:new K("bgra8unorm",Y.keyword,"bgra8unorm"),bgra8unorm_srgb:new K("bgra8unorm_srgb",Y.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new K("rgb10a2unorm",Y.keyword,"rgb10a2unorm"),rg11b10float:new K("rg11b10float",Y.keyword,"rg11b10float"),rg32uint:new K("rg32uint",Y.keyword,"rg32uint"),rg32sint:new K("rg32sint",Y.keyword,"rg32sint"),rg32float:new K("rg32float",Y.keyword,"rg32float"),rgba16uint:new K("rgba16uint",Y.keyword,"rgba16uint"),rgba16sint:new K("rgba16sint",Y.keyword,"rgba16sint"),rgba16float:new K("rgba16float",Y.keyword,"rgba16float"),rgba32uint:new K("rgba32uint",Y.keyword,"rgba32uint"),rgba32sint:new K("rgba32sint",Y.keyword,"rgba32sint"),rgba32float:new K("rgba32float",Y.keyword,"rgba32float"),static_assert:new K("static_assert",Y.keyword,"static_assert")};B.tokens={decimal_float_literal:new K("decimal_float_literal",Y.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|(-?[0-9]+f)/),hex_float_literal:new K("hex_float_literal",Y.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new K("int_literal",Y.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new K("uint_literal",Y.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new K("ident",Y.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new K("and",Y.token,"&"),and_and:new K("and_and",Y.token,"&&"),arrow:new K("arrow ",Y.token,"->"),attr:new K("attr",Y.token,"@"),forward_slash:new K("forward_slash",Y.token,"/"),bang:new K("bang",Y.token,"!"),bracket_left:new K("bracket_left",Y.token,"["),bracket_right:new K("bracket_right",Y.token,"]"),brace_left:new K("brace_left",Y.token,"{"),brace_right:new K("brace_right",Y.token,"}"),colon:new K("colon",Y.token,":"),comma:new K("comma",Y.token,","),equal:new K("equal",Y.token,"="),equal_equal:new K("equal_equal",Y.token,"=="),not_equal:new K("not_equal",Y.token,"!="),greater_than:new K("greater_than",Y.token,">"),greater_than_equal:new K("greater_than_equal",Y.token,">="),shift_right:new K("shift_right",Y.token,">>"),less_than:new K("less_than",Y.token,"<"),less_than_equal:new K("less_than_equal",Y.token,"<="),shift_left:new K("shift_left",Y.token,"<<"),modulo:new K("modulo",Y.token,"%"),minus:new K("minus",Y.token,"-"),minus_minus:new K("minus_minus",Y.token,"--"),period:new K("period",Y.token,"."),plus:new K("plus",Y.token,"+"),plus_plus:new K("plus_plus",Y.token,"++"),or:new K("or",Y.token,"|"),or_or:new K("or_or",Y.token,"||"),paren_left:new K("paren_left",Y.token,"("),paren_right:new K("paren_right",Y.token,")"),semicolon:new K("semicolon",Y.token,";"),star:new K("star",Y.token,"*"),tilde:new K("tilde",Y.token,"~"),underscore:new K("underscore",Y.token,"_"),xor:new K("xor",Y.token,"^"),plus_equal:new K("plus_equal",Y.token,"+="),minus_equal:new K("minus_equal",Y.token,"-="),times_equal:new K("times_equal",Y.token,"*="),division_equal:new K("division_equal",Y.token,"/="),modulo_equal:new K("modulo_equal",Y.token,"%="),and_equal:new K("and_equal",Y.token,"&="),or_equal:new K("or_equal",Y.token,"|="),xor_equal:new K("xor_equal",Y.token,"^="),shift_right_equal:new K("shift_right_equal",Y.token,">>="),shift_left_equal:new K("shift_left_equal",Y.token,"<<=")};B.simpleTokens={"@":G.tokens.attr,"{":G.tokens.brace_left,"}":G.tokens.brace_right,":":G.tokens.colon,",":G.tokens.comma,"(":G.tokens.paren_left,")":G.tokens.paren_right,";":G.tokens.semicolon};B.literalTokens={"&":G.tokens.and,"&&":G.tokens.and_and,"->":G.tokens.arrow,"/":G.tokens.forward_slash,"!":G.tokens.bang,"[":G.tokens.bracket_left,"]":G.tokens.bracket_right,"=":G.tokens.equal,"==":G.tokens.equal_equal,"!=":G.tokens.not_equal,">":G.tokens.greater_than,">=":G.tokens.greater_than_equal,">>":G.tokens.shift_right,"<":G.tokens.less_than,"<=":G.tokens.less_than_equal,"<<":G.tokens.shift_left,"%":G.tokens.modulo,"-":G.tokens.minus,"--":G.tokens.minus_minus,".":G.tokens.period,"+":G.tokens.plus,"++":G.tokens.plus_plus,"|":G.tokens.or,"||":G.tokens.or_or,"*":G.tokens.star,"~":G.tokens.tilde,_:G.tokens.underscore,"^":G.tokens.xor,"+=":G.tokens.plus_equal,"-=":G.tokens.minus_equal,"*=":G.tokens.times_equal,"/=":G.tokens.division_equal,"%=":G.tokens.modulo_equal,"&=":G.tokens.and_equal,"|=":G.tokens.or_equal,"^=":G.tokens.xor_equal,">>=":G.tokens.shift_right_equal,"<<=":G.tokens.shift_left_equal};B.regexTokens={decimal_float_literal:G.tokens.decimal_float_literal,hex_float_literal:G.tokens.hex_float_literal,int_literal:G.tokens.int_literal,uint_literal:G.tokens.uint_literal,ident:G.tokens.ident};B.storage_class=[G.keywords.function,G.keywords.private,G.keywords.workgroup,G.keywords.uniform,G.keywords.storage];B.access_mode=[G.keywords.read,G.keywords.write,G.keywords.read_write];B.sampler_type=[G.keywords.sampler,G.keywords.sampler_comparison];B.sampled_texture_type=[G.keywords.texture_1d,G.keywords.texture_2d,G.keywords.texture_2d_array,G.keywords.texture_3d,G.keywords.texture_cube,G.keywords.texture_cube_array];B.multisampled_texture_type=[G.keywords.texture_multisampled_2d];B.storage_texture_type=[G.keywords.texture_storage_1d,G.keywords.texture_storage_2d,G.keywords.texture_storage_2d_array,G.keywords.texture_storage_3d];B.depth_texture_type=[G.keywords.texture_depth_2d,G.keywords.texture_depth_2d_array,G.keywords.texture_depth_cube,G.keywords.texture_depth_cube_array,G.keywords.texture_depth_multisampled_2d];B.texture_external_type=[G.keywords.texture_external];B.any_texture_type=[...G.sampled_texture_type,...G.multisampled_texture_type,...G.storage_texture_type,...G.depth_texture_type,...G.texture_external_type];B.texel_format=[G.keywords.r8unorm,G.keywords.r8snorm,G.keywords.r8uint,G.keywords.r8sint,G.keywords.r16uint,G.keywords.r16sint,G.keywords.r16float,G.keywords.rg8unorm,G.keywords.rg8snorm,G.keywords.rg8uint,G.keywords.rg8sint,G.keywords.r32uint,G.keywords.r32sint,G.keywords.r32float,G.keywords.rg16uint,G.keywords.rg16sint,G.keywords.rg16float,G.keywords.rgba8unorm,G.keywords.rgba8unorm_srgb,G.keywords.rgba8snorm,G.keywords.rgba8uint,G.keywords.rgba8sint,G.keywords.bgra8unorm,G.keywords.bgra8unorm_srgb,G.keywords.rgb10a2unorm,G.keywords.rg11b10float,G.keywords.rg32uint,G.keywords.rg32sint,G.keywords.rg32float,G.keywords.rgba16uint,G.keywords.rgba16sint,G.keywords.rgba16float,G.keywords.rgba32uint,G.keywords.rgba32sint,G.keywords.rgba32float];B.const_literal=[G.tokens.int_literal,G.tokens.uint_literal,G.tokens.decimal_float_literal,G.tokens.hex_float_literal,G.keywords.true,G.keywords.false];B.literal_or_ident=[G.tokens.ident,G.tokens.int_literal,G.tokens.uint_literal,G.tokens.decimal_float_literal,G.tokens.hex_float_literal];B.element_count_expression=[G.tokens.int_literal,G.tokens.uint_literal,G.tokens.ident];B.template_types=[G.keywords.vec2,G.keywords.vec3,G.keywords.vec4,G.keywords.mat2x2,G.keywords.mat2x3,G.keywords.mat2x4,G.keywords.mat3x2,G.keywords.mat3x3,G.keywords.mat3x4,G.keywords.mat4x2,G.keywords.mat4x3,G.keywords.mat4x4,G.keywords.atomic,G.keywords.bitcast,...G.any_texture_type];B.attribute_name=[G.tokens.ident,G.keywords.block,G.keywords.diagnostic];B.assignment_operators=[G.tokens.equal,G.tokens.plus_equal,G.tokens.minus_equal,G.tokens.times_equal,G.tokens.division_equal,G.tokens.modulo_equal,G.tokens.and_equal,G.tokens.or_equal,G.tokens.xor_equal,G.tokens.shift_right_equal,G.tokens.shift_left_equal];B.increment_operators=[G.tokens.plus_plus,G.tokens.minus_minus];class cA{constructor(e,n,i){this.type=e,this.lexeme=n,this.line=i}toString(){return this.lexeme}isTemplateType(){return B.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==B.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class j7{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new cA(B.eof,"",this._line)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let a=1;for(;a>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),a--,a==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),a++)}return!0}}const n=B.simpleTokens[e];if(n)return this._addToken(n),!0;let i=B.none;const r=this._isAlpha(e),s=e==="_";if(this._isAlphaNumeric(e)){let a=this._peekAhead();for(;this._isAlphaNumeric(a);)e+=this._advance(),a=this._peekAhead()}if(r){const a=B.keywords[e];if(a)return this._addToken(a),!0}if(r||s)return this._addToken(B.tokens.ident),!0;for(;;){let a=this._findType(e);const c=this._peekAhead();if(e=="-"&&this._tokens.length>0){if(c=="=")return this._current++,e+=c,this._addToken(B.tokens.minus_equal),!0;if(c=="-")return this._current++,e+=c,this._addToken(B.tokens.minus_minus),!0;const f=this._tokens.length-1;if((B.literal_or_ident.indexOf(this._tokens[f].type)!=-1||this._tokens[f].type==B.tokens.paren_right)&&c!=">")return this._addToken(a),!0}if(e==">"&&(c==">"||c=="=")){let f=!1,h=this._tokens.length-1;for(let p=0;p<5&&h>=0&&B.assignment_operators.indexOf(this._tokens[h].type)===-1;++p,--h)if(this._tokens[h].type===B.tokens.less_than){h>0&&this._tokens[h-1].isArrayOrTemplateType()&&(f=!0);break}if(f)return this._addToken(a),!0}if(a===B.none){let f=e,h=0;const p=2;for(let m=0;m<p;++m)if(f+=this._peekAhead(m),a=this._findType(f),a!==B.none){h=m;break}if(a===B.none)return i===B.none?!1:(this._current--,this._addToken(i),!0);e=f,this._current+=h+1}if(i=a,this._isAtEnd())break;e+=this._advance()}return i===B.none?!1:(this._addToken(i),!0)}_findType(e){for(const i in B.regexTokens){const r=B.regexTokens[i];if(this._match(e,r.rule))return r}const n=B.literalTokens[e];return n||B.none}_match(e,n){const i=n.exec(e);return i&&i.index==0&&i[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}_isAlphaNumeric(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e=="_"||e>="0"&&e<="9"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let n=this._source[this._current];return e=e||0,e++,this._current+=e,n}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const n=this._source.substring(this._start,this._current);this._tokens.push(new cA(e,n,this._line))}}class H7{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new g7,this._deferArrayCountEval=[]}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const n=[];for(;!this._isAtEnd();){const i=this._global_decl_or_directive();if(!i)break;n.push(i)}if(this._deferArrayCountEval.length>0){for(const i of this._deferArrayCountEval){const r=i.arrayType,s=i.countNode;if(s instanceof s0){const c=s.name,f=this._context.constants.get(c);if(f)try{const h=f.evaluate(this._context);r.count=h}catch{}}}this._deferArrayCountEval.length=0}return n}_initialize(e){if(e)if(typeof e=="string"){const n=new j7(e);this._tokens=n.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_error(e,n){return{token:e,message:n,toString:function(){return`${n}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==B.eof}_match(e){if(e instanceof K)return this._check(e)?(this._advance(),!0):!1;for(let n=0,i=e.length;n<i;++n){const r=e[n];if(this._check(r))return this._advance(),!0}return!1}_consume(e,n){if(this._check(e))return this._advance();throw this._error(this._peek(),n)}_check(e){if(this._isAtEnd())return!1;const n=this._peek();if(e instanceof Array){const i=n.type;return e.indexOf(i)!=-1}return n.type==e}_advance(){var e,n;return this._currentLine=(n=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(B.tokens.semicolon)&&!this._isAtEnd(););if(this._match(B.keywords.alias)){const n=this._type_alias();return this._consume(B.tokens.semicolon,"Expected ';'"),n}if(this._match(B.keywords.diagnostic)){const n=this._diagnostic();return this._consume(B.tokens.semicolon,"Expected ';'"),n}if(this._match(B.keywords.requires)){const n=this._requires_directive();return this._consume(B.tokens.semicolon,"Expected ';'"),n}if(this._match(B.keywords.enable)){const n=this._enable_directive();return this._consume(B.tokens.semicolon,"Expected ';'"),n}const e=this._attribute();if(this._check(B.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=e),this._consume(B.tokens.semicolon,"Expected ';'."),n}if(this._check(B.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=e),this._consume(B.tokens.semicolon,"Expected ';'."),n}if(this._check(B.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=e),this._consume(B.tokens.semicolon,"Expected ';'."),n}if(this._check(B.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=e),this._consume(B.tokens.semicolon,"Expected ';'."),n}if(this._check(B.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=e),n}if(this._check(B.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=e),n}return null}_function_decl(){if(!this._match(B.keywords.fn))return null;const e=this._currentLine,n=this._consume(B.tokens.ident,"Expected function name.").toString();this._consume(B.tokens.paren_left,"Expected '(' for function arguments.");const i=[];if(!this._check(B.tokens.paren_right))do{if(this._check(B.tokens.paren_right))break;const c=this._attribute(),f=this._consume(B.tokens.ident,"Expected argument name.").toString();this._consume(B.tokens.colon,"Expected ':' for argument type.");const h=this._attribute(),p=this._type_decl();p!=null&&(p.attributes=h,i.push(new F7(f,p,c)))}while(this._match(B.tokens.comma));this._consume(B.tokens.paren_right,"Expected ')' after function arguments.");let r=null;if(this._match(B.tokens.arrow)){const c=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=c)}const s=this._compound_statement(),a=this._currentLine;return new i0(n,i,r,s,e,a)}_compound_statement(){const e=[];for(this._consume(B.tokens.brace_left,"Expected '{' for block.");!this._check(B.tokens.brace_right);){const n=this._statement();n!==null&&e.push(n)}return this._consume(B.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(B.tokens.semicolon)&&!this._isAtEnd(););if(this._check(B.tokens.attr)&&this._attribute(),this._check(B.keywords.if))return this._if_statement();if(this._check(B.keywords.switch))return this._switch_statement();if(this._check(B.keywords.loop))return this._loop_statement();if(this._check(B.keywords.for))return this._for_statement();if(this._check(B.keywords.while))return this._while_statement();if(this._check(B.keywords.continuing))return this._continuing_statement();if(this._check(B.keywords.static_assert))return this._static_assert_statement();if(this._check(B.tokens.brace_left))return this._compound_statement();let e=null;return this._check(B.keywords.return)?e=this._return_statement():this._check([B.keywords.var,B.keywords.let,B.keywords.const])?e=this._variable_statement():this._match(B.keywords.discard)?e=new O7:this._match(B.keywords.break)?e=new M7:this._match(B.keywords.continue)?e=new P7:e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),e!=null&&this._consume(B.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(B.keywords.static_assert))return null;const e=this._optional_paren_expression();return new m7(e)}_while_statement(){if(!this._match(B.keywords.while))return null;const e=this._optional_paren_expression();this._check(B.tokens.attr)&&this._attribute();const n=this._compound_statement();return new y7(e,n)}_continuing_statement(){if(!this._match(B.keywords.continuing))return null;const e=this._compound_statement();return new _7(e)}_for_statement(){if(!this._match(B.keywords.for))return null;this._consume(B.tokens.paren_left,"Expected '('.");const e=this._check(B.tokens.semicolon)?null:this._for_init();this._consume(B.tokens.semicolon,"Expected ';'.");const n=this._check(B.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(B.tokens.semicolon,"Expected ';'.");const i=this._check(B.tokens.paren_right)?null:this._for_increment();this._consume(B.tokens.paren_right,"Expected ')'."),this._check(B.tokens.attr)&&this._attribute();const r=this._compound_statement();return new b7(e,n,i,r)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(B.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(B.tokens.equal)&&(n=this._short_circuit_or_expression()),new no(e.name,e.type,e.storage,e.access,n)}if(this._match(B.keywords.let)){const e=this._consume(B.tokens.ident,"Expected name for let.").toString();let n=null;if(this._match(B.tokens.colon)){const r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}this._consume(B.tokens.equal,"Expected '=' for let.");const i=this._short_circuit_or_expression();return new r0(e,n,null,null,i)}if(this._match(B.keywords.const)){const e=this._consume(B.tokens.ident,"Expected name for const.").toString();let n=null;if(this._match(B.tokens.colon)){const r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}this._consume(B.tokens.equal,"Expected '=' for const.");const i=this._short_circuit_or_expression();return new sA(e,n,null,null,i)}return null}_increment_decrement_statement(){const e=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(B.increment_operators))return this._current=e,null;const i=this._consume(B.increment_operators,"Expected increment operator");return new v7(i.type===B.tokens.plus_plus?rl.increment:rl.decrement,n)}_assignment_statement(){let e=null;if(this._check(B.tokens.brace_right))return null;let n=this._match(B.tokens.underscore);if(n||(e=this._unary_expression()),!n&&e==null)return null;const i=this._consume(B.assignment_operators,"Expected assignment operator."),r=this._short_circuit_or_expression();return new T7(au.parse(i.lexeme),e,r)}_func_call_statement(){if(!this._check(B.tokens.ident))return null;const e=this._current,n=this._consume(B.tokens.ident,"Expected function name."),i=this._argument_expression_list();return i===null?(this._current=e,null):new C3(n.lexeme,i)}_loop_statement(){if(!this._match(B.keywords.loop))return null;this._check(B.tokens.attr)&&this._attribute(),this._consume(B.tokens.brace_left,"Expected '{' for loop.");const e=[];let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let r of n)e.push(r);else e.push(n);n=this._statement()}let i=null;return this._match(B.keywords.continuing)&&(i=this._compound_statement()),this._consume(B.tokens.brace_right,"Expected '}' for loop."),new S7(e,i)}_switch_statement(){if(!this._match(B.keywords.switch))return null;const e=this._optional_paren_expression();this._check(B.tokens.attr)&&this._attribute(),this._consume(B.tokens.brace_left,"Expected '{' for switch.");const n=this._switch_body();if(n==null||n.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(B.tokens.brace_right,"Expected '}' for switch."),new E7(e,n)}_switch_body(){const e=[];if(this._match(B.keywords.case)){const n=this._case_selectors();this._match(B.tokens.colon),this._check(B.tokens.attr)&&this._attribute(),this._consume(B.tokens.brace_left,"Exected '{' for switch case.");const i=this._case_body();this._consume(B.tokens.brace_right,"Exected '}' for switch case."),e.push(new L7(n,i))}if(this._match(B.keywords.default)){this._match(B.tokens.colon),this._check(B.tokens.attr)&&this._attribute(),this._consume(B.tokens.brace_left,"Exected '{' for switch default.");const n=this._case_body();this._consume(B.tokens.brace_right,"Exected '}' for switch default."),e.push(new U7(n))}if(this._check([B.keywords.default,B.keywords.case])){const n=this._switch_body();e.push(n[0])}return e}_case_selectors(){const e=[this._shift_expression()];for(;this._match(B.tokens.comma);)e.push(this._shift_expression());return e}_case_body(){if(this._match(B.keywords.fallthrough))return this._consume(B.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const n=this._case_body();return n.length==0?e:[...e,n[0]]}_if_statement(){if(!this._match(B.keywords.if))return null;const e=this._optional_paren_expression();this._check(B.tokens.attr)&&this._attribute();const n=this._compound_statement();let i=[];this._match_elseif()&&(this._check(B.tokens.attr)&&this._attribute(),i=this._elseif_statement(i));let r=null;return this._match(B.keywords.else)&&(this._check(B.tokens.attr)&&this._attribute(),r=this._compound_statement()),new w7(e,n,i,r)}_match_elseif(){return this._tokens[this._current].type===B.keywords.else&&this._tokens[this._current+1].type===B.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(e=[]){const n=this._optional_paren_expression(),i=this._compound_statement();return e.push(new z7(n,i)),this._match_elseif()&&(this._check(B.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(B.keywords.return))return null;const e=this._short_circuit_or_expression();return new A7(e)}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(B.tokens.or_or);)e=new ji(this._previous().toString(),e,this._short_circuit_and_expr());return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(B.tokens.and_and);)e=new ji(this._previous().toString(),e,this._inclusive_or_expression());return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(B.tokens.or);)e=new ji(this._previous().toString(),e,this._exclusive_or_expression());return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(B.tokens.xor);)e=new ji(this._previous().toString(),e,this._and_expression());return e}_and_expression(){let e=this._equality_expression();for(;this._match(B.tokens.and);)e=new ji(this._previous().toString(),e,this._equality_expression());return e}_equality_expression(){const e=this._relational_expression();return this._match([B.tokens.equal_equal,B.tokens.not_equal])?new ji(this._previous().toString(),e,this._relational_expression()):e}_relational_expression(){let e=this._shift_expression();for(;this._match([B.tokens.less_than,B.tokens.greater_than,B.tokens.less_than_equal,B.tokens.greater_than_equal]);)e=new ji(this._previous().toString(),e,this._shift_expression());return e}_shift_expression(){let e=this._additive_expression();for(;this._match([B.tokens.shift_left,B.tokens.shift_right]);)e=new ji(this._previous().toString(),e,this._additive_expression());return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([B.tokens.plus,B.tokens.minus]);)e=new ji(this._previous().toString(),e,this._multiplicative_expression());return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([B.tokens.star,B.tokens.forward_slash,B.tokens.modulo]);)e=new ji(this._previous().toString(),e,this._unary_expression());return e}_unary_expression(){return this._match([B.tokens.minus,B.tokens.bang,B.tokens.tilde,B.tokens.star,B.tokens.and])?new B7(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),n=this._postfix_expression();return n&&(e.postfix=n),e}_postfix_expression(){if(this._match(B.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(B.tokens.bracket_right,"Expected ']'.");const n=new D7(e),i=this._postfix_expression();return i&&(n.postfix=i),n}if(this._match(B.tokens.period)){const e=this._consume(B.tokens.ident,"Expected member name."),n=this._postfix_expression(),i=new k7(e.lexeme);return n&&(i.postfix=n),i}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_primary_expression(){if(this._match(B.tokens.ident)){const i=this._previous().toString();if(this._check(B.tokens.paren_left)){const r=this._argument_expression_list(),s=this._getStruct(i);return s!=null?new Ba(s,r):new N3(i,r)}if(this._context.constants.has(i)){const r=this._context.constants.get(i);return new oA(i,r.value)}return new s0(i)}if(this._match(B.const_literal))return new aA(parseFloat(this._previous().toString()));if(this._check(B.tokens.paren_left))return this._paren_expression();if(this._match(B.keywords.bitcast)){this._consume(B.tokens.less_than,"Expected '<'.");const i=this._type_decl();this._consume(B.tokens.greater_than,"Expected '>'.");const r=this._paren_expression();return new I7(i,r)}const e=this._type_decl(),n=this._argument_expression_list();return new Ba(e,n)}_argument_expression_list(){if(!this._match(B.tokens.paren_left))return null;const e=[];do{if(this._check(B.tokens.paren_right))break;const n=this._short_circuit_or_expression();e.push(n)}while(this._match(B.tokens.comma));return this._consume(B.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(B.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(B.tokens.paren_right),new lA([e])}_paren_expression(){this._consume(B.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(B.tokens.paren_right,"Expected ')'."),new lA([e])}_struct_decl(){if(!this._match(B.keywords.struct))return null;const e=this._currentLine,n=this._consume(B.tokens.ident,"Expected name for struct.").toString();this._consume(B.tokens.brace_left,"Expected '{' for struct body.");const i=[];for(;!this._check(B.tokens.brace_right);){const a=this._attribute(),c=this._consume(B.tokens.ident,"Expected variable name.").toString();this._consume(B.tokens.colon,"Expected ':' for struct member type.");const f=this._attribute(),h=this._type_decl();h!=null&&(h.attributes=f),this._check(B.tokens.brace_right)?this._match(B.tokens.comma):this._consume(B.tokens.comma,"Expected ',' for struct member."),i.push(new V7(c,h,a))}this._consume(B.tokens.brace_right,"Expected '}' after struct body.");const r=this._currentLine,s=new to(n,i,e,r);return this._context.structs.set(n,s),s}_global_variable_decl(){const e=this._variable_decl();return e&&this._match(B.tokens.equal)&&(e.value=this._const_expression()),e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(B.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){if(!this._match(B.keywords.const))return null;const e=this._consume(B.tokens.ident,"Expected variable name");let n=null;if(this._match(B.tokens.colon)){const s=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=s)}let i=null;if(this._match(B.tokens.equal)){const s=this._short_circuit_or_expression();if(s instanceof Ba)i=s;else if(s instanceof oA&&s.initializer instanceof Ba)i=s.initializer;else try{const a=s.evaluate(this._context);i=new aA(a)}catch{i=s}}const r=new sA(e.toString(),n,"","",i);return this._context.constants.set(r.name,r),r}_global_let_decl(){if(!this._match(B.keywords.let))return null;const e=this._consume(B.tokens.ident,"Expected variable name");let n=null;if(this._match(B.tokens.colon)){const r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}let i=null;return this._match(B.tokens.equal)&&(i=this._const_expression()),new r0(e.toString(),n,"","",i)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(B.keywords.var))return null;let e="",n="";this._match(B.tokens.less_than)&&(e=this._consume(B.storage_class,"Expected storage_class.").toString(),this._match(B.tokens.comma)&&(n=this._consume(B.access_mode,"Expected access_mode.").toString()),this._consume(B.tokens.greater_than,"Expected '>'."));const i=this._consume(B.tokens.ident,"Expected variable name");let r=null;if(this._match(B.tokens.colon)){const s=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=s)}return new no(i.toString(),r,e,n,null)}_override_decl(){if(!this._match(B.keywords.override))return null;const e=this._consume(B.tokens.ident,"Expected variable name");let n=null;if(this._match(B.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}return new R3(e.toString(),n,null)}_diagnostic(){this._consume(B.tokens.paren_left,"Expected '('");const e=this._consume(B.tokens.ident,"Expected severity control name.");this._consume(B.tokens.comma,"Expected ','");const n=this._consume(B.tokens.ident,"Expected diagnostic rule name.");return this._consume(B.tokens.paren_right,"Expected ')'"),new C7(e.toString(),n.toString())}_enable_directive(){const e=this._consume(B.tokens.ident,"identity expected.");return new x7(e.toString())}_requires_directive(){const e=[this._consume(B.tokens.ident,"identity expected.").toString()];for(;this._match(B.tokens.comma);){const n=this._consume(B.tokens.ident,"identity expected.");e.push(n.toString())}return new R7(e)}_type_alias(){const e=this._consume(B.tokens.ident,"identity expected.");this._consume(B.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const i=new O3(e.toString(),n);return this._context.aliases.set(i.name,i),i}_type_decl(){if(this._check([B.tokens.ident,...B.texel_format,B.keywords.bool,B.keywords.f32,B.keywords.i32,B.keywords.u32])){const i=this._advance(),r=i.toString();return this._context.structs.has(r)?this._context.structs.get(r):this._context.aliases.has(r)?this._context.aliases.get(r).type:new Mo(i.toString())}let e=this._texture_sampler_types();if(e)return e;if(this._check(B.template_types)){let i=this._advance().toString(),r=null,s=null;return this._match(B.tokens.less_than)&&(r=this._type_decl(),s=null,this._match(B.tokens.comma)&&(s=this._consume(B.access_mode,"Expected access_mode for pointer").toString()),this._consume(B.tokens.greater_than,"Expected '>' for type.")),new M3(i,r,s)}if(this._match(B.keywords.ptr)){let i=this._previous().toString();this._consume(B.tokens.less_than,"Expected '<' for pointer.");const r=this._consume(B.storage_class,"Expected storage_class for pointer");this._consume(B.tokens.comma,"Expected ',' for pointer.");const s=this._type_decl();let a=null;return this._match(B.tokens.comma)&&(a=this._consume(B.access_mode,"Expected access_mode for pointer").toString()),this._consume(B.tokens.greater_than,"Expected '>' for pointer."),new N7(i,r.toString(),s,a)}const n=this._attribute();if(this._match(B.keywords.array)){let i=null,r=-1;const s=this._previous();let a=null;if(this._match(B.tokens.less_than)){i=this._type_decl(),this._context.aliases.has(i.name)&&(i=this._context.aliases.get(i.name).type);let f="";if(this._match(B.tokens.comma)){a=this._shift_expression();try{f=a.evaluate(this._context).toString(),a=null}catch{f="1"}}this._consume(B.tokens.greater_than,"Expected '>' for array."),r=f?parseInt(f):0}const c=new P3(s.toString(),n,i,r);return a&&this._deferArrayCountEval.push({arrayType:c,countNode:a}),c}return null}_texture_sampler_types(){if(this._match(B.sampler_type))return new kc(this._previous().toString(),null,null);if(this._match(B.depth_texture_type))return new kc(this._previous().toString(),null,null);if(this._match(B.sampled_texture_type)||this._match(B.multisampled_texture_type)){const e=this._previous();this._consume(B.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(B.tokens.greater_than,"Expected '>' for sampler type."),new kc(e.toString(),n,null)}if(this._match(B.storage_texture_type)){const e=this._previous();this._consume(B.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(B.texel_format,"Invalid texel format.").toString();this._consume(B.tokens.comma,"Expected ',' after texel format.");const i=this._consume(B.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(B.tokens.greater_than,"Expected '>' for sampler type."),new kc(e.toString(),n,i)}return null}_attribute(){let e=[];for(;this._match(B.tokens.attr);){const n=this._consume(B.attribute_name,"Expected attribute name"),i=new $7(n.toString(),null);if(this._match(B.tokens.paren_left)){if(i.value=this._consume(B.literal_or_ident,"Expected attribute value").toString(),this._check(B.tokens.comma)){this._advance();do{const r=this._consume(B.literal_or_ident,"Expected attribute value").toString();i.value instanceof Array||(i.value=[i.value]),i.value.push(r)}while(this._match(B.tokens.comma))}this._consume(B.tokens.paren_right,"Expected ')'")}e.push(i)}return e.length==0?null:e}}class qa{constructor(e,n){this.name=e,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class uA{constructor(e,n,i){this.name=e,this.type=n,this.attributes=i,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class lh extends qa{constructor(e,n){super(e,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class My extends qa{constructor(e,n){super(e,n),this.count=0,this.stride=0}get isArray(){return!0}}class fA extends qa{constructor(e,n,i,r){super(e,i),this.format=n,this.access=r}get isTemplate(){return!0}}var ds;(function(t){t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(ds||(ds={}));class ch{constructor(e,n,i,r,s,a,c){this.name=e,this.type=n,this.group=i,this.binding=r,this.attributes=s,this.resourceType=a,this.access=c}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class W7{constructor(e,n){this.name=e,this.type=n}}class uh{constructor(e,n){this.align=e,this.size=n}}class X7{constructor(e,n,i,r){this.name=e,this.type=n,this.locationType=i,this.location=r,this.interpolation=null}}class hA{constructor(e,n,i,r){this.name=e,this.type=n,this.locationType=i,this.location=r}}class q7{constructor(e,n,i,r){this.name=e,this.type=n,this.attributes=i,this.id=r}}class Y7{constructor(e,n){this.name=e,this.type=n}}class K7{constructor(e,n=null){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=n}}class Z7{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class Q7{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class Ar{constructor(e){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new Z7,this.functions=[],this._types=new Map,this._functions=new Map,e&&this.update(e)}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}update(e){const i=new H7().parse(e);for(const r of i)r instanceof i0&&this._functions.set(r.name,new Q7(r));for(const r of i)if(r instanceof to){const s=this._getTypeInfo(r,null);s instanceof lh&&this.structs.push(s)}for(const r of i){if(r instanceof O3){this.aliases.push(this._getAliasInfo(r));continue}if(r instanceof R3){const s=r,a=this._getAttributeNum(s.attributes,"id",0),c=s.type!=null?this._getTypeInfo(s.type,s.attributes):null;this.overrides.push(new q7(s.name,c,s.attributes,a));continue}if(this._isUniformVar(r)){const s=r,a=this._getAttributeNum(s.attributes,"group",0),c=this._getAttributeNum(s.attributes,"binding",0),f=this._getTypeInfo(s.type,s.attributes),h=new ch(s.name,f,a,c,s.attributes,ds.Uniform,s.access);this.uniforms.push(h);continue}if(this._isStorageVar(r)){const s=r,a=this._getAttributeNum(s.attributes,"group",0),c=this._getAttributeNum(s.attributes,"binding",0),f=this._getTypeInfo(s.type,s.attributes),h=this._isStorageTexture(f),p=new ch(s.name,f,a,c,s.attributes,h?ds.StorageTexture:ds.Storage,s.access);this.storage.push(p);continue}if(this._isTextureVar(r)){const s=r,a=this._getAttributeNum(s.attributes,"group",0),c=this._getAttributeNum(s.attributes,"binding",0),f=this._getTypeInfo(s.type,s.attributes),h=this._isStorageTexture(f),p=new ch(s.name,f,a,c,s.attributes,h?ds.StorageTexture:ds.Texture,s.access);h?this.storage.push(p):this.textures.push(p);continue}if(this._isSamplerVar(r)){const s=r,a=this._getAttributeNum(s.attributes,"group",0),c=this._getAttributeNum(s.attributes,"binding",0),f=this._getTypeInfo(s.type,s.attributes),h=new ch(s.name,f,a,c,s.attributes,ds.Sampler,s.access);this.samplers.push(h);continue}if(r instanceof i0){const s=this._getAttribute(r,"vertex"),a=this._getAttribute(r,"fragment"),c=this._getAttribute(r,"compute"),f=s||a||c,h=new K7(r.name,f==null?void 0:f.name);h.startLine=r.startLine,h.endLine=r.endLine,this.functions.push(h),this._functions.get(r.name).info=h,f&&(this._functions.get(r.name).inUse=!0,h.inUse=!0,h.resources=this._findResources(r,!!f),h.inputs=this._getInputs(r.args),h.outputs=this._getOutputs(r.returnType),this.entry[f.name].push(h)),h.arguments=r.args.map(p=>new Y7(p.name,this._getTypeInfo(p.type,p.attributes))),h.returnType=r.returnType?this._getTypeInfo(r.returnType,r.attributes):null;continue}}for(const r of this._functions.values())r.info&&(r.info.inUse=r.inUse,this._addCalls(r.node,r.info.calls));for(const r of this._functions.values())r.node.search(s=>{var a;if(s.astNodeType==="varExpr"){const c=s;for(const f of this.overrides)c.name==f.name&&((a=r.info)===null||a===void 0||a.overrides.push(f))}});for(const r of this.uniforms)this._markStructsInUse(r.type);for(const r of this.storage)this._markStructsInUse(r.type)}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const n of e.members)this._markStructsInUse(n.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const n=this._getAlias(e.name);n&&this._markStructsInUse(n)}}_addCalls(e,n){var i;for(const r of e.calls){const s=(i=this._functions.get(r.name))===null||i===void 0?void 0:i.info;s&&n.add(s)}}findResource(e,n){for(const i of this.uniforms)if(i.group==e&&i.binding==n)return i;for(const i of this.storage)if(i.group==e&&i.binding==n)return i;for(const i of this.textures)if(i.group==e&&i.binding==n)return i;for(const i of this.samplers)if(i.group==e&&i.binding==n)return i;return null}_findResource(e){for(const n of this.uniforms)if(n.name==e)return n;for(const n of this.storage)if(n.name==e)return n;for(const n of this.textures)if(n.name==e)return n;for(const n of this.samplers)if(n.name==e)return n;return null}_markStructsFromAST(e){const n=this._getTypeInfo(e,null);this._markStructsInUse(n)}_findResources(e,n){const i=[],r=this,s=[];return e.search(a=>{if(a instanceof Ad)s.push({});else if(a instanceof xd)s.pop();else if(a instanceof no){const c=a;n&&c.type!==null&&this._markStructsFromAST(c.type),s.length>0&&(s[s.length-1][c.name]=c)}else if(a instanceof Ba){const c=a;n&&c.type!==null&&this._markStructsFromAST(c.type)}else if(a instanceof r0){const c=a;n&&c.type!==null&&this._markStructsFromAST(c.type),s.length>0&&(s[s.length-1][c.name]=c)}else if(a instanceof s0){const c=a;if(s.length>0&&s[s.length-1][c.name])return;const f=r._findResource(c.name);f&&i.push(f)}else if(a instanceof N3){const c=a,f=r._functions.get(c.name);f&&(n&&(f.inUse=!0),e.calls.add(f.node),f.resources===null&&(f.resources=r._findResources(f.node,n)),i.push(...f.resources))}else if(a instanceof C3){const c=a,f=r._functions.get(c.name);f&&(n&&(f.inUse=!0),e.calls.add(f.node),f.resources===null&&(f.resources=r._findResources(f.node,n)),i.push(...f.resources))}}),[...new Map(i.map(a=>[a.name,a])).values()]}getBindGroups(){const e=[];function n(i,r){i>=e.length&&(e.length=i+1),e[i]===void 0&&(e[i]=[]),r>=e[i].length&&(e[i].length=r+1)}for(const i of this.uniforms){n(i.group,i.binding);const r=e[i.group];r[i.binding]=i}for(const i of this.storage){n(i.group,i.binding);const r=e[i.group];r[i.binding]=i}for(const i of this.textures){n(i.group,i.binding);const r=e[i.group];r[i.binding]=i}for(const i of this.samplers){n(i.group,i.binding);const r=e[i.group];r[i.binding]=i}return e}_getOutputs(e,n=void 0){if(n===void 0&&(n=[]),e instanceof to)this._getStructOutputs(e,n);else{const i=this._getOutputInfo(e);i!==null&&n.push(i)}return n}_getStructOutputs(e,n){for(const i of e.members)if(i.type instanceof to)this._getStructOutputs(i.type,n);else{const r=this._getAttribute(i,"location")||this._getAttribute(i,"builtin");if(r!==null){const s=this._getTypeInfo(i.type,i.type.attributes),a=this._parseInt(r.value),c=new hA(i.name,s,r.name,a);n.push(c)}}}_getOutputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const i=this._getTypeInfo(e,e.attributes),r=this._parseInt(n.value);return new hA("",i,n.name,r)}return null}_getInputs(e,n=void 0){n===void 0&&(n=[]);for(const i of e)if(i.type instanceof to)this._getStructInputs(i.type,n);else{const r=this._getInputInfo(i);r!==null&&n.push(r)}return n}_getStructInputs(e,n){for(const i of e.members)if(i.type instanceof to)this._getStructInputs(i.type,n);else{const r=this._getInputInfo(i);r!==null&&n.push(r)}}_getInputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const i=this._getAttribute(e,"interpolation"),r=this._getTypeInfo(e.type,e.attributes),s=this._parseInt(n.value),a=new X7(e.name,r,n.name,s);return i!==null&&(a.interpolation=this._parseString(i.value)),a}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const n=parseInt(e);return isNaN(n)?e:n}_getAlias(e){for(const n of this.aliases)if(n.name==e)return n.type;return null}_getAliasInfo(e){return new W7(e.name,this._getTypeInfo(e.type,null))}_getTypeInfo(e,n){if(this._types.has(e))return this._types.get(e);if(e instanceof P3){const r=e,s=r.format?this._getTypeInfo(r.format,r.attributes):null,a=new My(r.name,n);return a.format=s,a.count=r.count,this._types.set(e,a),this._updateTypeInfo(a),a}if(e instanceof to){const r=e,s=new lh(r.name,n);s.startLine=r.startLine,s.endLine=r.endLine;for(const a of r.members){const c=this._getTypeInfo(a.type,a.attributes);s.members.push(new uA(a.name,c,a.attributes))}return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof kc){const r=e,s=r.format instanceof Mo,a=r.format?s?this._getTypeInfo(r.format,null):new qa(r.format,null):null,c=new fA(r.name,a,n,r.access);return this._types.set(e,c),this._updateTypeInfo(c),c}if(e instanceof M3){const r=e,s=r.format?this._getTypeInfo(r.format,null):null,a=new fA(r.name,s,n,r.access);return this._types.set(e,a),this._updateTypeInfo(a),a}const i=new qa(e.name,n);return this._types.set(e,i),this._updateTypeInfo(i),i}_updateTypeInfo(e){var n,i;const r=this._getTypeSize(e);if(e.size=(n=r==null?void 0:r.size)!==null&&n!==void 0?n:0,e instanceof My&&e.format){const s=this._getTypeSize(e.format);e.stride=(i=s==null?void 0:s.size)!==null&&i!==void 0?i:0,this._updateTypeInfo(e.format)}e instanceof lh&&this._updateStructInfo(e)}_updateStructInfo(e){var n;let i=0,r=0,s=0,a=0;for(let c=0,f=e.members.length;c<f;++c){const h=e.members[c],p=this._getTypeSize(h);if(!p)continue;(n=this._getAlias(h.type.name))!==null&&n!==void 0||h.type;const m=p.align,y=p.size;i=this._roundUp(m,i+r),r=y,s=i,a=Math.max(a,m),h.offset=i,h.size=y,this._updateTypeInfo(h.type)}e.size=this._roundUp(a,s+r),e.align=a}_getTypeSize(e){var n,i;if(e==null)return null;const r=this._getAttributeNum(e.attributes,"size",0),s=this._getAttributeNum(e.attributes,"align",0);if(e instanceof uA&&(e=e.type),e instanceof qa){const a=this._getAlias(e.name);a!==null&&(e=a)}{const a=Ar._typeInfo[e.name];if(a!==void 0){const c=((n=e.format)===null||n===void 0?void 0:n.name)==="f16"?2:1;return new uh(Math.max(s,a.align/c),Math.max(r,a.size/c))}}{const a=Ar._typeInfo[e.name.substring(0,e.name.length-1)];if(a){const c=e.name[e.name.length-1]==="h"?2:1;return new uh(Math.max(s,a.align/c),Math.max(r,a.size/c))}}if(e instanceof My){let a=e,c=8,f=8;const h=this._getTypeSize(a.format);h!==null&&(f=h.size,c=h.align);const p=a.count,m=this._getAttributeNum((i=e==null?void 0:e.attributes)!==null&&i!==void 0?i:null,"stride",this._roundUp(c,f));return f=p*m,r&&(f=r),new uh(Math.max(s,c),Math.max(r,f))}if(e instanceof lh){let a=0,c=0,f=0,h=0,p=0;for(const m of e.members){const y=this._getTypeSize(m.type);y!==null&&(a=Math.max(y.align,a),f=this._roundUp(y.align,f+h),h=y.size,p=f)}return c=this._roundUp(a,p+h),new uh(Math.max(s,a),Math.max(r,c))}return null}_isUniformVar(e){return e instanceof no&&e.storage=="uniform"}_isStorageVar(e){return e instanceof no&&e.storage=="storage"}_isTextureVar(e){return e instanceof no&&e.type!==null&&Ar._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof no&&e.type!==null&&Ar._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,n){const i=e;if(!i||!i.attributes)return null;const r=i.attributes;for(let s of r)if(s.name==n)return s;return null}_getAttributeNum(e,n,i){if(e===null)return i;for(let r of e)if(r.name==n){let s=r!==null&&r.value!==null?r.value:i;return s instanceof Array&&(s=s[0]),typeof s=="number"?s:typeof s=="string"?parseInt(s):i}return i}_roundUp(e,n){return Math.ceil(n/e)*e}}Ar._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};Ar._textureTypes=B.any_texture_type.map(t=>t.name);Ar._samplerTypes=B.sampler_type.map(t=>t.name);function G7(t){var s;const e={attributes:[],bindings:[]};let n;try{n=J7(t)}catch(a){return ge.error(a.message)(),e}for(const a of n.uniforms){const c=[];for(const f of((s=a.type)==null?void 0:s.members)||[])c.push({name:f.name,type:dA(f.type)});e.bindings.push({type:"uniform",name:a.name,group:a.group,location:a.binding,members:c})}for(const a of n.textures)e.bindings.push({type:"texture",name:a.name,group:a.group,location:a.binding});for(const a of n.samplers)e.bindings.push({type:"sampler",name:a.name,group:a.group,location:a.binding});const i=n.entry.vertex[0],r=(i==null?void 0:i.inputs.length)||0;for(let a=0;a<r;a++){const c=i.inputs[a];if(c.locationType==="location"){const f=dA(c.type);e.attributes.push({name:c.name,location:Number(c.location),type:f})}}return e}function dA(t){return t.format?`${t.name}<${t.format.name}>`:t.name}function J7(t){try{return new Ar(t)}catch(e){if(e instanceof Error)throw e;let n="WGSL parse error";throw typeof e=="object"&&(e!=null&&e.message)&&(n+=`: ${e.message} `),typeof e=="object"&&(e!=null&&e.token)&&(n+=e.token.line||""),new Error(n,{cause:e})}}const e9={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...e9}};const kn=globalThis.mathgl.config;function t9(t,{precision:e=kn.precision}={}){return t=n9(t),`${parseFloat(t.toPrecision(e))}`}function So(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ms(t,e,n){return r9(t,i=>Math.max(e,Math.min(n,i)))}function fo(t,e,n){return So(t)?t.map((i,r)=>fo(i,e[r],n)):n*e+(1-n)*t}function Or(t,e,n){const i=kn.EPSILON;try{if(t===e)return!0;if(So(t)&&So(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Or(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=kn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{kn.EPSILON=i}}function n9(t){return Math.round(t/kn.EPSILON)*kn.EPSILON}function i9(t){return t.clone?t.clone():new Array(t.length)}function r9(t,e,n){if(So(t)){const i=t;n=n||i9(i);for(let r=0;r<n.length&&r<i.length;++r){const s=typeof t=="number"?t:t[r];n[r]=e(s,r,n)}return n}return e(t)}class Ub extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:So(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(kn)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+t9(this[i],e);return`${e.printTypes?this.constructor.name:""}[${n}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Or(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(i===void 0)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const s=e[r],a=typeof n=="number"?n:n[r];this[r]=s+i*(a-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(kn.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function s9(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function ut(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function jc(t,e,n=""){if(kn.debug&&!s9(t,e))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return t}function lu(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class D3 extends Ub{get x(){return this[0]}set x(e){this[0]=ut(e)}get y(){return this[1]}set y(e){this[1]=ut(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return ut(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return ut(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return lu(e>=0&&e<this.ELEMENTS,"index is out of range"),ut(this[e])}setComponent(e,n){return lu(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}const Hc=1e-6;let Oi=typeof Float32Array<"u"?Float32Array:Array;function o9(){const t=new Oi(2);return Oi!=Float32Array&&(t[0]=0,t[1]=0),t}function pA(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function a9(t,e){return t[0]=-e[0],t[1]=-e[1],t}function B3(t,e,n,i){const r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}function l9(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}function c9(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(function(){const t=o9();return function(e,n,i,r,s,a){let c,f;for(n||(n=2),i||(i=0),r?f=Math.min(r*n+i,e.length):f=e.length,c=i;c<f;c+=n)t[0]=e[c],t[1]=e[c+1],s(t,t,a),e[c]=t[0],e[c+1]=t[1];return e}})();function u9(t,e,n){const i=e[0],r=e[1],s=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/s,t[1]=(n[1]*i+n[5]*r)/s,t}function L3(t,e,n){const i=e[0],r=e[1],s=e[2],a=n[3]*i+n[7]*r+n[11]*s||1;return t[0]=(n[0]*i+n[4]*r+n[8]*s)/a,t[1]=(n[1]*i+n[5]*r+n[9]*s)/a,t[2]=(n[2]*i+n[6]*r+n[10]*s)/a,t}function f9(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t}function h9(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3],t}function U3(t,e,n){const i=e[0],r=e[1],s=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*s,t[1]=n[1]*i+n[4]*r+n[7]*s,t[2]=n[2]*i+n[5]*r+n[8]*s,t[3]=e[3],t}function F3(){const t=new Oi(3);return Oi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function d9(t){const e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function gA(t,e,n){const i=new Oi(3);return i[0]=t,i[1]=e,i[2]=n,i}function p9(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function g9(t){const e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function m9(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function y9(t,e){const n=e[0],i=e[1],r=e[2];let s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function z3(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Hh(t,e,n){const i=e[0],r=e[1],s=e[2],a=n[0],c=n[1],f=n[2];return t[0]=r*f-s*c,t[1]=s*a-i*f,t[2]=i*c-r*a,t}function _9(t,e,n,i){const r=e[0],s=e[1],a=e[2];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=a+i*(n[2]-a),t}function Fb(t,e,n){const i=e[0],r=e[1],s=e[2];let a=n[3]*i+n[7]*r+n[11]*s+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/a,t}function V3(t,e,n){const i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}function $3(t,e,n){const i=n[0],r=n[1],s=n[2],a=n[3],c=e[0],f=e[1],h=e[2];let p=r*h-s*f,m=s*c-i*h,y=i*f-r*c,b=r*y-s*m,v=s*p-i*y,T=i*m-r*p;const S=a*2;return p*=S,m*=S,y*=S,b*=2,v*=2,T*=2,t[0]=c+p+b,t[1]=f+m+v,t[2]=h+y+T,t}function b9(t,e,n,i){const r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function v9(t,e,n,i){const r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function T9(t,e,n,i){const r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function S9(t,e){const n=t[0],i=t[1],r=t[2],s=e[0],a=e[1],c=e[2],f=Math.sqrt((n*n+i*i+r*r)*(s*s+a*a+c*c)),h=f&&z3(t,e)/f;return Math.acos(Math.min(Math.max(h,-1),1))}const j3=p9,H3=d9,Py=g9;(function(){const t=F3();return function(e,n,i,r,s,a){let c,f;for(n||(n=3),i||(i=0),r?f=Math.min(r*n+i,e.length):f=e.length,c=i;c<f;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],s(t,t,a),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}})();const Ny=[0,0,0];let fh;class _e extends D3{static get ZERO(){return fh||(fh=new _e(0,0,0),Object.freeze(fh)),fh}constructor(e=0,n=0,i=0){super(-0,-0,-0),arguments.length===1&&So(e)?this.copy(e):(kn.debug&&(ut(e),ut(n),ut(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return kn.debug&&(ut(e.x),ut(e.y),ut(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ut(e)}angle(e){return S9(this,e)}cross(e){return Hh(this,this,e),this.check()}rotateX({radians:e,origin:n=Ny}){return b9(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Ny}){return v9(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Ny}){return T9(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Fb(this,this,e),this.check()}transformAsVector(e){return L3(this,this,e),this.check()}transformByMatrix3(e){return V3(this,this,e),this.check()}transformByMatrix2(e){return f9(this,this,e),this.check()}transformByQuaternion(e){return $3(this,this,e),this.check()}}let hh;class zb extends D3{static get ZERO(){return hh||(hh=new zb(0,0,0,0),Object.freeze(hh)),hh}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),So(e)&&arguments.length===1?this.copy(e):(kn.debug&&(ut(e),ut(n),ut(i),ut(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return kn.debug&&(ut(e.x),ut(e.y),ut(e.z),ut(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=ut(e)}get w(){return this[3]}set w(e){this[3]=ut(e)}transform(e){return Fb(this,this,e),this.check()}transformByMatrix3(e){return U3(this,this,e),this.check()}transformByMatrix2(e){return h9(this,this,e),this.check()}transformByQuaternion(e){return $3(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}class W3 extends Ub{toString(){let e="[";if(kn.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=` ${this[i*this.RANK+n]}`}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=` ${this[n]}`}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=ut(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function E9(){const t=new Oi(9);return Oi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function w9(t,e){if(t===e){const n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function A9(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],c=e[5],f=e[6],h=e[7],p=e[8],m=p*a-c*h,y=-p*s+c*f,b=h*s-a*f;let v=n*m+i*y+r*b;return v?(v=1/v,t[0]=m*v,t[1]=(-p*i+r*h)*v,t[2]=(c*i-r*a)*v,t[3]=y*v,t[4]=(p*n-r*f)*v,t[5]=(-c*n+r*s)*v,t[6]=b*v,t[7]=(-h*n+i*f)*v,t[8]=(a*n-i*s)*v,t):null}function x9(t){const e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],c=t[6],f=t[7],h=t[8];return e*(h*s-a*f)+n*(-h*r+a*c)+i*(f*r-s*c)}function mA(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],c=e[4],f=e[5],h=e[6],p=e[7],m=e[8],y=n[0],b=n[1],v=n[2],T=n[3],S=n[4],w=n[5],C=n[6],A=n[7],O=n[8];return t[0]=y*i+b*a+v*h,t[1]=y*r+b*c+v*p,t[2]=y*s+b*f+v*m,t[3]=T*i+S*a+w*h,t[4]=T*r+S*c+w*p,t[5]=T*s+S*f+w*m,t[6]=C*i+A*a+O*h,t[7]=C*r+A*c+O*p,t[8]=C*s+A*f+O*m,t}function R9(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],c=e[4],f=e[5],h=e[6],p=e[7],m=e[8],y=n[0],b=n[1];return t[0]=i,t[1]=r,t[2]=s,t[3]=a,t[4]=c,t[5]=f,t[6]=y*i+b*a+h,t[7]=y*r+b*c+p,t[8]=y*s+b*f+m,t}function C9(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],c=e[4],f=e[5],h=e[6],p=e[7],m=e[8],y=Math.sin(n),b=Math.cos(n);return t[0]=b*i+y*a,t[1]=b*r+y*c,t[2]=b*s+y*f,t[3]=b*a-y*i,t[4]=b*c-y*r,t[5]=b*f-y*s,t[6]=h,t[7]=p,t[8]=m,t}function yA(t,e,n){const i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function O9(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=n+n,c=i+i,f=r+r,h=n*a,p=i*a,m=i*c,y=r*a,b=r*c,v=r*f,T=s*a,S=s*c,w=s*f;return t[0]=1-m-v,t[3]=p-w,t[6]=y+S,t[1]=p+w,t[4]=1-h-v,t[7]=b-T,t[2]=y-S,t[5]=b+T,t[8]=1-h-m,t}var o0;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(o0||(o0={}));const M9=Object.freeze([1,0,0,0,1,0,0,0,1]);class un extends W3{static get IDENTITY(){return N9()}static get ZERO(){return P9()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return o0}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(M9)}fromObject(e){return this.check()}fromQuaternion(e){return O9(this,e),this.check()}set(e,n,i,r,s,a,c,f,h){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=a,this[6]=c,this[7]=f,this[8]=h,this.check()}setRowMajor(e,n,i,r,s,a,c,f,h){return this[0]=e,this[1]=r,this[2]=c,this[3]=n,this[4]=s,this[5]=f,this[6]=i,this[7]=a,this[8]=h,this.check()}determinant(){return x9(this)}transpose(){return w9(this,this),this.check()}invert(){return A9(this,this),this.check()}multiplyLeft(e){return mA(this,e,this),this.check()}multiplyRight(e){return mA(this,this,e),this.check()}rotate(e){return C9(this,this,e),this.check()}scale(e){return Array.isArray(e)?yA(this,this,e):yA(this,this,[e,e]),this.check()}translate(e){return R9(this,this,e),this.check()}transform(e,n){let i;switch(e.length){case 2:i=l9(n||[-0,-0],e,this);break;case 3:i=V3(n||[-0,-0,-0],e,this);break;case 4:i=U3(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return jc(i,e.length),i}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let dh,ph=null;function P9(){return dh||(dh=new un([0,0,0,0,0,0,0,0,0]),Object.freeze(dh)),dh}function N9(){return ph||(ph=new un,Object.freeze(ph)),ph}function k9(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I9(t,e){if(t===e){const n=e[1],i=e[2],r=e[3],s=e[6],a=e[7],c=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=a,t[14]=c}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function a0(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],c=e[5],f=e[6],h=e[7],p=e[8],m=e[9],y=e[10],b=e[11],v=e[12],T=e[13],S=e[14],w=e[15],C=n*c-i*a,A=n*f-r*a,O=n*h-s*a,R=i*f-r*c,D=i*h-s*c,z=r*h-s*f,j=p*T-m*v,V=p*S-y*v,x=p*w-b*v,H=m*S-y*T,te=m*w-b*T,se=y*w-b*S;let fe=C*se-A*te+O*H+R*x-D*V+z*j;return fe?(fe=1/fe,t[0]=(c*se-f*te+h*H)*fe,t[1]=(r*te-i*se-s*H)*fe,t[2]=(T*z-S*D+w*R)*fe,t[3]=(y*D-m*z-b*R)*fe,t[4]=(f*x-a*se-h*V)*fe,t[5]=(n*se-r*x+s*V)*fe,t[6]=(S*O-v*z-w*A)*fe,t[7]=(p*z-y*O+b*A)*fe,t[8]=(a*te-c*x+h*j)*fe,t[9]=(i*x-n*te-s*j)*fe,t[10]=(v*D-T*O+w*C)*fe,t[11]=(m*O-p*D-b*C)*fe,t[12]=(c*V-a*H-f*j)*fe,t[13]=(n*H-i*V+r*j)*fe,t[14]=(T*A-v*R-S*C)*fe,t[15]=(p*R-m*A+y*C)*fe,t):null}function D9(t){const e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],c=t[6],f=t[7],h=t[8],p=t[9],m=t[10],y=t[11],b=t[12],v=t[13],T=t[14],S=t[15],w=e*a-n*s,C=e*c-i*s,A=n*c-i*a,O=h*v-p*b,R=h*T-m*b,D=p*T-m*v,z=e*D-n*R+i*O,j=s*D-a*R+c*O,V=h*A-p*C+m*w,x=b*A-v*C+T*w;return f*z-r*j+S*V-y*x}function ho(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],c=e[4],f=e[5],h=e[6],p=e[7],m=e[8],y=e[9],b=e[10],v=e[11],T=e[12],S=e[13],w=e[14],C=e[15];let A=n[0],O=n[1],R=n[2],D=n[3];return t[0]=A*i+O*c+R*m+D*T,t[1]=A*r+O*f+R*y+D*S,t[2]=A*s+O*h+R*b+D*w,t[3]=A*a+O*p+R*v+D*C,A=n[4],O=n[5],R=n[6],D=n[7],t[4]=A*i+O*c+R*m+D*T,t[5]=A*r+O*f+R*y+D*S,t[6]=A*s+O*h+R*b+D*w,t[7]=A*a+O*p+R*v+D*C,A=n[8],O=n[9],R=n[10],D=n[11],t[8]=A*i+O*c+R*m+D*T,t[9]=A*r+O*f+R*y+D*S,t[10]=A*s+O*h+R*b+D*w,t[11]=A*a+O*p+R*v+D*C,A=n[12],O=n[13],R=n[14],D=n[15],t[12]=A*i+O*c+R*m+D*T,t[13]=A*r+O*f+R*y+D*S,t[14]=A*s+O*h+R*b+D*w,t[15]=A*a+O*p+R*v+D*C,t}function Rd(t,e,n){const i=n[0],r=n[1],s=n[2];let a,c,f,h,p,m,y,b,v,T,S,w;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[0],c=e[1],f=e[2],h=e[3],p=e[4],m=e[5],y=e[6],b=e[7],v=e[8],T=e[9],S=e[10],w=e[11],t[0]=a,t[1]=c,t[2]=f,t[3]=h,t[4]=p,t[5]=m,t[6]=y,t[7]=b,t[8]=v,t[9]=T,t[10]=S,t[11]=w,t[12]=a*i+p*r+v*s+e[12],t[13]=c*i+m*r+T*s+e[13],t[14]=f*i+y*r+S*s+e[14],t[15]=h*i+b*r+w*s+e[15]),t}function Vb(t,e,n){const i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function B9(t,e,n,i){let r=i[0],s=i[1],a=i[2],c=Math.sqrt(r*r+s*s+a*a),f,h,p,m,y,b,v,T,S,w,C,A,O,R,D,z,j,V,x,H,te,se,fe,pe;return c<Hc?null:(c=1/c,r*=c,s*=c,a*=c,h=Math.sin(n),f=Math.cos(n),p=1-f,m=e[0],y=e[1],b=e[2],v=e[3],T=e[4],S=e[5],w=e[6],C=e[7],A=e[8],O=e[9],R=e[10],D=e[11],z=r*r*p+f,j=s*r*p+a*h,V=a*r*p-s*h,x=r*s*p-a*h,H=s*s*p+f,te=a*s*p+r*h,se=r*a*p+s*h,fe=s*a*p-r*h,pe=a*a*p+f,t[0]=m*z+T*j+A*V,t[1]=y*z+S*j+O*V,t[2]=b*z+w*j+R*V,t[3]=v*z+C*j+D*V,t[4]=m*x+T*H+A*te,t[5]=y*x+S*H+O*te,t[6]=b*x+w*H+R*te,t[7]=v*x+C*H+D*te,t[8]=m*se+T*fe+A*pe,t[9]=y*se+S*fe+O*pe,t[10]=b*se+w*fe+R*pe,t[11]=v*se+C*fe+D*pe,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function X3(t,e,n){const i=Math.sin(n),r=Math.cos(n),s=e[4],a=e[5],c=e[6],f=e[7],h=e[8],p=e[9],m=e[10],y=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+h*i,t[5]=a*r+p*i,t[6]=c*r+m*i,t[7]=f*r+y*i,t[8]=h*r-s*i,t[9]=p*r-a*i,t[10]=m*r-c*i,t[11]=y*r-f*i,t}function L9(t,e,n){const i=Math.sin(n),r=Math.cos(n),s=e[0],a=e[1],c=e[2],f=e[3],h=e[8],p=e[9],m=e[10],y=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-h*i,t[1]=a*r-p*i,t[2]=c*r-m*i,t[3]=f*r-y*i,t[8]=s*i+h*r,t[9]=a*i+p*r,t[10]=c*i+m*r,t[11]=f*i+y*r,t}function q3(t,e,n){const i=Math.sin(n),r=Math.cos(n),s=e[0],a=e[1],c=e[2],f=e[3],h=e[4],p=e[5],m=e[6],y=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+h*i,t[1]=a*r+p*i,t[2]=c*r+m*i,t[3]=f*r+y*i,t[4]=h*r-s*i,t[5]=p*r-a*i,t[6]=m*r-c*i,t[7]=y*r-f*i,t}function U9(t,e){const n=e[0],i=e[1],r=e[2],s=e[4],a=e[5],c=e[6],f=e[8],h=e[9],p=e[10];return t[0]=Math.sqrt(n*n+i*i+r*r),t[1]=Math.sqrt(s*s+a*a+c*c),t[2]=Math.sqrt(f*f+h*h+p*p),t}function F9(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=n+n,c=i+i,f=r+r,h=n*a,p=i*a,m=i*c,y=r*a,b=r*c,v=r*f,T=s*a,S=s*c,w=s*f;return t[0]=1-m-v,t[1]=p+w,t[2]=y-S,t[3]=0,t[4]=p-w,t[5]=1-h-v,t[6]=b+T,t[7]=0,t[8]=y+S,t[9]=b-T,t[10]=1-h-m,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function z9(t,e,n,i,r,s,a){const c=1/(n-e),f=1/(r-i),h=1/(s-a);return t[0]=s*2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*f,t[6]=0,t[7]=0,t[8]=(n+e)*c,t[9]=(r+i)*f,t[10]=(a+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*h,t[15]=0,t}function V9(t,e,n,i,r){const s=1/Math.tan(e/2);if(t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0){const a=1/(i-r);t[10]=(r+i)*a,t[14]=2*r*i*a}else t[10]=-1,t[14]=-2*i;return t}const $9=V9;function j9(t,e,n,i,r,s,a){const c=1/(e-n),f=1/(i-r),h=1/(s-a);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*c,t[13]=(r+i)*f,t[14]=(a+s)*h,t[15]=1,t}const H9=j9;function W9(t,e,n,i){let r,s,a,c,f,h,p,m,y,b;const v=e[0],T=e[1],S=e[2],w=i[0],C=i[1],A=i[2],O=n[0],R=n[1],D=n[2];return Math.abs(v-O)<Hc&&Math.abs(T-R)<Hc&&Math.abs(S-D)<Hc?k9(t):(m=v-O,y=T-R,b=S-D,r=1/Math.sqrt(m*m+y*y+b*b),m*=r,y*=r,b*=r,s=C*b-A*y,a=A*m-w*b,c=w*y-C*m,r=Math.sqrt(s*s+a*a+c*c),r?(r=1/r,s*=r,a*=r,c*=r):(s=0,a=0,c=0),f=y*c-b*a,h=b*s-m*c,p=m*a-y*s,r=Math.sqrt(f*f+h*h+p*p),r?(r=1/r,f*=r,h*=r,p*=r):(f=0,h=0,p=0),t[0]=s,t[1]=f,t[2]=m,t[3]=0,t[4]=a,t[5]=h,t[6]=y,t[7]=0,t[8]=c,t[9]=p,t[10]=b,t[11]=0,t[12]=-(s*v+a*T+c*S),t[13]=-(f*v+h*T+p*S),t[14]=-(m*v+y*T+b*S),t[15]=1,t)}function X9(){const t=new Oi(4);return Oi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function q9(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function $b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Y9(t){const e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)}function K9(t){const e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}function Z9(t,e){const n=e[0],i=e[1],r=e[2],s=e[3];let a=n*n+i*i+r*r+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=s*a,t}function Q9(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function G9(t,e,n,i){const r=e[0],s=e[1],a=e[2],c=e[3];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=a+i*(n[2]-a),t[3]=c+i*(n[3]-c),t}function gl(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*a,t}function J9(t,e,n){const i=e[0],r=e[1],s=e[2],a=n[0],c=n[1],f=n[2],h=n[3],p=h*i+c*s-f*r,m=h*r+f*i-a*s,y=h*s+a*r-c*i,b=-a*i-c*r-f*s;return t[0]=p*h+b*-a+m*-f-y*-c,t[1]=m*h+b*-c+y*-a-p*-f,t[2]=y*h+b*-f+p*-c-m*-a,t[3]=e[3],t}(function(){const t=X9();return function(e,n,i,r,s,a){let c,f;for(n||(n=4),i||(i=0),r?f=Math.min(r*n+i,e.length):f=e.length,c=i;c<f;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],t[3]=e[c+3],s(t,t,a),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2],e[c+3]=t[3];return e}})();var l0;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(l0||(l0={}));const ej=45*Math.PI/180,tj=1,ky=.1,Iy=500,nj=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class An extends W3{static get IDENTITY(){return rj()}static get ZERO(){return ij()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return l0}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,s,a,c,f,h,p,m,y,b,v,T,S){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=a,this[6]=c,this[7]=f,this[8]=h,this[9]=p,this[10]=m,this[11]=y,this[12]=b,this[13]=v,this[14]=T,this[15]=S,this.check()}setRowMajor(e,n,i,r,s,a,c,f,h,p,m,y,b,v,T,S){return this[0]=e,this[1]=s,this[2]=h,this[3]=b,this[4]=n,this[5]=a,this[6]=p,this[7]=v,this[8]=i,this[9]=c,this[10]=m,this[11]=T,this[12]=r,this[13]=f,this[14]=y,this[15]=S,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(nj)}fromObject(e){return this.check()}fromQuaternion(e){return F9(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:s,near:a=ky,far:c=Iy}=e;return c===1/0?sj(this,n,i,r,s,a):z9(this,n,i,r,s,a,c),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return W9(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:s,near:a=ky,far:c=Iy}=e;return H9(this,n,i,r,s,a,c),this.check()}orthographic(e){const{fovy:n=ej,aspect:i=tj,focalDistance:r=1,near:s=ky,far:a=Iy}=e;_A(n);const c=n/2,f=r*Math.tan(c),h=f*i;return this.ortho({left:-h,right:h,bottom:-f,top:f,near:s,far:a})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return _A(n),$9(this,n,i,r,s),this.check()}determinant(){return D9(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const i=this.getScale(n),r=1/i[0],s=1/i[1],a=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*a,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*a,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const i=this.getScale(n),r=1/i[0],s=1/i[1],a=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*a,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*a,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*a,e}transpose(){return I9(this,this),this.check()}invert(){return a0(this,this),this.check()}multiplyLeft(e){return ho(this,e,this),this.check()}multiplyRight(e){return ho(this,this,e),this.check()}rotateX(e){return X3(this,this,e),this.check()}rotateY(e){return L9(this,this,e),this.check()}rotateZ(e){return q3(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return B9(this,this,e,n),this.check()}scale(e){return Vb(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Rd(this,this,e),this.check()}transform(e,n){return e.length===4?(n=gl(n||[-0,-0,-0,-0],e,this),jc(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=c9(n||[-0,-0],e,this);break;case 3:r=Fb(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return jc(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=u9(n||[-0,-0],e,this);break;case 3:i=L3(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return jc(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let gh,mh;function ij(){return gh||(gh=new An([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(gh)),gh}function rj(){return mh||(mh=new An,Object.freeze(mh)),mh}function _A(t){if(t>Math.PI*2)throw Error("expected radians")}function sj(t,e,n,i,r,s){const a=2*s/(n-e),c=2*s/(r-i),f=(n+e)/(n-e),h=(r+i)/(r-i),p=-1,m=-1,y=-2*s;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=f,t[9]=h,t[10]=p,t[11]=m,t[12]=0,t[13]=0,t[14]=y,t[15]=0,t}function bA(){const t=new Oi(4);return Oi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function oj(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Y3(t,e,n){n=n*.5;const i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function vA(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],c=n[0],f=n[1],h=n[2],p=n[3];return t[0]=i*p+a*c+r*h-s*f,t[1]=r*p+a*f+s*c-i*h,t[2]=s*p+a*h+i*f-r*c,t[3]=a*p-i*c-r*f-s*h,t}function aj(t,e,n){n*=.5;const i=e[0],r=e[1],s=e[2],a=e[3],c=Math.sin(n),f=Math.cos(n);return t[0]=i*f+a*c,t[1]=r*f+s*c,t[2]=s*f-r*c,t[3]=a*f-i*c,t}function lj(t,e,n){n*=.5;const i=e[0],r=e[1],s=e[2],a=e[3],c=Math.sin(n),f=Math.cos(n);return t[0]=i*f-s*c,t[1]=r*f+a*c,t[2]=s*f+i*c,t[3]=a*f-r*c,t}function cj(t,e,n){n*=.5;const i=e[0],r=e[1],s=e[2],a=e[3],c=Math.sin(n),f=Math.cos(n);return t[0]=i*f+r*c,t[1]=r*f-i*c,t[2]=s*f+a*c,t[3]=a*f-s*c,t}function uj(t,e){const n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t}function Wh(t,e,n,i){const r=e[0],s=e[1],a=e[2],c=e[3];let f=n[0],h=n[1],p=n[2],m=n[3],y,b,v,T,S;return y=r*f+s*h+a*p+c*m,y<0&&(y=-y,f=-f,h=-h,p=-p,m=-m),1-y>Hc?(b=Math.acos(y),S=Math.sin(b),v=Math.sin((1-i)*b)/S,T=Math.sin(i*b)/S):(v=1-i,T=i),t[0]=v*r+T*f,t[1]=v*s+T*h,t[2]=v*a+T*p,t[3]=v*c+T*m,t}function fj(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=n*n+i*i+r*r+s*s,c=a?1/a:0;return t[0]=-n*c,t[1]=-i*c,t[2]=-r*c,t[3]=s*c,t}function hj(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function K3(t,e){const n=e[0]+e[4]+e[8];let i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);const s=(r+1)%3,a=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[s*3+s]-e[a*3+a]+1),t[r]=.5*i,i=.5/i,t[3]=(e[s*3+a]-e[a*3+s])*i,t[s]=(e[s*3+r]+e[r*3+s])*i,t[a]=(e[a*3+r]+e[r*3+a])*i}return t}const dj=q9,pj=$b,gj=Q9,mj=G9,yj=Y9,_j=K9,Z3=Z9,bj=function(){const t=F3(),e=gA(1,0,0),n=gA(0,1,0);return function(i,r,s){const a=z3(r,s);return a<-.999999?(Hh(t,e,r),H3(t)<1e-6&&Hh(t,n,r),y9(t,t),Y3(i,t,Math.PI),i):a>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(Hh(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+a,Z3(i,i))}}();(function(){const t=bA(),e=bA();return function(n,i,r,s,a,c){return Wh(t,i,a,c),Wh(e,r,s,c),Wh(n,t,e,2*c*(1-c)),n}})();(function(){const t=E9();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],Z3(e,K3(e,t))}})();const vj=[0,0,0,1];class TA extends Ub{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return K3(this,e),this.check()}fromAxisRotation(e,n){return Y3(this,e,n),this.check()}identity(){return oj(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=ut(e)}get y(){return this[1]}set y(e){this[1]=ut(e)}get z(){return this[2]}set z(e){this[2]=ut(e)}get w(){return this[3]}set w(e){this[3]=ut(e)}len(){return yj(this)}lengthSquared(){return _j(this)}dot(e){return gj(this,e)}rotationTo(e,n){return bj(this,e,n),this.check()}add(e){return dj(this,this,e),this.check()}calculateW(){return uj(this,this),this.check()}conjugate(){return hj(this,this),this.check()}invert(){return fj(this,this),this.check()}lerp(e,n,i){return i===void 0?this.lerp(this,e,n):(mj(this,e,n,i),this.check())}multiplyRight(e){return vA(this,this,e),this.check()}multiplyLeft(e){return vA(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,e===0&&(this[3]=1),this.check()}rotateX(e){return aj(this,this,e),this.check()}rotateY(e){return lj(this,this,e),this.check()}rotateZ(e){return cj(this,this,e),this.check()}scale(e){return pj(this,this,e),this.check()}slerp(e,n,i){let r,s,a;switch(arguments.length){case 1:({start:r=vj,target:s,ratio:a}=e);break;case 2:r=this,s=e,a=n;break;default:r=e,s=n,a=i}return Wh(this,r,s,a),this.check()}transformVector4(e,n=new zb){return J9(n,e,this),jc(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const Tj=1e-15,Sj=1e-20;function Q3(t,e=[],n=0){const i=Math.fround(t),r=t-i;return e[n]=i,e[n+1]=r,e}function Ej(t){return t-Math.fround(t)}function wj(t){const e=new Float32Array(32);for(let n=0;n<4;++n)for(let i=0;i<4;++i){const r=n*4+i;Q3(t[i*4+n],e,r*2)}return e}const Aj=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND

// All these functions are for substituting tan() function from Intel GPU only
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }

    // 2pi range reduction
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,xj={name:"fp32",vs:Aj},Rj=`
uniform fp64arithmeticUniforms {
  uniform float ONE;
} fp64;

/*
About LUMA_FP64_CODE_ELIMINATION_WORKAROUND

The purpose of this workaround is to prevent shader compilers from
optimizing away necessary arithmetic operations by swapping their sequences
or transform the equation to some 'equivalent' form.

The method is to multiply an artifical variable, ONE, which will be known to
the compiler to be 1 only at runtime. The whole expression is then represented
as a polynomial with respective to ONE. In the coefficients of all terms, only one a
and one b should appear

err = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE
*/

// Divide float number to high and low floats to extend fraction bits
vec2 split(float a) {
  const float SPLIT = 4097.0;
  float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float a_hi = t * fp64.ONE - (t - a);
  float a_lo = a * fp64.ONE - a_hi;
#else
  float a_hi = t - (t - a);
  float a_lo = a - a_hi;
#endif
  return vec2(a_hi, a_lo);
}

// Divide float number again when high float uses too many fraction bits
vec2 split2(vec2 a) {
  vec2 b = split(a.x);
  b.y += a.y;
  return b;
}

// Special sum operation when a > b
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float sum = (a + b) * fp64.ONE;
  float err = b - (sum - a) * fp64.ONE;
#else
  float sum = a + b;
  float err = b - (sum - a);
#endif
  return vec2(sum, err);
}

// General sum operation
vec2 twoSum(float a, float b) {
  float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);
#else
  float v = s - a;
  float err = (a - (s - v)) + (b - v);
#endif
  return vec2(s, err);
}

vec2 twoSub(float a, float b) {
  float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);
#else
  float v = s - a;
  float err = (a - (s - v)) - (b + v);
#endif
  return vec2(s, err);
}

vec2 twoSqr(float a) {
  float prod = a * a;
  vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *
    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;
#else
  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
  return vec2(prod, err);
}

vec2 twoProd(float a, float b) {
  float prod = a * b;
  vec2 a_fp64 = split(a);
  vec2 b_fp64 = split(b);
  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
  return vec2(prod, err);
}

vec2 sum_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSum(a.x, b.x);
  t = twoSum(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 sub_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSub(a.x, b.x);
  t = twoSub(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 mul_fp64(vec2 a, vec2 b) {
  vec2 prod = twoProd(a.x, b.x);
  // y component is for the error
  prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  return prod;
}

vec2 div_fp64(vec2 a, vec2 b) {
  float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
  vec2 yn = a * xn;
#endif
  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
  vec2 prod = twoProd(xn, diff);
  return sum_fp64(yn, prod);
}

vec2 sqrt_fp64(vec2 a) {
  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);

  float x = 1.0 / sqrt(a.x);
  float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;
#else
  vec2 yn_sqr = twoSqr(yn);
#endif
  float diff = sub_fp64(a, yn_sqr).x;
  vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  return sum_fp64(split(yn), prod);
#else
  return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,Cj={ONE:1},Oj={name:"fp64arithmetic",vs:Rj,defaultUniforms:Cj,uniformTypes:{ONE:"f32"},fp64ify:Q3,fp64LowPart:Ej,fp64ifyMatrix4:wj},Mj=[0,1,1,1],Pj=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

out vec4 picking_vRGBcolor_Avalid;

// Normalize unsigned byte color to 0-1 range
vec3 picking_normalizeColor(vec3 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

// Normalize unsigned byte color to 0-1 range
vec4 picking_normalizeColor(vec4 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

bool picking_isColorZero(vec3 color) {
  return dot(color, vec3(1.0)) < 0.00001;
}

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.00001;
}

// Check if this vertex is highlighted 
bool isVertexHighlighted(vec3 vertexColor) {
  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
  return
    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}

// Set the current picking color
void picking_setPickingColor(vec3 pickingColor) {
  pickingColor = picking_normalizeColor(pickingColor);

  if (bool(picking.isActive)) {
    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!bool(picking.isAttribute)) {
      // Stores the picking color so that the fragment shader can render it during picking
      picking_vRGBcolor_Avalid.rgb = pickingColor;
    }
  } else {
    // Do the comparison with selected item color in vertex shader as it should mean fewer compares
    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.r = value;
  }
}

void picking_setPickingAttribute(vec2 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}

void picking_setPickingAttribute(vec3 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,Nj=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

in vec4 picking_vRGBcolor_Avalid;

/*
 * Returns highlight color if this item is selected.
 */
vec4 picking_filterHighlightColor(vec4 color) {
  // If we are still picking, we don't highlight
  if (picking.isActive > 0.5) {
    return color;
  }

  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    // Blend in highlight color based on its alpha value
    float highLightAlpha = picking.highlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 picking_filterPickingColor(vec4 color) {
  if (bool(picking.isActive)) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 picking_filterColor(vec4 color) {
  vec4 highlightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highlightColor);
}
`,SA={props:{},uniforms:{},name:"picking",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:Mj},vs:Pj,fs:Nj,getUniforms:kj};function kj(t={},e){const n={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)n.isHighlightActive=!1;else{n.isHighlightActive=!0;const i=t.highlightedObjectColor.slice(0,3);n.highlightedObjectColor=i}if(t.highlightColor){const i=Array.from(t.highlightColor,r=>r/255);Number.isFinite(i[3])||(i[3]=1),n.highlightColor=i}return t.isActive!==void 0&&(n.isActive=!!t.isActive,n.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(n.useFloatColors=!!t.useFloatColors),n}const EA=`precision highp int;

// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
  vec3 color;
};

struct PointLight {
  vec3 color;
  vec3 position;
  vec3 attenuation; // 2nd order x:Constant-y:Linear-z:Exponential
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform lightingUniforms {
  int enabled;
  int lightType;

  int directionalLightCount;
  int pointLightCount;

  vec3 ambientColor;

  vec3 lightColor0;
  vec3 lightPosition0;
  vec3 lightDirection0;
  vec3 lightAttenuation0;

  vec3 lightColor1;
  vec3 lightPosition1;
  vec3 lightDirection1;
  vec3 lightAttenuation1;

  vec3 lightColor2;
  vec3 lightPosition2;
  vec3 lightDirection2;
  vec3 lightAttenuation2;
} lighting;

PointLight lighting_getPointLight(int index) {
  switch (index) {
    case 0:
      return PointLight(lighting.lightColor0, lighting.lightPosition0, lighting.lightAttenuation0);
    case 1:
      return PointLight(lighting.lightColor1, lighting.lightPosition1, lighting.lightAttenuation1);
    case 2:
    default:  
      return PointLight(lighting.lightColor2, lighting.lightPosition2, lighting.lightAttenuation2);
  }
}

DirectionalLight lighting_getDirectionalLight(int index) {
  switch (index) {
    case 0:
      return DirectionalLight(lighting.lightColor0, lighting.lightDirection0);
    case 1:
      return DirectionalLight(lighting.lightColor1, lighting.lightDirection1);
    case 2:
    default:   
      return DirectionalLight(lighting.lightColor2, lighting.lightDirection2);
  }
} 

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

// #endif
`,Ij=`// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
  color: vec3<f32>,
};

struct PointLight {
  color: vec3<f32>,
  position: vec3<f32>,
  attenuation: vec3<f32>, // 2nd order x:Constant-y:Linear-z:Exponential
};

struct DirectionalLight {
  color: vec3<f32>,
  direction: vec3<f32>,
};

struct lightingUniforms {
  enabled: i32,
  poightCount: i32,
  directionalLightCount: i32,

  ambientColor: vec3<f32>,

  // TODO - support multiple lights by uncommenting arrays below
  lightType: i32,
  lightColor: vec3<f32>,
  lightDirection: vec3<f32>,
  lightPosition: vec3<f32>,
  lightAttenuation: vec3<f32>,

  // AmbientLight ambientLight;
  // PointLight pointLight[MAX_LIGHTS];
  // DirectionalLight directionalLight[MAX_LIGHTS];
};

// Binding 0:1 is reserved for lighting (Note: could go into separate bind group as it is stable across draw calls)
@binding(1) @group(0) var<uniform> lighting : lightingUniforms;

fn lighting_getPointLight(index: i32) -> PointLight {
  return PointLight(lighting.lightColor, lighting.lightPosition, lighting.lightAttenuation);
}

fn lighting_getDirectionalLight(index: i32) -> DirectionalLight {
  return DirectionalLight(lighting.lightColor, lighting.lightDirection);
} 

fn getPointLightAttenuation(pointLight: PointLight, distance: f32) -> f32 {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}
`,G3=3,Dj=255;var cu;(function(t){t[t.POINT=0]="POINT",t[t.DIRECTIONAL=1]="DIRECTIONAL"})(cu||(cu={}));const Xh={props:{},uniforms:{},name:"lighting",defines:{MAX_LIGHTS:G3},uniformTypes:{enabled:"i32",lightType:"i32",directionalLightCount:"i32",pointLightCount:"i32",ambientLightColor:"vec3<f32>",lightColor0:"vec3<f32>",lightPosition0:"vec3<f32>",lightDirection0:"vec3<f32>",lightAttenuation0:"vec3<f32>",lightColor1:"vec3<f32>",lightPosition1:"vec3<f32>",lightDirection1:"vec3<f32>",lightAttenuation1:"vec3<f32>",lightColor2:"vec3<f32>",lightPosition2:"vec3<f32>",lightDirection2:"vec3<f32>",lightAttenuation2:"vec3<f32>"},defaultUniforms:{enabled:1,lightType:cu.POINT,directionalLightCount:0,pointLightCount:0,ambientLightColor:[.1,.1,.1],lightColor0:[1,1,1],lightPosition0:[1,1,2],lightDirection0:[1,1,1],lightAttenuation0:[1,0,0],lightColor1:[1,1,1],lightPosition1:[1,1,2],lightDirection1:[1,1,1],lightAttenuation1:[1,0,0],lightColor2:[1,1,1],lightPosition2:[1,1,2],lightDirection2:[1,1,1],lightAttenuation2:[1,0,0]},source:Ij,vs:EA,fs:EA,getUniforms:Bj};function Bj(t,e={}){if(t=t&&{...t},!t)return{...Xh.defaultUniforms};t.lights&&(t={...t,...Uj(t.lights),lights:void 0});const{ambientLight:n,pointLights:i,directionalLights:r}=t||{};if(!(n||i&&i.length>0||r&&r.length>0))return{...Xh.defaultUniforms,enabled:0};const a={...Xh.defaultUniforms,...e,...Lj({ambientLight:n,pointLights:i,directionalLights:r})};return t.enabled!==void 0&&(a.enabled=t.enabled?1:0),a}function Lj({ambientLight:t,pointLights:e=[],directionalLights:n=[]}){const i={};i.ambientLightColor=Dy(t);let r=0;for(const s of e){i.lightType=cu.POINT;const a=r;i[`lightColor${a}`]=Dy(s),i[`lightPosition${a}`]=s.position,i[`lightAttenuation${a}`]=s.attenuation||[1,0,0],r++}for(const s of n){i.lightType=cu.DIRECTIONAL;const a=r;i[`lightColor${a}`]=Dy(s),i[`lightDirection${a}`]=s.direction,r++}return r>G3&&ge.warn("MAX_LIGHTS exceeded")(),i.directionalLightCount=n.length,i.pointLightCount=e.length,i}function Uj(t){var n,i;const e={pointLights:[],directionalLights:[]};for(const r of t||[])switch(r.type){case"ambient":e.ambientLight=r;break;case"directional":(n=e.directionalLights)==null||n.push(r);break;case"point":(i=e.pointLights)==null||i.push(r);break}return e}function Dy(t={}){const{color:e=[0,0,0],intensity:n=1}=t;return e.map(i=>i*n/Dj)}const Fj=`uniform phongMaterialUniforms {
  uniform float ambient;
  uniform float diffuse;
  uniform float shininess;
  uniform vec3  specularColor;
} material;
`,zj=`uniform phongMaterialUniforms {
  uniform float ambient;
  uniform float diffuse;
  uniform float shininess;
  uniform vec3  specularColor;
} material;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
  vec3 halfway_direction = normalize(light_direction + view_direction);
  float lambertian = dot(light_direction, normal_worldspace);
  float specular = 0.0;
  if (lambertian > 0.0) {
    float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
    specular = pow(specular_angle, material.shininess);
  }
  lambertian = max(lambertian, 0.0);
  return (lambertian * material.diffuse * surfaceColor + specular * material.specularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting.enabled == 0) {
    return lightColor;
  }

  vec3 view_direction = normalize(cameraPosition - position_worldspace);
  lightColor = material.ambient * surfaceColor * lighting.ambientColor;

  for (int i = 0; i < lighting.pointLightCount; i++) {
    PointLight pointLight = lighting_getPointLight(i);
    vec3 light_position_worldspace = pointLight.position;
    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
    float light_attenuation = getPointLightAttenuation(pointLight, distance(light_position_worldspace, position_worldspace));
    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color / light_attenuation);
  }

  int totalLights = min(MAX_LIGHTS, lighting.pointLightCount + lighting.directionalLightCount);
  for (int i = lighting.pointLightCount; i < totalLights; i++) {
    DirectionalLight directionalLight = lighting_getDirectionalLight(i);
    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
  }
  
  return lightColor;
}
`,J3={props:{},name:"gouraudMaterial",vs:zj.replace("phongMaterial","gouraudMaterial"),fs:Fj.replace("phongMaterial","gouraudMaterial"),defines:{LIGHTING_VERTEX:1},dependencies:[Xh],uniformTypes:{ambient:"f32",diffuse:"f32",shininess:"f32",specularColor:"vec3<f32>"},defaultUniforms:{ambient:.35,diffuse:.6,shininess:32,specularColor:[.15,.15,.15]},getUniforms(t){const e={...t};return e.specularColor&&(e.specularColor=e.specularColor.map(n=>n/255)),{...J3.defaultUniforms,...e}}},wA=`uniform layerUniforms {
  uniform float opacity;
} layer;
`,Vj={name:"layer",vs:wA,fs:wA,getUniforms:t=>({opacity:Math.pow(t.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}},eO="#define SMOOTH_EDGE_RADIUS 0.5",$j=`
${eO}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,jj=`
${eO}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,tO={name:"geometry",vs:$j,fs:jj},Hj=25;var jt;(function(t){t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.End=4]="End",t[t.Cancel=8]="Cancel"})(jt||(jt={}));var Yt;(function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=4]="Up",t[t.Down=8]="Down",t[t.Horizontal=3]="Horizontal",t[t.Vertical=12]="Vertical",t[t.All=15]="All"})(Yt||(Yt={}));var Pe;(function(t){t[t.Possible=1]="Possible",t[t.Began=2]="Began",t[t.Changed=4]="Changed",t[t.Ended=8]="Ended",t[t.Recognized=8]="Recognized",t[t.Cancelled=16]="Cancelled",t[t.Failed=32]="Failed"})(Pe||(Pe={}));const Wj="compute",Xj="auto",c0="manipulation",qh="none",u0="pan-x",f0="pan-y";function qj(t){if(t.includes(qh))return qh;const e=t.includes(u0),n=t.includes(f0);return e&&n?qh:e||n?e?u0:f0:t.includes(c0)?c0:Xj}class Yj{constructor(e,n){this.actions="",this.manager=e,this.set(n)}set(e){e===Wj&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const n of this.manager.recognizers)n.options.enable&&(e=e.concat(n.getTouchAction()));return qj(e.join(" "))}}function Cd(t){return t.trim().split(/\s+/g)}function By(t,e,n){if(t)for(const i of Cd(e))t.addEventListener(i,n,!1)}function Ly(t,e,n){if(t)for(const i of Cd(e))t.removeEventListener(i,n,!1)}function AA(t){return(t.ownerDocument||t).defaultView}function Kj(t,e){let n=t;for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function nO(t){const e=t.length;if(e===1)return{x:Math.round(t[0].clientX),y:Math.round(t[0].clientY)};let n=0,i=0,r=0;for(;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:Math.round(n/e),y:Math.round(i/e)}}function xA(t){const e=[];let n=0;for(;n<t.pointers.length;)e[n]={clientX:Math.round(t.pointers[n].clientX),clientY:Math.round(t.pointers[n].clientY)},n++;return{timeStamp:Date.now(),pointers:e,center:nO(e),deltaX:t.deltaX,deltaY:t.deltaY}}function iO(t,e){const n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function RA(t,e){const n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(n*n+i*i)}function Zj(t,e){const n=e.x-t.x,i=e.y-t.y;return Math.atan2(i,n)*180/Math.PI}function CA(t,e){const n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.atan2(i,n)*180/Math.PI}function rO(t,e){return t===e?Yt.None:Math.abs(t)>=Math.abs(e)?t<0?Yt.Left:Yt.Right:e<0?Yt.Up:Yt.Down}function Qj(t,e){const n=e.center;let i=t.offsetDelta,r=t.prevDelta;const s=t.prevInput;return(e.eventType===jt.Start||(s==null?void 0:s.eventType)===jt.End)&&(r=t.prevDelta={x:(s==null?void 0:s.deltaX)||0,y:(s==null?void 0:s.deltaY)||0},i=t.offsetDelta={x:n.x,y:n.y}),{deltaX:r.x+(n.x-i.x),deltaY:r.y+(n.y-i.y)}}function sO(t,e,n){return{x:e/t||0,y:n/t||0}}function Gj(t,e){return RA(e[0],e[1])/RA(t[0],t[1])}function Jj(t,e){return CA(e[1],e[0])-CA(t[1],t[0])}function eH(t,e){const n=t.lastInterval||e,i=e.timeStamp-n.timeStamp;let r,s,a,c;if(e.eventType!==jt.Cancel&&(i>Hj||n.velocity===void 0)){const f=e.deltaX-n.deltaX,h=e.deltaY-n.deltaY,p=sO(i,f,h);s=p.x,a=p.y,r=Math.abs(p.x)>Math.abs(p.y)?p.x:p.y,c=rO(f,h),t.lastInterval=e}else r=n.velocity,s=n.velocityX,a=n.velocityY,c=n.direction;e.velocity=r,e.velocityX=s,e.velocityY=a,e.direction=c}function tH(t,e){const{session:n}=t,{pointers:i}=e,{length:r}=i;n.firstInput||(n.firstInput=xA(e)),r>1&&!n.firstMultiple?n.firstMultiple=xA(e):r===1&&(n.firstMultiple=!1);const{firstInput:s,firstMultiple:a}=n,c=a?a.center:s.center,f=e.center=nO(i);e.timeStamp=Date.now(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=Zj(c,f),e.distance=iO(c,f);const{deltaX:h,deltaY:p}=Qj(n,e);e.deltaX=h,e.deltaY=p,e.offsetDirection=rO(e.deltaX,e.deltaY);const m=sO(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=m.x,e.overallVelocityY=m.y,e.overallVelocity=Math.abs(m.x)>Math.abs(m.y)?m.x:m.y,e.scale=a?Gj(a.pointers,i):1,e.rotation=a?Jj(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length;let y=t.element;return Kj(e.srcEvent.target,y)&&(y=e.srcEvent.target),e.target=y,eH(n,e),e}function nH(t,e,n){const i=n.pointers.length,r=n.changedPointers.length,s=e&jt.Start&&i-r===0,a=e&(jt.End|jt.Cancel)&&i-r===0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e;const c=tH(t,n);t.emit("hammer.input",c),t.recognize(c),t.session.prevInput=c}let iH=class{constructor(e){this.evEl="",this.evWin="",this.evTarget="",this.domHandler=n=>{this.manager.options.enable&&this.handler(n)},this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}callback(e,n){nH(this.manager,e,n)}init(){By(this.element,this.evEl,this.domHandler),By(this.target,this.evTarget,this.domHandler),By(AA(this.element),this.evWin,this.domHandler)}destroy(){Ly(this.element,this.evEl,this.domHandler),Ly(this.target,this.evTarget,this.domHandler),Ly(AA(this.element),this.evWin,this.domHandler)}};const rH={pointerdown:jt.Start,pointermove:jt.Move,pointerup:jt.End,pointercancel:jt.Cancel,pointerout:jt.Cancel},sH="pointerdown",oH="pointermove pointerup pointercancel";class aH extends iH{constructor(e){super(e),this.evEl=sH,this.evWin=oH,this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:n}=this;let i=!1;const r=rH[e.type],s=e.pointerType,a=s==="touch";let c=n.findIndex(f=>f.pointerId===e.pointerId);r&jt.Start&&(e.buttons||a)?c<0&&(n.push(e),c=n.length-1):r&(jt.End|jt.Cancel)&&(i=!0),!(c<0)&&(n[c]=e,this.callback(r,{pointers:n,changedPointers:[e],eventType:r,pointerType:s,srcEvent:e}),i&&n.splice(c,1))}}const lH=["","webkit","Moz","MS","ms","o"];function cH(t,e){const n=e[0].toUpperCase()+e.slice(1);for(const i of lH){const r=i?i+n:e;if(r in t)return r}}const uH=1,OA=2,MA={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class fH{constructor(e,n){this.options={...MA,...n,cssProps:{...MA.cssProps,...n.cssProps},inputTarget:n.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new aH(this),this.touchAction=new Yj(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?OA:uH}recognize(e){const{session:n}=this;if(n.stopped)return;this.session.prevented&&e.srcEvent.preventDefault();let i;const{recognizers:r}=this;let{curRecognizer:s}=n;(!s||s&&s.state&Pe.Recognized)&&(s=n.curRecognizer=null);let a=0;for(;a<r.length;)i=r[a],n.stopped!==OA&&(!s||i===s||i.canRecognizeWith(s))?i.recognize(e):i.reset(),!s&&i.state&(Pe.Began|Pe.Changed|Pe.Ended)&&(s=n.curRecognizer=i),a++}get(e){const{recognizers:n}=this;for(let i=0;i<n.length;i++)if(n[i].options.event===e)return n[i];return null}add(e){if(Array.isArray(e)){for(const i of e)this.add(i);return this}const n=this.get(e.options.event);return n&&this.remove(n),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const i of e)this.remove(i);return this}const n=typeof e=="string"?this.get(e):e;if(n){const{recognizers:i}=this,r=i.indexOf(n);r!==-1&&(i.splice(r,1),this.touchAction.update())}return this}on(e,n){if(!e||!n)return;const{handlers:i}=this;for(const r of Cd(e))i[r]=i[r]||[],i[r].push(n)}off(e,n){if(!e)return;const{handlers:i}=this;for(const r of Cd(e))n?i[r]&&i[r].splice(i[r].indexOf(n),1):delete i[r]}emit(e,n){const i=this.handlers[e]&&this.handlers[e].slice();if(!i||!i.length)return;const r=n;r.type=e,r.preventDefault=function(){n.srcEvent.preventDefault()};let s=0;for(;s<i.length;)i[s](r),s++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:n}=this;if(n){for(const[i,r]of Object.entries(this.options.cssProps)){const s=cH(n.style,i);e?(this.oldCssProps[s]=n.style[s],n.style[s]=r):n.style[s]=this.oldCssProps[s]||""}e||(this.oldCssProps={})}}}let hH=1;function dH(){return hH++}function PA(t){return t&Pe.Cancelled?"cancel":t&Pe.Ended?"end":t&Pe.Changed?"move":t&Pe.Began?"start":""}class oO{constructor(e){this.options=e,this.id=dH(),this.state=Pe.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const r of e)this.recognizeWith(r);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{simultaneous:i}=this;return i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const i of e)this.dropRecognizeWith(i);return this}let n;return typeof e=="string"?n=this.manager.get(e):n=e,n&&delete this.simultaneous[n.id],this}requireFailure(e){if(Array.isArray(e)){for(const r of e)this.requireFailure(r);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{requireFail:i}=this;return i.indexOf(n)===-1&&(i.push(n),n.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const i of e)this.dropRequireFailure(i);return this}let n;if(typeof e=="string"?n=this.manager.get(e):n=e,n){const i=this.requireFail.indexOf(n);i>-1&&this.requireFail.splice(i,1)}return this}hasRequireFailures(){return!!this.requireFail.find(e=>e.options.enable)}canRecognizeWith(e){return!!this.simultaneous[e.id]}emit(e){if(!e)return;const{state:n}=this;n<Pe.Ended&&this.manager.emit(this.options.event+PA(n),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),n>=Pe.Ended&&this.manager.emit(this.options.event+PA(n),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=Pe.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Pe.Failed|Pe.Possible)))return!1;e++}return!0}recognize(e){const n={...e};if(!this.options.enable){this.reset(),this.state=Pe.Failed;return}this.state&(Pe.Recognized|Pe.Cancelled|Pe.Failed)&&(this.state=Pe.Possible),this.state=this.process(n),this.state&(Pe.Began|Pe.Changed|Pe.Ended|Pe.Cancelled)&&this.tryEmit(n)}getEventNames(){return[this.options.event]}reset(){}}class aO extends oO{attrTest(e){const n=this.options.pointers;return n===0||e.pointers.length===n}process(e){const{state:n}=this,{eventType:i}=e,r=n&(Pe.Began|Pe.Changed),s=this.attrTest(e);return r&&(i&jt.Cancel||!s)?n|Pe.Cancelled:r||s?i&jt.End?n|Pe.Ended:n&Pe.Began?n|Pe.Changed:Pe.Began:Pe.Failed}}class NA extends oO{constructor(e={}){super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[c0]}process(e){const{options:n}=this,i=e.pointers.length===n.pointers,r=e.distance<n.threshold,s=e.deltaTime<n.time;if(this.reset(),e.eventType&jt.Start&&this.count===0)return this.failTimeout();if(r&&s&&i){if(e.eventType!==jt.End)return this.failTimeout();const a=this.pTime?e.timeStamp-this.pTime<n.interval:!0,c=!this.pCenter||iO(this.pCenter,e.center)<n.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,!c||!a?this.count=1:this.count+=1,this._input=e,this.count%n.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(()=>{this.state=Pe.Recognized,this.tryEmit(this._input)},n.interval),Pe.Began):Pe.Recognized}return Pe.Failed}failTimeout(){return this._timer=setTimeout(()=>{this.state=Pe.Failed},this.options.interval),Pe.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===Pe.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const pH=["","start","move","end","cancel","up","down","left","right"];class kA extends aO{constructor(e={}){super({enable:!0,pointers:1,event:"pan",threshold:10,direction:Yt.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,n=[];return e&Yt.Horizontal&&n.push(f0),e&Yt.Vertical&&n.push(u0),n}getEventNames(){return pH.map(e=>this.options.event+e)}directionTest(e){const{options:n}=this;let i=!0,{distance:r}=e,{direction:s}=e;const a=e.deltaX,c=e.deltaY;return s&n.direction||(n.direction&Yt.Horizontal?(s=a===0?Yt.None:a<0?Yt.Left:Yt.Right,i=a!==this.pX,r=Math.abs(e.deltaX)):(s=c===0?Yt.None:c<0?Yt.Up:Yt.Down,i=c!==this.pY,r=Math.abs(e.deltaY))),e.direction=s,i&&r>n.threshold&&!!(s&n.direction)}attrTest(e){return super.attrTest(e)&&(!!(this.state&Pe.Began)||!(this.state&Pe.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const n=Yt[e.direction].toLowerCase();n&&(e.additionalEvent=this.options.event+n),super.emit(e)}}const gH=["","start","move","end","cancel","in","out"];class mH extends aO{constructor(e={}){super({enable:!0,event:"pinch",threshold:0,pointers:2,...e})}getTouchAction(){return[qh]}getEventNames(){return gH.map(e=>this.options.event+e)}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||!!(this.state&Pe.Began))}emit(e){if(e.scale!==1){const n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}super.emit(e)}}class Pp{constructor(e,n,i){this.element=e,this.callback=n,this.options=i}}const yH=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",_H=yH.indexOf("firefox")!==-1,IA=4.000244140625,bH=40,vH=.25;class TH extends Pp{constructor(e,n,i){super(e,n,{enable:!0,...i}),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;globalThis.WheelEvent&&(_H&&r.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(s/=globalThis.devicePixelRatio),r.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(s*=bH)),s!==0&&s%IA===0&&(s=Math.floor(s/IA)),r.shiftKey&&s&&(s=s*vH),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,n){e==="wheel"&&(this.options.enable=n)}}const DA=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class SH extends Pp{constructor(e,n,i){super(e,n,{enable:!0,...i}),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,DA.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){DA.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){switch(e){case"pointermove":this.enableMoveEvent=n;break;case"pointerover":this.enableOverEvent=n;break;case"pointerout":this.enableOutEvent=n;break;case"pointerenter":this.enableEnterEvent=n;break;case"pointerleave":this.enableLeaveEvent=n;break}}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const BA=["keydown","keyup"];class EH extends Pp{constructor(e,n,i){super(e,n,{enable:!0,tabIndex:0,...i}),this.handleEvent=r=>{const s=r.target||r.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&r.type==="keydown"&&this.callback({type:"keydown",srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&r.type==="keyup"&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",BA.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){BA.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e==="keydown"&&(this.enableDownEvent=n),e==="keyup"&&(this.enableUpEvent=n)}}class wH extends Pp{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e==="contextmenu"&&(this.options.enable=n)}}const LA=1,h0=2,UA=4,AH={pointerdown:LA,pointermove:h0,pointerup:UA,mousedown:LA,mousemove:h0,mouseup:UA},xH=0,RH=1,CH=2,OH=1,MH=2,PH=4;function NH(t){const e=AH[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i}=t.srcEvent;let r=!1,s=!1,a=!1;return e===h0?(r=!!(n&OH),s=!!(n&PH),a=!!(n&MH)):(r=i===xH,s=i===RH,a=i===CH),{leftButton:r,middleButton:s,rightButton:a}}function kH(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect(),r=i.width/e.offsetWidth||1,s=i.height/e.offsetHeight||1,a={x:(n.x-i.left-e.clientLeft)/r,y:(n.y-i.top-e.clientTop)/s};return{center:n,offsetCenter:a}}const IH={srcElement:"root",priority:0};class DH{constructor(e,n){this.handleEvent=i=>{if(this.isEmpty())return;const r=this._normalizeEvent(i);let s=i.srcEvent.target;for(;s&&s!==r.rootElement;){if(this._emit(r,s),r.handled)return;s=s.parentNode}this._emit(r,"root")},this.eventManager=e,this.recognizerName=n,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,s=!1){const{handlers:a,handlersByElement:c}=this,f={...IH,...i};let h=c.get(f.srcElement);h||(h=[],c.set(f.srcElement,h));const p={type:e,handler:n,srcElement:f.srcElement,priority:f.priority};r&&(p.once=!0),s&&(p.passive=!0),a.push(p),this._active=this._active||!p.passive;let m=h.length-1;for(;m>=0&&!(h[m].priority>=p.priority);)m--;h.splice(m+1,0,p)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.type===e&&a.handler===n){i.splice(s,1);const c=r.get(a.srcElement);c.splice(c.indexOf(a),1),c.length===0&&r.delete(a.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const s=()=>{e.handled=!0},a=()=>{e.handled=!0,r=!0},c=[];for(let f=0;f<i.length;f++){const{type:h,handler:p,once:m}=i[f];if(p({...e,type:h,stopPropagation:s,stopImmediatePropagation:a}),m&&c.push(i[f]),r)break}for(let f=0;f<c.length;f++){const{type:h,handler:p}=c[f];this.remove(h,p)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...NH(e),...kH(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}function BH(t){if("recognizer"in t)return t;let e;const n=Array.isArray(t)?[...t]:[t];if(typeof n[0]=="function"){const i=n.shift(),r=n.shift()||{};e=new i(r)}else e=n.shift();return{recognizer:e,recognizeWith:typeof n[0]=="string"?[n[0]]:n[0],requireFailure:typeof n[1]=="string"?[n[1]]:n[1]}}class LH{constructor(e=null,n={}){if(this._onBasicInput=i=>{this.manager.emit(i.srcEvent.type,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...n},this.events=new Map,this.element=e,!!e){this.manager=new fH(e,this.options);for(const i of this.options.recognizers){const{recognizer:r,recognizeWith:s,requireFailure:a}=BH(i);this.manager.add(r),s&&r.recognizeWith(s),a&&r.requireFailure(a)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new TH(e,this._onOtherEvent,{enable:!1}),this.moveInput=new SH(e,this._onOtherEvent,{enable:!1}),this.keyInput=new EH(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new wH(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){var s,a,c,f;const{manager:i}=this;if(!i)return;const r=i.get(e);r&&(r.set({enable:n}),i.touchAction.update()),(s=this.wheelInput)==null||s.enableEventType(e,n),(a=this.moveInput)==null||a.enableEventType(e,n),(c=this.keyInput)==null||c.enableEventType(e,n),(f=this.contextmenuInput)==null||f.enableEventType(e,n)}_addEventHandler(e,n,i,r,s){if(typeof e!="string"){i=n;for(const[h,p]of Object.entries(e))this._addEventHandler(h,p,i,r,s);return}const{manager:a,events:c}=this;if(!a)return;let f=c.get(e);if(!f){const h=this._getRecognizerName(e)||e;f=new DH(this,h),c.set(e,f),a&&a.on(e,f.handleEvent)}f.add(e,n,i,r,s),f.isEmpty()||this._toggleRecognizer(f.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const[s,a]of Object.entries(e))this._removeEventHandler(s,a);return}const{events:i}=this,r=i.get(e);if(r&&(r.remove(e,n),r.isEmpty())){const{recognizerName:s}=r;let a=!1;for(const c of i.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}_getRecognizerName(e){var n;return(n=this.manager.recognizers.find(i=>i.getEventNames().includes(e)))==null?void 0:n.options.event}}const $e={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty($e,"IDENTITY",{get:()=>(Ue.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const wi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Eo={common:0,meters:1,pixels:2},d0={click:"onClick",panstart:"onDragStart",panmove:"onDrag",panend:"onDragEnd"},FA={multipan:[kA,{threshold:10,direction:Yt.Vertical,pointers:2}],pinch:[mH,{},null,["multipan"]],pan:[kA,{threshold:1},["pinch"],["multipan"]],dblclick:[NA,{event:"dblclick",taps:2}],click:[NA,{event:"click"},null,["dblclick"]]},UH=Object.keys($e).map(t=>`const int COORDINATE_SYSTEM_${t} = ${$e[t]};`).join(""),FH=Object.keys(wi).map(t=>`const int PROJECTION_MODE_${t} = ${wi[t]};`).join(""),zH=Object.keys(Eo).map(t=>`const int UNIT_${t.toUpperCase()} = ${Eo[t]};`).join(""),VH=`${UH}
${FH}
${zH}
uniform projectUniforms {
bool wrapLongitude;
int coordinateSystem;
vec3 commonUnitsPerMeter;
int projectionMode;
float scale;
vec3 commonUnitsPerWorldUnit;
vec3 commonUnitsPerWorldUnit2;
vec4 center;
mat4 modelMatrix;
mat4 viewProjectionMatrix;
vec2 viewportSize;
float devicePixelRatio;
float focalDistance;
vec3 cameraPosition;
vec3 coordinateOrigin;
vec3 commonOrigin;
bool pseudoMeters;
} project;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project.pseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project.commonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project.commonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project.commonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project.wrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project.modelMatrix * position;
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project.coordinateOrigin;
}
}
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project.commonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project.coordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
return offset * project.focalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project.scale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project.scale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project.scale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project.scale;
}
`;function $H(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function Lu(t){let e={},n;return i=>{for(const r in i)if(!$H(i[r],e[r])){n=t(i),e=i;break}return n}}const zA=[0,0,0,0],jH=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],lO=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],HH=[0,0,0],cO=[0,0,0],WH=Lu(YH);function uO(t,e,n=cO){n.length<3&&(n=[n[0],n[1],0]);let i=n,r,s=!0;switch(e===$e.LNGLAT_OFFSETS||e===$e.METER_OFFSETS?r=n:r=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case wi.WEB_MERCATOR:(e===$e.LNGLAT||e===$e.CARTESIAN)&&(r=[0,0,0],s=!1);break;case wi.WEB_MERCATOR_AUTO_OFFSET:e===$e.LNGLAT?i=r:e===$e.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case wi.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case wi.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}function XH(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:s,viewProjectionMatrix:a}=t,c=zA,f=zA,h=t.cameraPosition;const{geospatialOrigin:p,shaderCoordinateOrigin:m,offsetMode:y}=uO(t,e,n);return y&&(f=t.projectPosition(p||m),h=[h[0]-f[0],h[1]-f[1],h[2]-f[2]],f[3]=1,c=gl([],f,a),s=i||s,a=ho([],r,s),a=ho([],a,jH)),{viewMatrix:s,viewProjectionMatrix:a,projectionCenter:c,originCommon:f,cameraPosCommon:h,shaderCoordinateOrigin:m,geospatialOrigin:p}}function qH({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=$e.DEFAULT,coordinateOrigin:r=cO,autoWrapLongitude:s=!1}){i===$e.DEFAULT&&(i=t.isGeospatial?$e.LNGLAT:$e.CARTESIAN);const a=WH({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return a.wrapLongitude=s,a.modelMatrix=n||lO,a}function YH({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:c,shaderCoordinateOrigin:f,geospatialOrigin:h}=XH(t,n,i),p=t.getDistanceScales(),m=[t.width*e,t.height*e],y=gl([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,b={coordinateSystem:n,projectionMode:t.projectionMode,coordinateOrigin:f,commonOrigin:a.slice(0,3),center:r,pseudoMeters:!!t._pseudoMeters,viewportSize:m,devicePixelRatio:e,focalDistance:y,commonUnitsPerMeter:p.unitsPerMeter,commonUnitsPerWorldUnit:p.unitsPerMeter,commonUnitsPerWorldUnit2:HH,scale:t.scale,wrapLongitude:!1,viewProjectionMatrix:s,modelMatrix:lO,cameraPosition:c};if(h){const v=t.getDistanceScales(h);switch(n){case $e.METER_OFFSETS:b.commonUnitsPerWorldUnit=v.unitsPerMeter,b.commonUnitsPerWorldUnit2=v.unitsPerMeter2;break;case $e.LNGLAT:case $e.LNGLAT_OFFSETS:t._pseudoMeters||(b.commonUnitsPerMeter=v.unitsPerMeter),b.commonUnitsPerWorldUnit=v.unitsPerDegree,b.commonUnitsPerWorldUnit2=v.unitsPerDegree2;break;case $e.CARTESIAN:b.commonUnitsPerWorldUnit=[1,1,v.unitsPerMeter[2]],b.commonUnitsPerWorldUnit2=[0,0,v.unitsPerMeter2[2]];break}}return b}const KH={};function ZH(t=KH){return"viewport"in t?qH(t):{}}const jb={name:"project",dependencies:[xj,tO],vs:VH,getUniforms:ZH,uniformTypes:{wrapLongitude:"f32",coordinateSystem:"i32",commonUnitsPerMeter:"vec3<f32>",projectionMode:"i32",scale:"f32",commonUnitsPerWorldUnit:"vec3<f32>",commonUnitsPerWorldUnit2:"vec3<f32>",center:"vec4<f32>",modelMatrix:"mat4x4<f32>",viewProjectionMatrix:"mat4x4<f32>",viewportSize:"vec2<f32>",devicePixelRatio:"f32",focalDistance:"f32",cameraPosition:"vec3<f32>",coordinateOrigin:"vec3<f32>",commonOrigin:"vec3<f32>",pseudoMeters:"f32"}},QH=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,ml={name:"project32",dependencies:[jb],vs:QH};function GH(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ya(t,e){const n=gl([],e,t);return $b(n,n,1/n[3]),n}function VA(t,e){const n=t%e;return n<0?e+n:n}function p0(t,e,n){return t<e?e:t>n?n:t}function JH(t){return Math.log(t)*Math.LOG2E}const Hb=Math.log2||JH;function Ir(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Ai=Math.PI,fO=Ai/4,fi=Ai/180,g0=180/Ai,sl=512,Od=4003e4,m0=85.051129,eW=1.5;function tW(t){return Hb(t)}function As(t){const[e,n]=t;Ir(Number.isFinite(e)),Ir(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=e*fi,r=n*fi,s=sl*(i+Ai)/(2*Ai),a=sl*(Ai+Math.log(Math.tan(fO+r*.5)))/(2*Ai);return[s,a]}function ol(t){const[e,n]=t,i=e/sl*(2*Ai)-Ai,r=2*(Math.atan(Math.exp(n/sl*(2*Ai)-Ai))-fO);return[i*g0,r*g0]}function nW(t){const{latitude:e}=t;Ir(Number.isFinite(e));const n=Math.cos(e*fi);return tW(Od*n)-9}function Uy(t){const e=Math.cos(t*fi);return sl/Od/e}function y0(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;Ir(Number.isFinite(e)&&Number.isFinite(n));const r=sl,s=Math.cos(e*fi),a=r/360,c=a/s,f=r/Od/s,h={unitsPerMeter:[f,f,f],metersPerUnit:[1/f,1/f,1/f],unitsPerDegree:[a,c,f],degreesPerUnit:[1/a,1/c,1/f]};if(i){const p=fi*Math.tan(e*fi)/s,m=a*p/2,y=r/Od*p,b=y/c*f;h.unitsPerDegree2=[0,m,y],h.unitsPerMeter2=[b,0,b]}return h}function hO(t,e){const[n,i,r]=t,[s,a,c]=e,{unitsPerMeter:f,unitsPerMeter2:h}=y0({longitude:n,latitude:i,highPrecision:!0}),p=As(t);p[0]+=s*(f[0]+h[0]*a),p[1]+=a*(f[1]+h[1]*a);const m=ol(p),y=(r||0)+(c||0);return Number.isFinite(r)||Number.isFinite(c)?[m[0],m[1],y]:m}function iW(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:s,center:a}=t,c=GH();Rd(c,c,[0,0,-r]),X3(c,c,-n*fi),q3(c,c,i*fi);const f=s/e;return Vb(c,c,[f,f,f]),a&&Rd(c,c,m9([],a)),c}function rW(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:s,center:a,scale:c,nearZMultiplier:f=1,farZMultiplier:h=1}=t;let{fovy:p=uu(eW)}=t;i!==void 0&&(p=uu(i));const m=p*fi,y=r*fi,b=Wb(p);let v=b;a&&(v+=a[2]*c/Math.cos(y)/n);const T=m*(.5+(s?s[1]:0)/n),S=Math.sin(T)*v/Math.sin(p0(Math.PI/2-y-T,.01,Math.PI-.01)),w=Math.sin(y)*S+v,C=v*10,A=Math.min(w*h,C);return{fov:m,aspect:e/n,focalDistance:b,near:f,far:A}}function uu(t){return 2*Math.atan(.5/t)*g0}function Wb(t){return .5/Math.tan(.5*t*fi)}function dO(t,e){const[n,i,r=0]=t;return Ir(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),Ya(e,[n,i,r,1])}function Xb(t,e,n=0){const[i,r,s]=t;if(Ir(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Ya(e,[i,r,s,1]);const a=Ya(e,[i,r,0,1]),c=Ya(e,[i,r,1,1]),f=a[2],h=c[2],p=f===h?0:((n||0)-f)/(h-f);return B3([],a,c,p)}function sW(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:s=24,offset:a=[0,0]}=t,[[c,f],[h,p]]=i,m=oW(t.padding),y=As([c,p0(p,-85.051129,m0)]),b=As([h,p0(f,-85.051129,m0)]),v=[Math.max(Math.abs(b[0]-y[0]),r),Math.max(Math.abs(b[1]-y[1]),r)],T=[e-m.left-m.right-Math.abs(a[0])*2,n-m.top-m.bottom-Math.abs(a[1])*2];Ir(T[0]>0&&T[1]>0);const S=T[0]/v[0],w=T[1]/v[1],C=(m.right-m.left)/2/S,A=(m.top-m.bottom)/2/w,O=[(b[0]+y[0])/2+C,(b[1]+y[1])/2+A],R=ol(O),D=Math.min(s,Hb(Math.abs(Math.min(S,w))));return Ir(Number.isFinite(D)),{longitude:R[0],latitude:R[1],zoom:D}}function oW(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Ir(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const $A=Math.PI/180;function aW(t,e=0){const{width:n,height:i,unproject:r}=t,s={targetZ:e},a=r([0,i],s),c=r([n,i],s);let f,h;const p=t.fovy?.5*t.fovy*$A:Math.atan(.5/t.altitude),m=(90-t.pitch)*$A;return p>m-.01?(f=jA(t,0,e),h=jA(t,n,e)):(f=r([0,0],s),h=r([n,0],s)),[a,c,h,f]}function jA(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=Ya(i,[e,0,1,1]),s=Ya(i,[e,t.height,1,1]),c=(n*t.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2]),f=B3([],r,s,c),h=ol(f);return h.push(n),h}const HA=512;function lW(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:s,zoom:a,bearing:c=0}=t;(r<-180||r>180)&&(r=VA(r+180,360)-180),(c<-180||c>180)&&(c=VA(c+180,360)-180);const f=Hb(n/HA);if(a<=f)a=f,s=0;else{const h=n/2/Math.pow(2,a),p=ol([0,h])[1];if(s<p)s=p;else{const m=ol([0,HA-h])[1];s>m&&(s=m)}}return{width:e,height:n,longitude:r,latitude:s,zoom:a,pitch:i,bearing:c}}const pO=`
uniform shadowUniforms {
  bool drawShadowMap;
  bool useShadowMap;
  vec4 color;
  highp int lightId;
  float lightCount;
  mat4 viewProjectionMatrix0;
  mat4 viewProjectionMatrix1;
  vec4 projectCenter0;
  vec4 projectCenter1;
} shadow;
`,cW=`
const int max_lights = 2;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  mat4 viewProjectionMatrices[max_lights];
  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;
  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;
  vec4 projectCenters[max_lights];
  projectCenters[0] = shadow.projectCenter0;
  projectCenters[1] = shadow.projectCenter1;

  if (shadow.drawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);
  }
  if (shadow.useShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow.lightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,uW=`
${pO}
${cW}
`,fW=`
const int max_lights = 2;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow.drawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow.useShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow.lightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow.color.a / shadow.lightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,hW=`
${pO}
${fW}
`,dW=Lu(_W),pW=Lu(bW),gW=[0,0,0,1],mW=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function yW(t,e){const[n,i,r]=t,s=Xb([n,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}function _W({viewport:t,center:e}){return new An(t.viewProjectionMatrix).invert().transform(e)}function bW({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,s=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(a=>yW(a,i));for(const a of e){const c=a.clone().translate(new _e(t.center).negate()),f=s.map(p=>c.transform(p)),h=new An().ortho({left:Math.min(...f.map(p=>p[0])),right:Math.max(...f.map(p=>p[0])),bottom:Math.min(...f.map(p=>p[1])),top:Math.max(...f.map(p=>p[1])),near:Math.min(...f.map(p=>-p[2])),far:Math.max(...f.map(p=>-p[2]))});n.push(h.multiplyRight(a))}return n}function vW(t){const{shadowEnabled:e=!0,project:n}=t;if(!e||!n||!t.shadowMatrices||!t.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const i=jb.getUniforms(n),r=dW({viewport:n.viewport,center:i.center}),s=[],a=pW({shadowMatrices:t.shadowMatrices,viewport:n.viewport}).slice();for(let f=0;f<t.shadowMatrices.length;f++){const h=a[f],p=h.clone().translate(new _e(n.viewport.center).negate());i.coordinateSystem===$e.LNGLAT&&i.projectionMode===wi.WEB_MERCATOR?(a[f]=p,s[f]=r):(a[f]=h.clone().multiplyRight(mW),s[f]=p.transform(r))}const c={drawShadowMap:!!t.drawToShadowMap,useShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,color:t.shadowColor||gW,lightId:t.shadowLightId||0,lightCount:t.shadowMatrices.length,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};for(let f=0;f<a.length;f++)c[`viewProjectionMatrix${f}`]=a[f],c[`projectCenter${f}`]=s[f];for(let f=0;f<2;f++)c[`shadow_uShadowMap${f}`]=t.shadowMaps&&t.shadowMaps[f]||t.dummyShadowMap;return c}const WA={name:"shadow",dependencies:[jb],vs:uW,fs:hW,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:vW,uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}},yl={...SA,defaultUniforms:{...SA.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},TW=[tO],SW=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function EW(){const t=_d.getDefaultShaderAssembler();for(const e of TW)t.addDefaultModule(e);for(const e of SW)t.addShaderHook(e);return t}const wW=[255,255,255],AW=1;let xW=0;class RW{constructor(e={}){this.type="ambient";const{color:n=wW}=e,{intensity:i=AW}=e;this.id=e.id||`ambient-${xW++}`,this.color=n,this.intensity=i}}const CW=[255,255,255],OW=1,MW=[0,0,-1];let PW=0;class XA{constructor(e={}){this.type="directional";const{color:n=CW}=e,{intensity:i=OW}=e,{direction:r=MW}=e,{_shadow:s=!1}=e;this.id=e.id||`directional-${PW++}`,this.color=n,this.intensity=i,this.type="directional",this.direction=new _e(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class NW{constructor(e,n={id:"pass"}){const{id:i}=n;this.id=i,this.device=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class qb extends NW{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[n,i]=this.device.canvasContext.getDrawingBufferSize(),r=e.clearCanvas??!0,s=e.clearColor??(r?[0,0,0,0]:!1),a=r?1:!1,c=r?0:!1,f=e.colorMask??15,h={viewport:[0,0,n,i]};e.colorMask&&(h.colorMask=f),e.scissorRect&&(h.scissorRect=e.scissorRect);const p=this.device.beginRenderPass({framebuffer:e.target,parameters:h,clearColor:s,clearDepth:a,clearStencil:c});try{return this._drawLayers(p,e)}finally{p.end()}}_drawLayers(e,n){const{target:i,shaderModuleProps:r,viewports:s,views:a,onViewportActive:c,clearStack:f=!0}=n;n.pass=n.pass||"unknown",f&&(this._lastRenderIndex=-1);const h=[];for(const p of s){const m=a&&a[p.id];c==null||c(p);const y=this._getDrawLayerParams(p,n),b=p.subViewports||[p];for(const v of b){const T=this._drawLayersInViewport(e,{target:i,shaderModuleProps:r,viewport:v,view:m,pass:n.pass,layers:n.layers},y);h.push(T)}}return h}_getDrawLayerParams(e,{layers:n,pass:i,isPicking:r=!1,layerFilter:s,cullRect:a,effects:c,shaderModuleProps:f},h=!1){var v;const p=[],m=gO(this._lastRenderIndex+1),y={layer:n[0],viewport:e,isPicking:r,renderPass:i,cullRect:a},b={};for(let T=0;T<n.length;T++){const S=n[T],w=this._shouldDrawLayer(S,y,s,b),C={shouldDrawLayer:w};w&&!h&&(C.shouldDrawLayer=!0,C.layerRenderIndex=m(S,w),C.shaderModuleProps=this._getShaderModuleProps(S,c,i,f),C.layerParameters={...(v=S.context.deck)==null?void 0:v.props.parameters,...this.getLayerParameters(S,T,e)}),p[T]=C}return p}_drawLayersInViewport(e,{layers:n,shaderModuleProps:i,pass:r,target:s,viewport:a,view:c},f){const h=kW(this.device,{shaderModuleProps:i,target:s,viewport:a});if(c&&c.props.clear){const m=c.props.clear===!0?{color:!0,depth:!0}:c.props.clear;this.device.beginRenderPass({framebuffer:s,parameters:{viewport:h,scissorRect:h},clearColor:m.color?[0,0,0,0]:!1,clearDepth:m.depth?1:!1}).end()}const p={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:h});for(let m=0;m<n.length;m++){const y=n[m],b=f[m],{shouldDrawLayer:v}=b;if(v&&y.props.pickable&&p.pickableCount++,y.isComposite&&p.compositeCount++,y.isDrawable&&b.shouldDrawLayer){const{layerRenderIndex:T,shaderModuleProps:S,layerParameters:w}=b;p.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,T),S.project&&(S.project.viewport=a),y.context.renderPass=e;try{y._drawLayer({renderPass:e,shaderModuleProps:S,uniforms:{layerIndex:T},parameters:w})}catch(C){y.raiseError(C,`drawing ${y} to ${r}`)}}}return p}shouldDrawLayer(e){return!0}getShaderModuleProps(e,n,i){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let a=e.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(n))return!1;n.layer=a,a=a.parent}if(i){const c=n.layer.id;if(c in r||(r[c]=i(n)),!r[c])return!1}return e.activateViewport(n.viewport),!0}_getShaderModuleProps(e,n,i,r){var f,h;const s=this.device.canvasContext.cssToDeviceRatio(),a=((f=e.internalState)==null?void 0:f.propsInTransition)||e.props,c={layer:a,picking:{isActive:!1},project:{viewport:e.context.viewport,devicePixelRatio:s,modelMatrix:a.modelMatrix,coordinateSystem:a.coordinateSystem,coordinateOrigin:a.coordinateOrigin,autoWrapLongitude:e.wrapLongitude}};if(n)for(const p of n)qA(c,(h=p.getShaderModuleProps)==null?void 0:h.call(p,e,c));return qA(c,this.getShaderModuleProps(e,n,c),r)}}function gO(t=0,e={}){const n={},i=(r,s)=>{const a=r.props._offset,c=r.id,f=r.parent&&r.parent.id;let h;if(f&&!(f in e)&&i(r.parent,!1),f in n){const p=n[f]=n[f]||gO(e[f],e);h=p(r,s),n[c]=p}else Number.isFinite(a)?(h=a+(e[f]||0),n[c]=null):h=t;return s&&h>=t&&(t=h+1),e[c]=h,h};return i}function kW(t,{shaderModuleProps:e,target:n,viewport:i}){var f;const r=((f=e==null?void 0:e.project)==null?void 0:f.devicePixelRatio)??t.canvasContext.cssToDeviceRatio(),[,s]=t.canvasContext.getDrawingBufferSize(),a=n?n.height:s,c=i;return[c.x*r,a-(c.y+c.height)*r,c.width*r,c.height*r]}function qA(t,...e){for(const n of e)if(n)for(const i in n)t[i]?Object.assign(t[i],n[i]):t[i]=n[i];return t}class IW extends qb{constructor(e,n){super(e,n);const i=e.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},mipmaps:!0}),r=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1});this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[i],depthStencilAttachment:r})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(e){const n=this.fbo,i=this.device.canvasContext.cssToDeviceRatio(),r=e.viewports[0],s=r.width*i,a=r.height*i,c=[1,1,1,1];(s!==n.width||a!==n.height)&&n.resize({width:s,height:a}),super.render({...e,clearColor:c,target:n,pass:"shadow"})}getLayerParameters(e,n,i){return{...e.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getShaderModuleProps(e,n,i){return{shadow:{project:i.project,drawToShadowMap:!0}}}}const DW={color:[255,255,255],intensity:1},YA=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],BW=[0,0,0,200/255];class mO{constructor(e={}){this.id="lighting-effect",this.shadowColor=BW,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:n,deck:i}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(n),i._addDefaultShaderModule(WA),this.dummyShadowMap=n.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:n,viewports:i,onViewportActive:r,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:e,layerFilter:n,viewports:i,onViewportActive:r,views:s,shaderModuleProps:{shadow:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(e,n){const i=this.shadow?{project:n.project,shadowMaps:this.shadowPasses.map(a=>a.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},r={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(a=>a.getProjectedLight({layer:e})),pointLights:this.pointLights.map(a=>a.getProjectedLight({layer:e}))},s=e.props.material;return{shadow:i,lighting:r,phongMaterial:s,gouraudMaterial:s}}cleanup(e){for(const n of this.shadowPasses)n.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(WA))}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=new An().lookAt({eye:new _e(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new IW(e);this.shadowPasses[n]=i}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&n.length===0&&i.length===0&&(this.ambientLight=new RW(DW),this.directionalLights.push(new XA(YA[0]),new XA(YA[1])))}}class LW{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:s=0,copy:a=!1,initialize:c=!1,maxCount:f}){const h=r||e&&e.constructor||Float32Array,p=n*i+s;if(ArrayBuffer.isView(e)){if(p<=e.length)return e;if(p*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new h(e.buffer,0,p)}let m=1/0;f&&(m=f*i+s);const y=this._allocate(h,p,c,m);return e&&a?y.set(e):c||y.fill(0,0,4),this._release(e),y}release(e){this._release(e)}_allocate(e,n,i,r){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>r&&(s=r);const a=this._pool,c=e.BYTES_PER_ELEMENT*s,f=a.findIndex(h=>h.byteLength>=c);if(f>=0){const h=new e(a.splice(f,1)[0],0,s);return i&&h.fill(0),h}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,s=n.findIndex(a=>a.byteLength>=r);s<0?n.push(i):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,i),n.length>this.opts.poolSize&&n.shift()}}const al=new LW;function Ic(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function UW(t){return[t[12],t[13],t[14]]}function FW(t){return{left:Ra(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Ra(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Ra(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Ra(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Ra(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Ra(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const KA=new _e;function Ra(t,e,n,i){KA.set(t,e,n);const r=KA.len();return{distance:i/r,normal:new _e(-t/r,-e/r,-n/r)}}function zW(t){return t-Math.fround(t)}let wc;function Fy(t,e){const{size:n=1,startIndex:i=0}=e,r=e.endIndex!==void 0?e.endIndex:t.length,s=(r-i)/n;wc=al.allocate(wc,s,{type:Float32Array,size:n*2});let a=i,c=0;for(;a<r;){for(let f=0;f<n;f++){const h=t[a++];wc[c+f]=h,wc[c+f+n]=zW(h)}c+=n*2}return wc.subarray(0,s*n*2)}function VW(t){let e=null,n=!1;for(const i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}const $W=Math.PI/180,jW=Ic(),ZA=[0,0,0],HW={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function WW({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:s,near:a,far:c}){const f=t/e,h=n?new An().orthographic({fovy:i,aspect:f,focalDistance:r,near:a,far:c}):new An().perspective({fovy:i,aspect:f,near:a,far:c});if(s){const{left:p=0,right:m=0,top:y=0,bottom:b=0}=s,v=ms((p+t-m)/2,0,t)-t/2,T=ms((y+e-b)/2,0,e)-e/2;h[8]-=v*2/t,h[9]+=T*2/e}return h}class _l{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||HW,this.focalDistance=e.focalDistance||1,this.position=e.position||ZA,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?wi.WEB_MERCATOR:wi.WEB_MERCATOR_AUTO_OFFSET:wi.IDENTITY}equals(e){return e instanceof _l?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Or(e.projectionMatrix,this.projectionMatrix)&&Or(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const i=this.projectPosition(e),r=dO(i,this.pixelProjectionMatrix),[s,a]=r,c=n?a:this.height-a;return e.length===2?[s,c]:[s,c,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,s,a]=e,c=n?s:this.height-s,f=i&&i*this.distanceScales.unitsPerMeter[2],h=Xb([r,c,a],this.pixelUnprojectionMatrix,f),[p,m,y]=this.unprojectPosition(h);return Number.isFinite(a)?[p,m,y]:Number.isFinite(i)?[p,m,i]:[p,m]}projectPosition(e){const[n,i]=this.projectFlat(e),r=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,i,r]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e),r=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,i,r]}projectFlat(e){if(this.isGeospatial){const n=As(e);return n[1]=ms(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?ol(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),a=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],s[0],a[0]),Math.min(i[1],r[1],s[1],a[1]),Math.max(i[0],r[0],s[0],a[0]),Math.max(i[1],r[1],s[1],a[1])]}getDistanceScales(e){return e&&this.isGeospatial?y0({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,FW(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=nW({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||y0({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:a}=e;let c=ZA;if(s&&(c=a?new An(a).transformAsVector(s,[]):s),this.isGeospatial){const f=this.projectPosition([n,i,0]);this.center=new _e(c).scale(this.distanceScales.unitsPerMeter).add(f)}else this.center=this.projectPosition(c)}_initMatrices(e){const{viewMatrix:n=jW,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:a=75,near:c=.1,far:f=1e3,padding:h=null,focalDistance:p=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new An().multiplyRight(n).translate(new _e(this.center).negate()),this.projectionMatrix=i||WW({width:this.width,height:this.height,orthographic:r,fovyRadians:s||a*$W,focalDistance:p,padding:h,near:c,far:f});const m=Ic();ho(m,m,this.projectionMatrix),ho(m,m,this.viewMatrix),this.viewProjectionMatrix=m,this.viewMatrixInverse=a0([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=UW(this.viewMatrixInverse);const y=Ic(),b=Ic();Vb(y,y,[this.width/2,-this.height/2,1]),Rd(y,y,[1,-1,0]),ho(b,y,this.viewProjectionMatrix),this.pixelProjectionMatrix=b,this.pixelUnprojectionMatrix=a0(Ic(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ue.warn("Pixel project matrix not invertible")()}}_l.displayName="Viewport";class xs extends _l{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:a=0,nearZMultiplier:c=.1,farZMultiplier:f=1.01,nearZ:h,farZ:p,orthographic:m=!1,projectionMatrix:y,repeat:b=!1,worldOffset:v=0,position:T,padding:S,legacyMeterSizes:w=!1}=e;let{width:C,height:A,altitude:O=1.5}=e;const R=Math.pow(2,r);C=C||1,A=A||1;let D,z=null;if(y)O=y[5]/2,D=uu(O);else{e.fovy?(D=e.fovy,O=Wb(D)):D=uu(O);let V;if(S){const{top:x=0,bottom:H=0}=S;V=[0,ms((x+A-H)/2,0,A)-A/2]}z=rW({width:C,height:A,scale:R,center:T&&[0,0,T[2]*Uy(n)],offset:V,pitch:s,fovy:D,nearZMultiplier:c,farZMultiplier:f}),Number.isFinite(h)&&(z.near=h),Number.isFinite(p)&&(z.far=p)}let j=iW({height:A,pitch:s,bearing:a,scale:R,altitude:O});v&&(j=new An().translate([512*v,0,0]).multiplyLeft(j)),super({...e,width:C,height:A,viewMatrix:j,longitude:i,latitude:n,zoom:r,...z,fovy:D,focalDistance:O}),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=a,this.altitude=O,this.fovy=D,this.orthographic=m,this._subViewports=b?[]:null,this._pseudoMeters=w,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const s=r?new xs({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e),r=(e[2]||0)*Uy(e[1]);return[n,i,r]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e),r=(e[2]||0)/Uy(i);return[n,i,r]}addMetersToLngLat(e,n){return hO(e,n)}panByPosition(e,n){const i=Xb(n,this.pixelUnprojectionMatrix),r=this.projectFlat(e),s=pA([],r,a9([],i)),a=pA([],this.center,s),[c,f]=this.unprojectFlat(a);return{longitude:c,latitude:f}}getBounds(e={}){const n=aW(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:s,latitude:a,zoom:c}=sW({width:i,height:r,bounds:e,...n});return new xs({width:i,height:r,longitude:s,latitude:a,zoom:c})}}xs.displayName="WebMercatorViewport";const QA=[0,0,0];function zy(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof xs){const[r,s,a=0]=t,c=e.getDistanceScales([r,s]);i[2]=a*c.unitsPerMeter[2]}return i}function XW(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:a}=t;return r===$e.DEFAULT&&(r=e.isGeospatial?$e.LNGLAT:$e.CARTESIAN),s===void 0&&(s=r),a===void 0&&(a=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:a}}function yO(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[a,c,f=0]=t;switch(n&&([a,c,f]=gl([],[a,c,f,1],n)),i){case $e.LNGLAT:return zy([a,c,f],e,s);case $e.LNGLAT_OFFSETS:return zy([a+r[0],c+r[1],f+(r[2]||0)],e,s);case $e.METER_OFFSETS:return zy(hO(r,[a,c,f]),e,s);case $e.CARTESIAN:default:return e.isGeospatial?[a+r[0],c+r[1],f+r[2]]:e.projectPosition([a,c,f])}}function qW(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:a,fromCoordinateOrigin:c}=XW(e),{autoOffset:f=!0}=e,{geospatialOrigin:h=QA,shaderCoordinateOrigin:p=QA,offsetMode:m=!1}=f?uO(n,i,r):{},y=yO(t,{viewport:n,modelMatrix:s,coordinateSystem:a,coordinateOrigin:c,offsetMode:m});if(m){const b=n.projectPosition(h||p);j3(y,y,b)}return y}let YW=1,KW=1;class _O{constructor(){M(this,"time",0);M(this,"channels",new Map);M(this,"animations",new Map);M(this,"playing",!1);M(this,"lastEngineTime",-1)}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,a=YW++,c={time:0,delay:n,duration:i,rate:r,repeat:s};return this._setChannelTime(c,this.time),this.channels.set(a,c),a}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:a}=r;s.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=KW++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay,r=e.duration*e.repeat;i>=r?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}function ZW(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function QW(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}let GW=0;const JW={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:K_.stats.get(`animation-loop-${GW++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class eX{constructor(e){M(this,"device",null);M(this,"canvas",null);M(this,"props");M(this,"animationProps",null);M(this,"timeline",null);M(this,"stats");M(this,"cpuTime");M(this,"gpuTime");M(this,"frameRate");M(this,"display");M(this,"needsRedraw","initialized");M(this,"_initialized",!1);M(this,"_running",!1);M(this,"_animationFrameId",null);M(this,"_nextFramePromise",null);M(this,"_resolveNextFrame",null);M(this,"_cpuStartTime",0);M(this,"_error",null);if(this.props={...JW,...e},e=this.props,!e.device)throw new Error("No device provided");const{useDevicePixels:n=!0}=this.props;this.stats=e.stats||new Iu({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:n}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(e){var i,r;if(this.props.onError(e),this._error=Error(),((r=(i=this.device)==null?void 0:i.canvasContext)==null?void 0:r.canvas)instanceof HTMLCanvasElement){const s=document.createElement("h1");s.innerHTML=e.message,s.style.position="absolute",s.style.top="20%",s.style.left="10px",s.style.color="black",s.style.backgroundColor="red",document.body.appendChild(s)}}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const n=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(n),n}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return(e=this.device)!=null&&e.isLost||this._error?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=ZW(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(QW(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){var n;if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),(n=this.device)==null||n.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var n,i;const e=(i=(n=this.device)==null?void 0:n.canvasContext)==null?void 0:i.canvas;if(!this.device||!e)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:e,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var e;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((e=this.device.canvasContext)==null?void 0:e.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){var s,a,c,f;if(!this.device)return{width:1,height:1,aspect:1};const[e,n]=((a=(s=this.device)==null?void 0:s.canvasContext)==null?void 0:a.getPixelSize())||[1,1];let i=1;const r=(f=(c=this.device)==null?void 0:c.canvasContext)==null?void 0:f.canvas;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var e,n;this.props.autoResizeDrawingBuffer&&((n=(e=this.device)==null?void 0:e.canvasContext)==null||n.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}const Vy={};function Np(t="id"){Vy[t]=Vy[t]||1;const e=Vy[t]++;return`${t}-${e}`}class GA{constructor(e){M(this,"id");M(this,"userData",{});M(this,"topology");M(this,"bufferLayout",[]);M(this,"vertexCount");M(this,"indices");M(this,"attributes");if(this.id=e.id||Np("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&Nt.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){var e;(e=this.indices)==null||e.destroy();for(const n of Object.values(this.attributes))n.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}}function tX(t,e){if(e instanceof GA)return e;const n=nX(t,e),{attributes:i,bufferLayout:r}=iX(t,e);return new GA({topology:e.topology||"triangle-list",bufferLayout:r,vertexCount:e.vertexCount,indices:n,attributes:i})}function nX(t,e){if(!e.indices)return;const n=e.indices.value;return t.createBuffer({usage:Nt.INDEX,data:n})}function iX(t,e){const n=[],i={};for(const[s,a]of Object.entries(e.attributes)){let c=s;switch(s){case"POSITION":c="positions";break;case"NORMAL":c="normals";break;case"TEXCOORD_0":c="texCoords";break;case"COLOR_0":c="colors";break}if(a){i[c]=t.createBuffer({data:a.value,id:`${s}-buffer`});const{value:f,size:h,normalized:p}=a;n.push({name:c,format:p7(f,h,p)})}}const r=e._calculateVertexCount(e.attributes,e.indices);return{attributes:i,bufferLayout:n,vertexCount:r}}const Jd=class Jd{constructor(e){M(this,"device");M(this,"destroyPolicy");M(this,"_hashCounter",0);M(this,"_hashes",{});M(this,"_renderPipelineCache",{});M(this,"_computePipelineCache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new Jd(e),e._lumaData.defaultPipelineFactory}createRenderPipeline(e){const n={...il.defaultProps,...e},i=this._hashRenderPipeline(n);if(!this._renderPipelineCache[i]){const r=this.device.createRenderPipeline({...n,id:n.id?`${n.id}-cached`:void 0});r.hash=i,this._renderPipelineCache[i]={pipeline:r,useCount:0}}return this._renderPipelineCache[i].useCount++,this._renderPipelineCache[i].pipeline}createComputePipeline(e){const n={...Ed.defaultProps,...e},i=this._hashComputePipeline(n);if(!this._computePipelineCache[i]){const r=this.device.createComputePipeline({...n,id:n.id?`${n.id}-cached`:void 0});r.hash=i,this._computePipelineCache[i]={pipeline:r,useCount:0}}return this._computePipelineCache[i].useCount++,this._computePipelineCache[i].pipeline}release(e){const n=e.hash,i=e instanceof Ed?this._computePipelineCache:this._renderPipelineCache;i[n].useCount--,i[n].useCount===0&&this.destroyPolicy==="unused"&&(i[n].pipeline.destroy(),delete i[n])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const n=e.vs?this._getHash(e.vs.source):0,i=e.fs?this._getHash(e.fs.source):0,r="-",s=this._getHash(JSON.stringify(e.bufferLayout));switch(this.device.type){case"webgl":return`${n}/${i}V${r}BL${s}`;default:const a=this._getHash(JSON.stringify(e.parameters));return`${n}/${i}V${r}T${e.topology}P${a}BL${s}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};M(Jd,"defaultProps",{...il.defaultProps});let _0=Jd;const ep=class ep{constructor(e){M(this,"device");M(this,"destroyPolicy");M(this,"_cache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultShaderFactory(e){var n;return(n=e._lumaData).defaultShaderFactory||(n.defaultShaderFactory=new ep(e)),e._lumaData.defaultShaderFactory}createShader(e){const n=this._hashShader(e);let i=this._cache[n];if(!i){const r=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[n]=i={shader:r,useCount:0}}return i.useCount++,i.shader}release(e){const n=this._hashShader(e),i=this._cache[n];i&&(i.useCount--,i.useCount===0&&this.destroyPolicy==="unused"&&(delete this._cache[n],i.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}};M(ep,"defaultProps",{...vd.defaultProps});let b0=ep;function rX(t,e){var r;const n={},i="Values";if(t.attributes.length===0&&!((r=t.varyings)!=null&&r.length))return{"No attributes or varyings":{[i]:"N/A"}};for(const s of t.attributes)if(s){const a=`${s.location} ${s.name}: ${s.type}`;n[`in ${a}`]={[i]:s.stepMode||"vertex"}}for(const s of t.varyings||[]){const a=`${s.location} ${s.name}`;n[`out ${a}`]={[i]:JSON.stringify(s)}}return n}let Jt=null,Zs=null;function sX(t,{id:e,minimap:n,opaque:i,top:r="0",left:s="0",rgbaScale:a=1}){Jt||(Jt=document.createElement("canvas"),Jt.id=e,Jt.title=e,Jt.style.zIndex="100",Jt.style.position="absolute",Jt.style.top=r,Jt.style.left=s,Jt.style.border="blue 5px solid",Jt.style.transform="scaleY(-1)",document.body.appendChild(Jt),Zs=Jt.getContext("2d")),(Jt.width!==t.width||Jt.height!==t.height)&&(Jt.width=t.width/2,Jt.height=t.height/2,Jt.style.width="400px",Jt.style.height="400px");const c=t.device.readPixelsToArrayWebGL(t),f=Zs==null?void 0:Zs.createImageData(t.width,t.height);if(f){for(let p=0;p<c.length;p+=4)f.data[0+p+0]=c[p+0]*a,f.data[0+p+1]=c[p+1]*a,f.data[0+p+2]=c[p+2]*a,f.data[0+p+3]=i?255:c[p+3]*a;Zs==null||Zs.putImageData(f,0,0)}}function v0(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!v0(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const s of i)if(!e.hasOwnProperty(s)||!v0(t[s],e[s],n-1))return!1;return!0}return!1}function oX(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function aX(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":!1}function bO(t){return oX(t)||aX(t)}function lX(t){return bO(t)||typeof t=="number"||typeof t=="boolean"}function vO(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const i=t[n];lX(i)?e.uniforms[n]=i:e.bindings[n]=i}),e}class cX{constructor(e,n){M(this,"options",{disableWarnings:!1});M(this,"modules");M(this,"moduleUniforms");M(this,"moduleBindings");Object.assign(this.options,n);const i=Bb(Object.values(e).filter(r=>r.dependencies));for(const r of i)e[r.name]=r;ge.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[r,s]of Object.entries(e))this._addModule(s),s.name&&r!==s.name&&!this.options.disableWarnings&&ge.warn(`Module name: ${r} vs ${s.name}`)()}destroy(){}setProps(e){var n;for(const i of Object.keys(e)){const r=i,s=e[r]||{},a=this.modules[r];if(!a){this.options.disableWarnings||ge.warn(`Module ${i} not found`)();continue}const c=this.moduleUniforms[r],f=this.moduleBindings[r],h=((n=a.getUniforms)==null?void 0:n.call(a,s,c))||s,{uniforms:p,bindings:m}=vO(h);this.moduleUniforms[r]={...c,...p},this.moduleBindings[r]={...f,...m}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const e={};for(const n of Object.values(this.moduleBindings))Object.assign(e,n);return e}getDebugTable(){var n;const e={};for(const[i,r]of Object.entries(this.moduleUniforms))for(const[s,a]of Object.entries(r))e[`${i}.${s}`]={type:(n=this.modules[i].uniformTypes)==null?void 0:n[s],value:String(a)};return e}_addModule(e){const n=e.name;this.moduleUniforms[n]=e.defaultUniforms||{},this.moduleBindings[n]={}}}let uX="";async function fX(t,e){const n=new Image;return n.crossOrigin="anonymous",n.src=t.startsWith("http")?t:uX+t,await n.decode(),e?await createImageBitmap(n,e):await createImageBitmap(n)}class $y{constructor(e,n){M(this,"device");M(this,"id");M(this,"texture");M(this,"sampler");M(this,"view");M(this,"ready");M(this,"isReady",!1);M(this,"destroyed",!1);M(this,"resolveReady",()=>{});M(this,"rejectReady",()=>{});this.device=e,this.id=n.id||Np("async-texture"),typeof(n==null?void 0:n.data)=="string"&&n.dimension==="2d"&&(n={...n,data:fX(n.data)}),this.ready=new Promise((i,r)=>{this.resolveReady=()=>{this.isReady=!0,i()},this.rejectReady=r}),this.initAsync(n)}get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}async initAsync(e){let n,i;const r=e.data,s=await TO(r).then(n,i);if(this.destroyed)return;const a={...e,data:s};this.texture=this.device.createTexture(a),this.sampler=this.texture.sampler,this.view=this.texture.view,this.isReady=!0}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}resize(e){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){const n=this.texture;this.texture=n.clone(e),n.destroy()}return!0}}async function TO(t){if(t=await t,Array.isArray(t))return await Promise.all(t.map(TO));if(t&&typeof t=="object"&&t.constructor===Object){const e=t,n=await Promise.all(Object.values(e)),i=Object.keys(e),r={};for(let s=0;s<i.length;s++)r[i[s]]=n[s];return r}return t}const Qs=2,hX=1e4,tp=class tp{constructor(e,n){M(this,"device");M(this,"id");M(this,"source");M(this,"vs");M(this,"fs");M(this,"pipelineFactory");M(this,"shaderFactory");M(this,"userData",{});M(this,"parameters");M(this,"topology");M(this,"bufferLayout");M(this,"isInstanced");M(this,"instanceCount",0);M(this,"vertexCount");M(this,"indexBuffer",null);M(this,"bufferAttributes",{});M(this,"constantAttributes",{});M(this,"bindings",{});M(this,"uniforms",{});M(this,"vertexArray");M(this,"transformFeedback",null);M(this,"pipeline");M(this,"shaderInputs");M(this,"_uniformStore");M(this,"_attributeInfos",{});M(this,"_gpuGeometry",null);M(this,"_getModuleUniforms");M(this,"props");M(this,"_pipelineNeedsUpdate","newly created");M(this,"_needsRedraw","initializing");M(this,"_destroyed",!1);M(this,"_lastDrawTimestamp",-1);M(this,"_lastLogTime",0);M(this,"_logOpen",!1);M(this,"_drawCount",0);var f,h,p,m;this.props={...tp.defaultProps,...n},n=this.props,this.id=n.id||Np("model"),this.device=e,Object.assign(this.userData,n.userData);const i=Object.fromEntries(((f=this.props.modules)==null?void 0:f.map(y=>[y.name,y]))||[]),r=n.shaderInputs||new cX(i,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(r);const s=pX(e),a=(((h=this.props.modules)==null?void 0:h.length)>0?this.props.modules:(p=this.shaderInputs)==null?void 0:p.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){(m=this.props).shaderLayout||(m.shaderLayout=G7(this.props.source));const{source:y,getUniforms:b}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:s,...this.props,modules:a});this.source=y,this._getModuleUniforms=b}else{const{vs:y,fs:b,getUniforms:v}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:s,...this.props,modules:a});this.vs=y,this.fs=b,this._getModuleUniforms=v}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,n.geometry&&this.setGeometry(n.geometry),this.pipelineFactory=n.pipelineFactory||_0.getDefaultPipelineFactory(this.device),this.shaderFactory=n.shaderFactory||b0.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in n&&(this.isInstanced=n.isInstanced),n.instanceCount&&this.setInstanceCount(n.instanceCount),n.vertexCount&&this.setVertexCount(n.vertexCount),n.indexBuffer&&this.setIndexBuffer(n.indexBuffer),n.attributes&&this.setAttributes(n.attributes),n.constantAttributes&&this.setConstantAttributes(n.constantAttributes),n.bindings&&this.setBindings(n.bindings),n.uniforms&&this.setUniformsWebGL(n.uniforms),n.moduleSettings&&this.updateModuleSettingsWebGL(n.moduleSettings),n.transformFeedback&&(this.transformFeedback=n.transformFeedback),Object.seal(this)}get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(e=this._gpuGeometry)==null||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){const n=this._areBindingsLoading();if(n)return ge.info(Qs,`>>> DRAWING ABORTED ${this.id}: ${n} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let i;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const r=this._getBindings();this.pipeline.setBindings(r,{disableWarnings:this.props.disableWarnings}),T0(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:s}=this.vertexArray,a=s?s.byteLength/(s.indexType==="uint32"?4:2):void 0;i=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:a,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),i?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",i}setGeometry(e){var i;(i=this._gpuGeometry)==null||i.destroy();const n=e&&tX(this.device,e);if(n){this.setTopology(n.topology||"triangle-list");const r=new Oy(this.bufferLayout);this.bufferLayout=r.mergeBufferLayouts(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)}this._gpuGeometry=n}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){const n=new Oy(this.bufferLayout);this.bufferLayout=this._gpuGeometry?n.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){v0(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new d7(this.shaderInputs.modules);for(const[n,i]of Object.entries(this.shaderInputs.modules))if(dX(i)){const r=this._uniformStore.getManagedUniformBuffer(this.device,n);this.bindings[`${n}Uniforms`]=r}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,n){const i=(n==null?void 0:n.disableWarnings)??this.props.disableWarnings;e.indices&&ge.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();const r=new Oy(this.bufferLayout);for(const[s,a]of Object.entries(e)){const c=r.getBufferLayout(s);if(!c){i||ge.warn(`Model(${this.id}): Missing layout for buffer "${s}".`)();continue}const f=r.getAttributeNamesForBuffer(c);let h=!1;for(const p of f){const m=this._attributeInfos[p];m&&(this.vertexArray.setBuffer(m.location,a),h=!0)}!h&&!i&&ge.warn(`Model(${this.id}): Ignoring buffer "${a.id}" for unknown attribute "${s}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,n){for(const[i,r]of Object.entries(e)){const s=this._attributeInfos[i];s?this.vertexArray.setConstantWebGL(s.location,r):((n==null?void 0:n.disableWarnings)??this.props.disableWarnings)||ge.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${i}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){this.setUniformsWebGL(e)}setUniformsWebGL(e){T0(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettingsWebGL(e){const{bindings:n,uniforms:i}=vO(this._getModuleUniforms(e));Object.assign(this.bindings,n),Object.assign(this.uniforms,i),this.setNeedsRedraw("moduleSettings")}_areBindingsLoading(){for(const e of Object.values(this.bindings))if(e instanceof $y&&!e.isReady)return e.id;return!1}_getBindings(){const e={};for(const[n,i]of Object.entries(this.bindings))i instanceof $y?i.isReady&&(e[n]=i.texture):e[n]=i;return e}_getBindingsUpdateTimestamp(){let e=0;for(const n of Object.values(this.bindings))n instanceof bd?e=Math.max(e,n.texture.updateTimestamp):n instanceof Nt||n instanceof Pt?e=Math.max(e,n.updateTimestamp):n instanceof $y?e=n.texture?Math.max(e,n.texture.updateTimestamp):1/0:n instanceof Td||(e=Math.max(e,n.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const n={...e.attributes};for(const[i]of Object.entries(n))!this.pipeline.shaderLayout.attributes.find(r=>r.name===i)&&i!=="positions"&&delete n[i];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(n,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,n=null;this.pipeline&&(ge.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,n=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const i=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let r=null;this.source?r=i:this.fs&&(r=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:i,fs:r}),this._attributeInfos=E3(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),n&&this.shaderFactory.release(n)}return this.pipeline}_logDrawCallStart(){const e=ge.level>3?0:hX;ge.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,ge.group(Qs,`>>> DRAWING MODEL ${this.id}`,{collapsed:ge.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=rX(this.pipeline.shaderLayout,this.id);ge.table(Qs,e)();const n=this.shaderInputs.getDebugTable();for(const[r,s]of Object.entries(this.uniforms))n[r]={value:s};ge.table(Qs,n)();const i=this._getAttributeDebugTable();ge.table(Qs,this._attributeInfos)(),ge.table(Qs,i)(),ge.groupEnd(Qs)(),this._logOpen=!1}}_logFramebuffer(e){const n=this.device.props.debugFramebuffers;if(this._drawCount++,!n)return;const i=e.props.framebuffer;i&&sX(i,{id:i.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[n,i]of Object.entries(this._attributeInfos)){const r=this.vertexArray.attributes[i.location];e[i.location]={name:n,type:i.shaderType,values:r?this._getBufferOrConstantValues(r,i.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:n}=this.vertexArray,i=n.indexType==="uint32"?new Uint32Array(n.debugData):new Uint16Array(n.debugData);e.indices={name:"indices",type:n.indexType,values:i.toString()}}return e}_getBufferOrConstantValues(e,n){const i=x3(n);return(e instanceof Nt?new i(e.debugData):e).toString()}};M(tp,"defaultProps",{...il.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:_d.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let hi=tp;function dX(t){return!!(t.uniformTypes&&!T0(t.uniformTypes))}function pX(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function T0(t){for(const e in t)return!1;return!0}const Zc=class Zc{constructor(e,n=Zc.defaultProps){M(this,"device");M(this,"model");M(this,"transformFeedback");if(!Zc.isSupported(e))throw new Error("BufferTransform not yet implemented on WebGPU");this.device=e,this.model=new hi(this.device,{id:n.id||"buffer-transform-model",fs:n.fs||m$(),topology:n.topology||"point-list",varyings:n.outputs||n.varyings,...n}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:n.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){var n;return((n=e==null?void 0:e.info)==null?void 0:n.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){e!=null&&e.inputBuffers&&this.model.setAttributes(e.inputBuffers),e!=null&&e.outputBuffers&&this.transformFeedback.setBuffers(e.outputBuffers);const n=this.device.beginRenderPass(e);this.model.draw(n),n.end()}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const n=this.getBuffer(e);if(!n)throw new Error("BufferTransform#getBuffer");if(n instanceof Nt)return n.readAsync();const{buffer:i,byteOffset:r=0,byteLength:s=i.byteLength}=n;return i.readAsync(r,s)}};M(Zc,"defaultProps",{...hi.defaultProps,outputs:void 0,feedbackBuffers:void 0});let fu=Zc;class ll{constructor(e){M(this,"id");M(this,"topology");M(this,"vertexCount");M(this,"indices");M(this,"attributes");M(this,"userData",{});const{attributes:n={},indices:i=null,vertexCount:r=null}=e;this.id=e.id||Np("geometry"),this.topology=e.topology,i&&(this.indices=ArrayBuffer.isView(i)?{value:i,size:1}:i),this.attributes={};for(const[s,a]of Object.entries(n)){const c=ArrayBuffer.isView(a)?{value:a}:a;if(!ArrayBuffer.isView(c.value))throw new Error(`${this._print(s)}: must be typed array or object with value as typed array`);if((s==="POSITION"||s==="positions")&&!c.size&&(c.size=3),s==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=c}else this.attributes[s]=c}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=r||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,n){return this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r of Object.values(e)){const{value:s,size:a,constant:c}=r;!c&&s&&a!==void 0&&a>=1&&(i=Math.min(i,s.length/a))}return i}}const gX={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class SO extends qb{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,pickingFBO:a,deviceRect:{x:c,y:f,width:h,height:p},cullRect:m,effects:y,pass:b="picking",pickZ:v,shaderModuleProps:T}){this.pickZ=v;const S=this._resetColorEncoder(v),w=[c,f,h,p],C=super.render({target:a,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,cullRect:m,effects:y==null?void 0:y.filter(O=>O.useInPicking),pass:b,isPicking:!0,shaderModuleProps:T,clearColor:[0,0,0,0],colorMask:15,scissorRect:w});return this._colorEncoderState=null,{decodePickingColor:S&&yX.bind(null,S),stats:C}}shouldDrawLayer(e){const{pickable:n,operation:i}=e.props;return n&&i.includes("draw")||i.includes("terrain")||i.includes("mask")}getShaderModuleProps(e,n,i){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(e,n,i){const r={...e.props.parameters},{pickable:s,operation:a}=e.props;return!this._colorEncoderState||a.includes("terrain")?r.blend=!1:s&&a.includes("draw")&&(Object.assign(r,gX),r.blend=!0,r.blendColor=mX(this._colorEncoderState,e,i)),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function mX(t,e,n){const{byLayer:i,byAlpha:r}=t;let s,a=i.get(e);return a?(a.viewports.push(n),s=a.a):(s=i.size+1,s<=255?(a={a:s,layer:e,viewports:[n]},i.set(e,a),r[s]=a):(Ue.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function yX(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const Ia={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Md=Symbol.for("component"),Ts=Symbol.for("propTypes"),jy=Symbol.for("deprecatedProps"),Ka=Symbol.for("asyncPropDefaults"),wo=Symbol.for("asyncPropOriginal"),ys=Symbol.for("asyncPropResolved");function kp(t,e=()=>!0){return Array.isArray(t)?EO(t,e,[]):e(t)?[t]:[]}function EO(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?EO(r,e,n):e(r)&&n.push(r)}return n}function _X({target:t,source:e,start:n=0,count:i=1}){const r=e.length,s=i*r;let a=0;for(let c=n;a<r;a++)t[c++]=e[a];for(;a<s;)a<s-a?(t.copyWithin(n+a,n,n+a),a*=2):(t.copyWithin(n+a,n,n+s-a),a=s);return t}class bX{constructor(e,n,i){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;typeof e=="string"&&(r=gd(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class vX{constructor(e){var n;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:(n=e.device)==null?void 0:n.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(n,i):(s=new bX(e,n,this._context),this._resources[e]=s),s.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:a}=this;e.startsWith(a)&&(e=e.replace(a,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const c=s[e];if(this._track(i,r,c,n),c)return c.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const s=this._consumers,a=s[e]=s[e]||{};let c=a[n];const f=c&&c.resourceId&&this._resources[c.resourceId];f&&(f.unsubscribe(c),this.prune()),i&&(c?(c.onChange=r,c.resourceId=i.id):c={onChange:r,resourceId:i.id},a[n]=c,i.subscribe(c))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const TX="layerManager.setLayers",SX="layerManager.activateViewport";class EX{constructor(e,n){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=c=>{yn(SX,this,c),c&&(this.context.viewport=c)};const{deck:i,stats:r,viewport:s,timeline:a}=n||{};this.layers=[],this.resourceManager=new vX({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e==null?void 0:e.gl,deck:i,shaderAssembler:EW(),defaultShaderModules:[Vj],renderPass:void 0,stats:r||new Iu({id:"deck.gl"}),viewport:s||new _l({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new _O,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>n.id.indexOf(i)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){yn(TX,this,n,e),this._lastRenderedLayers=e;const i=kp(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:n}=this.context;n.find(i=>i.name===e.name)||(n.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:n}=this.context,i=n.findIndex(r=>r.name===e.name);i>=0&&(n.splice(i,1),this._defaultShaderModulesChanged=!0)}_handleError(e,n,i){i.raiseError(n,`${e} of ${i}`)}_updateLayers(e,n){const i={};for(const a of e)i[a.id]?Ue.warn(`Multiple old layers with same id ${a.id}`)():i[a.id]=a;if(this._defaultShaderModulesChanged){for(const a of e)a.setNeedsUpdate(),a.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let s=!1;for(const a of r)if(a.hasUniformTransition()){s=`Uniform transition in ${a}`;break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const s=n[r.id];s===null&&Ue.warn(`Multiple new layers with same id ${r.id}`)(),n[r.id]=null;let a=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),a=r.isComposite?r.getSubLayers():null}catch(c){this._handleError("matching",c,r)}a&&this._updateSublayersRecursively(a,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Ia.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Ia.MATCHED,n!==e&&(e.lifecycle=Ia.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=Ia.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Ia.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function xi(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!xi(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const s of i)if(!e.hasOwnProperty(s)||!xi(t[s],e[s],n-1))return!1;return!0}return!1}class wX{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const a=i[s];if(a.containsPixel(r)){const c=e.slice();return c[0]-=a.x,c[1]-=a.y,a.unproject(c,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=kp(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!xi(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Ue.warn("missing `viewState` or `initialViewState`")()}_createController(e,n){const i=n.type;return new i({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var a;return(a=this.getView(e.id))==null?void 0:a.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const s=e.controller;if(s&&i){const a={...n,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!r||r.constructor!==s.type)&&(r=this._createController(e,a)),r&&r.setProps(a),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],a=this.getViewState(s),c=s.makeViewport({viewState:a,width:this.width,height:this.height});let f=n[s.id];const h=!!s.controller;h&&!f&&(i=!0),(i||!h)&&f&&(f.finalize(),f=null),this.controllers[s.id]=this._updateController(s,a,c,f),c&&this._viewports.unshift(c)}for(const r in n){const s=n[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((i,r)=>!e[r].equals(n[r]))}}const AX=/([0-9]+\.?[0-9]*)(%|px)/;function ls(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=AX.exec(t);if(e&&e.length>=3){const n=e[2]==="%",i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error(`Could not parse position string ${t}`)}}function cs(t,e){return t.relative?Math.round(t.position*e):t.position}class cl{constructor(e){const{id:n,x:i=0,y:r=0,width:s="100%",height:a="100%",padding:c=null}=e;this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=ls(i),this._y=ls(r),this._width=ls(s),this._height=ls(a),this._padding=c&&{left:ls(c.left||0),right:ls(c.right||0),top:ls(c.top||0),bottom:ls(c.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.constructor===e.constructor&&xi(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:i}){i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});if(!r.height||!r.width)return null;const s=this.getViewportType(i);return new s({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)i!=="id"&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:cs(this._x,e),y:cs(this._y,n),width:cs(this._width,e),height:cs(this._height,n)};return this._padding&&(i.padding={left:cs(this._padding.left,e),top:cs(this._padding.top,n),right:cs(this._padding.right,e),bottom:cs(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Ip{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,(i=(n=this.settings).onStart)==null||i.call(n,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(n=(e=this.settings).onEnd)==null||n.call(e,this))}cancel(){var e,n;this._inProgress&&((n=(e=this.settings).onInterrupt)==null||n.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(n=(e=this.settings).onUpdate)==null||n.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const JA=()=>{},S0={BREAK:1,SNAP_TO_END:2,IGNORE:3},xX=t=>t,RX=S0.BREAK;class CX{constructor(e){this._onTransitionUpdate=n=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:a,duration:c,easing:f}}=n,h=f(i/c),p=r.interpolateProps(s,a,h);this.propsInTransition=this.getControllerState({...this.props,...p}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Ip(e.timeline),this.onViewStateChange=e.onViewStateChange||JA,this.onStateChange=e.onStateChange||JA}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:a}=this.transition.settings;r={...i,...s===S0.SNAP_TO_END?a:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||n==="auto")&&!!i}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===S0.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),s=n.transitionInterpolator,a=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(a===0)return;const c=s.initializeProps(e,r);this.propsInTransition={};const f={duration:a,easing:n.transitionEasing||xX,interpolator:s,interruption:n.transitionInterruption||RX,startProps:c.start,endProps:c.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(f),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}function cn(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class OX{constructor(e){const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!Or(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const s of this._propsToExtract)(s in e||s in n)&&(i[s]=e[s],r[s]=n[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];cn(Number.isFinite(i)||Array.isArray(i),`${n} is required for transition`)})}}const MX=["longitude","latitude","zoom","bearing","pitch"],PX=["longitude","latitude","zoom"];class wO extends OX{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:MX,required:PX},super(i.transitionProps),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:s}=this.opts;if(r&&s){const a=r(e),c=r(n),f=a.unproject(s);i.start.around=s,Object.assign(i.end,{around:c.project(f),aroundPosition:f,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const s of this._propsToExtract)r[s]=fo(e[s]||0,n[s]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...r});Object.assign(r,s.panByPosition(n.aroundPosition,fo(e.around,n.around,i)))}return r}}const us={transitionDuration:0},NX=300,yh=t=>1-(1-t)*(1-t),Ca={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],MULTI_PAN:["multipanstart","multipanmove","multipanend"],DOUBLE_CLICK:["dblclick"],KEYBOARD:["keydown"]},Gs={};class kX{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new CX({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){var e;for(const n in this._events)this._events[n]&&((e=this.eventManager)==null||e.off(n,this.handleEvent));this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"multipanstart":return n?!1:this._onMultiPanStart(e);case"multipanmove":return this._onMultiPan(e);case"multipanend":return this._onMultiPanEnd(e);case"dblclick":return this._onDoubleClick(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?NX:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:a=!0,touchZoom:c=!0,touchRotate:f=!1,keyboard:h=!0}=e,p=!!this.onViewStateChange;this.toggleEvents(Ca.WHEEL,p&&i),this.toggleEvents(Ca.PAN,p),this.toggleEvents(Ca.PINCH,p&&(c||f)),this.toggleEvents(Ca.MULTI_PAN,p&&f),this.toggleEvents(Ca.DOUBLE_CLICK,p&&a),this.toggleEvents(Ca.KEYBOARD,p&&h),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=a,this.touchZoom=c,this.touchRotate=f,this.keyboard=h}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:a,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,us,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,us,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),r=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:yh},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,us,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),r=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:yh},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:i=.01,smooth:r=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let a=2/(1+Math.exp(-Math.abs(s*i)));s<0&&a!==0&&(a=1/a);const c=this.controllerState.zoom({pos:n,scale:a});return this.updateViewport(c,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,us,{isDragging:!0}),!0}_onMultiPan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,us,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:yh},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Gs._startPinchRotation=e.rotation,Gs._lastPinchEvent=e,this.updateViewport(i,us,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:Gs._startPinchRotation-i})}return this.updateViewport(n,us,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Gs._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=Gs;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const a=Math.log2(e.scale),c=(a-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),f=Math.pow(2,a+c*n/2);s=s.zoom({pos:r,scale:f}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:yh},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Gs._startPinchRotation=null,Gs._lastPinchEvent=null,!0}_onDoubleClick(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:c}=this;let f;const h={};switch(e.srcEvent.code){case"Minus":f=n?c.zoomOut(i).zoomOut(i):c.zoomOut(i),h.isZooming=!0;break;case"Equal":f=n?c.zoomIn(i).zoomIn(i):c.zoomIn(i),h.isZooming=!0;break;case"ArrowLeft":n?(f=c.rotateLeft(s),h.isRotating=!0):(f=c.moveLeft(r),h.isPanning=!0);break;case"ArrowRight":n?(f=c.rotateRight(s),h.isRotating=!0):(f=c.moveRight(r),h.isPanning=!0);break;case"ArrowUp":n?(f=c.rotateUp(a),h.isRotating=!0):(f=c.moveUp(r),h.isPanning=!0);break;case"ArrowDown":n?(f=c.rotateDown(a),h.isRotating=!0):(f=c.moveDown(r),h.isPanning=!0);break;default:return!1}return this.updateViewport(f,this._getTransitionProps(),h),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?us:e?{...n,transitionInterpolator:new wO({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class IX{constructor(e,n){this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const ex=5,DX=1.2;class BX extends IX{constructor(e){const{width:n,height:i,latitude:r,longitude:s,zoom:a,bearing:c=0,pitch:f=0,altitude:h=1.5,position:p=[0,0,0],maxZoom:m=20,minZoom:y=0,maxPitch:b=60,minPitch:v=0,startPanLngLat:T,startZoomLngLat:S,startRotatePos:w,startBearing:C,startPitch:A,startZoom:O,normalize:R=!0}=e;cn(Number.isFinite(s)),cn(Number.isFinite(r)),cn(Number.isFinite(a)),super({width:n,height:i,latitude:r,longitude:s,zoom:a,bearing:c,pitch:f,altitude:h,maxZoom:m,minZoom:y,maxPitch:b,minPitch:v,normalize:R,position:p},{startPanLngLat:T,startZoomLngLat:S,startRotatePos:w,startBearing:C,startPitch:A,startZoom:O}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:a}=this.getState();if(!r||s===void 0||a===void 0)return this;let c;return e?c=this._getNewRotation(e,r,a,s):c={bearing:s+n,pitch:a+i},this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:a,minZoom:c}=this.getViewportProps();let f=r+Math.log2(i);f=ms(f,c,a);const h=this.makeViewport({...this.getViewportProps(),zoom:f});return this._getUpdatedState({zoom:f,...h.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-n.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=ms(r,i,n);const{maxPitch:s,minPitch:a,pitch:c}=e;e.pitch=ms(c,a,s);const{normalize:f=!0}=e;return f&&Object.assign(e,lW(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const s=e[0]-n[0],a=e[1]-n[1],c=e[1],f=n[1],{width:h,height:p}=this.getViewportProps(),m=s/h;let y=0;a>0?Math.abs(p-f)>ex&&(y=a/(f-p)*DX):a<0&&f>ex&&(y=1-c/f),y=ms(y,-1,1);const{minPitch:b,maxPitch:v}=this.getViewportProps(),T=r+180*m;let S=i;return y>0?S=i+y*(v-i):y<0&&(S=i-y*(b-i)),{pitch:S,bearing:T}}}class LX extends kX{constructor(){super(...arguments),this.ControllerState=BX,this.transition={transitionDuration:300,transitionInterpolator:new wO({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class Yb extends cl{constructor(e={}){super(e)}getViewportType(){return xs}get ControllerType(){return LX}}Yb.displayName="MapView";const UX=new mO;function FX(t,e){const n=t.order??1/0,i=e.order??1/0;return n-i}class zX{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(i=>i.id===e.id)){const i=n.findIndex(r=>FX(r,e)>0);i<0?n.push(e):n.splice(i,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(xi(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const r of this.effects)n[r.id]=r;const i=[];for(const r of e){const s=n[r.id];let a=r;s&&s!==r?s.setProps?(s.setProps(r.props),a=s):s.cleanup(this._context):s||r.setup(this._context),i.push(a),delete n[r.id]}for(const r in n)n[r].cleanup(this._context);this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),e.some(r=>r instanceof mO)||this._resolvedEffects.push(UX),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class VX extends qb{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const $X="deckRenderer.renderLayers";class jX{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new VX(e),this.pickLayersPass=new SO(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};i.effects&&this._preRender(i.effects,i);const r=this.lastPostProcessEffect?this.renderBuffers[0]:i.target;this.lastPostProcessEffect&&(i.clearColor=[0,0,0,0],i.clearCanvas=!0);const s=n.render({...i,target:r});i.effects&&this._postRender(i.effects,i),this.renderCount++,yn($X,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const i of e)n.preRenderStats[i.id]=i.preRender(n),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,n=this.device.canvasContext.getDrawingBufferSize();e.length===0&&[0,1].map(i=>{const r=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${i}`,colorAttachments:[r]}))});for(const i of e)i.resize(n)}_postRender(e,n){const{renderBuffers:i}=this,r={...n,inputBuffer:i[0],swapBuffer:i[1]};for(const s of e)if(s.postRender){r.target=s.id===this.lastPostProcessEffect?n.target:void 0;const a=s.postRender(r);r.inputBuffer=a,r.swapBuffer=a===i[0]?i[1]:i[0]}}}const HX={pickedColor:null,pickedObjectIndex:-1};function WX({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:a,y:c,width:f,height:h}=s;let p=r*r,m=-1,y=0;for(let b=0;b<h;b++){const v=b+c-i,T=v*v;if(T>p)y+=4*f;else for(let S=0;S<f;S++){if(t[y+3]-1>=0){const C=S+a-n,A=C*C+T;A<=p&&(p=A,m=y)}y+=4}}if(m>=0){const b=t.slice(m,m+4),v=e(b);if(v){const T=Math.floor(m/4/f),S=m/4-T*f;return{...v,pickedColor:b,pickedX:a+S,pickedY:c+T}}Ue.error("Picked non-existent layer. Is picking buffer corrupt?")()}return HX}function XX({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const s=t.slice(i,i+4),a=s.join(",");if(!n.has(a)){const c=e(s);c?n.set(a,{...c,color:s}):Ue.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function AO({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:s}){let a=e[0];e.length>1&&(a=YX((t==null?void 0:t.pickedViewports)||e,{x:i,y:r}));let c;if(a){const f=[i-a.x,r-a.y];s!==void 0&&(f[2]=s),c=a.unproject(f)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:c,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function qX(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:s,pickedLayer:a,pickedObjectIndex:c}=e,f=a?[a]:[];if(i==="hover"){const m=n.index,y=n.layerId,b=a?a.props.id:null;if(b!==y||c!==m){if(b!==y){const v=r.find(T=>T.props.id===y);v&&f.unshift(v)}n.layerId=b,n.index=c,n.info=null}}const h=AO(t),p=new Map;return p.set(null,h),f.forEach(m=>{let y={...h};m===a&&(y.color=s,y.index=c,y.picked=!0),y=xO({layer:m,info:y,mode:i});const b=y.layer;m===a&&i==="hover"&&(n.info=y),p.set(b.id,y),i==="hover"&&b.updateAutoHighlight(y)}),p}function xO({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}function YX(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}class KX{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new SO(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},s=this.lastPickedInfo.info){const a=s&&s.layer&&s.layer.id,c=s&&s.viewport&&s.viewport.id,f=a?i.find(y=>y.id===a):null,h=c&&r.find(y=>y.id===c)||r[0],p=h&&h.unproject([e-h.x,n-h.y]);return{...s,...{x:e,y:n,viewport:h,coordinate:p,layer:f}}}_resizeBuffer(){var n,i;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const r=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=r}const{canvas:e}=this.device.getDefaultCanvasContext();(n=this.pickingFBO)==null||n.resize({width:e.width,height:e.height}),(i=this.depthFBO)==null||i.resize({width:e.width,height:e.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:s,radius:a=0,depth:c=1,mode:f="query",unproject3D:h,onViewportActive:p,effects:m}){const y=this.device.canvasContext.cssToDeviceRatio(),b=this._getPickable(e);if(!b||i.length===0)return{result:[],emptyInfo:AO({viewports:i,x:r,y:s,pixelRatio:y})};this._resizeBuffer();const v=this.device.canvasContext.cssToDevicePixels([r,s],!0),T=[v.x+Math.floor(v.width/2),v.y+Math.floor(v.height/2)],S=Math.round(a*y),{width:w,height:C}=this.pickingFBO,A=this._getPickingRect({deviceX:T[0],deviceY:T[1],deviceRadius:S,deviceWidth:w,deviceHeight:C}),O={x:r-a,y:s-a,width:a*2+1,height:a*2+1};let R;const D=[],z=new Set;for(let j=0;j<c;j++){let V;if(A){const H=this._drawAndSample({layers:b,views:n,viewports:i,onViewportActive:p,deviceRect:A,cullRect:O,effects:m,pass:`picking:${f}`});V=WX({...H,deviceX:T[0],deviceY:T[1],deviceRadius:S,deviceRect:A})}else V={pickedColor:null,pickedObjectIndex:-1};let x;if(V.pickedLayer&&h&&this.depthFBO){const{pickedColors:H}=this._drawAndSample({layers:[V.pickedLayer],views:n,viewports:i,onViewportActive:p,deviceRect:{x:V.pickedX,y:V.pickedY,width:1,height:1},cullRect:O,effects:m,pass:`picking:${f}:z`},!0);H[3]&&(x=H[0])}V.pickedLayer&&j+1<c&&(z.add(V.pickedLayer),V.pickedLayer.disablePickingIndex(V.pickedObjectIndex)),R=qX({pickInfo:V,lastPickedInfo:this.lastPickedInfo,mode:f,layers:b,viewports:i,x:r,y:s,z:x,pixelRatio:y});for(const H of R.values())H.layer&&D.push(H);if(!V.pickedColor)break}for(const j of z)j.restorePickingColors();return{result:D,emptyInfo:R.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:s,width:a=1,height:c=1,mode:f="query",maxObjects:h=null,onViewportActive:p,effects:m}){const y=this._getPickable(e);if(!y||i.length===0)return[];this._resizeBuffer();const b=this.device.canvasContext.cssToDeviceRatio(),v=this.device.canvasContext.cssToDevicePixels([r,s],!0),T=v.x,S=v.y+v.height,w=this.device.canvasContext.cssToDevicePixels([r+a,s+c],!0),C=w.x+w.width,A=w.y,O={x:T,y:A,width:C-T,height:S-A},R=this._drawAndSample({layers:y,views:n,viewports:i,onViewportActive:p,deviceRect:O,cullRect:{x:r,y:s,width:a,height:c},effects:m,pass:`picking:${f}`}),D=XX(R),z=new Map,j=[],V=Number.isFinite(h);for(let x=0;x<D.length&&!(V&&j.length>=h);x++){const H=D[x];let te={color:H.pickedColor,layer:null,index:H.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:b};te=xO({layer:H.pickedLayer,info:te,mode:f});const se=te.layer.id;z.has(se)||z.set(se,new Set);const fe=z.get(se),pe=te.object??te.index;fe.has(pe)||(fe.add(pe),j.push(te))}return j}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:s,cullRect:a,effects:c,pass:f},h=!1){const p=h?this.depthFBO:this.pickingFBO,m={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:p,deviceRect:s,cullRect:a,effects:c,pass:f,pickZ:h,preRenderStats:{},isPicking:!0};for(const C of c)C.useInPicking&&(m.preRenderStats[C.id]=C.preRender(m));const{decodePickingColor:y}=this.pickLayersPass.render(m),{x:b,y:v,width:T,height:S}=s,w=new(h?Float32Array:Uint8Array)(T*S*4);return this.device.readPixelsToArrayWebGL(p,{sourceX:b,sourceY:v,sourceWidth:T,sourceHeight:S,target:w}),{pickedColors:w,decodePickingColor:y}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const a=Math.max(0,e-i),c=Math.max(0,n-i),f=Math.min(r,e+i+1)-a,h=Math.min(s,n+i+1)-c;return f<=0||h<=0?null:{x:a,y:c,width:f,height:h}}}const ZX={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},QX="top-left",tx="__root";class GX{constructor({deck:e,parentElement:n}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=n}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!xi(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(n=>n.id===e.id)||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const n={};for(const i of this.resolvedWidgets)n[i.id]=i;this.resolvedWidgets.length=0;for(const i of this.defaultWidgets)n[i.id]=null,this.resolvedWidgets.push(i);for(let i of e){const r=n[i.id];r?r.viewId!==i.viewId||r.placement!==i.placement?(this._remove(r),this._add(i)):i!==r&&(r.setProps(i.props),i=r):this._add(i),n[i.id]=null,this.resolvedWidgets.push(i)}for(const i in n){const r=n[i];r&&this._remove(r)}this.widgets=e}_add(e){const{viewId:n=null,placement:i=QX}=e,r=e.onAdd({deck:this.deck,viewId:n});r&&this._getContainer(n,i).append(r),e._element=r}_remove(e){var n;(n=e.onRemove)==null||n.call(e),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,n){var a;const i=e||tx;let r=this.containers[i];r||(r=document.createElement("div"),r.style.pointerEvents="none",r.style.position="absolute",r.style.overflow="hidden",(a=this.parentElement)==null||a.append(r),this.containers[i]=r);let s=r.querySelector(`.${n}`);return s||(s=document.createElement("div"),s.className=n,s.style.position="absolute",s.style.zIndex="2",Object.assign(s.style,ZX[n]),r.append(s)),s}_updateContainers(){const e=this.deck.width,n=this.deck.height;for(const i in this.containers){const r=this.lastViewports[i]||null,s=i===tx||r,a=this.containers[i];s?(a.style.display="block",a.style.left=`${r?r.x:0}px`,a.style.top=`${r?r.y:0}px`,a.style.width=`${r?r.width:e}px`,a.style.height=`${r?r.height:n}px`):a.style.display="none"}}onRedraw({viewports:e,layers:n}){var r,s;const i=e.reduce((a,c)=>(a[c.id]=c,a),{});for(const a of this.getWidgets()){const{viewId:c}=a;if(c){const f=i[c];f&&(a.onViewportChange&&a.onViewportChange(f),(r=a.onRedraw)==null||r.call(a,{viewports:[f],layers:n}))}else{if(a.onViewportChange)for(const f of e)a.onViewportChange(f);(s=a.onRedraw)==null||s.call(a,{viewports:e,layers:n})}}this.lastViewports=i,this._updateContainers()}onHover(e,n){var i,r;for(const s of this.getWidgets()){const{viewId:a}=s;(!a||a===((i=e.viewport)==null?void 0:i.id))&&((r=s.onHover)==null||r.call(s,e,n))}}onEvent(e,n){var r,s;const i=d0[n.type];if(i)for(const a of this.getWidgets()){const{viewId:c}=a;(!c||c===((r=e.viewport)==null?void 0:r.id))&&((s=a[i])==null||s.call(a,e,n))}}}const JX={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class eq{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:e}){const n=document.createElement("div");return n.className="deck-tooltip",Object.assign(n.style,JX),this.deck=e,this.element=n,n}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){var n;this.isVisible&&e.id===((n=this.lastViewport)==null?void 0:n.id)&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:n}=this,i=n&&n.props.getTooltip;if(!i)return;const r=i(e);this.lastViewport=e.viewport,this.setTooltip(r,e.x,e.y)}setTooltip(e,n,i){const r=this.element;if(r){if(typeof e=="string")r.innerText=e;else if(e)e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className);else{this.isVisible=!1,r.style.display="none";return}this.isVisible=!0,r.style.display="block",r.style.transform=`translate(${n}px, ${i}px)`,e&&typeof e=="object"&&"style"in e&&Object.assign(r.style,e.style)}}}var La;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(La||(La={}));const Kb={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},zt=(t,e,n)=>e?t.enable(n):t.disable(n),nx=(t,e,n)=>t.hint(n,e),Vn=(t,e,n)=>t.pixelStorei(n,e),ix=(t,e,n)=>{const i=n===36006?36009:36008;return t.bindFramebuffer(i,e)},Ac=(t,e,n)=>{const r={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];t.bindBuffer(r,e)};function Hy(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const tq={3042:zt,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:zt,2885:(t,e)=>t.cullFace(e),2929:zt,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:zt,35723:nx,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var n;return(n=t.bindTransformFeedback)==null?void 0:n.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:ix,36010:ix,34964:Ac,36662:Ac,36663:Ac,35053:Ac,35055:Ac,2886:(t,e)=>t.frontFace(e),33170:nx,2849:(t,e)=>t.lineWidth(e),32823:zt,32824:"polygonOffset",10752:"polygonOffset",35977:zt,32926:zt,32928:zt,32938:"sampleCoverage",32939:"sampleCoverage",3089:zt,3088:(t,e)=>t.scissor(...e),2960:zt,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:zt,10754:zt,12288:zt,12289:zt,12290:zt,12291:zt,12292:zt,12293:zt,12294:zt,12295:zt,3333:Vn,3317:Vn,37440:Vn,37441:Vn,37443:Vn,3330:Vn,3332:Vn,3331:Vn,3314:Vn,32878:Vn,3316:Vn,3315:Vn,32877:Vn,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const n=typeof e=="number"?[e,e]:e;t.blendEquationSeparate(...n)},blendFunc:(t,e)=>{const n=(e==null?void 0:e.length)===2?[...e,...e]:e;t.blendFuncSeparate(...n)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(e[0],e[1]||!1),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Hy(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=Hy(e)&&e.length===3?[...e,...e]:e;const[n,i,r,s,a,c]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,s,a,c)},stencilOp:(t,e)=>{e=Hy(e)&&e.length===3?[...e,...e]:e;const[n,i,r,s,a,c]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,s,a,c)},viewport:(t,e)=>t.viewport(...e)};function Rt(t,e,n){return e[t]!==void 0?e[t]:n[t]}const nq={blendEquation:(t,e,n)=>t.blendEquationSeparate(Rt(32777,e,n),Rt(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Rt(32969,e,n),Rt(32968,e,n),Rt(32971,e,n),Rt(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Rt(32824,e,n),Rt(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Rt(32938,e,n),Rt(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Rt(2962,e,n),Rt(2967,e,n),Rt(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Rt(34816,e,n),Rt(36003,e,n),Rt(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Rt(2964,e,n),Rt(2965,e,n),Rt(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Rt(34817,e,n),Rt(34818,e,n),Rt(34819,e,n))},rx={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,n)=>t({36007:n}),bindTransformFeedback:(t,e,n)=>t({36389:n}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},bindBuffer:(t,e,n)=>{const i={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return i?t({[i]:n}):{valueChanged:!0}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:i,[e===1028?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:i,[e===1028?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},Hi=(t,e)=>t.isEnabled(e),sx={3042:Hi,2884:Hi,2929:Hi,3024:Hi,32823:Hi,32926:Hi,32928:Hi,3089:Hi,2960:Hi,35977:Hi},iq=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function bl(t,e){if(sq(e))return;const n={};for(const r in e){const s=Number(r),a=tq[r];a&&(typeof a=="string"?n[a]=!0:a(t,e[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in n){const s=nq[r];s(t,e,i)}}function RO(t,e=Kb){if(typeof e=="number"){const r=e,s=sx[r];return s?s(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const s=sx[r];i[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return i}function rq(t){bl(t,Kb)}function sq(t){for(const e in t)return!1;return!0}function oq(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}class po{constructor(e,n){M(this,"gl");M(this,"program",null);M(this,"stateStack",[]);M(this,"enable",!0);M(this,"cache",null);M(this,"log");M(this,"initialized",!1);this.gl=e,this.log=(n==null?void 0:n.log)||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}static get(e){return e.state}push(e={}){this.stateStack.push({})}pop(){const e=this.stateStack[this.stateStack.length-1];bl(this.gl,e),this.stateStack.pop()}trackState(e,n){if(this.cache=n.copyState?RO(e):Object.assign({},Kb),this.initialized)throw new Error("WebGLStateTracker");this.initialized=!0,this.gl.state=this,lq(e);for(const i in rx){const r=rx[i];aq(e,i,r)}ox(e,"getParameter"),ox(e,"isEnabled")}_updateCache(e){let n=!1,i;const r=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const s in e){const a=e[s],c=this.cache[s];oq(a,c)||(n=!0,i=c,r&&!(s in r)&&(r[s]=c),this.cache[s]=a)}return{valueChanged:n,oldValue:i}}}function ox(t,e){const n=t[e].bind(t);t[e]=function(r){if(r===void 0||iq.has(r))return n(r);const s=po.get(t);return r in s.cache||(s.cache[r]=n(r)),s.enable?s.cache[r]:n(r)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function aq(t,e,n){if(!t[e])return;const i=t[e].bind(t);t[e]=function(...s){const a=po.get(t),{valueChanged:c,oldValue:f}=n(a._updateCache,...s);return c&&i(...s),f},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function lq(t){const e=t.useProgram.bind(t);t.useProgram=function(i){const r=po.get(t);r.program!==i&&(e(i),r.program=i)}}function cq(t,e,n){let i="";const r={preserveDrawingBuffer:!0,...n};let s=null;if(s||(s=t.getContext("webgl2",r)),r.failIfMajorPerformanceCaveat&&(i||(i="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow.")),!s&&!n.failIfMajorPerformanceCaveat&&(r.failIfMajorPerformanceCaveat=!1,s=t.getContext("webgl2",r),s.luma||(s.luma={}),s.luma.softwareRenderer=!0),s||(s=t.getContext("webgl",{}),s&&(s=null,i||(i="Your browser only supports WebGL1"))),!s)throw i||(i="Your browser does not support WebGL"),new Error(`Failed to create WebGL context: ${i}`);const{onContextLost:a,onContextRestored:c}=e;return t.addEventListener("webglcontextlost",f=>a(f),!1),t.addEventListener("webglcontextrestored",f=>c(f),!1),s.luma||(s.luma={}),s}function ul(t,e,n){return n[e]===void 0&&(n[e]=t.getExtension(e)||null),n[e]}function uq(t,e){const n=t.getParameter(7936),i=t.getParameter(7937);ul(t,"WEBGL_debug_renderer_info",e);const r=e.WEBGL_debug_renderer_info,s=t.getParameter(r?r.UNMASKED_VENDOR_WEBGL:7936),a=t.getParameter(r?r.UNMASKED_RENDERER_WEBGL:7937),c=s||n,f=a||i,h=t.getParameter(7938),p=CO(c,f),m=fq(c,f),y=hq(c,f);return{type:"webgl",gpu:p,gpuType:y,gpuBackend:m,vendor:c,renderer:f,version:h,shadingLanguage:"glsl",shadingLanguageVersion:300}}function CO(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function fq(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?"metal":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?"opengl":"unknown"}function hq(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(CO(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function OO(t){switch(t){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const Dc="WEBGL_compressed_texture_s3tc",Bc="WEBGL_compressed_texture_s3tc_srgb",Ua="EXT_texture_compression_rgtc",Fa="EXT_texture_compression_bptc",dq="WEBGL_compressed_texture_etc",pq="WEBGL_compressed_texture_astc",gq="WEBGL_compressed_texture_etc1",mq="WEBGL_compressed_texture_pvrtc",yq="WEBGL_compressed_texture_atc",ax="EXT_texture_norm16",lx="EXT_render_snorm",_q="EXT_color_buffer_float",Zb={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[lx],"norm16-renderable-webgl":[ax],"snorm16-renderable-webgl":[ax,lx],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[Dc,Bc,Ua,Fa],"texture-compression-bc5-webgl":[Ua],"texture-compression-bc7-webgl":[Fa],"texture-compression-etc2":[dq],"texture-compression-astc":[pq],"texture-compression-etc1-webgl":[gq],"texture-compression-pvrtc-webgl":[mq],"texture-compression-atc-webgl":[yq]};function bq(t){return t in Zb}function vq(t,e,n){return(Zb[e]||[]).every(r=>ul(t,r,n))}const Qb={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},"r16unorm-webgl":{gl:33322,rb:!0},"r16snorm-webgl":{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},"rg16unorm-webgl":{gl:33324},"rg16snorm-webgl":{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},"rgb10a2uint-webgl":{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},"rgba16unorm-webgl":{gl:32859,rb:!0},"rgba16snorm-webgl":{gl:36763},"rgb32float-webgl":{gl:34837,x:_q,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:Dc},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:Bc},"bc1-rgba-unorm":{gl:33777,x:Dc},"bc1-rgba-unorm-srgb":{gl:35916,x:Bc},"bc2-rgba-unorm":{gl:33778,x:Dc},"bc2-rgba-unorm-srgb":{gl:35918,x:Bc},"bc3-rgba-unorm":{gl:33779,x:Dc},"bc3-rgba-unorm-srgb":{gl:35919,x:Bc},"bc4-r-unorm":{gl:36283,x:Ua},"bc4-r-snorm":{gl:36284,x:Ua},"bc5-rg-unorm":{gl:36285,x:Ua},"bc5-rg-snorm":{gl:36286,x:Ua},"bc6h-rgb-ufloat":{gl:36495,x:Fa},"bc6h-rgb-float":{gl:36494,x:Fa},"bc7-rgba-unorm":{gl:36492,x:Fa},"bc7-rgba-unorm-srgb":{gl:36493,x:Fa},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function Tq(t,e,n){let i=e.create;const r=Qb[e.format];return(r==null?void 0:r.gl)===void 0&&(i=!1),r!=null&&r.x&&(i=i&&!!ul(t,r.x,n)),{format:e.format,create:i&&e.create,render:i&&e.render,filter:i&&e.filter,blend:i&&e.blend,store:i&&e.store}}function MO(t){var r;const e=Qb[t],n=wq(t),i=Lb(t);return{internalFormat:n,format:(e==null?void 0:e.dataFormat)||Eq(i.channels,i.integer,i.normalized,n),type:i.dataType?OO(i.dataType):((r=e==null?void 0:e.types)==null?void 0:r[0])||5121,compressed:i.compressed||!1}}function Sq(t){switch(Lb(t).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw new Error(`Not a depth stencil format: ${t}`)}}function Eq(t,e,n,i){if(i===6408||i===6407)return i;switch(t){case"r":return e&&!n?36244:6403;case"rg":return e&&!n?33320:33319;case"rgb":return e&&!n?36248:6407;case"rgba":return e&&!n?36249:6408;case"bgra":throw new Error("bgra pixels not supported by WebGL");default:return 6408}}function wq(t){const e=Qb[t],n=e==null?void 0:e.gl;if(n===void 0)throw new Error(`Unsupported texture format ${t}`);return n}const cx={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class Aq extends N${constructor(n,i,r){super([],r);M(this,"gl");M(this,"extensions");M(this,"testedFeatures",new Set);this.gl=n,this.extensions=i,ul(n,"EXT_color_buffer_float",i)}*[Symbol.iterator](){const n=this.getFeatures();for(const i of n)this.has(i)&&(yield i);return[]}has(n){var i;return(i=this.disabledFeatures)!=null&&i[n]?!1:(this.testedFeatures.has(n)||(this.testedFeatures.add(n),bq(n)&&vq(this.gl,n,this.extensions)&&this.features.add(n),this.getWebGLFeature(n)&&this.features.add(n)),this.features.has(n))}initializeFeatures(){const n=this.getFeatures().filter(i=>i!=="polygon-mode-webgl");for(const i of n)this.has(i)}getFeatures(){return[...Object.keys(cx),...Object.keys(Zb)]}getWebGLFeature(n){const i=cx[n];return typeof i=="string"?!!ul(this.gl,i,this.extensions):!!i}}class xq extends P${constructor(n){super();M(this,"gl");M(this,"limits",{});this.gl=n}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(n){return this.limits[n]===void 0&&(this.limits[n]=this.gl.getParameter(n)),this.limits[n]||0}}class Wc extends Sd{constructor(n,i){super(n,i);M(this,"device");M(this,"gl");M(this,"handle");M(this,"colorAttachments",[]);M(this,"depthStencilAttachment",null);const r=i.handle===null;this.device=n,this.gl=n.gl,this.handle=this.props.handle||r?this.props.handle:this.gl.createFramebuffer(),r||(n.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}updateAttachments(){const n=this.gl.bindFramebuffer(36160,this.handle);for(let i=0;i<this.colorAttachments.length;++i){const r=this.colorAttachments[i];if(r){const s=36064+i;this._attachTextureView(s,r)}}if(this.depthStencilAttachment){const i=Sq(this.depthStencilAttachment.props.format);this._attachTextureView(i,this.depthStencilAttachment)}if(this.device.props.debug){const i=this.gl.checkFramebufferStatus(36160);if(i!==36053)throw new Error(`Framebuffer ${Cq(i)}`)}this.gl.bindFramebuffer(36160,n)}_attachTextureView(n,i){const{gl:r}=this.device,{texture:s}=i,a=i.props.baseMipLevel,c=i.props.baseArrayLayer;switch(r.bindTexture(s.glTarget,s.handle),s.glTarget){case 35866:case 32879:r.framebufferTextureLayer(36160,n,s.handle,a,c);break;case 34067:const f=Rq(c);r.framebufferTexture2D(36160,n,f,s.handle,a);break;case 3553:r.framebufferTexture2D(36160,n,3553,s.handle,a);break;default:throw new Error("Illegal texture type")}r.bindTexture(s.glTarget,null)}}function Rq(t){return t<34069?t+34069:t}function Cq(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}class Oq extends Z_{constructor(n,i){super(i);M(this,"device");M(this,"format","rgba8unorm");M(this,"depthStencilFormat","depth24plus");M(this,"presentationSize");M(this,"_framebuffer",null);this.device=n,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}get[Symbol.toStringTag](){return"WebGLCanvasContext"}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Wc(this.device,{handle:null}),this._framebuffer}update(){const n=this.getPixelSize();(n[0]!==this.presentationSize[0]||n[1]!==this.presentationSize[1])&&(this.presentationSize=n,this.resize())}resize(n){if(this.device.gl&&this.canvas){const i=this.getDevicePixelRatio(n==null?void 0:n.useDevicePixels);this.setDevicePixelRatio(i,n);return}}commit(){}}async function PO(t,e){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const i=document.createElement("script");return i.setAttribute("type","text/javascript"),i.setAttribute("src",t),new Promise((r,s)=>{i.onload=r,i.onerror=a=>s(new Error(`Unable to load script '${t}': ${a}`)),n.appendChild(i)})}const Mq=1;let ct=null,ux=!1;const Gb={debugSpectorJS:ge.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};async function Pq(t){if(!globalThis.SPECTOR)try{await PO(t.debugSpectorJSUrl||Gb.debugSpectorJSUrl)}catch(e){ge.warn(String(e))}}function Nq(t){var e;if(t={...Gb,...t},!t.debugSpectorJS)return null;if(!ct&&globalThis.SPECTOR&&!((e=globalThis.luma)!=null&&e.spector)){ge.probe(Mq,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:n}=globalThis.SPECTOR;ct=new n,globalThis.luma&&(globalThis.luma.spector=ct)}if(!ct)return null;if(ux||(ux=!0,ct.spyCanvases(),ct==null||ct.onCaptureStarted.add(n=>ge.info("Spector capture started:",n)()),ct==null||ct.onCapture.add(n=>{ge.info("Spector capture complete:",n)(),ct==null||ct.getResultUI(),ct==null||ct.resultView.display(),ct==null||ct.resultView.addCapture(n)})),t.gl){const n=t.gl,i=n.device;ct==null||ct.startCapture(t.gl,500),n.device=i,new Promise(r=>setTimeout(r,2e3)).then(r=>{ge.info("Spector capture stopped after 2 seconds")(),ct==null||ct.stopCapture()})}return ct}const kq="https://unpkg.com/webgl-debug@2.0.1/index.js";function NO(t){return t.luma=t.luma||{},t.luma}async function Iq(){Ro()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await PO(kq))}function Dq(t,e={}){return e.debugWebGL||e.traceWebGL?Lq(t,e):Bq(t)}function Bq(t){const e=NO(t);return e.realContext?e.realContext:t}function Lq(t,e){if(!globalThis.WebGLDebugUtils)return ge.warn("webgl-debug not loaded")(),t;const n=NO(t);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...La,...t});const i=globalThis.WebGLDebugUtils.makeDebugContext(t,Uq.bind(null,e),Fq.bind(null,e));for(const a in La)!(a in i)&&typeof La[a]=="number"&&(i[a]=La[a]);class r{}Object.setPrototypeOf(i,Object.getPrototypeOf(t)),Object.setPrototypeOf(r,i);const s=Object.create(r);return n.realContext=t,n.debugContext=s,s.debug=!0,s}function fx(t,e){e=Array.from(e).map(i=>i===void 0?"undefined":i);let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${t}(${n})`}function Uq(t,e,n,i){i=Array.from(i).map(c=>c===void 0?"undefined":c);const r=globalThis.WebGLDebugUtils.glEnumToString(e),s=globalThis.WebGLDebugUtils.glFunctionArgsToString(n,i),a=`${r} in gl.${n}(${s})`;ge.error(a)();debugger}function Fq(t,e,n){let i="";ge.level>=1&&(i=fx(e,n),t.traceWebGL&&ge.log(1,i)());for(const r of n)if(r===void 0){i=i||fx(e,n);debugger}}const Wy={};function zq(t="id"){Wy[t]=Wy[t]||1;const e=Wy[t]++;return`${t}-${e}`}class Xc extends Nt{constructor(n,i={}){super(n,i);M(this,"device");M(this,"gl");M(this,"handle");M(this,"glTarget");M(this,"glUsage");M(this,"glIndexType",5123);M(this,"byteLength");M(this,"bytesUsed");this.device=n,this.gl=this.device.gl;const r=typeof i=="object"?i.handle:void 0;this.handle=r||this.gl.createBuffer(),n.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=Vq(this.props.usage),this.glUsage=$q(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,i.data?this._initWithData(i.data,i.byteOffset,i.byteLength):this._initWithByteLength(i.byteLength||0)}_initWithData(n,i=0,r=n.byteLength+i){const s=this.glTarget;this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,r,this.glUsage),this.gl.bufferSubData(s,i,n),this.gl.bindBuffer(s,null),this.bytesUsed=r,this.byteLength=r,this._setDebugData(n,i,r),this.trackAllocatedMemory(r)}_initWithByteLength(n){let i=n;n===0&&(i=new Float32Array(0));const r=this.glTarget;return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.glUsage),this.gl.bindBuffer(r,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(null,0,n),this.trackAllocatedMemory(n),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(n,i=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,i,n),this.gl.bindBuffer(36663,null),this._setDebugData(n,i,n.byteLength)}async readAsync(n=0,i){return this.readSyncWebGL(n,i)}readSyncWebGL(n=0,i){i=i??this.byteLength-n;const r=new Uint8Array(i),s=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,r,s,i),this.gl.bindBuffer(36662,null),this._setDebugData(r,n,i),r}}function Vq(t){return t&Nt.INDEX?34963:t&Nt.VERTEX?34962:t&Nt.UNIFORM?35345:34962}function $q(t){return t&Nt.INDEX||t&Nt.VERTEX?35044:t&Nt.UNIFORM?35048:35044}function jq(t){const e=t.split(/\r?\n/),n=[];for(const i of e){if(i.length<=1)continue;const r=i.split(":");if(r.length===2){const[m,y]=r;n.push({message:y.trim(),type:hx(m),lineNum:0,linePos:0});continue}const[s,a,c,...f]=r;let h=parseInt(c,10);isNaN(h)&&(h=0);let p=parseInt(a,10);isNaN(p)&&(p=0),n.push({message:f.join(":").trim(),type:hx(s),lineNum:h,linePos:p})}return n}function hx(t){const e=["warning","error","info"],n=t.toLowerCase();return e.includes(n)?n:"info"}class Hq extends vd{constructor(n,i){super(n,i);M(this,"device");M(this,"handle");switch(this.device=n,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>this.compilationStatus)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const n=this.device.gl.getShaderInfoLog(this.handle);return n?jq(n):[]}getTranslatedSource(){const i=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return(i==null?void 0:i.getTranslatedShaderSource(this.handle))||null}async _compile(n){n=n.startsWith("#version ")?n:`#version 300 es
${n}`;const{gl:i}=this.device;if(i.shaderSource(this.handle,n),i.compileShader(this.handle),!this.device.props.debug){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}ge.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),ge.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const n=async s=>await new Promise(a=>setTimeout(a,s));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:r}=this.device;for(;;){if(r.getShaderParameter(this.handle,37297))return;await n(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}function Wq(t,e,n,i){if(Kq(e))return i(t);const r=t;r.pushState();try{return Xq(t,e),bl(r.gl,n),i(t)}finally{r.popState()}}function Xq(t,e){const n=t,{gl:i}=n;if(e.cullMode)switch(e.cullMode){case"none":i.disable(2884);break;case"front":i.enable(2884),i.cullFace(1028);break;case"back":i.enable(2884),i.cullFace(1029);break}if(e.frontFace&&i.frontFace(go("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&i.enable(34383),e.depthBias!==void 0&&(i.enable(32823),i.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const s=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,a=go("provokingVertex",e.provokingVertex,{first:36429,last:36430});s==null||s.provokingVertexWEBGL(a)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const s=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,a=go("polygonMode",e.polygonMode,{fill:6914,line:6913});s==null||s.polygonModeWEBGL(1028,a),s==null||s.polygonModeWEBGL(1029,a)}e.polygonOffsetLine&&i.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&i.enable(12288),e.clipDistance1&&i.enable(12289),e.clipDistance2&&i.enable(12290),e.clipDistance3&&i.enable(12291),e.clipDistance4&&i.enable(12292),e.clipDistance5&&i.enable(12293),e.clipDistance6&&i.enable(12294),e.clipDistance7&&i.enable(12295)),e.depthWriteEnabled!==void 0&&i.depthMask(Yq("depthWriteEnabled",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!=="always"?i.enable(2929):i.disable(2929),i.depthFunc(E0("depthCompare",e.depthCompare))),e.stencilWriteMask){const r=e.stencilWriteMask;i.stencilMaskSeparate(1028,r),i.stencilMaskSeparate(1029,r)}if(e.stencilReadMask&&ge.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const r=e.stencilReadMask||4294967295,s=E0("depthCompare",e.stencilCompare);e.stencilCompare!=="always"?i.enable(2960):i.disable(2960),i.stencilFuncSeparate(1028,s,0,r),i.stencilFuncSeparate(1029,s,0,r)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const r=Xy("stencilPassOperation",e.stencilPassOperation),s=Xy("stencilFailOperation",e.stencilFailOperation),a=Xy("stencilDepthFailOperation",e.stencilDepthFailOperation);i.stencilOpSeparate(1028,s,a,r),i.stencilOpSeparate(1029,s,a,r)}switch(e.blend){case!0:i.enable(3042);break;case!1:i.disable(3042);break}if(e.blendColorOperation||e.blendAlphaOperation){const r=dx("blendColorOperation",e.blendColorOperation||"add"),s=dx("blendAlphaOperation",e.blendAlphaOperation||"add");i.blendEquationSeparate(r,s);const a=_h("blendColorSrcFactor",e.blendColorSrcFactor||"one"),c=_h("blendColorDstFactor",e.blendColorDstFactor||"zero"),f=_h("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),h=_h("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");i.blendFuncSeparate(a,c,f,h)}}function E0(t,e){return go(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function Xy(t,e){return go(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function dx(t,e){return go(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function _h(t,e){return go(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function qq(t,e){return`Illegal parameter ${e} for ${t}`}function go(t,e,n){if(!(e in n))throw new Error(qq(t,e));return n[e]}function Yq(t,e){return e}function Kq(t){let e=!0;for(const n in t){e=!1;break}return e}function kO(t){const e={};return t.addressModeU&&(e[10242]=qy(t.addressModeU)),t.addressModeV&&(e[10243]=qy(t.addressModeV)),t.addressModeW&&(e[32882]=qy(t.addressModeW)),t.magFilter&&(e[10240]=w0(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=Zq(t.minFilter||"linear",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type==="comparison-sampler"&&(e[34892]=34894),t.compare&&(e[34893]=E0("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function qy(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function w0(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}function Zq(t,e="none"){if(!e)return w0(t);switch(e){case"none":return w0(t);case"nearest":return t==="nearest"?9984:9986;case"linear":return t==="nearest"?9985:9987}}class A0 extends Td{constructor(n,i){super(n,i);M(this,"device");M(this,"handle");M(this,"parameters");this.device=n,this.parameters=kO(i),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(n){for(const[i,r]of Object.entries(n)){const s=Number(i);switch(s){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,s,r);break;default:this.device.gl.samplerParameteri(this.handle,s,r);break}}}}class za extends bd{constructor(n,i){super(n,{...Pt.defaultProps,...i});M(this,"device");M(this,"gl");M(this,"handle");M(this,"texture");this.device=n,this.gl=this.device.gl,this.handle=null,this.texture=i.texture}}const Qq="Failed to deduce GL constant from typed array";function Gq(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Qq)}}function Jq(t,e){const{clamped:n=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function IO(t){switch(t){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function eY(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}function Pd(t,e,n){if(tY(e))return n(t);const{nocatch:i=!0}=e,r=po.get(t);r.push(),bl(t,e);let s;if(i)s=n(t),r.pop();else try{s=n(t)}finally{r.pop()}return s}function tY(t){for(const e in t)return!1;return!0}function nY(t,e,n){const{dimension:i,width:r,height:s,depth:a=0}=n,{glInternalFormat:c}=n,f=n.glTarget;switch(i){case"2d-array":case"3d":t.texStorage3D(f,e,c,r,s,a);break;default:t.texStorage2D(f,e,c,r,s)}}function px(t,e,n,i){const{width:r,height:s}=i,{dimension:a,depth:c=0,mipLevel:f=0}=i,{x:h=0,y:p=0,z:m=0}=i,{glFormat:y,glType:b}=i,v=DO(i.glTarget,a,c),T=i.flipY?{37440:!0}:{};Pd(t,T,()=>{switch(a){case"2d-array":case"3d":t.bindTexture(v,e),t.texSubImage3D(v,f,h,p,m,r,s,c,y,b,n),t.bindTexture(v,null);break;case"2d":case"cube":t.bindTexture(v,e),t.texSubImage2D(v,f,h,p,r,s,y,b,n),t.bindTexture(v,null);break;default:throw new Error(a)}})}function gx(t,e,n){const{dimension:i,width:r,height:s,depth:a=0,mipLevel:c=0,byteOffset:f=0}=n,{x:h=0,y:p=0,z:m=0}=n,{glFormat:y,glType:b,compressed:v}=n,T=DO(n.glTarget,i,a);switch(i){case"2d-array":case"3d":v?t.compressedTexSubImage3D(T,c,h,p,m,r,s,a,y,e,f):t.texSubImage3D(T,c,h,p,m,r,s,a,y,b,e,f);break;case"2d":case"cube":v?t.compressedTexSubImage2D(T,c,h,p,r,s,y,e,f):t.texSubImage2D(T,c,h,p,r,s,y,b,e,f);break;default:throw new Error(i)}}function iY(t){switch(t){case"1d":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw new Error(t)}function DO(t,e,n){return e==="cube"?34069+n:t}function rY(t,e){var w;const{sourceX:n=0,sourceY:i=0,sourceAttachment:r=0}=e||{};let{target:s=null,sourceWidth:a,sourceHeight:c,sourceDepth:f,sourceFormat:h,sourceType:p}=e||{};const{framebuffer:m,deleteFramebuffer:y}=BO(t),{gl:b,handle:v}=m;a||(a=m.width),c||(c=m.height);const T=(w=m.colorAttachments[r])==null?void 0:w.texture;if(!T)throw new Error(`Invalid framebuffer attachment ${r}`);f=(T==null?void 0:T.depth)||1,h||(h=(T==null?void 0:T.glFormat)||6408),p||(p=(T==null?void 0:T.glType)||5121),s=aY(s,p,h,a,c),p=p||Gq(s);const S=b.bindFramebuffer(36160,v);return b.readBuffer(36064+r),b.readPixels(n,i,a,c,h,p,s),b.readBuffer(36064),b.bindFramebuffer(36160,S||null),y&&m.destroy(),s}function sY(t,e){const{target:n,sourceX:i=0,sourceY:r=0,sourceFormat:s=6408,targetByteOffset:a=0}=e||{};let{sourceWidth:c,sourceHeight:f,sourceType:h}=e||{};const{framebuffer:p,deleteFramebuffer:m}=BO(t);c=c||p.width,f=f||p.height;const y=p;h=h||5121;let b=n;if(!b){const T=IO(s),S=eY(h),w=a+c*f*T*S;b=y.device.createBuffer({byteLength:w})}const v=t.device.createCommandEncoder();return v.copyTextureToBuffer({sourceTexture:t,width:c,height:f,origin:[i,r],destinationBuffer:b,byteOffset:a}),v.destroy(),m&&p.destroy(),b}function BO(t){return t instanceof Sd?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:oY(t),deleteFramebuffer:!0}}function oY(t,e){const{device:n,width:i,height:r,id:s}=t;return n.createFramebuffer({...e,id:`framebuffer-for-${s}`,width:i,height:r,colorAttachments:[t]})}function aY(t,e,n,i,r,s){if(t)return t;e||(e=5121);const a=Jq(e,{clamped:!1}),c=IO(n);return new a(i*r*c)}class qc extends Pt{constructor(n,i){super(n,i);M(this,"device");M(this,"gl");M(this,"handle");M(this,"sampler");M(this,"view");M(this,"mipmaps");M(this,"compressed");M(this,"glTarget");M(this,"glFormat");M(this,"glType");M(this,"glInternalFormat");M(this,"textureUnit",0);const r={...this.props};r.data=i.data,this.device=n,this.gl=this.device.gl,this.glTarget=iY(this.props.dimension);const s=MO(this.props.format);this.glInternalFormat=s.internalFormat,this.glFormat=s.format,this.glType=s.type,this.compressed=s.compressed,this.mipmaps=!!this.props.mipmaps,this._initialize(r),Object.seal(this)}_initialize(n){this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:n.data});let{width:i,height:r}=n;if(!i||!r){const s=Pt.getTextureDataSize(n.data);i=(s==null?void 0:s.width)||1,r=(s==null?void 0:s.height)||1}if(this.width=i,this.height=r,this.depth=n.depth,this.setSampler(n.sampler),this.view=new za(this.device,{...this.props,texture:this}),this.bind(),nY(this.gl,this.mipLevels,this),n.data)switch(n.dimension){case"1d":this.setTexture1DData(n.data);break;case"2d":this.setTexture2DData(n.data);break;case"3d":this.setTexture3DData(n.data);break;case"cube":this.setTextureCubeData(n.data);break;case"2d-array":this.setTextureArrayData(n.data);break;case"cube-array":this.setTextureCubeArrayData(n.data);break;default:throw new Error(n.dimension)}this.mipmaps&&this.generateMipmap()}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(n){return new za(this.device,{...n,texture:this})}setSampler(n={}){let i;n instanceof A0?(this.sampler=n,i=n.props):(this.sampler=new A0(this.device,n),i=n);const r=kO(i);this._setSamplerParameters(r)}generateMipmap(n){if(!(!(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format))&&(ge.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),!(n!=null&&n.force))))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(r){ge.warn(`Error generating mipmap for ${this}: ${r.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}copyExternalImage(n){const i=Pt.getExternalImageSize(n.image),r={...Pt.defaultCopyExternalImageOptions,...i,...n},{image:s,depth:a,mipLevel:c,x:f,y:h,z:p,flipY:m}=r;let{width:y,height:b}=r;const{dimension:v,glTarget:T,glFormat:S,glInternalFormat:w,glType:C}=this;if(y=Math.min(y,this.width-f),b=Math.min(b,this.height-h),n.sourceX||n.sourceY)throw new Error("WebGL does not support sourceX/sourceY)");return px(this.device.gl,this.handle,s,{dimension:v,mipLevel:c,x:f,y:h,z:p,width:y,height:b,depth:a,glFormat:S,glType:C,glTarget:T,flipY:m}),{width:r.width,height:r.height}}setTexture1DData(n){throw new Error("setTexture1DData not supported in WebGL.")}setTexture2DData(n,i=0){this.bind();const r=Pt.normalizeTextureData(n,this);r.length>1&&this.props.mipmaps!==!1&&ge.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let s=0;s<r.length;s++){const a=r[s];this._setMipLevel(i,s,a)}this.unbind()}setTexture3DData(n){if(this.props.dimension!=="3d")throw new Error(this.id);ArrayBuffer.isView(n)&&(this.bind(),gx(this.device.gl,n,this),this.unbind())}setTextureCubeData(n,i=0){if(this.props.dimension!=="cube")throw new Error(this.id);for(const r of Pt.CubeFaces)this.setTextureCubeFaceData(n[r],r)}setTextureArrayData(n){throw this.props.dimension!=="2d-array"?new Error(this.id):new Error("setTextureArrayData not implemented.")}setTextureCubeArrayData(n){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}setTextureCubeFaceData(n,i,r=0){Array.isArray(n)&&n.length>1&&this.props.mipmaps!==!1&&ge.warn(`${this.id} has mipmap and multiple LODs.`)();const s=Pt.CubeFaces.indexOf(i);this.setTexture2DData(n,s)}update(){throw new Error("Texture.update() not implemented. Use ExternalTexture")}setImageDataForFace(n){const{face:i,width:r,height:s,pixels:a,data:c,format:f=6408,type:h=5121}=n,{gl:p}=this,m=a||c;this.bind(),m instanceof Promise?m.then(y=>this.setImageDataForFace(Object.assign({},n,{face:i,data:y,pixels:y}))):this.width||this.height?p.texImage2D(i,0,f,r,s,0,f,h,m):p.texImage2D(i,0,f,f,h,m)}_getImageDataMap(n){for(let i=0;i<Pt.CubeFaces.length;++i){const r=Pt.CubeFaces[i];n[r]&&(n[34069+i]=n[r],delete n[r])}return n}_setSamplerParameters(n){ge.log(1,`${this.id} sampler parameters`,this.device.getGLKeys(n))(),this.gl.bindTexture(this.glTarget,this.handle);for(const[i,r]of Object.entries(n)){const s=Number(i),a=r;switch(s){case 33082:case 33083:this.gl.texParameterf(this.glTarget,s,a);break;case 10241:this.gl.texParameteri(this.glTarget,s,a);break;case 10242:case 10243:this.gl.texParameteri(this.glTarget,s,a);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,s,a);break;default:this.gl.texParameteri(this.glTarget,s,a);break}}this.gl.bindTexture(this.glTarget,null)}_setMipLevel(n,i,r,s=this.glTarget){if(Pt.isExternalImage(r)){px(this.device.gl,this.handle,r,{...this,depth:n,mipLevel:i,glTarget:s,flipY:this.props.flipY});return}if(Pt.isTextureLevelData(r)){gx(this.device.gl,r.data,{...this,depth:n,mipLevel:i,glTarget:s});return}throw new Error("Texture: invalid image data")}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(n){const{gl:i}=this;return n!==void 0&&(this.textureUnit=n,i.activeTexture(33984+n)),i.bindTexture(this.glTarget,this.handle),n}unbind(n){const{gl:i}=this;return n!==void 0&&(this.textureUnit=n,i.activeTexture(33984+n)),i.bindTexture(this.glTarget,null),n}}const lY=[1,2,4,8];class cY extends Q_{constructor(n,i){var a;super(n,i);M(this,"device");M(this,"glParameters");this.device=n;let r;if(!((a=i==null?void 0:i.parameters)!=null&&a.viewport))if(i!=null&&i.framebuffer){const{width:c,height:f}=i.framebuffer;r=[0,0,c,f]}else{const[c,f]=n.getCanvasContext().getDrawingBufferSize();r=[0,0,c,f]}this.device.pushState(),this.setParameters({viewport:r,...this.props.parameters});const s=this.props.framebuffer;if(s!=null&&s.handle)if(this.props.framebuffer){const c=this.props.framebuffer.colorAttachments.map((f,h)=>36064+h);this.device.gl.drawBuffers(c)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}setParameters(n={}){const i={...this.glParameters};i.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(i.depthMask=!this.props.depthReadOnly),i.stencilMask=this.props.stencilReadOnly?0:1,i[35977]=this.props.discard,n.viewport&&(n.viewport.length>=6?(i.viewport=n.viewport.slice(0,4),i.depthRange=[n.viewport[4],n.viewport[5]]):i.viewport=n.viewport),n.scissorRect&&(i.scissorTest=!0,i.scissor=n.scissorRect),n.blendConstant&&(i.blendColor=n.blendConstant),n.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),n[2967]=n.stencilReference),n.colorMask&&(i.colorMask=lY.map(r=>!!(r&n.colorMask))),this.glParameters=i,bl(this.device.gl,i)}beginOcclusionQuery(n){const i=this.props.occlusionQuerySet;i==null||i.beginOcclusionQuery()}endOcclusionQuery(){const n=this.props.occlusionQuerySet;n==null||n.endOcclusionQuery()}clear(){const n={...this.glParameters};let i=0;this.props.clearColors&&this.props.clearColors.forEach((r,s)=>{r&&this.clearColorBuffer(s,r)}),this.props.clearColor!==!1&&this.props.clearColors===void 0&&(i|=16384,n.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(i|=256,n.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(i|=1024,n.clearStencil=this.props.clearStencil),i!==0&&Pd(this.device.gl,n,()=>{this.device.gl.clear(i)})}clearColorBuffer(n=0,i=[0,0,0,0]){Pd(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(i.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,n,i);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,n,i);break;case Float32Array:this.device.gl.clearBufferfv(6144,n,i);break;default:throw new Error("clearColorBuffer: color must be typed array")}})}}function uY(t){return fY.includes(t)}const fY=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],LO={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function UO(t){const e=LO[t];if(!e)throw new Error("uniform");const[n,i,,r]=e;return{format:r,components:i,glType:n}}function hY(t){const e=LO[t];if(!e)throw new Error("attribute");const[,n,,i,r]=e;return{attributeType:i,vertexFormat:r,components:n}}function dY(t,e){const n={attributes:[],bindings:[]};n.attributes=pY(t,e);const i=yY(t,e);for(const c of i){const f=c.uniforms.map(h=>({name:h.name,format:h.format,byteOffset:h.byteOffset,byteStride:h.byteStride,arrayLength:h.arrayLength}));n.bindings.push({type:"uniform",name:c.name,group:0,location:c.location,visibility:(c.vertex?1:0)&(c.fragment?2:0),minBindingSize:c.byteLength,uniforms:f})}const r=mY(t,e);let s=0;for(const c of r)if(uY(c.type)){const{viewDimension:f,sampleType:h}=bY(c.type);n.bindings.push({type:"texture",name:c.name,group:0,location:s,viewDimension:f,sampleType:h}),c.textureUnit=s,s+=1}r.length&&(n.uniforms=r);const a=gY(t,e);return a!=null&&a.length&&(n.varyings=a),n}function pY(t,e){const n=[],i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r);if(!s)throw new Error("activeInfo");const{name:a,type:c}=s,f=t.getAttribLocation(e,a);if(f>=0){const{attributeType:h}=hY(c),p=/instance/i.test(a)?"instance":"vertex";n.push({name:a,location:f,stepMode:p,type:h})}}return n.sort((r,s)=>r.location-s.location),n}function gY(t,e){const n=[],i=t.getProgramParameter(e,35971);for(let r=0;r<i;r++){const s=t.getTransformFeedbackVarying(e,r);if(!s)throw new Error("activeInfo");const{name:a,type:c,size:f}=s,{glType:h,components:p}=UO(c),m={location:r,name:a,type:h,size:f*p};n.push(m)}return n.sort((r,s)=>r.location-s.location),n}function mY(t,e){const n=[],i=t.getProgramParameter(e,35718);for(let r=0;r<i;r++){const s=t.getActiveUniform(e,r);if(!s)throw new Error("activeInfo");const{name:a,size:c,type:f}=s,{name:h,isArray:p}=vY(a);let m=t.getUniformLocation(e,h);const y={location:m,name:h,size:c,type:f,isArray:p};if(n.push(y),y.size>1)for(let b=0;b<y.size;b++){const v=`${h}[${b}]`;m=t.getUniformLocation(e,v);const T={...y,name:v,location:m};n.push(T)}}return n}function yY(t,e){const n=(s,a)=>t.getActiveUniformBlockParameter(e,s,a),i=[],r=t.getProgramParameter(e,35382);for(let s=0;s<r;s++){const a={name:t.getActiveUniformBlockName(e,s)||"",location:n(s,35391),byteLength:n(s,35392),vertex:n(s,35396),fragment:n(s,35398),uniformCount:n(s,35394),uniforms:[]},c=n(s,35395)||[],f=t.getActiveUniforms(e,c,35383),h=t.getActiveUniforms(e,c,35384),p=t.getActiveUniforms(e,c,35387),m=t.getActiveUniforms(e,c,35388);for(let y=0;y<a.uniformCount;++y){const b=t.getActiveUniform(e,c[y]);if(!b)throw new Error("activeInfo");a.uniforms.push({name:b.name,format:UO(f[y]).format,type:f[y],arrayLength:h[y],byteOffset:p[y],byteStride:m[y]})}i.push(a)}return i.sort((s,a)=>s.location-a.location),i}const _Y={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function bY(t){const e=_Y[t];if(!e)throw new Error("sampler");const[n,i]=e;return{viewDimension:n,sampleType:i}}function vY(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const n=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!n||n.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:n[1],length:n[2]?1:0,isArray:!!n[2]}}function TY(t,e,n,i){const r=t;let s=i;s===!0&&(s=1),s===!1&&(s=0);const a=typeof s=="number"?[s]:s;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof i!="number")throw new Error("samplers must be set to integers");return t.uniform1i(e,i);case 5126:return t.uniform1fv(e,a);case 35664:return t.uniform2fv(e,a);case 35665:return t.uniform3fv(e,a);case 35666:return t.uniform4fv(e,a);case 5124:return t.uniform1iv(e,a);case 35667:return t.uniform2iv(e,a);case 35668:return t.uniform3iv(e,a);case 35669:return t.uniform4iv(e,a);case 35670:return t.uniform1iv(e,a);case 35671:return t.uniform2iv(e,a);case 35672:return t.uniform3iv(e,a);case 35673:return t.uniform4iv(e,a);case 5125:return r.uniform1uiv(e,a,1);case 36294:return r.uniform2uiv(e,a,2);case 36295:return r.uniform3uiv(e,a,3);case 36296:return r.uniform4uiv(e,a,4);case 35674:return t.uniformMatrix2fv(e,!1,a);case 35675:return t.uniformMatrix3fv(e,!1,a);case 35676:return t.uniformMatrix4fv(e,!1,a);case 35685:return r.uniformMatrix2x3fv(e,!1,a);case 35686:return r.uniformMatrix2x4fv(e,!1,a);case 35687:return r.uniformMatrix3x2fv(e,!1,a);case 35688:return r.uniformMatrix3x4fv(e,!1,a);case 35689:return r.uniformMatrix4x2fv(e,!1,a);case 35690:return r.uniformMatrix4x3fv(e,!1,a)}throw new Error("Illegal uniform")}function SY(t){return bO(t)!==null||typeof t=="number"||typeof t=="boolean"}function EY(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const i=t[n];SY(i)?e.uniforms[n]=i:e.bindings[n]=i}),e}function wY(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw new Error(t)}}function AY(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;default:throw new Error(t)}}const mx=4;class xY extends il{constructor(n,i){super(n,i);M(this,"device");M(this,"handle");M(this,"vs");M(this,"fs");M(this,"introspectedLayout");M(this,"uniforms",{});M(this,"bindings",{});M(this,"varyings",null);M(this,"_uniformCount",0);M(this,"_uniformSetters",{});this.device=n,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=i.vs,this.fs=i.fs;const{varyings:r,bufferMode:s=35981}=i;r&&r.length>0&&(this.varyings=r,this.device.gl.transformFeedbackVaryings(this.handle,r,s)),this._linkShaders(),ge.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=dY(this.device.gl,this.handle),ge.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=RY(this.introspectedLayout,i.shaderLayout)}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(n,i){for(const[r,s]of Object.entries(n)){const a=this.shaderLayout.bindings.find(c=>c.name===r)||this.shaderLayout.bindings.find(c=>c.name===`${r}Uniforms`);if(!a){const c=this.shaderLayout.bindings.map(f=>`"${f.name}"`).join(", ");i!=null&&i.disableWarnings||ge.warn(`No binding "${r}" in render pipeline "${this.id}", expected one of ${c}`,s)();continue}switch(s||ge.warn(`Unsetting binding "${r}" in render pipeline "${this.id}"`)(),a.type){case"uniform":if(!(s instanceof Xc)&&!(s.buffer instanceof Xc))throw new Error("buffer value");break;case"texture":if(!(s instanceof za||s instanceof qc||s instanceof Wc))throw new Error("texture value");break;case"sampler":ge.warn(`Ignoring sampler ${r}`)();break;default:throw new Error(a.type)}this.bindings[r]=s}}draw(n){var S;const{renderPass:i,parameters:r=this.props.parameters,topology:s=this.props.topology,vertexArray:a,vertexCount:c,instanceCount:f,isInstanced:h=!1,firstVertex:p=0,transformFeedback:m}=n,y=wY(s),b=!!a.indexBuffer,v=(S=a.indexBuffer)==null?void 0:S.glIndexType;if(this.linkStatus!=="success")return ge.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return ge.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),a.bindBeforeRender(i),m&&m.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const T=i;return Wq(this.device,r,T.glParameters,()=>{b&&h?this.device.gl.drawElementsInstanced(y,c||0,v,p,f||0):b?this.device.gl.drawElements(y,c||0,v,p):h?this.device.gl.drawArraysInstanced(y,p,c||0,f||0):this.device.gl.drawArrays(y,p,c||0),m&&m.end()}),a.unbindAfterRender(i),!0}setUniformsWebGL(n){const{bindings:i}=EY(n);Object.keys(i).forEach(r=>{ge.warn(`Unsupported value "${JSON.stringify(i[r])}" used in setUniforms() for key ${r}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,n)}async _linkShaders(){const{gl:n}=this.device;if(n.attachShader(this.handle,this.vs.handle),n.attachShader(this.handle,this.fs.handle),ge.time(mx,`linkProgram for ${this.id}`)(),n.linkProgram(this.handle),ge.timeEnd(mx,`linkProgram for ${this.id}`)(),ge.level,!this.device.features.has("compilation-status-async-webgl")){const r=this._getLinkStatus();this._reportLinkStatus(r);return}ge.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),ge.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const i=this._getLinkStatus();this._reportLinkStatus(i)}async _reportLinkStatus(n){var i;switch(n){case"success":return;default:switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);case"pending":this.vs.asyncCompilationStatus.then(()=>this.vs.debugShader());break}switch((i=this.fs)==null?void 0:i.compilationStatus){case"error":throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);case"pending":this.fs.asyncCompilationStatus.then(()=>this.fs.debugShader());break}const r=this.device.gl.getProgramInfoLog(this.handle);throw new Error(`Error during ${n}: ${r}`)}}_getLinkStatus(){const{gl:n}=this.device;return n.getProgramParameter(this.handle,35714)?(n.validateProgram(this.handle),n.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const n=async s=>await new Promise(a=>setTimeout(a,s));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:r}=this.device;for(;;){if(r.getProgramParameter(this.handle,37297))return;await n(10)}}_areTexturesRenderable(){let n=!0;for(const i of this.shaderLayout.bindings)!this.bindings[i.name]&&!this.bindings[i.name.replace(/Uniforms$/,"")]&&(ge.warn(`Binding ${i.name} not found in ${this.id}`)(),n=!1);return n}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:n}=this.device;n.useProgram(this.handle);let i=0,r=0;for(const s of this.shaderLayout.bindings){const a=this.bindings[s.name]||this.bindings[s.name.replace(/Uniforms$/,"")];if(!a)throw new Error(`No value for binding ${s.name} in ${this.id}`);switch(s.type){case"uniform":const{name:c}=s,f=n.getUniformBlockIndex(this.handle,c);if(f===4294967295)throw new Error(`Invalid uniform block name ${c}`);n.uniformBlockBinding(this.handle,r,f),a instanceof Xc?n.bindBufferBase(35345,r,a.handle):n.bindBufferRange(35345,r,a.buffer.handle,a.offset||0,a.size||a.buffer.byteLength-a.offset),r+=1;break;case"texture":if(!(a instanceof za||a instanceof qc||a instanceof Wc))throw new Error("texture");let h;if(a instanceof za)h=a.texture;else if(a instanceof qc)h=a;else if(a instanceof Wc&&a.colorAttachments[0]instanceof za)ge.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),h=a.colorAttachments[0].texture;else throw new Error("No texture");n.activeTexture(33984+i),n.bindTexture(h.glTarget,h.handle),i+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${s.type}' not supported in WebGL`)}}}_applyUniforms(){for(const n of this.shaderLayout.uniforms||[]){const{name:i,location:r,type:s,textureUnit:a}=n,c=this.uniforms[i]??a;c!==void 0&&TY(this.device.gl,r,s,c)}}}function RY(t,e){const n={...t,attributes:t.attributes.map(i=>({...i}))};for(const i of(e==null?void 0:e.attributes)||[]){const r=n.attributes.find(s=>s.name===i.name);r?(r.type=i.type||r.type,r.stepMode=i.stepMode||r.stepMode):ge.warn(`shader layout attribute ${i.name} not present in shader`)}return n}class CY extends J_{constructor(n){super(n,{});M(this,"device");M(this,"commands",[]);this.device=n}submitCommands(n=this.commands){for(const i of n)switch(i.name){case"copy-buffer-to-buffer":OY(this.device,i.options);break;case"copy-buffer-to-texture":MY(this.device,i.options);break;case"copy-texture-to-buffer":PY(this.device,i.options);break;case"copy-texture-to-texture":NY(this.device,i.options);break;default:throw new Error(i.name)}}}function OY(t,e){const n=e.sourceBuffer,i=e.destinationBuffer;t.gl.bindBuffer(36662,n.handle),t.gl.bindBuffer(36663,i.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function MY(t,e){throw new Error("Not implemented")}function PY(t,e){const{sourceTexture:n,mipLevel:i=0,aspect:r="all",width:s=e.sourceTexture.width,height:a=e.sourceTexture.height,depthOrArrayLayers:c=0,origin:f=[0,0],destinationBuffer:h,byteOffset:p=0,bytesPerRow:m,rowsPerImage:y}=e;if(r!=="all")throw new Error("aspect not supported in WebGL");if(i!==0||c!==0||m||y)throw new Error("not implemented");const{framebuffer:b,destroyFramebuffer:v}=FO(n);let T;try{const S=h,w=s||b.width,C=a||b.height,A=MO(b.colorAttachments[0].texture.props.format),O=A.format,R=A.type;t.gl.bindBuffer(35051,S.handle),T=t.gl.bindFramebuffer(36160,b.handle),t.gl.readPixels(f[0],f[1],w,C,O,R,p)}finally{t.gl.bindBuffer(35051,null),T!==void 0&&t.gl.bindFramebuffer(36160,T),v&&b.destroy()}}function NY(t,e){const{sourceTexture:n,destinationMipLevel:i=0,origin:r=[0,0],destinationOrigin:s=[0,0],destinationTexture:a}=e;let{width:c=e.destinationTexture.width,height:f=e.destinationTexture.height}=e;const{framebuffer:h,destroyFramebuffer:p}=FO(n),[m,y]=r,[b,v,T]=s,S=t.gl.bindFramebuffer(36160,h.handle);let w=null,C;if(a instanceof qc)w=a,c=Number.isFinite(c)?c:w.width,f=Number.isFinite(f)?f:w.height,w.bind(0),C=w.glTarget;else throw new Error("invalid destination");switch(C){case 3553:case 34067:t.gl.copyTexSubImage2D(C,i,b,v,m,y,c,f);break;case 35866:case 32879:t.gl.copyTexSubImage3D(C,i,b,v,T,m,y,c,f);break}w&&w.unbind(),t.gl.bindFramebuffer(36160,S),p&&h.destroy()}function FO(t){if(t instanceof Pt){const{width:e,height:n,id:i}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${i}`,width:e,height:n,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class kY extends G_{constructor(n,i){super(n,i);M(this,"device");M(this,"commandBuffer");this.device=n,this.commandBuffer=new CY(n)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(n){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:n})}copyBufferToTexture(n){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:n})}copyTextureToBuffer(n){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:n})}copyTextureToTexture(n){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:n})}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}resolveQuerySet(n,i,r){}}function IY(t){const{target:e,source:n,start:i=0,count:r=1}=t,s=n.length,a=r*s;let c=0;for(let f=i;c<s;c++)e[f++]=n[c];for(;c<a;)c<a-c?(e.copyWithin(i+c,i,i+c),c*=2):(e.copyWithin(i+c,i,i+a-c),c=a);return t.target}class Jb extends e0{constructor(n,i){super(n,i);M(this,"device");M(this,"handle");M(this,"buffer",null);M(this,"bufferValue",null);this.device=n,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(n){return p8()==="Chrome"}destroy(){var n;super.destroy(),this.buffer&&((n=this.buffer)==null||n.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(n){const i=n;if(i&&i.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,i?i.handle:null),this.indexBuffer=i,this.device.gl.bindVertexArray(null)}setBuffer(n,i){const r=i;if(r.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:s,type:a,stride:c,offset:f,normalized:h,integer:p,divisor:m}=this._getAccessor(n);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,r.handle),p?this.device.gl.vertexAttribIPointer(n,s,a,c,f):this.device.gl.vertexAttribPointer(n,s,a,h,c,f),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(n),this.device.gl.vertexAttribDivisor(n,m||0),this.attributes[n]=r,this.device.gl.bindVertexArray(null)}setConstantWebGL(n,i){this._enable(n,!1),this.attributes[n]=i}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let n=0;n<this.maxVertexAttributes;++n){const i=this.attributes[n];ArrayBuffer.isView(i)&&this.device.setConstantAttributeWebGL(n,i)}}_getAccessor(n){const i=this.attributeInfos[n];if(!i)throw new Error(`Unknown attribute location ${n}`);const r=OO(i.bufferDataType);return{size:i.bufferComponents,type:r,stride:i.byteStride,offset:i.byteOffset,normalized:i.normalized,integer:i.integer,divisor:i.stepMode==="instance"?1:0}}_enable(n,i=!0){const s=Jb.isConstantAttributeZeroSupported(this.device)||n!==0;(i||s)&&(n=Number(n),this.device.gl.bindVertexArray(this.handle),i?this.device.gl.enableVertexAttribArray(n):this.device.gl.disableVertexAttribArray(n),this.device.gl.bindVertexArray(null))}getConstantBuffer(n,i){const r=DY(i),s=r.byteLength*n,a=r.length*n;if(this.buffer&&s!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${s} !== ${this.buffer.byteLength}.`);let c=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:s}),c=c||!BY(r,this.bufferValue),c){const f=a7(i.constructor,a);IY({target:f,source:r,start:0,count:a}),this.buffer.write(f),this.bufferValue=i}return this.buffer}}function DY(t){return Array.isArray(t)?new Float32Array(t):t}function BY(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}class LY extends t0{constructor(n,i){super(n,i);M(this,"device");M(this,"gl");M(this,"handle");M(this,"layout");M(this,"buffers",{});M(this,"unusedBuffers",{});M(this,"bindOnUse",!0);M(this,"_bound",!1);this.device=n,this.gl=n.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,i.buffers&&this.setBuffers(i.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(n="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(AY(n))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(n){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const i in n)this.setBuffer(i,n[i])})}setBuffer(n,i){const r=this._getVaryingIndex(n),{buffer:s,byteLength:a,byteOffset:c}=this._getBufferRange(i);if(r<0){this.unusedBuffers[n]=s,ge.warn(`${this.id} unusedBuffers varying buffer ${n}`)();return}this.buffers[r]={buffer:s,byteLength:a,byteOffset:c},this.bindOnUse||this._bindBuffer(r,s,c,a)}getBuffer(n){if(yx(n))return this.buffers[n]||null;const i=this._getVaryingIndex(n);return i>=0?this.buffers[i]:null}bind(n=this.handle){if(typeof n!="function")return this.gl.bindTransformFeedback(36386,n),this;let i;return this._bound?i=n():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,i=n(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),i}unbind(){this.bind(null)}_getBufferRange(n){if(n instanceof Xc)return{buffer:n,byteOffset:0,byteLength:n.byteLength};const{buffer:i,byteOffset:r=0,byteLength:s=n.buffer.byteLength}=n;return{buffer:i,byteOffset:r,byteLength:s}}_getVaryingIndex(n){if(yx(n))return Number(n);for(const i of this.layout.varyings)if(n===i.name)return i.location;return-1}_bindBuffers(){for(const n in this.buffers){const{buffer:i,byteLength:r,byteOffset:s}=this._getBufferRange(this.buffers[n]);this._bindBuffer(Number(n),i,s,r)}}_unbindBuffers(){for(const n in this.buffers)this.gl.bindBufferBase(35982,Number(n),null)}_bindBuffer(n,i,r=0,s){const a=i&&i.handle;!a||s===void 0?this.gl.bindBufferBase(35982,n,a):this.gl.bindBufferRange(35982,n,a,r,s)}}function yx(t){return typeof t=="number"?Number.isInteger(t):/^\d+$/.test(t)}class UY extends n0{constructor(n,i){super(n,i);M(this,"device");M(this,"handle");M(this,"target",null);M(this,"_queryPending",!1);M(this,"_pollingPromise",null);if(this.device=n,i.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(n){return this._begin(n!=null&&n.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(n){this._queryPending||(this.target=n,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const n=this.device.gl.getQueryParameter(this.handle,34919);return n&&(this._queryPending=!1),n}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(n=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let i=0;return this._pollingPromise=new Promise((r,s)=>{const a=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):i++>n?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(a)};requestAnimationFrame(a)}),this._pollingPromise}}class _s extends vs{constructor(n){var m,y;super({...n,id:n.id||zq("webgl-device")});M(this,"type","webgl");M(this,"handle");M(this,"features");M(this,"limits");M(this,"info");M(this,"canvasContext");M(this,"lost");M(this,"_resolveContextLost");M(this,"gl");M(this,"debug",!1);M(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});M(this,"_extensions",{});M(this,"_polyfilled",!1);M(this,"spectorJS");M(this,"renderPass",null);M(this,"_constants");const i=vs._getCanvasContextProps(n);if(!i)throw new Error("WebGLDevice requires props.createCanvasContext to be set");let r=(y=(m=i.canvas)==null?void 0:m.gl)==null?void 0:y.device;if(r)throw new Error(`WebGL context already attached to device ${r.id}`);this.canvasContext=new Oq(this,i),this.lost=new Promise(b=>{this._resolveContextLost=b});const s={...n.webgl};i.alphaMode==="premultiplied"&&(s.premultipliedAlpha=!0),n.powerPreference!==void 0&&(s.powerPreference=n.powerPreference);const c=this.props._handle||cq(this.canvasContext.canvas,{onContextLost:b=>{var v;return(v=this._resolveContextLost)==null?void 0:v.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})},onContextRestored:b=>console.log("WebGL context restored")},s);if(!c)throw new Error("WebGL context creation failed");if(r=c.device,r){if(n._reuseDevices)return ge.log(1,`Not creating a new Device, instead returning a reference to Device ${r.id} already attached to WebGL context`,r)(),r._reused=!0,r;throw new Error(`WebGL context already attached to device ${r.id}`)}this.handle=c,this.gl=c,this.spectorJS=Nq({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=uq(this.gl,this._extensions),this.limits=new xq(this.gl),this.features=new Aq(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),i.autoResize!==!1&&this.canvasContext.resize(),new po(this.gl,{log:(...b)=>ge.log(1,...b)()}).trackState(this.gl,{copyState:!1});const h=n.debugWebGL||n.debug,p=n.debugWebGL;h&&(this.gl=Dq(this.gl,{debugWebGL:h,traceWebGL:p}),ge.warn("WebGL debug mode activated. Performance reduced.")(),n.debugWebGL&&(ge.level=Math.max(ge.level,1)))}destroy(){!this.props._reuseDevices&&!this._reused&&delete this.gl.device}get isLost(){return this.gl.isContextLost()}createCanvasContext(n){throw new Error("WebGL only supports a single canvas")}createBuffer(n){const i=this._normalizeBufferProps(n);return new Xc(this,i)}createTexture(n){return new qc(this,n)}createExternalTexture(n){throw new Error("createExternalTexture() not implemented")}createSampler(n){return new A0(this,n)}createShader(n){return new Hq(this,n)}createFramebuffer(n){return new Wc(this,n)}createVertexArray(n){return new Jb(this,n)}createTransformFeedback(n){return new LY(this,n)}createQuerySet(n){return new UY(this,n)}createRenderPipeline(n){return new xY(this,n)}beginRenderPass(n){return new cY(this,n)}createComputePipeline(n){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(n){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(n={}){return new kY(this,n)}submit(){var n;(n=this.renderPass)==null||n.end(),this.renderPass=null}readPixelsToArrayWebGL(n,i){return rY(n,i)}readPixelsToBufferWebGL(n,i){return sY(n,i)}setParametersWebGL(n){bl(this.gl,n)}getParametersWebGL(n){return RO(this.gl,n)}withParametersWebGL(n,i){return Pd(this.gl,n,i)}resetWebGL(){ge.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),rq(this.gl)}_getDeviceSpecificTextureFormatCapabilities(n){return Tq(this.gl,n,this._extensions)}loseDevice(){var s;let n=!1;const r=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return r&&(n=!0,r.loseContext()),(s=this._resolveContextLost)==null||s.call(this,{reason:"destroyed",message:"Application triggered context loss"}),n}pushState(){po.get(this.gl).push()}popState(){po.get(this.gl).pop()}setSpectorMetadata(n,i){n.__SPECTOR_Metadata=i}getGLKey(n,i){const r=Number(n);for(const s in this.gl)if(this.gl[s]===r)return`GL.${s}`;return i!=null&&i.emptyIfUnknown?"":String(n)}getGLKeys(n){const i={emptyIfUnknown:!0};return Object.entries(n).reduce((r,[s,a])=>(r[`${s}:${this.getGLKey(s,i)}`]=`${a}:${this.getGLKey(a,i)}`,r),{})}setConstantAttributeWebGL(n,i){const r=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(r).fill(null);const s=this._constants[n];switch(s&&$Y(s,i)&&ge.info(1,`setConstantAttributeWebGL(${n}) could have been skipped, value unchanged`)(),this._constants[n]=i,i.constructor){case Float32Array:FY(this,n,i);break;case Int32Array:zY(this,n,i);break;case Uint32Array:VY(this,n,i);break;default:throw new Error("constant")}}getExtension(n){return ul(this.gl,n,this._extensions),this._extensions}}function FY(t,e,n){switch(n.length){case 1:t.gl.vertexAttrib1fv(e,n);break;case 2:t.gl.vertexAttrib2fv(e,n);break;case 3:t.gl.vertexAttrib3fv(e,n);break;case 4:t.gl.vertexAttrib4fv(e,n);break}}function zY(t,e,n){t.gl.vertexAttribI4iv(e,n)}function VY(t,e,n){t.gl.vertexAttribI4uiv(e,n)}function $Y(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}const jY={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},HY=t=>({drawBuffersWEBGL(e){return t.drawBuffers(e)},COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),WY=t=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES(){return t.createVertexArray()},deleteVertexArrayOES(e){return t.deleteVertexArray(e)},isVertexArrayOES(e){return t.isVertexArray(e)},bindVertexArrayOES(e){return t.bindVertexArray(e)}}),XY=t=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(...e){return t.drawArraysInstanced(...e)},drawElementsInstancedANGLE(...e){return t.drawElementsInstanced(...e)},vertexAttribDivisorANGLE(...e){return t.vertexAttribDivisor(...e)}});function qY(t=!0){const e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext){e.getContext=e.originalGetContext,e.originalGetContext=void 0;return}e.originalGetContext=e.getContext,e.getContext=function(n,i){if(n==="webgl"||n==="experimental-webgl"){const r=this.originalGetContext("webgl2",i);return r instanceof HTMLElement&&YY(r),r}return this.originalGetContext(n,i)}}function YY(t){t.getExtension("EXT_color_buffer_float");const e={...jY,WEBGL_disjoint_timer_query:t.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:HY(t),OES_vertex_array_object:WY(t),ANGLE_instanced_arrays:XY(t)},n=t.getExtension;t.getExtension=function(r){const s=n.call(t,r);return s||(r in e?e[r]:null)};const i=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=i.apply(t)||[];return r==null?void 0:r.concat(Object.keys(e))}}const bh=1;class KY extends L${constructor(){super();M(this,"type","webgl");vs.defaultProps={...vs.defaultProps,...Gb},_s.adapter=this}isSupported(){return typeof WebGL2RenderingContext<"u"}enforceWebGL2(n){qY(n)}async attach(n){if(n instanceof _s)return n;if((n==null?void 0:n.device)instanceof vs)return n.device;if(!ZY(n))throw new Error("Invalid WebGL2RenderingContext");return new _s({_handle:n,createCanvasContext:{canvas:n.canvas,autoResize:!1}})}async create(n={}){ge.groupCollapsed(bh,"WebGLDevice created")();const i=[];(n.debugWebGL||n.debug)&&i.push(Iq()),n.debugSpectorJS&&i.push(Pq(n));const r=await Promise.allSettled(i);for(const c of r)c.status==="rejected"&&ge.error(`Failed to initialize debug libraries ${c.reason}`)();const s=new _s(n),a=`${s._reused?"Reusing":"Created"} device with WebGL2 ${s.debug?"debug ":""}context: ${s.info.vendor}, ${s.info.renderer} for canvas: ${s.canvasContext.id}`;return ge.probe(bh,a)(),ge.table(bh,s.info)(),ge.groupEnd(bh)(),s}}function ZY(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}const _x=new KY;function fs(){}const QY=({isDragging:t})=>t?"grabbing":"grab",zO={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:fs,onWebGLInitialized:fs,onResize:fs,onViewStateChange:fs,onInteractionStateChange:fs,onBeforeRender:fs,onAfterRender:fs,onLoad:fs,onError:t=>Ue.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:QY,getTooltip:null,debug:!1,drawPickingColors:!1};class ev{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Iu({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=i=>{const{_pickRequest:r}=this;if(i.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(i.leftButton||i.rightButton)return;{const s=i.offsetCenter;if(!s)return;r.x=s.x,r.y=s.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=i},this._onEvent=i=>{const r=d0[i.type],s=i.offsetCenter;if(!r||!s||!this.layerManager)return;const a=this.layerManager.getLayers(),c=this.deckPicker.getLastPickedObject({x:s.x,y:s.y,layers:a,viewports:this.getViewports(s)},this._lastPointerDownInfo),{layer:f}=c,h=f&&(f[r]||f.props[r]),p=this.props[r];let m=!1;h&&(m=h.call(f,c,i)),m||(p==null||p(c,i),this.widgetManager.onEvent(c,i))},this._onPointerDown=i=>{const r=i.offsetCenter,s=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=s.result[0]||s.emptyInfo},this.props={...zO,...e},e=this.props,e.viewState&&e.initialViewState&&Ue.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device&&(this.device=e.device);let n=this.device;!n&&e.gl&&(e.gl instanceof WebGLRenderingContext&&Ue.error("WebGL1 context not supported.")(),n=_x.attach(e.gl)),n||(n=K_.createDevice({type:"best-available",_reuseDevices:!0,adapters:[_x],...e.deviceProps,createCanvasContext:{canvas:this._createCanvas(e),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(n,e),this.setProps(e),e._typedArrayManagerProps&&al.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,s,a,c,f,h,p;(e=this.animationLoop)==null||e.stop(),(n=this.animationLoop)==null||n.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(i=this.layerManager)==null||i.finalize(),this.layerManager=null,(r=this.viewManager)==null||r.finalize(),this.viewManager=null,(s=this.effectManager)==null||s.finalize(),this.effectManager=null,(a=this.deckRenderer)==null||a.finalize(),this.deckRenderer=null,(c=this.deckPicker)==null||c.finalize(),this.deckPicker=null,(f=this.eventManager)==null||f.destroy(),this.eventManager=null,(h=this.widgetManager)==null||h.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((p=this.canvas.parentElement)==null||p.removeChild(this.canvas),this.canvas=null)}setProps(e){var i;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Ue.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Ue.removed("onLayerClick","onClick")(),e.initialViewState&&!xi(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(i=this.animationLoop)==null||i.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n),this.widgetManager.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return n=n||i||r||s||a,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return cn(this.viewManager),this.viewManager.views}getViewports(e){return cn(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var n;(n=this.layerManager)==null||n.removeDefaultShaderModule(e)}_pick(e,n,i){cn(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),cn(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){var r;if(!this.canvas)return;const{width:n,height:i}=e;if(n||n===0){const s=Number.isFinite(n)?`${n}px`:n;this.canvas.style.width=s}if(i||i===0){const s=Number.isFinite(i)?`${i}px`:i;this.canvas.style.position=((r=e.style)==null?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var r,s;const{canvas:e}=this;if(!e)return;const n=e.clientWidth??e.width,i=e.clientHeight??e.height;(n!==this.width||i!==this.height)&&(this.width=n,this.height=i,(r=this.viewManager)==null||r.setProps({width:n,height:i}),(s=this.layerManager)==null||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:n,height:i}))}_createAnimationLoop(e,n){const{gl:i,onError:r,useDevicePixels:s}=n;return new eX({device:e,useDevicePixels:s,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,onInitialize:a=>this._setDevice(a.device),onRender:this._onRenderFrame.bind(this),onError:r})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,n=Array.isArray(e)?e:e?[e]:[new Yb({id:"default-view"})];return n.length&&this.props.controller&&(n[0].props.controller=this.props.controller),n}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){var n,i,r;const{_pickRequest:e}=this;if(e.event){const{result:s,emptyInfo:a}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=s.length>0;let c=a,f=!1;for(const h of s)c=h,f=((n=h.layer)==null?void 0:n.onHover(h,e.event))||f;f||((r=(i=this.props).onHover)==null||r.call(i,c,e.event),this.widgetManager.onHover(c,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var r,s;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=(r=this.device.canvasContext)==null?void 0:r.canvas),this.device instanceof _s&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof _s&&this.props.onWebGLInitialized(this.device.gl);const n=new _O;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new LH(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(FA).map(a=>{var b;const[c,f,h,p]=FA[a],m=(b=this.props.eventRecognizerOptions)==null?void 0:b[a],y={...f,...m,event:a};return{recognizer:new c(y),recognizeWith:h,requestFailure:p}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const a in d0)this.eventManager.on(a,this._onEvent);this.viewManager=new wX({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new EX(this.device,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new zX({deck:this,device:this.device}),this.deckRenderer=new jX(this.device),this.deckPicker=new KX(this.device),this.widgetManager=new GX({deck:this,parentElement:(s=this.canvas)==null?void 0:s.parentElement}),this.widgetManager.addDefault(new eq),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){var a;const{device:i,gl:r}=this.layerManager.context;this.props.onBeforeRender({device:i,gl:r});const s={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n};(a=this.deckRenderer)==null||a.renderLayers(s),s.pass==="screen"&&this.widgetManager.onRedraw({viewports:s.viewports,layers:s.layers}),this.props.onAfterRender({device:i,gl:r})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Ue.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=K_.stats.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}ev.defaultProps=zO;ev.VERSION=$V;function GY(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return x3(t)}}const JY=A3;function vh(t,e){return{attribute:t,format:e.size>1?`${e.type}x${e.size}`:e.type,byteOffset:e.offset||0}}function oo(t){return t.stride||t.size*t.bytesPerElement}function eK(t,e){return t.type===e.type&&t.size===e.size&&oo(t)===oo(e)&&(t.offset||0)===(e.offset||0)}function x0(t,e){e.offset&&Ue.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=oo(t),i=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,r=e.elementOffset||0,s=i*n+r*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function tK(t,e){const n=x0(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class nK{constructor(e,n,i){this._buffer=null,this.device=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,s=r==="float64";let{defaultValue:a}=n;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let c;s?c="float32":!r&&n.isIndexed?c="uint32":c=r||"float32";let f=GY(r||c);this.doublePrecision=s,s&&n.fp64===!1&&(f=Float32Array),this.value=null,this.settings={...n,defaultType:f,defaultValue:a,logicalType:r,type:c,normalized:c.includes("norm"),size:this.size,bytesPerElement:f.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*oo(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),al.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,n=null){const i={};if(this.state.constant){const r=this.value;if(n){const s=x0(this.getAccessor(),n),a=s.offset/r.BYTES_PER_ELEMENT,c=s.size||this.size;i[e]=r.subarray(a,a+c)}else i[e]=r}else i[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?i[`${e}64Low`]=i[e]:i[`${e}64Low`]=new Float32Array(this.size)),i}_getBufferLayout(e=this.id,n=null){const i=this.getAccessor(),r=[],s={name:this.id,byteStride:oo(i),attributes:r};if(this.doublePrecision){const a=tK(i,n||{});r.push(vh(e,{...i,...a.high}),vh(`${e}64Low`,{...i,...a.low}))}else if(n){const a=x0(i,n);r.push(vh(e,{...i,...a}))}else r.push(vh(e,i));return s}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,s=i*r;if(n&&s&&n.length>=s){const a=new Array(r).fill(1/0),c=new Array(r).fill(-1/0);for(let f=0;f<s;)for(let h=0;h<r;h++){const p=n[f++];p<a[h]&&(a[h]=p),p>c[h]&&(c[h]=p)}e=[a,c]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;ArrayBuffer.isView(e)?i={value:e}:e instanceof Nt?i={buffer:e}:i=e;const r={...this.settings,...i};if(ArrayBuffer.isView(i.value)){if(!i.type)if(this.doublePrecision&&i.value instanceof Float64Array)r.type="float32";else{const a=JY(i.value);r.type=r.normalized?a.replace("int","norm"):a}r.bytesPerElement=i.value.BYTES_PER_ELEMENT,r.stride=oo(r)}if(n.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=ArrayBuffer.isView(s)?s:new Float32Array(s)}else if(i.buffer){const s=i.buffer;n.externalBuffer=s,n.constant=!1,this.value=i.value||null}else if(i.value){this._checkExternalBuffer(i);let s=i.value;n.externalBuffer=null,n.constant=!1,this.value=s;let{buffer:a}=this;const c=oo(r),f=(r.vertexOffset||0)*c;if(this.doublePrecision&&s instanceof Float64Array&&(s=Fy(s,r)),this.settings.isIndexed){const p=this.settings.defaultType;s.constructor!==p&&(s=new p(s))}const h=s.byteLength+f+c*2;(!a||a.byteLength<h)&&(a=this._createBuffer(h)),a.write(s,f)}return this.setAccessor(r),!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.write(this.doublePrecision&&n instanceof Float64Array?Fy(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),i*n.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,s=al.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{byteOffset:a}=this;let{buffer:c}=this;return(!c||c.byteLength<s.byteLength+a)&&(c=this._createBuffer(s.byteLength+a),n&&r&&c.write(r instanceof Float64Array?Fy(r,this):r,a)),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error(`Attribute ${this.id} value is not TypedArray`);const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error(`Attribute ${this.id} does not support ${n.constructor.name}`);!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&Ue.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map(n=>(n+128)/255*2-1);case"snorm16":return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case"unorm8":return new Float32Array(e).map(n=>n/255);case"unorm16":return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e){let a=s;for(;--a>=0;)n[i+a]=r[a];return n}switch(s){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let a=s;for(;--a>=0;)n[i+a]=Number.isFinite(e[a])?e[a]:r[a]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}_createBuffer(e){var r;this._buffer&&this._buffer.destroy();const{isIndexed:n,type:i}=this.settings;return this._buffer=this.device.createBuffer({...(r=this._buffer)==null?void 0:r.props,id:this.id,usage:n?Nt.INDEX:Nt.VERTEX,indexType:n?i:void 0,byteLength:e}),this._buffer}}const bx=[],vx=[];function Dp(t,e=0,n=1/0){let i=bx;const r={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?i=t:t.length>0&&(vx.length=t.length,i=vx):i=bx,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function VO(t){return t&&t[Symbol.asyncIterator]}function $O(t,e){const{size:n,stride:i,offset:r,startIndices:s,nested:a}=e,c=t.BYTES_PER_ELEMENT,f=i?i/c:n,h=r?r/c:0,p=Math.floor((t.length-h)/f);return(m,{index:y,target:b})=>{if(!s){const w=y*f+h;for(let C=0;C<n;C++)b[C]=t[w+C];return b}const v=s[y],T=s[y+1]||p;let S;if(a){S=new Array(T-v);for(let w=v;w<T;w++){const C=w*f+h;b=new Array(n);for(let A=0;A<n;A++)b[A]=t[C+A];S[w-v]=b}}else if(f===n)S=t.subarray(v*n+h,T*n+h);else{S=new t.constructor((T-v)*n);let w=0;for(let C=v;C<T;C++){const A=C*f+h;for(let O=0;O<n;O++)S[w++]=t[A+O]}}return S}}const iK=[],Yh=[[0,1/0]];function rK(t,e){if(t===Yh||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let s=0;s<i;s++){const a=t[s];a[1]<e[0]?(n.push(a),r=s+1):a[0]>e[1]?n.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return n.splice(r,0,e),n}const sK={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function jO(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...sK[n],...e,...t,type:n}}class HO extends nK{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:Yh}),this.constant=!1,this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var n;(n=this.state).layoutChanged||(n.layoutChanged=!eK(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition,r=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return jO(r,i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=rK(this.state.updateRanges,[i,r])}else this.state.updateRanges=Yh}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=iK}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return i.noAlloc?!1:i.update?(super.allocate(e,n.updateRanges!==Yh),!0):!1}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:a,noAlloc:c}}=this;let f=!0;if(a){for(const[h,p]of s)a.call(r,this,{data:n,startRow:h,endRow:p,props:i,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[h,p]of s){const m=Number.isFinite(h)?this.getVertexOffset(h):0,y=Number.isFinite(p)?this.getVertexOffset(p):c||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:m,endOffset:y})}this._checkAttributeArray()}else f=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),f}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const a=e;cn(ArrayBuffer.isView(a.value),`invalid ${r.accessor}`);const c=!!a.size&&a.size!==this.size;return i.binaryAccessor=$O(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:n,nested:c}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,n=super.getValue();if(!e)return n;for(const i in e)Object.assign(n,super.getValue(i,e[i]));return n}getBufferLayout(e){this.state.layoutChanged=!1;const n=this.settings.shaderAttributes,i=super._getBufferLayout(),{stepMode:r}=this.settings;if(r==="dynamic"?i.stepMode=e?e.isInstanced?"instance":"vertex":"instance":i.stepMode=r??"vertex",!n)return i;for(const s in n){const a=super._getBufferLayout(s,n[s]);i.attributes.push(...a.attributes)}return i}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:s,numInstances:a}){if(e.constant)return;const{settings:c,state:f,value:h,size:p,startIndices:m}=e,{accessor:y,transform:b}=c,v=f.binaryAccessor||(typeof y=="function"?y:s[y]);cn(typeof v=="function",`accessor "${y}" is not a function`);let T=e.getVertexOffset(i);const{iterable:S,objectInfo:w}=Dp(n,i,r);for(const C of S){w.index++;let A=v(C,w);if(b&&(A=b.call(this,A)),m){const O=(w.index<m.length-1?m[w.index+1]:a)-m[w.index];if(A&&Array.isArray(A[0])){let R=T;for(const D of A)e._normalizeValue(D,h,R),R+=p}else A&&A.length>p?h.set(A,T):(e._normalizeValue(A,w.target,0),_X({target:h,source:w.target,start:T,count:O}));T+=O*p}else e._normalizeValue(A,h,T),T+=p}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function Yy(t){const{source:e,target:n,start:i=0,size:r,getData:s}=t,a=t.end||n.length,c=e.length,f=a-i;if(c>f){n.set(e.subarray(0,f),i);return}if(n.set(e,i),!s)return;let h=c;for(;h<f;){const p=s(h,e);for(let m=0;m<r;m++)n[i+h]=p[m]||0,h++}}function oK({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!r||!s)return Yy({source:t,target:e,size:n,getData:i}),e;let a=0,c=0;const f=i&&((p,m)=>i(p+c,m)),h=Math.min(r.length,s.length);for(let p=1;p<h;p++){const m=r[p]*n,y=s[p]*n;Yy({source:t.subarray(a,m),target:e,start:c,end:y,size:n,getData:f}),a=m,c=y}return c<e.length&&Yy({source:[],target:e,start:c,size:n,getData:f}),e}function aK(t){const{device:e,settings:n,value:i}=t,r=new HO(e,n);return r.setData({value:i instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),r}function WO(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function XO(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function qO(t){t.push(t.shift())}function lK(t,e){const{doublePrecision:n,settings:i,value:r,size:s}=t,a=n&&r instanceof Float64Array?2:1;let c=0;const{shaderAttributes:f}=t.settings;if(f)for(const h of Object.values(f))c=Math.max(c,h.vertexOffset??0);return(i.noAlloc?r.length:(e+c)*s)*a}function YO({device:t,source:e,target:n}){return(!n||n.byteLength<e.byteLength)&&(n==null||n.destroy(),n=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),n}function KO({device:t,buffer:e,attribute:n,fromLength:i,toLength:r,fromStartIndices:s,getData:a=c=>c}){const c=n.doublePrecision&&n.value instanceof Float64Array?2:1,f=n.size*c,h=n.byteOffset,p=n.settings.bytesPerElement<4?h/n.settings.bytesPerElement*4:h,m=n.startIndices,y=s&&m,b=n.isConstant;if(!y&&e&&i>=r)return e;const v=n.value instanceof Float64Array?Float32Array:n.value.constructor,T=b?n.value:new v(n.getBuffer().readSyncWebGL(h,r*v.BYTES_PER_ELEMENT).buffer);if(n.settings.normalized&&!b){const A=a;a=(O,R)=>n.normalizeConstant(A(O,R))}const S=b?(A,O)=>a(T,O):(A,O)=>a(T.subarray(A+h,A+h+f),O),w=e?new Float32Array(e.readSyncWebGL(p,i*4).buffer):new Float32Array(0),C=new Float32Array(r);return oK({source:w,target:C,sourceStartIndices:s,targetStartIndices:m,size:f,getData:S}),(!e||e.byteLength<C.byteLength+p)&&(e==null||e.destroy(),e=t.createBuffer({byteLength:C.byteLength+p,usage:35050})),e.write(C,p),e}class ZO{constructor({device:e,attribute:n,timeline:i}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new Ip(i),this.attribute=n,this.attributeInTransition=aK(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(e,n,i=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=lK(this.attribute,n),this.transition.start({...e,duration:i})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}class cK extends ZO{constructor({device:e,attribute:n,timeline:i}){super({device:e,attribute:n,timeline:i}),this.type="interpolation",this.transform=dK(e,n)}start(e,n){const i=this.currentLength,r=this.currentStartIndices;if(super.start(e,n,e.duration),e.duration<=0){this.transition.cancel();return}const{buffers:s,attribute:a}=this;qO(s),s[0]=KO({device:this.device,buffer:s[0],attribute:a,fromLength:i,toLength:this.currentLength,fromStartIndices:r,getData:e.enter}),s[1]=YO({device:this.device,source:s[0],target:s[1]}),this.setBuffer(s[1]);const{transform:c}=this,f=c.model;let h=Math.floor(this.currentLength/a.size);QO(a)&&(h/=2),f.setVertexCount(h),a.isConstant?(f.setAttributes({aFrom:s[0]}),f.setConstantAttributes({aTo:a.value})):f.setAttributes({aFrom:s[0],aTo:a.getBuffer()}),c.transformFeedback.setBuffers({vCurrent:s[1]})}onUpdate(){const{duration:e,easing:n}=this.settings,{time:i}=this.transition;let r=i/e;n&&(r=n(r));const{model:s}=this.transform,a={time:r};s.shaderInputs.setProps({interpolation:a}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const uK=`uniform interpolationUniforms {
  float time;
} interpolation;
`,Tx={name:"interpolation",vs:uK,uniformTypes:{time:"f32"}},fK=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, interpolation.time);
  gl_Position = vec4(0.0);
}
`,hK=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function QO(t){return t.doublePrecision&&t.value instanceof Float64Array}function dK(t,e){const n=e.size,i=WO(n),r=XO(n),s=e.getBufferLayout();return QO(e)?new fu(t,{vs:hK,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:r,byteOffset:0},{attribute:"aFrom64Low",format:r,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:r,byteOffset:0},{attribute:"aTo64Low",format:r,byteOffset:4*n}]}],modules:[Oj,Tx],defines:{ATTRIBUTE_TYPE:i,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new fu(t,{vs:fK,bufferLayout:[{name:"aFrom",format:r},{name:"aTo",format:s.attributes[0].format}],modules:[Tx],defines:{ATTRIBUTE_TYPE:i},varyings:["vCurrent"],disableWarnings:!0})}class pK extends ZO{constructor({device:e,attribute:n,timeline:i}){super({device:e,attribute:n,timeline:i}),this.type="spring",this.texture=vK(e),this.framebuffer=TK(e,this.texture),this.transform=bK(e,n)}start(e,n){const i=this.currentLength,r=this.currentStartIndices;super.start(e,n);const{buffers:s,attribute:a}=this;for(let f=0;f<2;f++)s[f]=KO({device:this.device,buffer:s[f],attribute:a,fromLength:i,toLength:this.currentLength,fromStartIndices:r,getData:e.enter});s[2]=YO({device:this.device,source:s[0],target:s[2]}),this.setBuffer(s[1]);const{model:c}=this.transform;c.setVertexCount(Math.floor(this.currentLength/a.size)),a.isConstant?c.setConstantAttributes({aTo:a.value}):c.setAttributes({aTo:a.getBuffer()})}onUpdate(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this,s=this.settings;n.model.setAttributes({aPrev:e[0],aCur:e[1]}),n.transformFeedback.setBuffers({vNext:e[2]});const a={stiffness:s.stiffness,damping:s.damping};n.model.shaderInputs.setProps({spring:a}),n.run({framebuffer:i,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),qO(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(i)[0]>0||r.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const gK=`uniform springUniforms {
  float damping;
  float stiffness;
} spring;
`,mK={name:"spring",vs:gK,uniformTypes:{damping:"f32",stiffness:"f32"}},yK=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE force = delta * spring.stiffness;
  ATTRIBUTE_TYPE resistance = velocity * spring.damping;
  return force - resistance + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,_K=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function bK(t,e){const n=WO(e.size),i=XO(e.size);return new fu(t,{vs:yK,fs:_K,bufferLayout:[{name:"aPrev",format:i},{name:"aCur",format:i},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],modules:[mK],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function vK(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function TK(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}const SK={interpolation:cK,spring:pK};class EK{constructor(e,{id:n,timeline:i}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],a=s.getTransitionSetting(n);a&&this._updateAttribute(r,s,a)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){r&&this._removeTransition(e);const a=SK[i.type];a?this.transitions[e]=new a({attribute:n,timeline:this.timeline,device:this.device}):(Ue.error(`unsupported transition type '${i.type}'`)(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const Sx="attributeManager.invalidate",wK="attributeManager.updateStart",AK="attributeManager.updateEnd",xK="attribute.updateStart",RK="attribute.allocate",CK="attribute.updateEnd";class OK{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){this.mergeBoundsMemoized=Lu(VW),this.id=n,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new EK(e,{id:`${n}-transitions`,timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);yn(Sx,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);yn(Sx,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:s={},buffers:a={},context:c={}}){let f=!1;yn(wK,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const h in this.attributes){const p=this.attributes[h],m=p.settings.accessor;p.startIndices=i,p.numInstances=n,s[h]&&Ue.removed(`props.${h}`,`data.attributes.${h}`)(),p.setExternalBuffer(a[h])||p.setBinaryValue(typeof m=="string"?a[m]:void 0,e.startIndices)||typeof m=="string"&&!a[m]&&p.setConstantValue(s[m])||p.needsUpdate()&&(f=!0,this._updateAttribute({attribute:p,numInstances:n,data:e,props:s,context:c})),this.needsRedraw=this.needsRedraw||p.needsRedraw()}f&&yn(AK,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const n=e.map(i=>{var r;return(r=this.attributes[i])==null?void 0:r.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in n){const a=n[s];a.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=a)}return r}getBufferLayouts(e){return Object.values(this.getAttributes()).map(n=>n.getBufferLayout(e))}_add(e,n){for(const i in e){const r=e[i],s={...r,id:i,size:r.isIndexed&&1||r.size||1,...n};this.attributes[i]=new HO(this.device,s)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(a=>{const c=i[a];c&&c.setNeedsUpdate(c.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:i}=e;if(yn(xK,n),n.constant){n.setConstantValue(n.value);return}n.allocate(i)&&yn(RK,n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,yn(CK,n,i))}}class MK extends Ip{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:s}}=this,a=s(e/r);this._value=fo(n,i,a)}}const Ex=1e-5;function wx(t,e,n,i,r){const s=e-t,c=(n-e)*r,f=-s*i;return c+f+s+e}function PK(t,e,n,i,r){if(Array.isArray(n)){const s=[];for(let a=0;a<n.length;a++)s[a]=wx(t[a],e[a],n[a],i,r);return s}return wx(t,e,n,i,r)}function Ax(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}class NK extends Ip{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:a=e}=this;let c=PK(s,a,n,i,r);const f=Ax(c,n),h=Ax(c,a);f<Ex&&h<Ex&&(c=n,this.end()),this._prevValue=a,this._currValue=c}}const kK={interpolation:MK,spring:NK};class IK{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:s}=this;if(s.has(e)){const f=s.get(e),{value:h=f.settings.fromValue}=f;n=h,this.remove(e)}if(r=jO(r),!r)return;const a=kK[r.type];if(!a){Ue.error(`unsupported transition type '${r.type}'`)();return}const c=new a(this.timeline);c.start({...r,fromValue:n,toValue:i}),s.set(e,c)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function DK(t){const e=t[Ts];for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error(`Invalid prop ${n}: ${t[n]}`)}}function BK(t,e){const n=GO({newProps:t,oldProps:e,propTypes:t[Ts],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=UK(t,e);let r=!1;return i||(r=FK(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:zK(t,e),transitionsChanged:LK(t,e)}}function LK(t,e){if(!t.transitions)return!1;const n={},i=t[Ts];let r=!1;for(const s in t.transitions){const a=i[s],c=a&&a.type;(c==="number"||c==="color"||c==="array")&&R0(t[s],e[s],a)&&(n[s]=!0,r=!0)}return r?n:!1}function GO({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if(typeof t!="object"||t===null)return`${r} changed shallowly`;if(typeof e!="object"||e===null)return`${r} changed shallowly`;for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return`${r}.${s} added`;const a=R0(t[s],e[s],i[s]);if(a)return`${r}.${s} ${a}`}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return`${r}.${s} dropped`;if(!Object.hasOwnProperty.call(t,s)){const a=R0(t[s],e[s],i[s]);if(a)return`${r}.${s} ${a}`}}return!1}function R0(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":!i&&e!==t?"changed shallowly":null}function UK(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}function FK(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&xx(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)r!=="all"&&xx(t,e,r)&&(n[r]=!0,i=!0);return i?n:!1}function zK(t,e){if(e===null)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function xx(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},GO({oldProps:r,newProps:i,triggerName:n})}const VK="count(): argument not an object",$K="count(): argument not a container";function jK(t){if(!WK(t))throw new Error(VK);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(HK(t))return Object.keys(t).length;throw new Error($K)}function HK(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function WK(t){return t!==null&&typeof t=="object"}function Rx(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>i.name==="project64"))){const i=n.modules.findIndex(r=>r.name==="project32");i>=0&&n.modules.splice(i,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}return n}const XK={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},C0={};function qK(t,e,n,i){if(n instanceof Pt)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let r=null;n.compressed&&(r={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const s=e.createTexture({...n,sampler:{...XK,...r,...i},mipmaps:!0});return C0[s.id]=t,s}function YK(t,e){!e||!(e instanceof Pt)||C0[e.id]===t&&(e.delete(),delete C0[e.id])}const KK={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||O0(t)&&(t.length===3||t.length===4)},equal(t,e,n){return xi(t,e,1)}},accessor:{validate(t,e){const n=Nd(t);return n==="function"||n===Nd(e.value)},equal(t,e,n){return typeof e=="function"?!0:xi(t,e,1)}},array:{validate(t,e){return e.optional&&!t||O0(t)},equal(t,e,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?xi(t,e,r):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?xi(t,e,r):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{if(!t)return t;const{dataTransform:i}=n.props;return i?i(t):typeof t.shape=="string"&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,n)=>{const i=n.context;return!i||!i.device?null:qK(n.id,i.device,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{YK(n.id,t)}}};function ZK(t){const e={},n={},i={};for(const[r,s]of Object.entries(t)){const a=s==null?void 0:s.deprecatedFor;if(a)i[r]=Array.isArray(a)?a:[a];else{const c=QK(r,s);e[r]=c,n[r]=c.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}function QK(t,e){switch(Nd(e)){case"object":return xc(t,e);case"array":return xc(t,{type:"array",value:e,compare:!1});case"boolean":return xc(t,{type:"boolean",value:e});case"number":return xc(t,{type:"number",value:e});case"function":return xc(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function xc(t,e){return"type"in e?{name:t,...KK[e.type],...e}:"value"in e?{name:t,type:Nd(e.value),...e}:{name:t,type:"object",value:e}}function O0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Nd(t){return O0(t)?"array":t===null?"null":typeof t}function GK(t,e){let n;for(let s=e.length-1;s>=0;s--){const a=e[s];"extensions"in a&&(n=a.extensions)}const i=M0(t.constructor,n),r=Object.create(i);r[Md]=t,r[wo]={},r[ys]={};for(let s=0;s<e.length;++s){const a=e[s];for(const c in a)r[c]=a[c]}return Object.freeze(r),r}const JK="_mergedDefaultProps";function M0(t,e){if(!(t instanceof Bp.constructor))return{};let n=JK;if(e)for(const r of e){const s=r.constructor;s&&(n+=`:${s.extensionName||s.name}`)}const i=JO(t,n);return i||(t[n]=eZ(t,e||[]))}function eZ(t,e){if(!t.prototype)return null;const i=Object.getPrototypeOf(t),r=M0(i),s=JO(t,"defaultProps")||{},a=ZK(s),c=Object.assign(Object.create(null),r,a.defaultProps),f=Object.assign(Object.create(null),r==null?void 0:r[Ts],a.propTypes),h=Object.assign(Object.create(null),r==null?void 0:r[jy],a.deprecatedProps);for(const p of e){const m=M0(p.constructor);m&&(Object.assign(c,m),Object.assign(f,m[Ts]),Object.assign(h,m[jy]))}return tZ(c,t),iZ(c,f),nZ(c,h),c[Ts]=f,c[jy]=h,e.length===0&&!tv(t,"_propTypes")&&(t._propTypes=f),c}function tZ(t,e){const n=sZ(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function nZ(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r=`${this.id}: ${n}`;for(const s of e[n])tv(this,s)||(this[s]=i);Ue.deprecated(r,e[n].join("/"))()}})}function iZ(t,e){const n={},i={};for(const r in e){const s=e[r],{name:a,value:c}=s;s.async&&(n[a]=c,i[a]=rZ(a))}t[Ka]=n,t[wo]={},Object.defineProperties(t,i)}function rZ(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||VO(e)?this[wo][t]=e:this[ys][t]=e},get(){if(this[ys]){if(t in this[ys])return this[ys][t]||this[Ka][t];if(t in this[wo]){const e=this[Md]&&this[Md].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Ka][t]}}return this[Ka][t]}}}function tv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function JO(t,e){return tv(t,e)&&t[e]}function sZ(t){const e=t.componentName;return e||Ue.warn(`${t.name}.componentName not specified`)(),e||t.name}let oZ=0;class Bp{constructor(...e){this.props=GK(this,e),this.id=this.props.id,this.count=oZ++}clone(e){const{props:n}=this,i={};for(const r in n[Ka])r in n[ys]?i[r]=n[ys][r]:r in n[wo]&&(i[r]=n[wo][r]);return new this.constructor({...n,...i,...e})}}Bp.componentName="Component";Bp.defaultProps={};const aZ=Object.freeze({});class lZ{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||aZ}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[Md]||this.component;const n=e[ys]||{},i=e[wo]||e,r=e[Ka]||{};for(const s in n){const a=n[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,a),n[s]=this.getAsyncProp(s)}for(const s in i){const a=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,a)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(VO(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n===i.resolvedValue||n===i.lastValue?!1:(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const i=this.asyncProps[e];if(!i)return;i.pendingLoadCount++;const r=i.pendingLoadCount;let s=[],a=0;for await(const c of n){if(!this.component)return;const{dataTransform:f}=this.component.props;f?s=f(c,s):s=s.concat(c),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,this._setAsyncPropValue(e,s,r)}this._onResolve(e,s)}_postProcessValue(e,n){const i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.props[Ts];this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class cZ extends lZ{constructor({attributeManager:e,layer:n}){super(n),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const i=this.layer,r=i==null?void 0:i.props.fetch;return r?r(n,{propName:e,layer:i}):super._fetch(e,n)}_onResolve(e,n){const i=this.layer;if(i){const r=i.props.onDataLoad;e==="data"&&r&&r(n,{propName:e,layer:i})}}_onError(e,n){const i=this.layer;i&&i.raiseError(n,`loading ${e} of ${this.layer}`)}}const uZ="layer.changeFlag",fZ="layer.initialize",hZ="layer.update",dZ="layer.finalize",pZ="layer.matched",Cx=2**24-1,gZ=Object.freeze([]),mZ=Lu(({oldViewport:t,viewport:e})=>t.equals(e));let Si=new Uint8ClampedArray(0);const yZ={data:{type:"data",value:gZ,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:a}=n.context;r=r||n.getLoadOptions(),i=i||n.props.loaders,s&&(r={...r,fetch:{...r==null?void 0:r.fetch,signal:s}});let c=a.contains(t);return!c&&!r&&(a.add({resourceId:t,data:gd(t,i),persistent:!1}),c=!0),c?a.subscribe({resourceId:t,onChange:f=>{var h;return(h=n.internalState)==null?void 0:h.reloadAsyncProp(e,f)},consumerId:n.id,requestId:e}):gd(t,i,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:$e.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class nr extends Bp{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Ia.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){cn(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=yO(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,a]=dO(i,n.pixelProjectionMatrix);return e.length===2?[r,s]:[r,s,a]}unproject(e){return cn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){cn(this.internalState);const i=this.internalState.viewport||this.context.viewport;return qW(e,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}get isDrawable(){return!0}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setShaderModuleProps(...e){for(const n of this.getModels())n.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===$e.DEFAULT||e===$e.LNGLAT||e===$e.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){cn(e instanceof Uint8Array);const[n,i,r]=e;return n+i*256+r*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:jK(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=Rx(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const n of this.props.extensions)e=Rx(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const r of i)n.invalidateAll(r);else n.invalidateAll();if(n){const{props:r}=e,s=this.internalState.hasPickingBuffer,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable||r.extensions.some(c=>c.getNeedsPickingBuffer.call(this,c));if(s!==a){this.internalState.hasPickingBuffer=a;const{pickingColors:c,instancePickingColors:f}=n.attributes,h=c||f;h&&(a&&h.constant&&(h.constant=!1,n.invalidate(h.id)),!h.value&&!a&&(h.constant=!0,h.value=[0,0,0]))}}}finalizeState(e){for(const i of this.getModels())i.destroy();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e.renderPass)}getPickingInfo({info:e,mode:n,sourceLayer:i}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,s,a;n&&(e=new Error(`${n}: ${e.message}`,{cause:e})),(r=(i=this.props).onError)!=null&&r.call(i,e)||(a=(s=this.context)==null?void 0:s.onError)==null||a.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)==null?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!mZ({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){let n=!1;for(const i in e)e[i].layoutChanged()&&(n=!0);for(const i of this.getModels())this._setModelAttributes(i,e,n)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(Si.length/4);if(this.internalState.usesPickingColorCache=!0,i<n){n>Cx&&Ue.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Si=al.allocate(Si,n,{size:4,copy:!0,maxCount:Math.max(n,Cx)});const r=Math.floor(Si.length/4),s=[0,0,0];for(let a=i;a<r;a++)this.encodePickingColor(a,s),Si[a*4+0]=s[0],Si[a*4+1]=s[1],Si[a*4+2]=s[2],Si[a*4+3]=0}e.value=Si.subarray(0,n*4)}_setModelAttributes(e,n,i=!1){var c;if(!Object.keys(n).length)return;if(i){const f=this.getAttributeManager();e.setBufferLayout(f.getBufferLayouts(e)),n=f.getAttributes()}const r=((c=e.userData)==null?void 0:c.excludeAttributes)||{},s={},a={};for(const f in n){if(r[f])continue;const h=n[f].getValue();for(const p in h){const m=h[p];m instanceof Nt?n[f].settings.isIndexed?e.setIndexBuffer(m):s[p]=m:m&&(a[p]=m)}}e.setAttributes(s),e.setConstantAttributes(a)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,s=i||r,a=s&&n.attributes&&n.attributes[s.id];if(a&&a.value){const c=a.value,f=this.encodePickingColor(e);for(let h=0;h<n.length;h++){const p=s.getVertexOffset(h);c[p]===f[0]&&c[p+1]===f[1]&&c[p+2]===f[2]&&this._disablePickingIndex(h)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const s=r.getVertexOffset(e),a=r.getVertexOffset(e+1);r.buffer.write(new Uint8Array(a-s),s)}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Si.buffer&&(i.value=Si.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){cn(!this.internalState),cn(Number.isFinite(this.props.coordinateSystem)),yn(fZ,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new cZ({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Ue.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new IK(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){yn(pZ,this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(yn(hZ,this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,s=i.viewport,a=this._updateUniformTransition();r.propsInTransition=a,i.viewport=r.viewport||s,this.props=a;try{const c=this._getUpdateParams(),f=this.getModels();if(i.device)this.updateState(c);else try{this.updateState(c)}catch{}for(const p of this.props.extensions)p.updateState.call(this,c,p);this.setNeedsRedraw(),this._updateAttributes();const h=this.getModels()[0]!==f[0];this._postUpdate(c,h)}finally{i.viewport=s,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){yn(dZ,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,shaderModuleProps:n=null,uniforms:i={},parameters:r={}}){this._updateAttributeTransition();const s=this.props,a=this.context;this.props=this.internalState.propsInTransition||s;try{n&&this.setShaderModuleProps(n);const{getPolygonOffset:c}=this.props,f=c&&c(i)||[0,0];a.device instanceof _s&&a.device.setParametersWebGL({polygonOffset:f});for(const h of this.getModels())h.setParameters(r);if(a.device instanceof _s)a.device.withParametersWebGL(r,()=>{const h={renderPass:e,shaderModuleProps:n,uniforms:i,parameters:r,context:a};for(const p of this.props.extensions)p.draw.call(this,h,p);this.draw(h)});else{const h={renderPass:e,shaderModuleProps:n,uniforms:i,parameters:r,context:a};for(const p of this.props.extensions)p.draw.call(this,h,p);this.draw(h)}}finally{this.props=s}}getChangeFlags(){var e;return(e=this.internalState)==null?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let s=!1;switch(r){case"dataChanged":const a=e[r],c=n[r];a&&Array.isArray(c)&&(n.dataChanged=Array.isArray(a)?c.concat(a):a,s=!0);default:n[r]||(n[r]=e[r],s=!0)}s&&yn(uZ,this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){var r;const i=BK(e,n);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged)this.internalState.uniformTransitions.add(s,n[s],e[s],(r=e.transitions)==null?void 0:r[s]);return this.setChangeFlags(i)}validateProps(){DK(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={highlightedObjectColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&typeof i=="function"&&(n.highlightColor=i(e)),this.setShaderModuleProps({picking:n}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new OK(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e,s=this.state.model;s!=null&&s.isInstanced&&s.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:c,highlightColor:f}=i;if(n||r.autoHighlight!==a||r.highlightedObjectIndex!==c||r.highlightColor!==f){const h={};Array.isArray(f)&&(h.highlightColor=f),(n||r.autoHighlight!==a||c!==r.highlightedObjectIndex)&&(h.highlightedObjectColor=Number.isFinite(c)&&c>=0?this.encodePickingColor(c):null),this.setShaderModuleProps({picking:h})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),r=i?i.getNeedsRedraw(e):!1;if(n=n||r,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}nr.defaultProps=yZ;nr.layerName="Layer";const _Z="compositeLayer.renderLayers";class Lp extends nr{get isComposite(){return!0}get isDrawable(){return!1}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var z;const{opacity:n,pickable:i,visible:r,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:f,highlightColor:h,coordinateSystem:p,coordinateOrigin:m,wrapLongitude:y,positionFormat:b,modelMatrix:v,extensions:T,fetch:S,operation:w,_subLayerProps:C}=this.props,A={id:"",updateTriggers:{},opacity:n,pickable:i,visible:r,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:f,highlightColor:h,coordinateSystem:p,coordinateOrigin:m,wrapLongitude:y,positionFormat:b,modelMatrix:v,extensions:T,fetch:S,operation:w},O=C&&e.id&&C[e.id],R=O&&O.updateTriggers,D=e.id||"sublayer";if(O){const j=this.props[Ts],V=e.type?e.type._propTypes:{};for(const x in O){const H=V[x]||j[x];H&&H.type==="accessor"&&(O[x]=this.getSubLayerAccessor(O[x]))}}Object.assign(A,e,O),A.id=`${this.props.id}-${D}`,A.updateTriggers={all:(z=this.props.updateTriggers)==null?void 0:z.all,...e.updateTriggers,...R};for(const j of T){const V=j.getSubLayerProps.call(this,j);V&&Object.assign(A,V,{updateTriggers:Object.assign(A.updateTriggers,V.updateTriggers)})}return A}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();if(r){const s=this.renderLayers();i=kp(s,Boolean),this.internalState.subLayers=i}yn(_Z,this,r,i);for(const s of i)s.parent=this}}Lp.layerName="CompositeLayer";const Th=Math.PI/180,Ox=180/Math.PI,Kh=6370972,Va=256;function bZ(){const t=Va/Kh,e=Math.PI/180*Va;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class vZ extends _l{constructor(e={}){const{longitude:n=0,zoom:i=0,nearZMultiplier:r=.5,farZMultiplier:s=1,resolution:a=10}=e;let{latitude:c=0,height:f,altitude:h=1.5,fovy:p}=e;c=Math.max(Math.min(c,m0),-85.051129),f=f||1,p?h=Wb(p):p=uu(h);const m=1/Math.PI/Math.cos(c*Math.PI/180),y=Math.pow(2,i)*m,b=e.nearZ??r,v=e.farZ??(h+Va*2*y/f)*s,T=new An().lookAt({eye:[0,-h,0],up:[0,0,1]});T.rotateX(c*Th),T.rotateZ(-n*Th),T.scale(y/f),super({...e,height:f,viewMatrix:T,longitude:n,latitude:c,zoom:i,distanceScales:bZ(),fovy:p,focalDistance:h,near:b,far:v}),this.scale=y,this.latitude=c,this.longitude=n,this.resolution=a}get projectionMode(){return wi.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,this.height/2],n),r=this.unproject([this.width/2,0],n),s=this.unproject([this.width,this.height/2],n),a=this.unproject([this.width/2,this.height],n);return s[0]<this.longitude&&(s[0]+=360),i[0]>this.longitude&&(i[0]-=360),[Math.min(i[0],s[0],r[0],a[0]),Math.min(i[1],s[1],r[1],a[1]),Math.max(i[0],s[0],r[0],a[0]),Math.max(i[1],s[1],r[1],a[1])]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,s,a]=e,c=n?s:this.height-s,{pixelUnprojectionMatrix:f}=this;let h;if(Number.isFinite(a))h=Ky(f,[r,c,a,1]);else{const b=Ky(f,[r,c,-1,1]),v=Ky(f,[r,c,1,1]),T=((i||0)/Kh+1)*Va,S=Py(j3([],b,v)),w=Py(b),C=Py(v),O=4*((4*w*C-(S-w-C)**2)/16)/S,R=Math.sqrt(w-O),D=Math.sqrt(Math.max(0,T*T-O)),z=(R-D)/Math.sqrt(S);h=_9([],b,v,z)}const[p,m,y]=this.unprojectPosition(h);return Number.isFinite(a)?[p,m,y]:Number.isFinite(i)?[p,m,i]:[p,m]}projectPosition(e){const[n,i,r=0]=e,s=n*Th,a=i*Th,c=Math.cos(a),f=(r/Kh+1)*Va;return[Math.sin(s)*c*f,-Math.cos(s)*c*f,Math.sin(a)*f]}unprojectPosition(e){const[n,i,r]=e,s=H3(e),a=Math.asin(r/s),f=Math.atan2(n,-i)*Ox,h=a*Ox,p=(s/Va-1)*Kh;return[f,h,p]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,n){const i=this.unproject(n);return{longitude:e[0]-i[0]+this.longitude,latitude:e[1]-i[1]+this.latitude}}}function Ky(t,e){const n=gl([],e,t);return $b(n,n,1/n[3]),n}class eM{constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:n={}}=e;this.typedArrayManager=al,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:i={},getGeometry:r,geometryBuffer:s,positionFormat:a,dataChanged:c,normalize:f=!0}=this.opts;if(this.data=n,this.getGeometry=r,this.positionSize=s&&s.size||(a==="XY"?2:3),this.buffers=i,this.normalize=f,s&&(cn(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),f||(i.vertexPositions=s)),this.geometryBuffer=i.vertexPositions,Array.isArray(c))for(const h of c)this._rebuildGeometry(h);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?$O(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:i,buffers:r,_attributeDefs:s,typedArrayManager:a}=this;for(const c in s)if(c in r)a.release(i[c]),i[c]=null;else{const f=s[c];f.copy=n,i[c]=a.allocate(i[c],e,f)}}_forEachGeometry(e,n,i){const{data:r,getGeometry:s}=this,{iterable:a,objectInfo:c}=Dp(r,n,i);for(const f of a){c.index++;const h=s?s(f,c):null;e(h,c.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:i,instanceCount:r}=this;const{data:s,geometryBuffer:a}=this,{startRow:c=0,endRow:f=1/0}=e||{},h={};if(e||(n=[0],i=[0]),this.normalize||!a)this._forEachGeometry((m,y)=>{const b=m&&this.normalizeGeometry(m);h[y]=b,i[y+1]=i[y]+(b?this.getGeometrySize(b):0)},c,f),r=i[i.length-1];else if(i=s.startIndices,r=i[s.length]||0,ArrayBuffer.isView(a))r=r||a.length/this.positionSize;else if(a instanceof Nt){const m=this.positionSize*4;r=r||a.byteLength/m}else if(a.buffer){const m=a.stride||this.positionSize*4;r=r||a.buffer.byteLength/m}else if(a.value){const m=a.value,y=a.stride/m.BYTES_PER_ELEMENT||this.positionSize;r=r||m.length/y}this._allocate(r,!!e),this.indexStarts=n,this.vertexStarts=i,this.instanceCount=r;const p={};this._forEachGeometry((m,y)=>{const b=h[y]||m;p.vertexStart=i[y],p.indexStart=n[y];const v=y<i.length-1?i[y+1]:r;p.geometrySize=v-i[y],p.geometryIndex=y,this.updateGeometryAttributes(b,p)},c,f),this.vertexCount=n[n.length-1]}}const TZ=typeof window<"u"?I.useLayoutEffect:I.useEffect;function kd(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const SZ={position:"absolute",zIndex:-1};function tM(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>tM(n,e));if(Up(t)){if(EZ(t))return e.style=SZ,I.cloneElement(t,e);if(wZ(t))return I.cloneElement(t,e)}return t}function Up(t){return t&&typeof t=="object"&&"type"in t||!1}function EZ(t){var e;return(e=t.props)==null?void 0:e.mapStyle}function wZ(t){const e=t.type;return e&&e.deckGLViewProps}function P0(t){if(typeof t=="function")return I.createElement(cl,{},t);if(Array.isArray(t))return t.map(P0);if(Up(t)){if(t.type===I.Fragment)return P0(t.props.children);if(kd(t.type,cl))return t}return t}function AZ({children:t,layers:e=[],views:n=null}){const i=[],r=[],s={};return I.Children.forEach(P0(t),a=>{if(Up(a)){const c=a.type;if(kd(c,nr)){const f=xZ(c,a.props);r.push(f)}else i.push(a);if(kd(c,cl)&&c!==cl&&a.props.id){const f=new c(a.props);s[f.id]=f}}else a&&i.push(a)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(a=>{s[a.id]=a}):n&&(s[n.id]=n),n=Object.values(s)),e=r.length>0?[...r,...e]:e,{layers:e,children:i,views:n}}function xZ(t,e){const n={},i=t.defaultProps||{};for(const r in e)i[r]!==e[r]&&(n[r]=e[r]);return new t(n)}const RZ=I.createContext();function CZ({children:t,deck:e,ContextProvider:n=RZ.Provider}){const{viewManager:i}=e||{};if(!i||!i.views.length)return[];const r={},s=i.views[0].id;for(const a of t){let c=s,f=a;Up(a)&&kd(a.type,cl)&&(c=a.props.id||s,f=a.props.children);const h=i.getViewport(c),p=i.getViewState(c);if(h){p.padding=h.padding;const{x:m,y,width:b,height:v}=h;f=tM(f,{x:m,y,width:b,height:v,viewport:h,viewState:p}),r[c]||(r[c]={viewport:h,children:[]}),r[c].children.push(f)}}return Object.keys(r).map(a=>{const{viewport:c,children:f}=r[a],{x:h,y:p,width:m,height:y}=c,b={position:"absolute",left:h,top:p,width:m,height:y},v=`view-${a}`,T=I.createElement("div",{key:v,id:v,style:b},...f),S={deck:e,viewport:c,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:C=>{C.viewId=a,e._onViewStateChange(C)},widgets:[]},w=`view-${a}-context`;return I.createElement(n,{key:w,value:S},T)})}const OZ={mixBlendMode:null};function MZ({width:t,height:e,style:n}){const i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},r={left:0,top:0};if(n)for(const s in n)s in OZ?r[s]=n[s]:i[s]=n[s];return{containerStyle:i,canvasStyle:r}}function PZ(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function nM(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function NZ(t,e,n){const i=new e({...n,_customRender:r=>{t.redrawReason=r;const s=i.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():nM(t)}});return i}function kZ(t,e){const[n,i]=I.useState(0),s=I.useRef({control:null,version:n,forceUpdate:()=>i(R=>R+1)}).current,a=I.useRef(null),c=I.useRef(null),f=I.useMemo(()=>AZ(t),[t.layers,t.views,t.children]);let h=!0;const p=R=>{var D;return h&&t.viewState?(s.viewStateUpdateRequested=R,null):(s.viewStateUpdateRequested=null,(D=t.onViewStateChange)==null?void 0:D.call(t,R))},m=R=>{var D;h?s.interactionStateUpdateRequested=R:(s.interactionStateUpdateRequested=null,(D=t.onInteractionStateChange)==null||D.call(t,R))},y=I.useMemo(()=>{const R={widgets:[],...t,style:null,width:"100%",height:"100%",parent:a.current,canvas:c.current,layers:f.layers,views:f.views,onViewStateChange:p,onInteractionStateChange:m};return delete R._customRender,s.deck&&s.deck.setProps(R),R},[t]);I.useEffect(()=>{const R=t.Deck||ev;return s.deck=NZ(s,R,{...y,parent:a.current,canvas:c.current}),()=>{var D;return(D=s.deck)==null?void 0:D.finalize()}},[]),TZ(()=>{nM(s);const{viewStateUpdateRequested:R,interactionStateUpdateRequested:D}=s;R&&p(R),D&&m(D)}),I.useImperativeHandle(e,()=>PZ(s),[]);const b=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:v,width:T="100%",height:S="100%",id:w,style:C}=t,{containerStyle:A,canvasStyle:O}=I.useMemo(()=>MZ({width:T,height:S,style:C}),[T,S,C]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===b||s.version!==n){s.lastRenderedViewports=b,s.version=n;const R=CZ({children:f.children,deck:s.deck,ContextProvider:v}),D=I.createElement("canvas",{key:"canvas",id:w||"deckgl-overlay",ref:c,style:O});s.control=I.createElement("div",{id:`${w||"deckgl"}-wrapper`,ref:a,style:A},[D,R])}return h=!1,s.control}const IZ=I.forwardRef(kZ),DZ=new Uint32Array([0,2,1,0,3,2]),BZ=new Float32Array([0,1,0,0,1,0,1,1]);function LZ(t,e){if(!e)return UZ(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),i=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),r=Math.ceil(n/e)+1,s=Math.ceil(i/e)+1,a=(r-1)*(s-1)*6,c=new Uint32Array(a),f=new Float32Array(r*s*2),h=new Float64Array(r*s*3);let p=0,m=0;for(let y=0;y<r;y++){const b=y/(r-1);for(let v=0;v<s;v++){const T=v/(s-1),S=FZ(t,b,T);h[p*3+0]=S[0],h[p*3+1]=S[1],h[p*3+2]=S[2]||0,f[p*2+0]=b,f[p*2+1]=1-T,y>0&&v>0&&(c[m++]=p-s,c[m++]=p-s-1,c[m++]=p-1,c[m++]=p-s,c[m++]=p-1,c[m++]=p),p++}}return{vertexCount:a,positions:h,indices:c,texCoords:f}}function UZ(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[n*3+0]=t[n][0],e[n*3+1]=t[n][1],e[n*3+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:DZ,texCoords:BZ}}function FZ(t,e,n){return fo(fo(t[0],t[1],n),fo(t[3],t[2],n),e)}const Mx=`uniform bitmapUniforms {
  vec4 bounds;
  float coordinateConversion;
  float desaturate;
  vec3 tintColor;
  vec4 transparentColor;
} bitmap;
`,zZ={name:"bitmap",vs:Mx,fs:Mx,uniformTypes:{bounds:"vec4<f32>",coordinateConversion:"f32",desaturate:"f32",tintColor:"vec3<f32>",transparentColor:"vec4<f32>"}},VZ=`#version 300 es
#define SHADER_NAME bitmap-layer-vertex-shader

in vec2 texCoords;
in vec3 positions;
in vec3 positions64Low;

out vec2 vTexCoord;
out vec2 vTexPos;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (bitmap.coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project.commonOrigin.xy;
  } else if (bitmap.coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,$Z=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,jZ=`#version 300 es
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

in vec2 vTexCoord;
in vec2 vTexPos;

out vec4 fragColor;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), bitmap.desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * bitmap.tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  if (bitmap.transparentColor.a == 0.0) {
    return vec4(color, alpha);
  }
  float blendedAlpha = alpha + bitmap.transparentColor.a * (1.0 - alpha);
  float highLightRatio = alpha / blendedAlpha;
  vec3 blendedRGB = mix(bitmap.transparentColor.rgb, color, highLightRatio);
  return vec4(blendedRGB, blendedAlpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bitmap.bounds[0]) / (bitmap.bounds[2] - bitmap.bounds[0]),
    (pos.y - bitmap.bounds[3]) / (bitmap.bounds[1] - bitmap.bounds[3])
  );
}

${$Z}

void main(void) {
  vec2 uv = vTexCoord;
  if (bitmap.coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (bitmap.coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture(bitmapTexture, uv);

  fragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * layer.opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(fragColor, geometry);

  if (bool(picking.isActive) && !bool(picking.isAttribute)) {
    // Since instance information is not used, we can use picking color for pixel index
    fragColor.rgb = packUVsIntoRGB(uv);
  }
}
`,HZ={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:$e.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0,value:null}};class nv extends nr{getShaders(){return super.getShaders({vs:VZ,fs:jZ,modules:[ml,yl,zZ]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const n=!0;e.add({indices:{size:1,isIndexed:!0,update:i=>i.value=this.state.mesh.indices,noAlloc:n},positions:{size:3,type:"float64",fp64:this.use64bitPositions(),update:i=>i.value=this.state.mesh.positions,noAlloc:n},texCoords:{size:2,update:i=>i.value=this.state.mesh.texCoords,noAlloc:n}})}updateState({props:e,oldProps:n,changeFlags:i}){var s;const r=this.getAttributeManager();if(i.extensionsChanged&&((s=this.state.model)==null||s.destroy(),this.state.model=this._getModel(),r.invalidateAll()),e.bounds!==n.bounds){const a=this.state.mesh,c=this._createMesh();this.state.model.setVertexCount(c.vertexCount);for(const f in c)a&&a[f]!==c[f]&&r.invalidate(f);this.setState({mesh:c,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){const{image:n}=this.props,i=e.info;if(!i.color||!n)return i.bitmap=null,i;const{width:r,height:s}=n;i.index=0;const a=WZ(i.color);return i.bitmap={size:{width:r,height:s},uv:a,pixel:[Math.floor(a[0]*r),Math.floor(a[1]*s)]},i}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let n=e;return Px(e)&&(n=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),LZ(n,this.context.viewport.resolution)}_getModel(){return new hi(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-list",isInstanced:!1})}draw(e){const{shaderModuleProps:n}=e,{model:i,coordinateConversion:r,bounds:s,disablePicking:a}=this.state,{image:c,desaturate:f,transparentColor:h,tintColor:p}=this.props;if(!(n.picking.isActive&&a)&&c&&i){const m={bitmapTexture:c,bounds:s,coordinateConversion:r,desaturate:f,tintColor:p.slice(0,3).map(y=>y/255),transparentColor:h.map(y=>y/255)};i.shaderInputs.setProps({bitmap:m}),i.draw(this.context.renderPass)}}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:n,DEFAULT:i}=$e;let{_imageCoordinateSystem:r}=this.props;if(r!==i){const{bounds:s}=this.props;if(!Px(s))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const a=this.context.viewport.resolution?e:n;if(r=r===e?e:n,r===e&&a===n)return{coordinateConversion:-1,bounds:s};if(r===n&&a===e){const c=As([s[0],s[1]]),f=As([s[2],s[3]]);return{coordinateConversion:1,bounds:[c[0],c[1],f[0],f[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}nv.layerName="BitmapLayer";nv.defaultProps=HZ;function WZ(t){const[e,n,i]=t,r=(i&240)/256,s=(i&15)/16;return[(e+s)/256,(n+r)/256]}function Px(t){return Number.isFinite(t[0])}const Nx=`uniform iconUniforms {
  float sizeScale;
  vec2 iconsTextureDim;
  float sizeMinPixels;
  float sizeMaxPixels;
  bool billboard;
  highp int sizeUnits;
  float alphaCutoff;
} icon;
`,XZ={name:"icon",vs:Nx,fs:Nx,uniformTypes:{sizeScale:"f32",iconsTextureDim:"vec2<f32>",sizeMinPixels:"f32",sizeMaxPixels:"f32",billboard:"f32",sizeUnits:"i32",alphaCutoff:"f32"}},qZ=`#version 300 es
#define SHADER_NAME icon-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceSizes;
in float instanceAngles;
in vec4 instanceColors;
in vec3 instancePickingColors;
in vec4 instanceIconFrames;
in float instanceColorModes;
in vec2 instanceOffsets;
in vec2 instancePixelOffset;
out float vColorMode;
out vec4 vColor;
out vec2 vTextureCoords;
out vec2 uv;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = angle * PI / 180.0;
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vec2 iconSize = instanceIconFrames.zw;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),
icon.sizeMinPixels, icon.sizeMaxPixels
);
float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
pixelOffset += instancePixelOffset;
pixelOffset.y *= -1.0;
if (icon.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vTextureCoords = mix(
instanceIconFrames.xy,
instanceIconFrames.xy + iconSize,
(positions.xy + 1.0) / 2.0
) / icon.iconsTextureDim;
vColor = instanceColors;
DECKGL_FILTER_COLOR(vColor, geometry);
vColorMode = instanceColorModes;
}
`,YZ=`#version 300 es
#define SHADER_NAME icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in float vColorMode;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec4 texColor = texture(iconsTexture, vTextureCoords);
vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
float a = texColor.a * layer.opacity * vColor.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color, a);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,KZ=1024,ZZ=4,kx=()=>{},Ix={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},QZ={x:0,y:0,width:0,height:0};function GZ(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function JZ(t,e,n,i){const r=Math.min(n/e.width,i/e.height),s=Math.floor(e.width*r),a=Math.floor(e.height*r);return r===1?{image:e,width:s,height:a}:(t.canvas.height=a,t.canvas.width=s,t.clearRect(0,0,s,a),t.drawImage(e,0,0,e.width,e.height,0,0,s,a),{image:t.canvas,width:s,height:a})}function hu(t){return t&&(t.id||t.url)}function eQ(t,e,n,i){const{width:r,height:s,device:a}=t,c=a.createTexture({format:"rgba8unorm",width:e,height:n,sampler:i,mipmaps:!0}),f=a.createCommandEncoder();return f.copyTextureToTexture({sourceTexture:t,destinationTexture:c,width:r,height:s}),f.finish(),t.destroy(),c}function Dx(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i],a=hu(r);t[a]={...r,x:s,y:n}}}function tQ({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:a}){let c=[];for(let f=0;f<t.length;f++){const h=t[f],p=hu(h);if(!n[p]){const{height:m,width:y}=h;i+y+e>a&&(Dx(n,c,r),i=0,r=s+r+e,s=0,c=[]),c.push({icon:h,xOffset:i}),i=i+y+e,s=Math.max(s,m)}}return c.length>0&&Dx(n,c,r),{mapping:n,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:a,canvasHeight:GZ(s+r+e)}}function nQ(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:s}=Dp(t);for(const a of r){s.index++;const c=e(a,s),f=hu(c);if(!c)throw new Error("Icon is missing.");if(!c.url)throw new Error("Icon url is missing.");!i[f]&&(!n[f]||c.url!==n[f].url)&&(i[f]={...c,source:a,sourceIndex:s.index})}return i}class iQ{constructor(e,{onUpdate:n=kx,onError:i=kx}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._samplerParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=ZZ,this._canvasWidth=KZ,this._canvasHeight=0,this._canvas=null,this.device=e,this.onUpdate=n,this.onError=i}finalize(){var e;(e=this._texture)==null||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?hu(e):e;return this._mapping[n]||QZ}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:s}){var a;e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),r&&(this._mapping=r),i&&((a=this._texture)==null||a.delete(),this._texture=null,this._externalTexture=i),s&&(this._samplerParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(nQ(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:s,yOffset:a,rowHeight:c,canvasHeight:f}=tQ({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=c,this._mapping=r,this._xOffset=s,this._yOffset=a,this._canvasHeight=f,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._samplerParameters||Ix,mipmaps:!0})),this._texture.height!==this._canvasHeight&&(this._texture=eQ(this._texture,this._canvasWidth,this._canvasHeight,this._samplerParameters||Ix)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const i of e)this._pendingCount++,gd(i.url,this._loadOptions).then(r=>{var v;const s=hu(i),a=this._mapping[s],{x:c,y:f,width:h,height:p}=a,{image:m,width:y,height:b}=JZ(n,r,h,p);(v=this._texture)==null||v.copyExternalImage({image:m,x:c+(h-y)/2,y:f+(p-b)/2,width:y,height:b}),a.width=y,a.height=b,this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const iM=[0,0,0,255],rQ={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:iM},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class Uu extends nr{getShaders(){return super.getShaders({vs:qZ,fs:YZ,modules:[ml,yl,XZ]})}initializeState(){this.state={iconManager:new iQ(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:iM},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){var b;super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:a,iconMapping:c,data:f,getIcon:h,textureParameters:p}=n,{iconManager:m}=this.state;if(typeof a=="string")return;const y=a||this.internalState.isAsyncPropLoading("iconAtlas");m.setProps({loadOptions:n.loadOptions,autoPacking:!y,iconAtlas:a,iconMapping:y?c:null,textureParameters:p}),y?i.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&m.packIcons(f,h),r.extensionsChanged&&((b=this.state.model)==null||b.destroy(),this.state.model=this._getModel(),s.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:s,billboard:a,alphaCutoff:c}=this.props,{iconManager:f}=this.state,h=f.getTexture();if(h){const p=this.state.model,m={iconsTexture:h,iconsTextureDim:[h.width,h.height],sizeUnits:Eo[s],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:a,alphaCutoff:c};p.shaderInputs.setProps({icon:m}),p.draw(this.context.renderPass)}}_getModel(){const e=[-1,-1,1,-1,-1,1,1,1];return new hi(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new ll({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var i;const n=(i=this.getCurrentLayer())==null?void 0:i.props.onIconError;n?n(e):Ue.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[n,i,r,s]}}Uu.defaultProps=rQ;Uu.layerName="IconLayer";const Bx=`uniform scatterplotUniforms {
  float radiusScale;
  float radiusMinPixels;
  float radiusMaxPixels;
  float lineWidthScale;
  float lineWidthMinPixels;
  float lineWidthMaxPixels;
  float stroked;
  bool filled;
  bool antialiasing;
  bool billboard;
  highp int radiusUnits;
  highp int lineWidthUnits;
} scatterplot;
`,sQ={name:"scatterplot",vs:Bx,fs:Bx,uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},oQ=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),
scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),
scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
);
outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
float edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;
if (scatterplot.billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,aQ=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = scatterplot.antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (scatterplot.stroked > 0.5) {
float isLine = scatterplot.antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (scatterplot.filled) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (scatterplot.filled == false) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Lx=[0,0,0,255],lQ={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Lx},getLineColor:{type:"accessor",value:Lx},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class iv extends nr{getShaders(){return super.getShaders({vs:oQ,fs:aQ,modules:[ml,yl,sQ]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var n;super.updateState(e),e.changeFlags.extensionsChanged&&((n=this.state.model)==null||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{radiusUnits:n,radiusScale:i,radiusMinPixels:r,radiusMaxPixels:s,stroked:a,filled:c,billboard:f,antialiasing:h,lineWidthUnits:p,lineWidthScale:m,lineWidthMinPixels:y,lineWidthMaxPixels:b}=this.props,v={stroked:a,filled:c,billboard:f,antialiasing:h,radiusUnits:Eo[n],radiusScale:i,radiusMinPixels:r,radiusMaxPixels:s,lineWidthUnits:Eo[p],lineWidthScale:m,lineWidthMinPixels:y,lineWidthMaxPixels:b},T=this.state.model;T.shaderInputs.setProps({scatterplot:v}),T.draw(this.context.renderPass)}_getModel(){const e=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new hi(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new ll({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(e)}}}),isInstanced:!0})}}iv.defaultProps=lQ;iv.layerName="ScatterplotLayer";const rM={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function sM(t,e,n={}){return cQ(t,n)!==e?(fQ(t,n),!0):!1}function cQ(t,e={}){return Math.sign(uQ(t,e))}const Ux={x:0,y:1,z:2};function uQ(t,e={}){const{start:n=0,end:i=t.length,plane:r="xy"}=e,s=e.size||2;let a=0;const c=Ux[r[0]],f=Ux[r[1]];for(let h=n,p=i-s;h<i;h+=s)a+=(t[h+c]-t[p+c])*(t[h+f]+t[p+f]),p=h;return a/2}function fQ(t,e){const{start:n=0,end:i=t.length,size:r=2}=e,s=(i-n)/r,a=Math.floor(s/2);for(let c=0;c<a;++c){const f=n+c*r,h=n+(s-1-c)*r;for(let p=0;p<r;++p){const m=t[f+p];t[f+p]=t[h+p],t[h+p]=m}}}function Ri(t,e){const n=e.length,i=t.length;if(i>0){let r=!0;for(let s=0;s<n;s++)if(t[i-n+s]!==e[s]){r=!1;break}if(r)return!1}for(let r=0;r<n;r++)t[i+r]=e[r];return!0}function N0(t,e){const n=e.length;for(let i=0;i<n;i++)t[i]=e[i]}function du(t,e,n,i,r=[]){const s=i+e*n;for(let a=0;a<n;a++)r[a]=t[s+a];return r}function k0(t,e,n,i,r=[]){let s,a;if(n&8)s=(i[3]-t[1])/(e[1]-t[1]),a=3;else if(n&4)s=(i[1]-t[1])/(e[1]-t[1]),a=1;else if(n&2)s=(i[2]-t[0])/(e[0]-t[0]),a=2;else if(n&1)s=(i[0]-t[0])/(e[0]-t[0]),a=0;else return null;for(let c=0;c<t.length;c++)r[c]=(a&1)===c?i[a]:s*(e[c]-t[c])+t[c];return r}function Zh(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function oM(t,e){const{size:n=2,broken:i=!1,gridResolution:r=10,gridOffset:s=[0,0],startIndex:a=0,endIndex:c=t.length}=e||{},f=(c-a)/n;let h=[];const p=[h],m=du(t,0,n,a);let y,b;const v=lM(m,r,s,[]),T=[];Ri(h,m);for(let S=1;S<f;S++){for(y=du(t,S,n,a,y),b=Zh(y,v);b;){k0(m,y,b,v,T);const w=Zh(T,v);w&&(k0(m,T,w,v,T),b=w),Ri(h,T),N0(m,T),dQ(v,r,b),i&&h.length>n&&(h=[],p.push(h),Ri(h,m)),b=Zh(y,v)}Ri(h,y),N0(m,y)}return i?p:p[0]}const Fx=0,hQ=1;function aM(t,e=null,n){if(!t.length)return[];const{size:i=2,gridResolution:r=10,gridOffset:s=[0,0],edgeTypes:a=!1}=n||{},c=[],f=[{pos:t,types:a?new Array(t.length/i).fill(hQ):null,holes:e||[]}],h=[[],[]];let p=[];for(;f.length;){const{pos:m,types:y,holes:b}=f.shift();pQ(m,i,b[0]||m.length,h),p=lM(h[0],r,s,p);const v=Zh(h[1],p);if(v){let T=zx(m,y,i,0,b[0]||m.length,p,v);const S={pos:T[0].pos,types:T[0].types,holes:[]},w={pos:T[1].pos,types:T[1].types,holes:[]};f.push(S,w);for(let C=0;C<b.length;C++)T=zx(m,y,i,b[C],b[C+1]||m.length,p,v),T[0]&&(S.holes.push(S.pos.length),S.pos=Sh(S.pos,T[0].pos),a&&(S.types=Sh(S.types,T[0].types))),T[1]&&(w.holes.push(w.pos.length),w.pos=Sh(w.pos,T[1].pos),a&&(w.types=Sh(w.types,T[1].types)))}else{const T={positions:m};a&&(T.edgeTypes=y),b.length&&(T.holeIndices=b),c.push(T)}}return c}function zx(t,e,n,i,r,s,a){const c=(r-i)/n,f=[],h=[],p=[],m=[],y=[];let b,v,T;const S=du(t,c-1,n,i);let w=Math.sign(a&8?S[1]-s[3]:S[0]-s[2]),C=e&&e[c-1],A=0,O=0;for(let R=0;R<c;R++)b=du(t,R,n,i,b),v=Math.sign(a&8?b[1]-s[3]:b[0]-s[2]),T=e&&e[i/n+R],v&&w&&w!==v&&(k0(S,b,a,s,y),Ri(f,y)&&p.push(C),Ri(h,y)&&m.push(C)),v<=0?(Ri(f,b)&&p.push(T),A-=v):p.length&&(p[p.length-1]=Fx),v>=0?(Ri(h,b)&&m.push(T),O+=v):m.length&&(m[m.length-1]=Fx),N0(S,b),w=v,C=T;return[A?{pos:f,types:e&&p}:null,O?{pos:h,types:e&&m}:null]}function lM(t,e,n,i){const r=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return i[0]=r,i[1]=s,i[2]=r+e,i[3]=s+e,i}function dQ(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function pQ(t,e,n,i){let r=1/0,s=-1/0,a=1/0,c=-1/0;for(let f=0;f<n;f+=e){const h=t[f],p=t[f+1];r=h<r?h:r,s=h>s?h:s,a=p<a?p:a,c=p>c?p:c}return i[0][0]=r,i[0][1]=a,i[1][0]=s,i[1][1]=c,i}function Sh(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}const gQ=85.051129;function mQ(t,e){const{size:n=2,startIndex:i=0,endIndex:r=t.length,normalize:s=!0}=e||{},a=t.slice(i,r);cM(a,n,0,r-i);const c=oM(a,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const f of c)uM(f,n);return c}function yQ(t,e=null,n){const{size:i=2,normalize:r=!0,edgeTypes:s=!1}=n||{};e=e||[];const a=[],c=[];let f=0,h=0;for(let m=0;m<=e.length;m++){const y=e[m]||t.length,b=h,v=_Q(t,i,f,y);for(let T=v;T<y;T++)a[h++]=t[T];for(let T=f;T<v;T++)a[h++]=t[T];cM(a,i,b,h),bQ(a,i,b,h,n==null?void 0:n.maxLatitude),f=y,c[m]=h}c.pop();const p=aM(a,c,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(r)for(const m of p)uM(m.positions,i);return p}function _Q(t,e,n,i){let r=-1,s=-1;for(let a=n+1;a<i;a+=e){const c=Math.abs(t[a]);c>r&&(r=c,s=a-1)}return s}function bQ(t,e,n,i,r=gQ){const s=t[n],a=t[i-e];if(Math.abs(s-a)>180){const c=du(t,0,e,n);c[0]+=Math.round((a-s)/360)*360,Ri(t,c),c[1]=Math.sign(c[1])*r,Ri(t,c),c[0]=s,Ri(t,c)}}function cM(t,e,n,i){let r=t[0],s;for(let a=n;a<i;a+=e){s=t[a];const c=s-r;(c>180||c<-180)&&(s-=Math.round(c/360)*360),t[a]=r=s}}function uM(t,e){let n;const i=t.length/e;for(let s=0;s<i&&(n=t[s*e],(n+180)%360===0);s++);const r=-Math.round(n/360)*360;if(r!==0)for(let s=0;s<i;s++)t[s*e]+=r}function vQ(t,e,n,i){let r;if(Array.isArray(t[0])){const s=t.length*e;r=new Array(s);for(let a=0;a<t.length;a++)for(let c=0;c<e;c++)r[a*e+c]=t[a][c]||0}else r=t;return n?oM(r,{size:e,gridResolution:n}):i?mQ(r,{size:e}):r}const TQ=1,SQ=2,Zy=4;class EQ extends eM{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?vQ(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(Vx(e)){let i=0;for(const r of e)i+=this.getGeometrySize(r);return i}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&Vx(e))for(const i of e){const r=this.getGeometrySize(i);n.geometrySize=r,this.updateGeometryAttributes(i,n),n.vertexStart+=r}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const i=this.attributes.segmentTypes,r=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:a}=n;i.fill(0,s,s+a),r?(i[s]=Zy,i[s+a-2]=Zy):(i[s]+=TQ,i[s+a-2]+=SQ),i[s+a-1]=Zy}_updatePositions(e,n){const{positions:i}=this.attributes;if(!i||!e)return;const{vertexStart:r,geometrySize:s}=n,a=new Array(3);for(let c=r,f=0;f<s;c++,f++)this.getPointOnPath(e,f,a),i[c*3]=a[0],i[c*3+1]=a[1],i[c*3+2]=a[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,i=[]){const{positionSize:r}=this;n*r>=e.length&&(n+=1-e.length/r);const s=n*r;return i[0]=e[s],i[1]=e[s+1],i[2]=r===3&&e[s+2]||0,i}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,i=e.length-n;return e[0]===e[i]&&e[1]===e[i+1]&&(n===2||e[2]===e[i+2])}}function Vx(t){return Array.isArray(t[0])}const $x=`uniform pathUniforms {
  float widthScale;
  float widthMinPixels;
  float widthMaxPixels;
  float jointType;
  float capType;
  float miterLimit;
  bool billboard;
  highp int widthUnits;
} path;
`,wQ={name:"path",vs:$x,fs:$x,uniformTypes:{widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",jointType:"f32",capType:"f32",miterLimit:"f32",billboard:"f32",widthUnits:"i32"}},AQ=`#version 300 es
#define SHADER_NAME path-layer-vertex-shader
in vec2 positions;
in float instanceTypes;
in vec3 instanceStartPositions;
in vec3 instanceEndPositions;
in vec3 instanceLeftPositions;
in vec3 instanceRightPositions;
in vec3 instanceLeftPositions64Low;
in vec3 instanceStartPositions64Low;
in vec3 instanceEndPositions64Low;
in vec3 instanceRightPositions64Low;
in float instanceStrokeWidths;
in vec4 instanceColors;
in vec3 instancePickingColors;
uniform float opacity;
out vec4 vColor;
out vec2 vCornerOffset;
out float vMiterLength;
out vec2 vPathPosition;
out float vPathLength;
out float vJointType;
const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);
float flipIfTrue(bool flag) {
return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
vec2 width
) {
bool isEnd = positions.x > 0.0;
float sideOfPath = positions.y;
float isJoint = float(sideOfPath == 0.0);
vec3 deltaA3 = (currPoint - prevPoint);
vec3 deltaB3 = (nextPoint - currPoint);
mat3 rotationMatrix;
bool needsRotation = !path.billboard && project_needs_rotation(currPoint, rotationMatrix);
if (needsRotation) {
deltaA3 = deltaA3 * rotationMatrix;
deltaB3 = deltaB3 * rotationMatrix;
}
vec2 deltaA = deltaA3.xy / width;
vec2 deltaB = deltaB3.xy / width;
float lenA = length(deltaA);
float lenB = length(deltaB);
vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);
vec2 perpA = vec2(-dirA.y, dirA.x);
vec2 perpB = vec2(-dirB.y, dirB.x);
vec2 tangent = dirA + dirB;
tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
vec2 miterVec = vec2(-tangent.y, tangent.x);
vec2 dir = isEnd ? dirA : dirB;
vec2 perp = isEnd ? perpA : perpB;
float L = isEnd ? lenA : lenB;
float sinHalfA = abs(dot(miterVec, perp));
float cosHalfA = abs(dot(dirA, miterVec));
float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
float cornerPosition = sideOfPath * turnDirection;
float miterSize = 1.0 / max(sinHalfA, EPSILON);
miterSize = mix(
min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
miterSize,
step(0.0, cornerPosition)
);
vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
* (sideOfPath + isJoint * turnDirection);
bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
bool isCap = isStartCap || isEndCap;
if (isCap) {
offsetVec = mix(perp * sideOfPath, dir * path.capType * 4.0 * flipIfTrue(isStartCap), isJoint);
vJointType = path.capType;
} else {
vJointType = path.jointType;
}
vPathLength = L;
vCornerOffset = offsetVec;
vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
vMiterLength = isCap ? isJoint : vMiterLength;
vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
vPathPosition = vec2(
dot(offsetFromStartOfPath, perp),
dot(offsetFromStartOfPath, dir)
);
geometry.uv = vPathPosition;
float isValid = step(instanceTypes, 3.5);
vec3 offset = vec3(offsetVec * width * isValid, 0.0);
if (needsRotation) {
offset = rotationMatrix * offset;
}
return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
if (position.w < EPSILON) {
float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
position = refPosition + (position - refPosition) * r;
}
}
void main() {
geometry.pickingColor = instancePickingColors;
vColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);
float isEnd = positions.x;
vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);
vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);
vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);
geometry.worldPosition = currPosition;
vec2 widthPixels = vec2(clamp(
project_size_to_pixel(instanceStrokeWidths * path.widthScale, path.widthUnits),
path.widthMinPixels, path.widthMaxPixels) / 2.0);
vec3 width;
if (path.billboard) {
vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);
clipLine(prevPositionScreen, currPositionScreen);
clipLine(nextPositionScreen, currPositionScreen);
clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));
width = vec3(widthPixels, 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(
prevPositionScreen.xyz / prevPositionScreen.w,
currPositionScreen.xyz / currPositionScreen.w,
nextPositionScreen.xyz / nextPositionScreen.w,
project_pixel_size_to_clipspace(width.xy)
);
DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
} else {
prevPosition = project_position(prevPosition, prevPosition64Low);
currPosition = project_position(currPosition, currPosition64Low);
nextPosition = project_position(nextPosition, nextPosition64Low);
width = vec3(project_pixel_size(widthPixels), 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
geometry.position = vec4(currPosition + offset, 1.0);
gl_Position = project_common_position_to_clipspace(geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,xQ=`#version 300 es
#define SHADER_NAME path-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 vCornerOffset;
in float vMiterLength;
in vec2 vPathPosition;
in float vPathLength;
in float vJointType;
out vec4 fragColor;
void main(void) {
geometry.uv = vPathPosition;
if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
discard;
}
if (vJointType < 0.5 && vMiterLength > path.miterLimit + 1.0) {
discard;
}
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,fM=[0,0,0,255],RQ={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:fM},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Qy={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class rv extends nr{getShaders(){return super.getShaders({vs:AQ,fs:xQ,modules:[ml,yl,wQ]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:Qy,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Qy,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:Qy,defaultValue:fM},instancePickingColors:{size:4,type:"uint8",accessor:(i,{index:r,target:s})=>this.encodePickingColor(i&&i.__source?i.__source.index:r,s)}}),this.setState({pathTesselator:new EQ({fp64:this.use64bitPositions()})})}updateState(e){var a;super.updateState(e);const{props:n,changeFlags:i}=e,r=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){const{pathTesselator:c}=this.state,f=n.data.attributes||{};c.updateGeometry({data:n.data,geometryBuffer:f.getPath,buffers:f,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:c.instanceCount,startIndices:c.vertexStarts}),i.dataChanged||r.invalidateAll()}i.extensionsChanged&&((a=this.state.model)==null||a.destroy(),this.state.model=this._getModel(),r.invalidateAll())}getPickingInfo(e){const n=super.getPickingInfo(e),{index:i}=n,r=this.props.data;return r[0]&&r[0].__source&&(n.object=r.find(s=>s.__source.index===i)),n}disablePickingIndex(e){const n=this.props.data;if(n[0]&&n[0].__source)for(let i=0;i<n.length;i++)n[i].__source.index===e&&this._disablePickingIndex(i);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:i,billboard:r,miterLimit:s,widthUnits:a,widthScale:c,widthMinPixels:f,widthMaxPixels:h}=this.props,p=this.state.model,m={jointType:Number(n),capType:Number(i),billboard:r,widthUnits:Eo[a],widthScale:c,miterLimit:s,widthMinPixels:f,widthMaxPixels:h};p.shaderInputs.setProps({path:m}),p.draw(this.context.renderPass)}_getModel(){const e=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new hi(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new ll({topology:"triangle-list",attributes:{indices:new Uint16Array(e),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}rv.defaultProps=RQ;rv.layerName="PathLayer";var Eh={exports:{}},jx;function CQ(){if(jx)return Eh.exports;jx=1,Eh.exports=t,Eh.exports.default=t;function t(N,U,L){L=L||2;var X=U&&U.length,P=X?U[0]*L:N.length,$=e(N,0,P,L,!0),Q=[];if(!$||$.next===$.prev)return Q;var ne,re,ue,ye,Se,me,Re;if(X&&($=f(N,U,$,L)),N.length>80*L){ne=ue=N[0],re=ye=N[1];for(var ve=L;ve<P;ve+=L)Se=N[ve],me=N[ve+1],Se<ne&&(ne=Se),me<re&&(re=me),Se>ue&&(ue=Se),me>ye&&(ye=me);Re=Math.max(ue-ne,ye-re),Re=Re!==0?32767/Re:0}return i($,Q,L,ne,re,Re,0),Q}function e(N,U,L,X,P){var $,Q;if(P===pe(N,U,L,X)>0)for($=U;$<L;$+=X)Q=te($,N[$],N[$+1],Q);else for($=L-X;$>=U;$-=X)Q=te($,N[$],N[$+1],Q);return Q&&O(Q,Q.next)&&(se(Q),Q=Q.next),Q}function n(N,U){if(!N)return N;U||(U=N);var L=N,X;do if(X=!1,!L.steiner&&(O(L,L.next)||A(L.prev,L,L.next)===0)){if(se(L),L=U=L.prev,L===L.next)break;X=!0}else L=L.next;while(X||L!==U);return U}function i(N,U,L,X,P,$,Q){if(N){!Q&&$&&b(N,X,P,$);for(var ne=N,re,ue;N.prev!==N.next;){if(re=N.prev,ue=N.next,$?s(N,X,P,$):r(N)){U.push(re.i/L|0),U.push(N.i/L|0),U.push(ue.i/L|0),se(N),N=ue.next,ne=ue.next;continue}if(N=ue,N===ne){Q?Q===1?(N=a(n(N),U,L),i(N,U,L,X,P,$,2)):Q===2&&c(N,U,L,X,P,$):i(n(N),U,L,X,P,$,1);break}}}}function r(N){var U=N.prev,L=N,X=N.next;if(A(U,L,X)>=0)return!1;for(var P=U.x,$=L.x,Q=X.x,ne=U.y,re=L.y,ue=X.y,ye=P<$?P<Q?P:Q:$<Q?$:Q,Se=ne<re?ne<ue?ne:ue:re<ue?re:ue,me=P>$?P>Q?P:Q:$>Q?$:Q,Re=ne>re?ne>ue?ne:ue:re>ue?re:ue,ve=X.next;ve!==U;){if(ve.x>=ye&&ve.x<=me&&ve.y>=Se&&ve.y<=Re&&w(P,ne,$,re,Q,ue,ve.x,ve.y)&&A(ve.prev,ve,ve.next)>=0)return!1;ve=ve.next}return!0}function s(N,U,L,X){var P=N.prev,$=N,Q=N.next;if(A(P,$,Q)>=0)return!1;for(var ne=P.x,re=$.x,ue=Q.x,ye=P.y,Se=$.y,me=Q.y,Re=ne<re?ne<ue?ne:ue:re<ue?re:ue,ve=ye<Se?ye<me?ye:me:Se<me?Se:me,Qe=ne>re?ne>ue?ne:ue:re>ue?re:ue,Ge=ye>Se?ye>me?ye:me:Se>me?Se:me,bt=T(Re,ve,U,L,X),kt=T(Qe,Ge,U,L,X),Ce=N.prevZ,xe=N.nextZ;Ce&&Ce.z>=bt&&xe&&xe.z<=kt;){if(Ce.x>=Re&&Ce.x<=Qe&&Ce.y>=ve&&Ce.y<=Ge&&Ce!==P&&Ce!==Q&&w(ne,ye,re,Se,ue,me,Ce.x,Ce.y)&&A(Ce.prev,Ce,Ce.next)>=0||(Ce=Ce.prevZ,xe.x>=Re&&xe.x<=Qe&&xe.y>=ve&&xe.y<=Ge&&xe!==P&&xe!==Q&&w(ne,ye,re,Se,ue,me,xe.x,xe.y)&&A(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;Ce&&Ce.z>=bt;){if(Ce.x>=Re&&Ce.x<=Qe&&Ce.y>=ve&&Ce.y<=Ge&&Ce!==P&&Ce!==Q&&w(ne,ye,re,Se,ue,me,Ce.x,Ce.y)&&A(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.prevZ}for(;xe&&xe.z<=kt;){if(xe.x>=Re&&xe.x<=Qe&&xe.y>=ve&&xe.y<=Ge&&xe!==P&&xe!==Q&&w(ne,ye,re,Se,ue,me,xe.x,xe.y)&&A(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function a(N,U,L){var X=N;do{var P=X.prev,$=X.next.next;!O(P,$)&&R(P,X,X.next,$)&&V(P,$)&&V($,P)&&(U.push(P.i/L|0),U.push(X.i/L|0),U.push($.i/L|0),se(X),se(X.next),X=N=$),X=X.next}while(X!==N);return n(X)}function c(N,U,L,X,P,$){var Q=N;do{for(var ne=Q.next.next;ne!==Q.prev;){if(Q.i!==ne.i&&C(Q,ne)){var re=H(Q,ne);Q=n(Q,Q.next),re=n(re,re.next),i(Q,U,L,X,P,$,0),i(re,U,L,X,P,$,0);return}ne=ne.next}Q=Q.next}while(Q!==N)}function f(N,U,L,X){var P=[],$,Q,ne,re,ue;for($=0,Q=U.length;$<Q;$++)ne=U[$]*X,re=$<Q-1?U[$+1]*X:N.length,ue=e(N,ne,re,X,!1),ue===ue.next&&(ue.steiner=!0),P.push(S(ue));for(P.sort(h),$=0;$<P.length;$++)L=p(P[$],L);return L}function h(N,U){return N.x-U.x}function p(N,U){var L=m(N,U);if(!L)return U;var X=H(L,N);return n(X,X.next),n(L,L.next)}function m(N,U){var L=U,X=N.x,P=N.y,$=-1/0,Q;do{if(P<=L.y&&P>=L.next.y&&L.next.y!==L.y){var ne=L.x+(P-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(ne<=X&&ne>$&&($=ne,Q=L.x<L.next.x?L:L.next,ne===X))return Q}L=L.next}while(L!==U);if(!Q)return null;var re=Q,ue=Q.x,ye=Q.y,Se=1/0,me;L=Q;do X>=L.x&&L.x>=ue&&X!==L.x&&w(P<ye?X:$,P,ue,ye,P<ye?$:X,P,L.x,L.y)&&(me=Math.abs(P-L.y)/(X-L.x),V(L,N)&&(me<Se||me===Se&&(L.x>Q.x||L.x===Q.x&&y(Q,L)))&&(Q=L,Se=me)),L=L.next;while(L!==re);return Q}function y(N,U){return A(N.prev,N,U.prev)<0&&A(U.next,N,N.next)<0}function b(N,U,L,X){var P=N;do P.z===0&&(P.z=T(P.x,P.y,U,L,X)),P.prevZ=P.prev,P.nextZ=P.next,P=P.next;while(P!==N);P.prevZ.nextZ=null,P.prevZ=null,v(P)}function v(N){var U,L,X,P,$,Q,ne,re,ue=1;do{for(L=N,N=null,$=null,Q=0;L;){for(Q++,X=L,ne=0,U=0;U<ue&&(ne++,X=X.nextZ,!!X);U++);for(re=ue;ne>0||re>0&&X;)ne!==0&&(re===0||!X||L.z<=X.z)?(P=L,L=L.nextZ,ne--):(P=X,X=X.nextZ,re--),$?$.nextZ=P:N=P,P.prevZ=$,$=P;L=X}$.nextZ=null,ue*=2}while(Q>1);return N}function T(N,U,L,X,P){return N=(N-L)*P|0,U=(U-X)*P|0,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,N|U<<1}function S(N){var U=N,L=N;do(U.x<L.x||U.x===L.x&&U.y<L.y)&&(L=U),U=U.next;while(U!==N);return L}function w(N,U,L,X,P,$,Q,ne){return(P-Q)*(U-ne)>=(N-Q)*($-ne)&&(N-Q)*(X-ne)>=(L-Q)*(U-ne)&&(L-Q)*($-ne)>=(P-Q)*(X-ne)}function C(N,U){return N.next.i!==U.i&&N.prev.i!==U.i&&!j(N,U)&&(V(N,U)&&V(U,N)&&x(N,U)&&(A(N.prev,N,U.prev)||A(N,U.prev,U))||O(N,U)&&A(N.prev,N,N.next)>0&&A(U.prev,U,U.next)>0)}function A(N,U,L){return(U.y-N.y)*(L.x-U.x)-(U.x-N.x)*(L.y-U.y)}function O(N,U){return N.x===U.x&&N.y===U.y}function R(N,U,L,X){var P=z(A(N,U,L)),$=z(A(N,U,X)),Q=z(A(L,X,N)),ne=z(A(L,X,U));return!!(P!==$&&Q!==ne||P===0&&D(N,L,U)||$===0&&D(N,X,U)||Q===0&&D(L,N,X)||ne===0&&D(L,U,X))}function D(N,U,L){return U.x<=Math.max(N.x,L.x)&&U.x>=Math.min(N.x,L.x)&&U.y<=Math.max(N.y,L.y)&&U.y>=Math.min(N.y,L.y)}function z(N){return N>0?1:N<0?-1:0}function j(N,U){var L=N;do{if(L.i!==N.i&&L.next.i!==N.i&&L.i!==U.i&&L.next.i!==U.i&&R(L,L.next,N,U))return!0;L=L.next}while(L!==N);return!1}function V(N,U){return A(N.prev,N,N.next)<0?A(N,U,N.next)>=0&&A(N,N.prev,U)>=0:A(N,U,N.prev)<0||A(N,N.next,U)<0}function x(N,U){var L=N,X=!1,P=(N.x+U.x)/2,$=(N.y+U.y)/2;do L.y>$!=L.next.y>$&&L.next.y!==L.y&&P<(L.next.x-L.x)*($-L.y)/(L.next.y-L.y)+L.x&&(X=!X),L=L.next;while(L!==N);return X}function H(N,U){var L=new fe(N.i,N.x,N.y),X=new fe(U.i,U.x,U.y),P=N.next,$=U.prev;return N.next=U,U.prev=N,L.next=P,P.prev=L,X.next=L,L.prev=X,$.next=X,X.prev=$,X}function te(N,U,L,X){var P=new fe(N,U,L);return X?(P.next=X.next,P.prev=X,X.next.prev=P,X.next=P):(P.prev=P,P.next=P),P}function se(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function fe(N,U,L){this.i=N,this.x=U,this.y=L,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}t.deviation=function(N,U,L,X){var P=U&&U.length,$=P?U[0]*L:N.length,Q=Math.abs(pe(N,0,$,L));if(P)for(var ne=0,re=U.length;ne<re;ne++){var ue=U[ne]*L,ye=ne<re-1?U[ne+1]*L:N.length;Q-=Math.abs(pe(N,ue,ye,L))}var Se=0;for(ne=0;ne<X.length;ne+=3){var me=X[ne]*L,Re=X[ne+1]*L,ve=X[ne+2]*L;Se+=Math.abs((N[me]-N[ve])*(N[Re+1]-N[me+1])-(N[me]-N[Re])*(N[ve+1]-N[me+1]))}return Q===0&&Se===0?0:Math.abs((Se-Q)/Q)};function pe(N,U,L,X){for(var P=0,$=U,Q=L-X;$<L;$+=X)P+=(N[Q]-N[$])*(N[$+1]+N[Q+1]),Q=$;return P}return t.flatten=function(N){for(var U=N[0][0].length,L={vertices:[],holes:[],dimensions:U},X=0,P=0;P<N.length;P++){for(var $=0;$<N[P].length;$++)for(var Q=0;Q<U;Q++)L.vertices.push(N[P][$][Q]);P>0&&(X+=N[P-1].length,L.holes.push(X))}return L},Eh.exports}var OQ=CQ();const MQ=np(OQ),wh=rM.CLOCKWISE,Hx=rM.COUNTER_CLOCKWISE,bs={};function PQ(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function Lc(t){return"positions"in t?t.positions:t}function Qh(t){return"holeIndices"in t?t.holeIndices:null}function NQ(t){return Array.isArray(t[0])}function kQ(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function IQ(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function DQ(t,e,n,i){for(let r=0;r<e;r++)if(t[n+r]!==t[i-e+r])return!1;return!0}function Wx(t,e,n,i,r){let s=e;const a=n.length;for(let c=0;c<a;c++)for(let f=0;f<i;f++)t[s++]=n[c][f]||0;if(!IQ(n))for(let c=0;c<i;c++)t[s++]=n[0][c]||0;return bs.start=e,bs.end=s,bs.size=i,sM(t,r,bs),s}function Xx(t,e,n,i,r=0,s,a){s=s||n.length;const c=s-r;if(c<=0)return e;let f=e;for(let h=0;h<c;h++)t[f++]=n[r+h];if(!DQ(n,i,r,s))for(let h=0;h<i;h++)t[f++]=n[r+h];return bs.start=e,bs.end=f,bs.size=i,sM(t,a,bs),f}function BQ(t,e){PQ(t);const n=[],i=[];if("positions"in t){const{positions:r,holeIndices:s}=t;if(s){let a=0;for(let c=0;c<=s.length;c++)a=Xx(n,a,r,e,s[c-1],s[c],c===0?wh:Hx),i.push(a);return i.pop(),{positions:n,holeIndices:i}}t=r}if(!NQ(t))return Xx(n,0,t,e,0,n.length,wh),n;if(!kQ(t)){let r=0;for(const[s,a]of t.entries())r=Wx(n,r,a,e,s===0?wh:Hx),i.push(r);return i.pop(),{positions:n,holeIndices:i}}return Wx(n,0,t,e,wh),n}function Gy(t,e,n){const i=t.length/3;let r=0;for(let s=0;s<i;s++){const a=(s+1)%i;r+=t[s*3+e]*t[a*3+n],r-=t[a*3+e]*t[s*3+n]}return Math.abs(r/2)}function qx(t,e,n,i){const r=t.length/3;for(let s=0;s<r;s++){const a=s*3,c=t[a+0],f=t[a+1],h=t[a+2];t[a+e]=c,t[a+n]=f,t[a+i]=h}}function LQ(t,e,n,i){let r=Qh(t);r&&(r=r.map(c=>c/e));let s=Lc(t);const a=i&&e===3;if(n){const c=s.length;s=s.slice();const f=[];for(let h=0;h<c;h+=e){f[0]=s[h],f[1]=s[h+1],a&&(f[2]=s[h+2]);const p=n(f);s[h]=p[0],s[h+1]=p[1],a&&(s[h+2]=p[2])}}if(a){const c=Gy(s,0,1),f=Gy(s,0,2),h=Gy(s,1,2);if(!c&&!f&&!h)return[];c>f&&c>h||(f>h?(n||(s=s.slice()),qx(s,0,2,1)):(n||(s=s.slice()),qx(s,2,0,1)))}return MQ(s,r,e)}class UQ extends eM{constructor(e){const{fp64:n,IndexType:i=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:i,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=BQ(e,this.positionSize);return this.opts.resolution?aM(Lc(n),Qh(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?yQ(Lc(n),Qh(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(Yx(e)){let n=0;for(const i of e)n+=this.getGeometrySize(i);return n}return Lc(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&Yx(e))for(const i of e){const r=this.getGeometrySize(i);n.geometrySize=r,this.updateGeometryAttributes(i,n),n.vertexStart+=r,n.indexStart=this.indexStarts[n.geometryIndex+1]}else{const i=e;this._updateIndices(i,n),this._updatePositions(i,n),this._updateVertexValid(i,n)}}_updateIndices(e,{geometryIndex:n,vertexStart:i,indexStart:r}){const{attributes:s,indexStarts:a,typedArrayManager:c}=this;let f=s.indices;if(!f||!e)return;let h=r;const p=LQ(e,this.positionSize,this.opts.preproject,this.opts.full3d);f=c.allocate(f,r+p.length,{copy:!0});for(let m=0;m<p.length;m++)f[h++]=p[m]+i;a[n+1]=r+p.length,s.indices=f}_updatePositions(e,{vertexStart:n,geometrySize:i}){const{attributes:{positions:r},positionSize:s}=this;if(!r||!e)return;const a=Lc(e);for(let c=n,f=0;f<i;c++,f++){const h=a[f*s],p=a[f*s+1],m=s>2?a[f*s+2]:0;r[c*3]=h,r[c*3+1]=p,r[c*3+2]=m}}_updateVertexValid(e,{vertexStart:n,geometrySize:i}){const{positionSize:r}=this,s=this.attributes.vertexValid,a=e&&Qh(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+i),a)for(let c=0;c<a.length;c++)s[n+a[c]/r-1]=0;s[n+i-1]=0}}function Yx(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const Kx=`uniform solidPolygonUniforms {
  bool extruded;
  bool isWireframe;
  float elevationScale;
} solidPolygon;
`,FQ={name:"solidPolygon",vs:Kx,fs:Kx,uniformTypes:{extruded:"f32",isWireframe:"f32",elevationScale:"f32"}},hM=`in vec4 fillColors;
in vec4 lineColors;
in vec3 pickingColors;
out vec4 vColor;
struct PolygonProps {
vec3 positions;
vec3 positions64Low;
vec3 normal;
float elevations;
};
vec3 project_offset_normal(vec3 vector) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
return normalize(vector * project.commonUnitsPerWorldUnit);
}
return project_normal(vector);
}
void calculatePosition(PolygonProps props) {
vec3 pos = props.positions;
vec3 pos64Low = props.positions64Low;
vec3 normal = props.normal;
vec4 colors = solidPolygon.isWireframe ? lineColors : fillColors;
geometry.worldPosition = props.positions;
geometry.pickingColor = pickingColors;
if (solidPolygon.extruded) {
pos.z += props.elevations * solidPolygon.elevationScale;
}
gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (solidPolygon.extruded) {
#ifdef IS_SIDE_VERTEX
normal = project_offset_normal(normal);
#else
normal = project_normal(normal);
#endif
geometry.normal = normal;
vec3 lightColor = lighting_getLightColor(colors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, colors.a * layer.opacity);
} else {
vColor = vec4(colors.rgb, colors.a * layer.opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,zQ=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader
in vec3 vertexPositions;
in vec3 vertexPositions64Low;
in float elevations;
${hM}
void main(void) {
PolygonProps props;
props.positions = vertexPositions;
props.positions64Low = vertexPositions64Low;
props.elevations = elevations;
props.normal = vec3(0.0, 0.0, 1.0);
calculatePosition(props);
}
`,VQ=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX
in vec2 positions;
in vec3 vertexPositions;
in vec3 nextVertexPositions;
in vec3 vertexPositions64Low;
in vec3 nextVertexPositions64Low;
in float elevations;
in float instanceVertexValid;
${hM}
void main(void) {
if(instanceVertexValid < 0.5){
gl_Position = vec4(0.);
return;
}
PolygonProps props;
vec3 pos;
vec3 pos64Low;
vec3 nextPos;
vec3 nextPos64Low;
#if RING_WINDING_ORDER_CW == 1
pos = vertexPositions;
pos64Low = vertexPositions64Low;
nextPos = nextVertexPositions;
nextPos64Low = nextVertexPositions64Low;
#else
pos = nextVertexPositions;
pos64Low = nextVertexPositions64Low;
nextPos = vertexPositions;
nextPos64Low = vertexPositions64Low;
#endif
props.positions = mix(pos, nextPos, positions.x);
props.positions64Low = mix(pos64Low, nextPos64Low, positions.x);
props.normal = vec3(
pos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),
nextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),
0.0);
props.elevations = elevations * positions.y;
calculatePosition(props);
}
`,$Q=`#version 300 es
#define SHADER_NAME solid-polygon-layer-fragment-shader
precision highp float;
in vec4 vColor;
out vec4 fragColor;
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Id=[0,0,0,255],jQ={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Id},getLineColor:{type:"accessor",value:Id},material:!0},Ah={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class sv extends nr{getShaders(e){return super.getShaders({vs:e==="top"?zQ:VQ,fs:$Q,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[ml,J3,yl,FQ]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){const{viewport:e}=this.context;let{coordinateSystem:n}=this.props;const{_full3d:i}=this.props;e.isGeospatial&&n===$e.DEFAULT&&(n=$e.LNGLAT);let r;n===$e.LNGLAT&&(i?r=e.projectPosition.bind(e):r=e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new UQ({preproject:r,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const s=this.getAttributeManager(),a=!0;s.remove(["instancePickingColors"]),s.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:Ah,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,stepMode:"dynamic",transition:Ah,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:Ah,accessor:"getFillColor",defaultValue:Id},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:Ah,accessor:"getLineColor",defaultValue:Id},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(c,{index:f,target:h})=>this.encodePickingColor(c&&c.__source?c.__source.index:f,h)}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:i}=n,r=this.props.data;return r[0]&&r[0].__source&&(n.object=r.find(s=>s.__source.index===i)),n}disablePickingIndex(e){const n=this.props.data;if(n[0]&&n[0].__source)for(let i=0;i<n.length;i++)n[i].__source.index===e&&this._disablePickingIndex(i);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:i,wireframe:r,elevationScale:s}=this.props,{topModel:a,sideModel:c,wireframeModel:f,polygonTesselator:h}=this.state,p={extruded:!!n,elevationScale:s,isWireframe:!1};f&&r&&(f.setInstanceCount(h.instanceCount-1),f.shaderInputs.setProps({solidPolygon:{...p,isWireframe:!0}}),f.draw(this.context.renderPass)),c&&i&&(c.setInstanceCount(h.instanceCount-1),c.shaderInputs.setProps({solidPolygon:p}),c.draw(this.context.renderPass)),a&&i&&(a.setVertexCount(h.vertexCount),a.shaderInputs.setProps({solidPolygon:p}),a.draw(this.context.renderPass))}updateState(e){var c;super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager();(r.extensionsChanged||n.filled!==i.filled||n.extruded!==i.extruded)&&((c=this.state.models)==null||c.forEach(f=>f.destroy()),this.setState(this._getModels()),s.invalidateAll())}updateGeometry({props:e,oldProps:n,changeFlags:i}){if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,a=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:i.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),i.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:e,filled:n,extruded:i}=this.props;let r,s,a;if(n){const c=this.getShaders("top");c.defines.NON_INSTANCED_MODEL=1;const f=this.getAttributeManager().getBufferLayouts({isInstanced:!1});r=new hi(this.context.device,{...c,id:`${e}-top`,topology:"triangle-list",bufferLayout:f,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(i){const c=this.getAttributeManager().getBufferLayouts({isInstanced:!0});s=new hi(this.context.device,{...this.getShaders("side"),id:`${e}-side`,bufferLayout:c,geometry:new ll({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),a=new hi(this.context.device,{...this.getShaders("side"),id:`${e}-wireframe`,bufferLayout:c,geometry:new ll({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[s,a,r].filter(Boolean),topModel:r,sideModel:s,wireframeModel:a}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}sv.defaultProps=jQ;sv.layerName="SolidPolygonLayer";function HQ({data:t,getIndex:e,dataRange:n,replace:i}){const{startRow:r=0,endRow:s=1/0}=n,a=t.length;let c=a,f=a;for(let y=0;y<a;y++){const b=e(t[y]);if(c>y&&b>=r&&(c=y),b>=s){f=y;break}}let h=c;const m=f-c!==i.length?t.slice(f):void 0;for(let y=0;y<i.length;y++)t[h++]=i[y];if(m){for(let y=0;y<m.length;y++)t[h++]=m[y];t.length=h}return{startRow:c,endRow:c+i.length}}function WQ(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,i=t.featureIds.value[n];return n!==-1?XQ(t,i,n):null}function XQ(t,e,n){const i={properties:{...t.properties[e]}};for(const r in t.numericProps)i.properties[r]=t.numericProps[r].value[n];return i}function qQ(t,e){const n={points:null,lines:null,polygons:null};for(const i in n){const r=t[i].globalFeatureIds.value;n[i]=new Uint8ClampedArray(r.length*4);const s=[];for(let a=0;a<r.length;a++)e(r[a],s),n[i][a*4+0]=s[0],n[i][a*4+1]=s[1],n[i][a*4+2]=s[2],n[i][a*4+3]=255}return n}const Zx=`uniform sdfUniforms {
  float gamma;
  bool enabled;
  float buffer;
  float outlineBuffer;
  vec4 outlineColor;
} sdf;
`,YQ={name:"sdf",vs:Zx,fs:Zx,uniformTypes:{gamma:"f32",enabled:"f32",buffer:"f32",outlineBuffer:"f32",outlineColor:"vec4<f32>"}},KQ=`#version 300 es
#define SHADER_NAME multi-icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
if (!bool(picking.isActive)) {
float alpha = texture(iconsTexture, vTextureCoords).a;
vec4 color = vColor;
if (sdf.enabled) {
float distance = alpha;
alpha = smoothstep(sdf.buffer - sdf.gamma, sdf.buffer + sdf.gamma, distance);
if (sdf.outlineBuffer > 0.0) {
float inFill = alpha;
float inBorder = smoothstep(sdf.outlineBuffer - sdf.gamma, sdf.outlineBuffer + sdf.gamma, distance);
color = mix(sdf.outlineColor, vColor, inFill);
alpha = inBorder;
}
}
float a = alpha * color.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color.rgb, a * layer.opacity);
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Jy=192/256,Qx=[],ZQ={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class ov extends Uu{getShaders(){const e=super.getShaders();return{...e,modules:[...e.modules,YQ],fs:KQ}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&Ue.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:s}=this.state,a=r?Math.max(i,Jy*(1-r)):-1,c=this.state.model,f={buffer:Jy,outlineBuffer:a,gamma:i,enabled:!!n,outlineColor:s};if(c.shaderInputs.setProps({sdf:f}),super.draw(e),n&&r){const{iconManager:h}=this.state;h.getTexture()&&(c.shaderInputs.setProps({sdf:{...f,outlineBuffer:Jy}}),c.draw(this.context.renderPass))}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):Qx}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):Qx}}ov.defaultProps=ZQ;ov.layerName="MultiIconLayer";const Dd=1e20;class QQ{constructor({fontSize:e=24,buffer:n=3,radius:i=8,cutoff:r=.25,fontFamily:s="sans-serif",fontWeight:a="normal",fontStyle:c="normal"}={}){this.buffer=n,this.cutoff=r,this.radius=i;const f=this.size=e+n*4,h=this._createCanvas(f),p=this.ctx=h.getContext("2d",{willReadFrequently:!0});p.font=`${c} ${a} ${e}px ${s}`,p.textBaseline="alphabetic",p.textAlign="left",p.fillStyle="black",this.gridOuter=new Float64Array(f*f),this.gridInner=new Float64Array(f*f),this.f=new Float64Array(f),this.z=new Float64Array(f+1),this.v=new Uint16Array(f)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:s,actualBoundingBoxRight:a}=this.ctx.measureText(e),c=Math.ceil(i),f=0,h=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-s))),p=Math.min(this.size-this.buffer,c+Math.ceil(r)),m=h+2*this.buffer,y=p+2*this.buffer,b=Math.max(m*y,0),v=new Uint8ClampedArray(b),T={data:v,width:m,height:y,glyphWidth:h,glyphHeight:p,glyphTop:c,glyphLeft:f,glyphAdvance:n};if(h===0||p===0)return T;const{ctx:S,buffer:w,gridInner:C,gridOuter:A}=this;S.clearRect(w,w,h,p),S.fillText(e,w,w+c);const O=S.getImageData(w,w,h,p);A.fill(Dd,0,b),C.fill(0,0,b);for(let R=0;R<p;R++)for(let D=0;D<h;D++){const z=O.data[4*(R*h+D)+3]/255;if(z===0)continue;const j=(R+w)*m+D+w;if(z===1)A[j]=0,C[j]=Dd;else{const V=.5-z;A[j]=V>0?V*V:0,C[j]=V<0?V*V:0}}Gx(A,0,0,m,y,m,this.f,this.v,this.z),Gx(C,w,w,h,p,m,this.f,this.v,this.z);for(let R=0;R<b;R++){const D=Math.sqrt(A[R])-Math.sqrt(C[R]);v[R]=Math.round(255-255*(D/this.radius+this.cutoff))}return T}}function Gx(t,e,n,i,r,s,a,c,f){for(let h=e;h<e+i;h++)Jx(t,n*s+h,s,r,a,c,f);for(let h=n;h<n+r;h++)Jx(t,h*s+e,1,i,a,c,f)}function Jx(t,e,n,i,r,s,a){s[0]=0,a[0]=-1e20,a[1]=Dd,r[0]=t[e];for(let c=1,f=0,h=0;c<i;c++){r[c]=t[e+c*n];const p=c*c;do{const m=s[f];h=(r[c]-r[m]+p-m*m)/(c-m)/2}while(h<=a[f]&&--f>-1);f++,s[f]=c,a[f]=h,a[f+1]=Dd}for(let c=0,f=0;c<i;c++){for(;a[f+1]<c;)f++;const h=s[f],p=c-h;t[e+c*n]=r[h]+p*p}}const GQ=32,JQ=[];function eG(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function tG({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:a=0,yOffset:c=0}){let f=0,h=a;const p=n+i*2;for(const m of t)if(!s[m]){const y=e(m);h+y+i*2>r&&(h=0,f++),s[m]={x:h+i,y:c+f*p+i,width:y,height:p,layoutWidth:y,layoutHeight:n},h+=y+i*2}return{mapping:s,xOffset:h,yOffset:c+f*p,canvasHeight:eG(c+(f+1)*p)}}function dM(t,e,n,i){var s;let r=0;for(let a=e;a<n;a++){const c=t[a];r+=((s=i[c])==null?void 0:s.layoutWidth)||0}return r}function pM(t,e,n,i,r,s){let a=e,c=0;for(let f=e;f<n;f++){const h=dM(t,f,f+1,r);c+h>i&&(a<f&&s.push(f),a=f,c=0),c+=h}return c}function nG(t,e,n,i,r,s){let a=e,c=e,f=e,h=0;for(let p=e;p<n;p++)if((t[p]===" "||t[p+1]===" "||p+1===n)&&(f=p+1),f>c){let m=dM(t,c,f,r);h+m>i&&(a<c&&(s.push(c),a=c,h=0),m>i&&(m=pM(t,c,f,i,r,s),a=s[s.length-1])),c=f,h+=m}return h}function iG(t,e,n,i,r=0,s){s===void 0&&(s=t.length);const a=[];return e==="break-all"?pM(t,r,s,n,i,a):nG(t,r,s,n,i,a),a}function rG(t,e,n,i,r,s){let a=0,c=0;for(let f=e;f<n;f++){const h=t[f],p=i[h];p?(c||(c=p.layoutHeight),r[f]=a+p.layoutWidth/2,a+=p.layoutWidth):(Ue.warn(`Missing character: ${h} (${h.codePointAt(0)})`)(),r[f]=a,a+=GQ)}s[0]=a,s[1]=c}function sG(t,e,n,i,r){var S;const s=Array.from(t),a=s.length,c=new Array(a),f=new Array(a),h=new Array(a),p=(n==="break-word"||n==="break-all")&&isFinite(i)&&i>0,m=[0,0],y=[0,0];let b=0,v=0,T=0;for(let w=0;w<=a;w++){const C=s[w];if((C===`
`||w===a)&&(T=w),T>v){const A=p?iG(s,n,i,r,v,T):JQ;for(let O=0;O<=A.length;O++){const R=O===0?v:A[O-1],D=O<A.length?A[O]:T;rG(s,R,D,r,c,y);for(let z=R;z<D;z++){const j=s[z],V=((S=r[j])==null?void 0:S.layoutOffsetY)||0;f[z]=b+y[1]/2+V,h[z]=y[0]}b=b+y[1]*e,m[0]=Math.max(m[0],y[0])}v=T}C===`
`&&(c[v]=0,f[v]=0,h[v]=0,v++)}return m[1]=b,{x:c,y:f,rowWidth:h,size:m}}function oG({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:s}){const a=t.BYTES_PER_ELEMENT,c=n?n/a:1,f=i?i/a:0,h=r[e]||Math.ceil((t.length-f)/c),p=s&&new Set,m=new Array(e);let y=t;if(c>1||f>0){const b=t.constructor;y=new b(h);for(let v=0;v<h;v++)y[v]=t[v*c+f]}for(let b=0;b<e;b++){const v=r[b],T=r[b+1]||h,S=y.subarray(v,T);m[b]=String.fromCodePoint.apply(null,S),p&&S.forEach(p.add,p)}if(p)for(const b of p)s.add(String.fromCodePoint(b));return{texts:m,characterCount:h}}class gM{constructor(e=5){this._cache={},this._order=[],this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function aG(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const Za={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:aG(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},eR=1024,tR=.9,nR=1.2,mM=3;let Bd=new gM(mM);function lG(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const i=Bd.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}function cG(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function iR(t,e,n,i){t.font=`${i} ${n}px ${e}`,t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function uG(t){Ue.assert(Number.isFinite(t)&&t>=mM,"Invalid cache limit"),Bd=new gM(t)}class fG{constructor(){this.props={...Za}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(e*nR+n*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=lG(this._key,this.props.characterSet),i=Bd.get(this._key);if(i&&n.size===0){this._atlas!==i&&(this._atlas=i);return}const r=this._generateFontAtlas(n,i);this._atlas=r,Bd.set(this._key,r)}_generateFontAtlas(e,n){const{fontFamily:i,fontWeight:r,fontSize:s,buffer:a,sdf:c,radius:f,cutoff:h}=this.props;let p=n&&n.data;p||(p=document.createElement("canvas"),p.width=eR);const m=p.getContext("2d",{willReadFrequently:!0});iR(m,i,s,r);const{mapping:y,canvasHeight:b,xOffset:v,yOffset:T}=tG({getFontWidth:S=>m.measureText(S).width,fontHeight:s*nR,buffer:a,characterSet:e,maxCanvasWidth:eR,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(p.height!==b){const S=m.getImageData(0,0,p.width,p.height);p.height=b,m.putImageData(S,0,0)}if(iR(m,i,s,r),c){const S=new QQ({fontSize:s,buffer:a,radius:f,cutoff:h,fontFamily:i,fontWeight:`${r}`});for(const w of e){const{data:C,width:A,height:O,glyphTop:R}=S.draw(w);y[w].width=A,y[w].layoutOffsetY=s*tR-R;const D=m.createImageData(A,O);cG(C,D),m.putImageData(D,y[w].x,y[w].y)}}else for(const S of e)m.fillText(S,y[S].x,y[S].y+a+s*tR);return{xOffset:v,yOffset:T,mapping:y,data:p,width:p.width,height:p.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:s,radius:a,cutoff:c}=this.props;return s?`${e} ${n} ${i} ${r} ${a} ${c}`:`${e} ${n} ${i} ${r}`}}const rR=`uniform textBackgroundUniforms {
  bool billboard;
  float sizeScale;
  float sizeMinPixels;
  float sizeMaxPixels;
  vec4 padding;
  highp int sizeUnits;
  bool stroked;
} textBackground;
`,hG={name:"textBackground",vs:rR,fs:rR,uniformTypes:{billboard:"f32",sizeScale:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",padding:"vec4<f32>",sizeUnits:"i32",stroked:"f32"}},dG=`#version 300 es
#define SHADER_NAME text-background-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceRects;
in float instanceSizes;
in float instanceAngles;
in vec2 instancePixelOffsets;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out float vLineWidth;
out vec2 uv;
out vec2 dimensions;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = radians(angle);
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vLineWidth = instanceLineWidths;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * textBackground.sizeScale, textBackground.sizeUnits),
textBackground.sizeMinPixels, textBackground.sizeMaxPixels
);
dimensions = instanceRects.zw * sizePixels + textBackground.padding.xy + textBackground.padding.zw;
vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-textBackground.padding.xy, textBackground.padding.zw, positions);
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
pixelOffset += instancePixelOffsets;
pixelOffset.y *= -1.0;
if (textBackground.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,pG=`#version 300 es
#define SHADER_NAME text-background-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in float vLineWidth;
in vec2 uv;
in vec2 dimensions;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec2 pixelPosition = uv * dimensions;
if (textBackground.stroked) {
float distToEdge = min(
min(pixelPosition.x, dimensions.x - pixelPosition.x),
min(pixelPosition.y, dimensions.y - pixelPosition.y)
);
float isBorder = smoothedge(distToEdge, vLineWidth);
fragColor = mix(vFillColor, vLineColor, isBorder);
} else {
fragColor = vFillColor;
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,gG={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class av extends nr{getShaders(){return super.getShaders({vs:dG,fs:pG,modules:[ml,yl,hG]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var i;super.updateState(e);const{changeFlags:n}=e;n.extensionsChanged&&((i=this.state.model)==null||i.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:a,getLineWidth:c}=this.props;let{padding:f}=this.props;f.length<4&&(f=[f[0],f[1],f[0],f[1]]);const h=this.state.model,p={billboard:n,stroked:!!c,padding:f,sizeUnits:Eo[r],sizeScale:i,sizeMinPixels:s,sizeMaxPixels:a};h.shaderInputs.setProps({textBackground:p}),h.draw(this.context.renderPass)}_getModel(){const e=[0,0,1,0,0,1,1,1];return new hi(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new ll({topology:"triangle-strip",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}}av.defaultProps=gG;av.layerName="TextBackgroundLayer";const sR={start:1,middle:0,end:-1},oR={top:1,center:0,bottom:-1},e_=[0,0,0,255],mG=1,yG={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:e_},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Za.characterSet},fontFamily:Za.fontFamily,fontWeight:Za.fontWeight,lineHeight:mG,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:e_},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:e_},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class lv extends Lp{constructor(){super(...arguments),this.getBoundingRect=(e,n)=>{let{size:[i,r]}=this.transformParagraph(e,n);const{fontSize:s}=this.state.fontAtlasManager.props;i/=s,r/=s;const{getTextAnchor:a,getAlignmentBaseline:c}=this.props,f=sR[typeof a=="function"?a(e,n):a],h=oR[typeof c=="function"?c(e,n):c];return[(f-1)*i/2,(h-1)*r/2,i,r]},this.getIconOffsets=(e,n)=>{const{getTextAnchor:i,getAlignmentBaseline:r}=this.props,{x:s,y:a,rowWidth:c,size:[f,h]}=this.transformParagraph(e,n),p=sR[typeof i=="function"?i(e,n):i],m=oR[typeof r=="function"?r(e,n):r],y=s.length,b=new Array(y*2);let v=0;for(let T=0;T<y;T++){const S=(1-p)*(f-c[T])/2;b[v++]=(p-1)*f/2+S+s[T],b[v++]=(m-1)*h/2+a[T]}return b}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new fG},this.props.maxWidth>0&&Ue.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,a={...e,characterSet:s,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(a),!0;for(const c in a)if(a[c]!==r.props[c])return r.setProps(a),!0;return!1}_updateText(){var f;const{data:e,characterSet:n}=this.props,i=(f=e.attributes)==null?void 0:f.getText;let{getText:r}=this.props,s=e.startIndices,a;const c=n==="auto"&&new Set;if(i&&s){const{texts:h,characterCount:p}=oG({...ArrayBuffer.isView(i)?{value:i}:i,length:e.length,startIndices:s,characterSet:c});a=p,r=(m,{index:y})=>h[y]}else{const{iterable:h,objectInfo:p}=Dp(e);s=[0],a=0;for(const m of h){p.index++;const y=Array.from(r(m,p)||"");c&&y.forEach(c.add,c),a+=y.length,s.push(a)}}this.setState({getText:r,startIndices:s,numInstances:a,characterSet:c||n})}transformParagraph(e,n){const{fontAtlasManager:i}=this.state,r=i.mapping,s=this.state.getText,{wordBreak:a,lineHeight:c,maxWidth:f}=this.props,h=s(e,n)||"";return sG(h,c,a,f*i.props.fontSize,r)}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,atlas:s,mapping:a},styleVersion:c}=this.state,{data:f,_dataDiff:h,getPosition:p,getColor:m,getSize:y,getAngle:b,getPixelOffset:v,getBackgroundColor:T,getBorderColor:S,getBorderWidth:w,backgroundPadding:C,background:A,billboard:O,fontSettings:R,outlineWidth:D,outlineColor:z,sizeScale:j,sizeUnits:V,sizeMinPixels:x,sizeMaxPixels:H,transitions:te,updateTriggers:se}=this.props,fe=this.getSubLayerClass("characters",ov),pe=this.getSubLayerClass("background",av);return[A&&new pe({getFillColor:T,getLineColor:S,getLineWidth:w,padding:C,getPosition:p,getSize:y,getAngle:b,getPixelOffset:v,billboard:O,sizeScale:j,sizeUnits:V,sizeMinPixels:x,sizeMaxPixels:H,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getSize:te.getSize,getFillColor:te.getBackgroundColor,getLineColor:te.getBorderColor,getLineWidth:te.getBorderWidth,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:se.getPosition,getAngle:se.getAngle,getSize:se.getSize,getFillColor:se.getBackgroundColor,getLineColor:se.getBorderColor,getLineWidth:se.getBorderWidth,getPixelOffset:se.getPixelOffset,getBoundingRect:{getText:se.getText,getTextAnchor:se.getTextAnchor,getAlignmentBaseline:se.getAlignmentBaseline,styleVersion:c}}}),{data:f.attributes&&f.attributes.background?{length:f.length,attributes:f.attributes.background}:f,_dataDiff:h,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new fe({sdf:R.sdf,smoothing:Number.isFinite(R.smoothing)?R.smoothing:Za.smoothing,outlineWidth:D/(R.radius||Za.radius),outlineColor:z,iconAtlas:s,iconMapping:a,getPosition:p,getColor:m,getSize:y,getAngle:b,getPixelOffset:v,billboard:O,sizeScale:j*r,sizeUnits:V,sizeMinPixels:x*r,sizeMaxPixels:H*r,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getColor:te.getColor,getSize:te.getSize,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:se.getText,getPosition:se.getPosition,getAngle:se.getAngle,getColor:se.getColor,getSize:se.getSize,getPixelOffset:se.getPixelOffset,getIconOffsets:{getTextAnchor:se.getTextAnchor,getAlignmentBaseline:se.getAlignmentBaseline,styleVersion:c}}}),{data:f,_dataDiff:h,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){uG(e)}}lv.defaultProps=yG;lv.layerName="TextLayer";const Gh={circle:{type:iv,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Uu,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:lv,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Jh={type:rv,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},I0={type:sv,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Rc({type:t,props:e}){const n={};for(const i in e)n[i]=t.defaultProps[e[i]];return n}function t_(t,e){const{transitions:n,updateTriggers:i}=t.props,r={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const s in e){const a=e[s];let c=t.props[s];s.startsWith("get")&&(c=t.getSubLayerAccessor(c),r.updateTriggers[a]=i[s],n&&(r.transitions[a]=n[s])),r[a]=c}return r}function _G(t){if(Array.isArray(t))return t;switch(Ue.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return Ue.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function aR(t,e,n={}){const i={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:r=0,endRow:s=t.length}=n;for(let a=r;a<s;a++){const c=t[a],{geometry:f}=c;if(f)if(f.type==="GeometryCollection"){Ue.assert(Array.isArray(f.geometries),"GeoJSON does not have geometries array");const{geometries:h}=f;for(let p=0;p<h.length;p++){const m=h[p];lR(m,i,e,c,a)}}else lR(f,i,e,c,a)}return i}function lR(t,e,n,i,r){const{type:s,coordinates:a}=t,{pointFeatures:c,lineFeatures:f,polygonFeatures:h,polygonOutlineFeatures:p}=e;if(!vG(s,a)){Ue.warn(`${s} coordinates are malformed`)();return}switch(s){case"Point":c.push(n({geometry:t},i,r));break;case"MultiPoint":a.forEach(m=>{c.push(n({geometry:{type:"Point",coordinates:m}},i,r))});break;case"LineString":f.push(n({geometry:t},i,r));break;case"MultiLineString":a.forEach(m=>{f.push(n({geometry:{type:"LineString",coordinates:m}},i,r))});break;case"Polygon":h.push(n({geometry:t},i,r)),a.forEach(m=>{p.push(n({geometry:{type:"LineString",coordinates:m}},i,r))});break;case"MultiPolygon":a.forEach(m=>{h.push(n({geometry:{type:"Polygon",coordinates:m}},i,r)),m.forEach(y=>{p.push(n({geometry:{type:"LineString",coordinates:y}},i,r))})});break}}const bG={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function vG(t,e){let n=bG[t];for(Ue.assert(n,`Unknown GeoJSON type ${t}`);e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function yM(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function xh(t){return t.geometry.coordinates}function TG(t,e){const n=yM(),{pointFeatures:i,lineFeatures:r,polygonFeatures:s,polygonOutlineFeatures:a}=t;return n.points.data=i,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=xh,n.lines.data=r,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=xh,n.polygons.data=s,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=xh,n.polygonsOutline.data=a,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=xh,n}function SG(t,e){const n=yM(),{points:i,lines:r,polygons:s}=t,a=qQ(t,e);return n.points.data={length:i.positions.value.length/i.positions.size,attributes:{...i.attributes,getPosition:i.positions,instancePickingColors:{size:4,value:a.points}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines.data={length:r.pathIndices.value.length-1,startIndices:r.pathIndices.value,attributes:{...r.attributes,getPath:r.positions,instancePickingColors:{size:4,value:a.lines}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines._pathType="open",n.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{...s.attributes,getPolygon:s.positions,pickingColors:{size:4,value:a.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygons._normalize=!1,s.triangles&&(n.polygons.data.attributes.indices=s.triangles.value),n.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{...s.attributes,getPath:s.positions,instancePickingColors:{size:4,value:a.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygonsOutline._pathType="open",n}const EG=["points","linestrings","polygons"],wG={...Rc(Gh.circle),...Rc(Gh.icon),...Rc(Gh.text),...Rc(Jh),...Rc(I0),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class cv extends Lp{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;const{data:i}=this.props,r=i&&"points"in i&&"polygons"in i&&"lines"in i;this.setState({binary:r}),r?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){const i=SG(e.data,this.encodePickingColor);this.setState({layerProps:i})}_updateStateJSON({props:e,changeFlags:n}){const i=_G(e.data),r=this.getSubLayerRow.bind(this);let s={};const a={};if(Array.isArray(n.dataChanged)){const f=this.state.features;for(const h in f)s[h]=f[h].slice(),a[h]=[];for(const h of n.dataChanged){const p=aR(i,r,h);for(const m in f)a[m].push(HQ({data:s[m],getIndex:y=>y.__source.index,dataRange:h,replace:p[m]}))}}else s=aR(i,r);const c=TG(s,a);this.setState({features:s,featuresDiff:a,layerProps:c})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:i,sourceLayer:r}=n;return n.featureType=EG.find(s=>r.id.startsWith(`${this.id}-${s}-`)),i>=0&&r.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[i]),n}_updateAutoHighlight(e){const n=`${this.id}-points-`,i=e.featureType==="points";for(const r of this.getSubLayers())r.id.startsWith(n)===i&&r.updateAutoHighlight(e)}_renderPolygonLayer(){var a;const{extruded:e,wireframe:n}=this.props,{layerProps:i}=this.state,r="polygons-fill",s=this.shouldRenderSubLayer(r,(a=i.polygons)==null?void 0:a.data)&&this.getSubLayerClass(r,I0.type);if(s){const c=t_(this,I0.props),f=e&&n;return f||delete c.getLineColor,c.updateTriggers.lineColors=f,new s(c,this.getSubLayerProps({id:r,updateTriggers:c.updateTriggers}),i.polygons)}return null}_renderLineLayers(){var f,h;const{extruded:e,stroked:n}=this.props,{layerProps:i}=this.state,r="polygons-stroke",s="linestrings",a=!e&&n&&this.shouldRenderSubLayer(r,(f=i.polygonsOutline)==null?void 0:f.data)&&this.getSubLayerClass(r,Jh.type),c=this.shouldRenderSubLayer(s,(h=i.lines)==null?void 0:h.data)&&this.getSubLayerClass(s,Jh.type);if(a||c){const p=t_(this,Jh.props);return[a&&new a(p,this.getSubLayerProps({id:r,updateTriggers:p.updateTriggers}),i.polygonsOutline),c&&new c(p,this.getSubLayerProps({id:s,updateTriggers:p.updateTriggers}),i.lines)]}return null}_renderPointLayers(){var c;const{pointType:e}=this.props,{layerProps:n,binary:i}=this.state;let{highlightedObjectIndex:r}=this.props;!i&&Number.isFinite(r)&&(r=n.points.data.findIndex(f=>f.__source.index===r));const s=new Set(e.split("+")),a=[];for(const f of s){const h=`points-${f}`,p=Gh[f],m=p&&this.shouldRenderSubLayer(h,(c=n.points)==null?void 0:c.data)&&this.getSubLayerClass(h,p.type);if(m){const y=t_(this,p.props);let b=n.points;if(f==="text"&&i){const{instancePickingColors:v,...T}=b.data.attributes;b={...b,data:{...b.data,attributes:T}}}a.push(new m(y,this.getSubLayerProps({id:h,updateTriggers:y.updateTriggers,highlightedObjectIndex:r}),b))}}return a}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),i=this._renderLineLayers(),r=this._renderPointLayers();return[!e&&n,i,r,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(i,r)=>{const{data:s,index:a}=r,c=WQ(s,a);return e(c,r)}}}cv.layerName="GeoJsonLayer";cv.defaultProps=wG;class AG{constructor(e){this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(e){this._bbox||(this._bbox=e,"west"in e?this.boundingBox=[[e.west,e.south],[e.east,e.north]]:this.boundingBox=[[e.left,e.top],[e.right,e.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return!!this._loader&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error("byteLength not defined in tile data"),e}async _loadData({getData:e,requestScheduler:n,onLoad:i,onError:r}){const{index:s,id:a,bbox:c,userData:f,zoom:h}=this,p=this._loaderId;this._abortController=new AbortController;const{signal:m}=this._abortController,y=await n.scheduleRequest(this,T=>T.isSelected?1:-1);if(!y){this._isCancelled=!0;return}if(this._isCancelled){y.done();return}let b=null,v;try{b=await e({index:s,id:a,bbox:c,userData:f,zoom:h,signal:m})}catch(T){v=T||!0}finally{y.done()}if(p===this._loaderId){if(this._loader=void 0,this.content=b,this._isCancelled&&!b){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,v?r(v,this):i(this)}}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var e;this.isLoaded||(this._isCancelled=!0,(e=this._abortController)==null||e.abort())}}const _n={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},cR=new _e,xG=new _e;class uv{constructor(e=[0,0,0],n=[0,0,0],i){i=i||cR.copy(e).add(n).scale(.5),this.center=new _e(i),this.halfDiagonal=new _e(n).subtract(this.center),this.minimum=new _e(e),this.maximum=new _e(n)}clone(){return new uv(this.minimum,this.maximum,this.center)}equals(e){return this===e||!!e&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:n}=this,i=xG.from(e.normal),r=n.x*Math.abs(i.x)+n.y*Math.abs(i.y)+n.z*Math.abs(i.z),s=this.center.dot(i)+e.distance;return s-r>0?_n.INSIDE:s+r<0?_n.OUTSIDE:_n.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=cR.from(e).subtract(this.center),{halfDiagonal:i}=this;let r=0,s;return s=Math.abs(n.x)-i.x,s>0&&(r+=s*s),s=Math.abs(n.y)-i.y,s>0&&(r+=s*s),s=Math.abs(n.z)-i.z,s>0&&(r+=s*s),r}}const Cc=new _e,uR=new _e;class fv{constructor(e=[0,0,0],n=0){this.radius=-0,this.center=new _e,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=Cc.from(n),this.center=new _e().from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new fv(this.center,this.radius)}union(e){const n=this.center,i=this.radius,r=e.center,s=e.radius,a=Cc.copy(r).subtract(n),c=a.magnitude();if(i>=c+s)return this.clone();if(s>=c+i)return e.clone();const f=(i+c+s)*.5;return uR.copy(a).scale((-i+f)/c).add(n),this.center.copy(uR),this.radius=f,this}expand(e){const i=Cc.from(e).subtract(this.center).magnitude();return i>this.radius&&(this.radius=i),this}transform(e){this.center.transform(e);const n=U9(Cc,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const i=Cc.from(e).subtract(this.center);return Math.max(0,i.len()-this.radius)}intersectPlane(e){const n=this.center,i=this.radius,s=e.normal.dot(n)+e.distance;return s<-i?_n.OUTSIDE:s<i?_n.INTERSECTING:_n.INSIDE}}const RG=new _e,CG=new _e,Rh=new _e,Ch=new _e,Oh=new _e,OG=new _e,MG=new _e,wr={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class hv{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){this.center=new _e().from(e),this.halfAxes=new un(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new _e(e).len(),new _e(n).len(),new _e(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new _e(e).normalize(),s=new _e(n).normalize(),a=new _e(i).normalize();return new TA().fromMatrix3(new un([...r,...s,...a]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new TA(i),s=new un().fromQuaternion(r);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=new _e().from(e),this.halfAxes=s,this}clone(){return new hv(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new fv){const n=this.halfAxes,i=n.getColumn(0,Rh),r=n.getColumn(1,Ch),s=n.getColumn(2,Oh),a=RG.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=a.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,s=i.x,a=i.y,c=i.z,f=Math.abs(s*r[wr.COLUMN0ROW0]+a*r[wr.COLUMN0ROW1]+c*r[wr.COLUMN0ROW2])+Math.abs(s*r[wr.COLUMN1ROW0]+a*r[wr.COLUMN1ROW1]+c*r[wr.COLUMN1ROW2])+Math.abs(s*r[wr.COLUMN2ROW0]+a*r[wr.COLUMN2ROW1]+c*r[wr.COLUMN2ROW2]),h=i.dot(n)+e.distance;return h<=-f?_n.OUTSIDE:h>=f?_n.INSIDE:_n.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=CG.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,Rh),s=i.getColumn(1,Ch),a=i.getColumn(2,Oh),c=r.magnitude(),f=s.magnitude(),h=a.magnitude();r.normalize(),s.normalize(),a.normalize();let p=0,m;return m=Math.abs(n.dot(r))-c,m>0&&(p+=m*m),m=Math.abs(n.dot(s))-f,m>0&&(p+=m*m),m=Math.abs(n.dot(a))-h,m>0&&(p+=m*m),p}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const a=this.center,c=this.halfAxes,f=c.getColumn(0,Rh),h=c.getColumn(1,Ch),p=c.getColumn(2,Oh),m=OG.copy(f).add(h).add(p).add(a),y=MG.copy(m).subtract(e);let b=n.dot(y);return r=Math.min(b,r),s=Math.max(b,s),m.copy(a).add(f).add(h).subtract(p),y.copy(m).subtract(e),b=n.dot(y),r=Math.min(b,r),s=Math.max(b,s),m.copy(a).add(f).subtract(h).add(p),y.copy(m).subtract(e),b=n.dot(y),r=Math.min(b,r),s=Math.max(b,s),m.copy(a).add(f).subtract(h).subtract(p),y.copy(m).subtract(e),b=n.dot(y),r=Math.min(b,r),s=Math.max(b,s),a.copy(m).subtract(f).add(h).add(p),y.copy(m).subtract(e),b=n.dot(y),r=Math.min(b,r),s=Math.max(b,s),a.copy(m).subtract(f).add(h).subtract(p),y.copy(m).subtract(e),b=n.dot(y),r=Math.min(b,r),s=Math.max(b,s),a.copy(m).subtract(f).subtract(h).add(p),y.copy(m).subtract(e),b=n.dot(y),r=Math.min(b,r),s=Math.max(b,s),a.copy(m).subtract(f).subtract(h).subtract(p),y.copy(m).subtract(e),b=n.dot(y),r=Math.min(b,r),s=Math.max(b,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,Rh);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,Ch);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,Oh);return r.transformAsPoint(e),this.halfAxes=new un([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const fR=new _e,hR=new _e;class pu{constructor(e=[0,0,1],n=0){this.normal=new _e,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return lu(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=fR.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),lu(Or(this.normal.len(),1)),this.distance=r,this}clone(){return new pu(this.normal,this.distance)}equals(e){return Or(this.distance,e.distance)&&Or(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=hR.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){const i=fR.from(e),r=this.getPointDistance(i),s=hR.copy(this.normal).scale(r);return i.subtract(s).to(n)}}const dR=[new _e([1,0,0]),new _e([0,1,0]),new _e([0,0,1])],pR=new _e,PG=new _e;class xr{constructor(e=[]){this.planes=e}fromBoundingSphere(e){this.planes.length=2*dR.length;const n=e.center,i=e.radius;let r=0;for(const s of dR){let a=this.planes[r],c=this.planes[r+1];a||(a=this.planes[r]=new pu),c||(c=this.planes[r+1]=new pu);const f=pR.copy(s).scale(-i).add(n);a.fromPointNormal(f,s);const h=pR.copy(s).scale(i).add(n),p=PG.copy(s).negate();c.fromPointNormal(h,p),r+=2}return this}computeVisibility(e){let n=_n.INSIDE;for(const i of this.planes)switch(e.intersectPlane(i)){case _n.OUTSIDE:return _n.OUTSIDE;case _n.INTERSECTING:n=_n.INTERSECTING;break}return n}computeVisibilityWithPlaneMask(e,n){if(lu(Number.isFinite(n),"parentPlaneMask is required."),n===xr.MASK_OUTSIDE||n===xr.MASK_INSIDE)return n;let i=xr.MASK_INSIDE;const r=this.planes;for(let s=0;s<this.planes.length;++s){const a=s<31?1<<s:0;if(s<31&&!(n&a))continue;const c=r[s],f=e.intersectPlane(c);if(f===_n.OUTSIDE)return xr.MASK_OUTSIDE;f===_n.INTERSECTING&&(i|=a)}return i}}xr.MASK_OUTSIDE=4294967295;xr.MASK_INSIDE=0;xr.MASK_INDETERMINATE=2147483647;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;new _e;const Wi=new un,NG=new un,kG=new un,Mh=new un,gR=new un;function IG(t,e={}){const n=Sj,i=10;let r=0,s=0;const a=NG,c=kG;a.identity(),c.copy(t);const f=n*DG(c);for(;s<i&&BG(c)>f;)LG(c,Mh),gR.copy(Mh).transpose(),c.multiplyRight(Mh),c.multiplyLeft(gR),a.multiplyRight(Mh),++r>2&&(++s,r=0);return e.unitary=a.toTarget(e.unitary),e.diagonal=c.toTarget(e.diagonal),e}function DG(t){let e=0;for(let n=0;n<9;++n){const i=t[n];e+=i*i}return Math.sqrt(e)}const D0=[1,0,0],B0=[2,2,1];function BG(t){let e=0;for(let n=0;n<3;++n){const i=t[Wi.getElementIndex(B0[n],D0[n])];e+=2*i*i}return Math.sqrt(e)}function LG(t,e){const n=Tj;let i=0,r=1;for(let h=0;h<3;++h){const p=Math.abs(t[Wi.getElementIndex(B0[h],D0[h])]);p>i&&(r=h,i=p)}const s=D0[r],a=B0[r];let c=1,f=0;if(Math.abs(t[Wi.getElementIndex(a,s)])>n){const h=t[Wi.getElementIndex(a,a)],p=t[Wi.getElementIndex(s,s)],m=t[Wi.getElementIndex(a,s)],y=(h-p)/2/m;let b;y<0?b=-1/(-y+Math.sqrt(1+y*y)):b=1/(y+Math.sqrt(1+y*y)),c=1/Math.sqrt(1+b*b),f=b*c}return un.IDENTITY.to(e),e[Wi.getElementIndex(s,s)]=e[Wi.getElementIndex(a,a)]=c,e[Wi.getElementIndex(a,s)]=f,e[Wi.getElementIndex(s,a)]=-f,e}const hs=new _e,UG=new _e,FG=new _e,zG=new _e,VG=new _e,$G=new un,jG={diagonal:new un,unitary:new un};function HG(t,e=new hv){if(!t||t.length===0)return e.halfAxes=new un([0,0,0,0,0,0,0,0,0]),e.center=new _e,e;const n=t.length,i=new _e(0,0,0);for(const V of t)i.add(V);const r=1/n;i.multiplyByScalar(r);let s=0,a=0,c=0,f=0,h=0,p=0;for(const V of t){const x=hs.copy(V).subtract(i);s+=x.x*x.x,a+=x.x*x.y,c+=x.x*x.z,f+=x.y*x.y,h+=x.y*x.z,p+=x.z*x.z}s*=r,a*=r,c*=r,f*=r,h*=r,p*=r;const m=$G;m[0]=s,m[1]=a,m[2]=c,m[3]=a,m[4]=f,m[5]=h,m[6]=c,m[7]=h,m[8]=p;const{unitary:y}=IG(m,jG),b=e.halfAxes.copy(y);let v=b.getColumn(0,FG),T=b.getColumn(1,zG),S=b.getColumn(2,VG),w=-Number.MAX_VALUE,C=-Number.MAX_VALUE,A=-Number.MAX_VALUE,O=Number.MAX_VALUE,R=Number.MAX_VALUE,D=Number.MAX_VALUE;for(const V of t)hs.copy(V),w=Math.max(hs.dot(v),w),C=Math.max(hs.dot(T),C),A=Math.max(hs.dot(S),A),O=Math.min(hs.dot(v),O),R=Math.min(hs.dot(T),R),D=Math.min(hs.dot(S),D);v=v.multiplyByScalar(.5*(O+w)),T=T.multiplyByScalar(.5*(R+C)),S=S.multiplyByScalar(.5*(D+A)),e.center.copy(v).add(T).add(S);const z=UG.set(w-O,C-R,A-D).multiplyByScalar(.5),j=new un([z[0],0,0,0,z[1],0,0,0,z[2]]);return e.halfAxes.multiplyRight(j),e}const $a=512,WG=3,_M=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],bM=_M.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),XG=bM.concat([[.25,.5],[.75,.5]]);class ja{constructor(e,n,i){this.x=e,this.y=n,this.z=i}get children(){if(!this._children){const e=this.x*2,n=this.y*2,i=this.z+1;this._children=[new ja(e,n,i),new ja(e,n+1,i),new ja(e+1,n,i),new ja(e+1,n+1,i)]}return this._children}update(e){const{viewport:n,cullingVolume:i,elevationBounds:r,minZ:s,maxZ:a,bounds:c,offset:f,project:h}=e,p=this.getBoundingVolume(r,f,h);if(c&&!this.insideBounds(c)||i.computeVisibility(p)<0)return!1;if(!this.childVisible){let{z:y}=this;if(y<a&&y>=s){const b=p.distanceTo(n.cameraPosition)*n.scale/n.height;y+=Math.floor(Math.log2(b))}if(y>=a)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const y of this.children)y.update(e);return!0}getSelected(e=[]){if(this.selected&&e.push(this),this._children)for(const n of this._children)n.getSelected(e);return e}insideBounds([e,n,i,r]){const s=Math.pow(2,this.z),a=$a/s;return this.x*a<i&&this.y*a<r&&(this.x+1)*a>e&&(this.y+1)*a>n}getBoundingVolume(e,n,i){if(i){const f=this.z<1?XG:this.z<2?bM:_M,h=[];for(const p of f){const m=U0(this.x+p[0],this.y+p[1],this.z);m[2]=e[0],h.push(i(m)),e[0]!==e[1]&&(m[2]=e[1],h.push(i(m)))}return HG(h)}const r=Math.pow(2,this.z),s=$a/r,a=this.x*s+n*$a,c=$a-(this.y+1)*s;return new uv([a,c,e[0]],[a+s,c+s,e[1]])}}function qG(t,e,n,i){const r=t instanceof vZ&&t.resolution?t.projectPosition:null,s=Object.values(t.getFrustumPlanes()).map(({normal:b,distance:v})=>new pu(b.clone().negate(),v)),a=new xr(s),c=t.distanceScales.unitsPerMeter[2],f=n&&n[0]*c||0,h=n&&n[1]*c||0,p=t instanceof xs&&t.pitch<=60?e:0;if(i){const[b,v,T,S]=i,w=As([b,S]),C=As([T,v]);i=[w[0],$a-w[1],C[0],$a-C[1]]}const m=new ja(0,0,0),y={viewport:t,project:r,cullingVolume:a,elevationBounds:[f,h],minZ:p,maxZ:e,bounds:i,offset:0};if(m.update(y),t instanceof xs&&t.subViewports&&t.subViewports.length>1){for(y.offset=-1;m.update(y)&&!(--y.offset<-3););for(y.offset=1;m.update(y)&&!(++y.offset>WG););}return m.getSelected()}const Dr=512,YG=[-1/0,-1/0,1/0,1/0],KG={equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}};function vM(t,e){const n=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...n.map(r=>r[0])),Math.min(...n.map(r=>r[1])),Math.max(...n.map(r=>r[0])),Math.max(...n.map(r=>r[1]))]}function ZG(t){return Math.abs(t.split("").reduce((e,n)=>(e<<5)-e+n.charCodeAt(0)|0,0))}function QG(t,e){if(!t||!t.length)return null;const{index:n,id:i}=e;if(Array.isArray(t)){const s=ZG(i)%t.length;t=t[s]}let r=t;for(const s of Object.keys(n)){const a=new RegExp(`{${s}}`,"g");r=r.replace(a,String(n[s]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(r=r.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),r}function GG(t,e,n){let i;return i=t.getBounds(),t.isGeospatial?[Math.max(i[0],n[0]),Math.max(i[1],n[1]),Math.min(i[2],n[2]),Math.min(i[3],n[3])]:[Math.max(Math.min(i[0],n[2]),n[0]),Math.max(Math.min(i[1],n[3]),n[1]),Math.min(Math.max(i[2],n[0]),n[2]),Math.min(Math.max(i[3],n[1]),n[3])]}function JG({viewport:t,z:e,cullRect:n}){return(t.subViewports||[t]).map(r=>L0(r,e||0,n))}function L0(t,e,n){if(!Array.isArray(e)){const s=n.x-t.x,a=n.y-t.y,{width:c,height:f}=n,h={targetZ:e},p=t.unproject([s,a],h),m=t.unproject([s+c,a],h),y=t.unproject([s,a+f],h),b=t.unproject([s+c,a+f],h);return[Math.min(p[0],m[0],y[0],b[0]),Math.min(p[1],m[1],y[1],b[1]),Math.max(p[0],m[0],y[0],b[0]),Math.max(p[1],m[1],y[1],b[1])]}const i=L0(t,e[0],n),r=L0(t,e[1],n);return[Math.min(i[0],r[0]),Math.min(i[1],r[1]),Math.max(i[2],r[2]),Math.max(i[3],r[3])]}function eJ(t,e,n){return n?vM(t,n).map(r=>r*e/Dr):t.map(i=>i*e/Dr)}function dv(t,e){return Math.pow(2,t)*Dr/e}function U0(t,e,n){const i=dv(n,Dr),r=t/i*360-180,s=Math.PI-2*Math.PI*e/i,a=180/Math.PI*Math.atan(.5*(Math.exp(s)-Math.exp(-s)));return[r,a]}function mR(t,e,n,i){const r=dv(n,i);return[t/r*Dr,e/r*Dr]}function tJ(t,e,n,i,r=Dr){if(t.isGeospatial){const[h,p]=U0(e,n,i),[m,y]=U0(e+1,n+1,i);return{west:h,north:p,east:m,south:y}}const[s,a]=mR(e,n,i,r),[c,f]=mR(e+1,n+1,i,r);return{left:s,top:a,right:c,bottom:f}}function nJ(t,e,n,i,r){const s=GG(t,null,i),a=dv(e,n),[c,f,h,p]=eJ(s,a,r),m=[];for(let y=Math.floor(c);y<h;y++)for(let b=Math.floor(f);b<p;b++)m.push({x:y,y:b,z:e});return m}function iJ({viewport:t,maxZoom:e,minZoom:n,zRange:i,extent:r,tileSize:s=Dr,modelMatrix:a,modelMatrixInverse:c,zoomOffset:f=0}){let h=t.isGeospatial?Math.round(t.zoom+Math.log2(Dr/s))+f:Math.ceil(t.zoom)+f;if(typeof n=="number"&&Number.isFinite(n)&&h<n){if(!r)return[];h=n}typeof e=="number"&&Number.isFinite(e)&&h>e&&(h=e);let p=r;return a&&c&&r&&!t.isGeospatial&&(p=vM(r,a)),t.isGeospatial?qG(t,h,i,r):nJ(t,h,s,p||YG,c)}function rJ(t){let e={},n;return i=>{for(const r in i)if(!sJ(i[r],e[r])){n=t(i),e=i;break}return n}}function sJ(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}const yR=1,Fp=2,oJ="never",aJ="no-overlap",pv="best-available",lJ=5,cJ={[pv]:hJ,[aJ]:dJ,[oJ]:()=>{}},uJ={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};class fJ{constructor(e){this._getCullBounds=rJ(JG),this.opts={...uJ,...e},this.setOptions(this.opts),this.onTileLoad=n=>{var i,r;(r=(i=this.opts).onTileLoad)==null||r.call(i,n),this.opts.maxCacheByteSize!==null&&(this._cacheByteSize+=n.byteLength,this._resizeCache())},this._requestScheduler=new ez({throttleRequests:this.opts.maxRequests>0||this.opts.debounceTime>0,maxRequests:this.opts.maxRequests,debounceTime:this.opts.debounceTime}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new An,this._modelMatrixInverse=new An}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(e=>e.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(e=>e.needsReload)}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const e of this._cache.keys()){const n=this._cache.get(e);!this._selectedTiles||!this._selectedTiles.includes(n)?this._cache.delete(e):n.setNeedsReload()}}update(e,{zRange:n,modelMatrix:i}={zRange:null,modelMatrix:null}){const r=i?new An(i):new An,s=!r.equals(this._modelMatrix);if(!this._viewport||!e.equals(this._viewport)||!Or(this._zRange,n)||s){s&&(this._modelMatrixInverse=r.clone().invert(),this._modelMatrix=r),this._viewport=e,this._zRange=n;const c=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:n,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=c.map(f=>this._getTile(f,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(c=>this._getTile(c.index,!0)));const a=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}isTileVisible(e,n){if(!e.isVisible)return!1;if(n&&this._viewport){const i=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:n}),{bbox:r}=e;for(const[s,a,c,f]of i){let h;if("west"in r)h=r.west<c&&r.east>s&&r.south<f&&r.north>a;else{const p=Math.min(r.top,r.bottom),m=Math.max(r.top,r.bottom);h=r.left<c&&r.right>s&&p<f&&m>a}if(h)return!0}return!1}return!0}getTileIndices({viewport:e,maxZoom:n,minZoom:i,zRange:r,modelMatrix:s,modelMatrixInverse:a}){const{tileSize:c,extent:f,zoomOffset:h}=this.opts;return iJ({viewport:e,maxZoom:n,minZoom:i,zRange:r,tileSize:c,extent:f,modelMatrix:s,modelMatrixInverse:a,zoomOffset:h})}getTileId(e){return`${e.x}-${e.y}-${e.z}`}getTileZoom(e){return e.z}getTileMetadata(e){const{tileSize:n}=this.opts;return{bbox:tJ(this._viewport,e.x,e.y,e.z,n)}}getParentIndex(e){const n=Math.floor(e.x/2),i=Math.floor(e.y/2),r=e.z-1;return{x:n,y:i,z:r}}updateTileStates(){const e=this.opts.refinementStrategy||pv,n=new Array(this._cache.size);let i=0;for(const r of this._cache.values())n[i++]=r.isVisible,r.isSelected=!1,r.isVisible=!1;for(const r of this._selectedTiles)r.isSelected=!0,r.isVisible=!0;(typeof e=="function"?e:cJ[e])(Array.from(this._cache.values())),i=0;for(const r of this._cache.values())if(n[i++]!==r.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:e=0}=this.opts,n=[];let i=0;for(const r of this._cache.values())r.isLoading&&(i++,!r.isSelected&&!r.isVisible&&n.push(r));for(;e>0&&i>e&&n.length>0;)n.shift().abort(),i--}_rebuildTree(){const{_cache:e}=this;for(const n of e.values())n.parent=null,n.children&&(n.children.length=0);for(const n of e.values()){const i=this._getNearestAncestor(n);n.parent=i,i!=null&&i.children&&i.children.push(n)}}_resizeCache(){var a,c;const{_cache:e,opts:n}=this,i=n.maxCacheSize??(n.maxCacheByteSize!==null?1/0:lJ*this.selectedTiles.length),r=n.maxCacheByteSize??1/0;if(e.size>i||this._cacheByteSize>r){for(const[f,h]of e)if(!h.isVisible&&!h.isSelected&&(this._cacheByteSize-=n.maxCacheByteSize!==null?h.byteLength:0,e.delete(f),(c=(a=this.opts).onTileUnload)==null||c.call(a,h)),e.size<=i&&this._cacheByteSize<=r)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((f,h)=>f.zoom-h.zoom),this._dirty=!1)}_getTile(e,n){const i=this.getTileId(e);let r=this._cache.get(i),s=!1;return!r&&n?(r=new AG(e),Object.assign(r,this.getTileMetadata(r.index)),Object.assign(r,{id:i,zoom:this.getTileZoom(r.index)}),s=!0,this._cache.set(i,r),this._dirty=!0):r&&r.needsReload&&(s=!0),r&&s&&r.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),r}_getNearestAncestor(e){const{_minZoom:n=0}=this;let i=e.index;for(;this.getTileZoom(i)>n;){i=this.getParentIndex(i);const r=this._getTile(i);if(r)return r}return null}}function hJ(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!TM(e)&&gv(e);for(const e of t)e.isVisible=!!(e.state&Fp)}function dJ(t){for(const n of t)n.state=0;for(const n of t)n.isSelected&&TM(n);const e=Array.from(t).sort((n,i)=>n.zoom-i.zoom);for(const n of e)if(n.isVisible=!!(n.state&Fp),n.children&&(n.isVisible||n.state&yR))for(const i of n.children)i.state=yR;else n.isSelected&&gv(n)}function TM(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=Fp,!0;e=e.parent}return!1}function gv(t){for(const e of t.children)e.isLoaded||e.content?e.state|=Fp:gv(e)}const pJ={TilesetClass:fJ,data:{type:"data",value:[]},dataComparator:KG.equal,renderSubLayers:{type:"function",value:t=>new cv(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:pv,zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0};class mv extends Lp{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e,n;(n=(e=this.state)==null?void 0:e.tileset)==null||n.finalize()}get isLoaded(){var e,n,i;return!!((i=(n=(e=this.state)==null?void 0:e.tileset)==null?void 0:n.selectedTiles)!=null&&i.every(r=>r.isLoaded&&r.layers&&r.layers.every(s=>s.isLoaded)))}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({changeFlags:e}){let{tileset:n}=this.state;const i=e.propsOrDataChanged||e.updateTriggersChanged,r=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);n?i&&(n.setOptions(this._getTilesetOptions()),r?n.reloadAll():n.tiles.forEach(s=>{s.layers=null})):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:e,maxCacheSize:n,maxCacheByteSize:i,refinementStrategy:r,extent:s,maxZoom:a,minZoom:c,maxRequests:f,debounceTime:h,zoomOffset:p}=this.props;return{maxCacheSize:n,maxCacheByteSize:i,maxZoom:a,minZoom:c,tileSize:e,refinementStrategy:r,extent:s,maxRequests:f,debounceTime:h,zoomOffset:p,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const e=this.state.tileset,{zRange:n,modelMatrix:i}=this.props,r=e.update(this.context.viewport,{zRange:n,modelMatrix:i}),{isLoaded:s}=e,a=this.state.isLoaded!==s,c=this.state.frameNumber!==r;s&&(a||c)&&this._onViewportLoad(),c&&this.setState({frameNumber:r}),this.state.isLoaded=s}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:n}=this.props;n&&n(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,n){this.props.onTileError(e),n.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){const{data:n,getTileData:i,fetch:r}=this.props,{signal:s}=e;return e.url=typeof n=="string"||Array.isArray(n)?QG(n,e):null,i?i(e):r&&e.url?r(e.url,{propName:"data",layer:this,signal:s}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo(e){const n=e.sourceLayer,i=n.props.tile,r=e.info;return r.picked&&(r.tile=i),r.sourceTile=i,r.sourceTileSubLayer=n,r}_updateAutoHighlight(e){e.sourceTileSubLayer.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map(e=>{const n=this.getSubLayerPropsByTile(e);if(!(!e.isLoaded&&!e.content))if(e.layers)n&&e.layers[0]&&Object.keys(n).some(i=>e.layers[0].props[i]!==n[i])&&(e.layers=e.layers.map(i=>i.clone(n)));else{const i=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:e.id,updateTriggers:this.props.updateTriggers}),data:e.content,_offset:0,tile:e});e.layers=kp(i,Boolean).map(r=>r.clone({tile:e,...n}))}return e.layers})}filterSubLayer({layer:e,cullRect:n}){const{tile:i}=e.props;return this.state.tileset.isTileVisible(i,n)}}mv.defaultProps=pJ;mv.layerName="TileLayer";class gJ{constructor(e){M(this,"create",e=>it.post(this.baseUrl,e));M(this,"update",e=>it.put(this.baseUrl,e));M(this,"delete",e=>it.delete(this.baseUrl+"/"+e));M(this,"findAll",()=>it.get(this.baseUrl));M(this,"findById",e=>it.get(this.baseUrl+"/"+e));this.baseUrl=e}}class mJ extends gJ{constructor(){super(window.location.pathname+"api/alerts");M(this,"findAllMarker",()=>it.get(this.baseUrl+"/marker"))}}function yJ(){const{t}=Cu(),e=I.useMemo(()=>new mJ,[]),[n,i]=I.useState([]),[r,s]=I.useState([]),a={longitude:-86.1347,latitude:39.91,zoom:10,pitch:0,bearing:0},c=[m(),y()],f=new Yb({repeat:!0});I.useEffect(()=>{h();const b=setInterval(h,5e3);return()=>clearInterval(b)},[]),I.useEffect(()=>{n!=null&&n.forEach(b=>{Ze.info(b.name,{position:"top-left",style:{top:100},autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,onClose:p(b.name),pauseOnHover:!0,draggable:!0,progress:void 0,delay:0,theme:"colored",type:"error"})})},[n]);function h(){e.findAllMarker().then(b=>{if(b.data==null)return;let v=b.data;e.findAll().then(T=>{T.data!=null&&i(T.data),s(v)})})}function p(b){e.delete(b)}function m(){return new mv({data:"https://c.tile.openstreetmap.org/{z}/{x}/{y}.png",minZoom:0,maxZoom:19,tileSize:256,renderSubLayers:b=>{const{bbox:{west:v,south:T,east:S,north:w}}=b.tile;return new nv(b,{data:null,image:b.data,bounds:[v,T,S,w]})}})}function y(){return new Uu({id:"IconLayer",data:r,getColor:b=>[140,0,0],getIcon:b=>"marker",getPosition:b=>b.coordinates,getSize:30,iconAtlas:"https://raw.githubusercontent.com/visgl/deck.gl-data/master/website/icon-atlas.png",iconMapping:"https://raw.githubusercontent.com/visgl/deck.gl-data/master/website/icon-atlas.json",pickable:!0})}return de.jsxs(de.Fragment,{children:[de.jsx("div",{children:de.jsx("h1",{children:t("map.title")})}),de.jsx(IZ,{layers:c,views:f,initialViewState:a,controller:{dragRotate:!1}})]})}function _J(){const{t}=Cu();return de.jsx("div",{children:de.jsx("h1",{children:t("trajectory.title")})})}function bJ(){return de.jsx(Fe.Fragment,{children:de.jsxs(u8,{children:[de.jsx(G4,{}),de.jsx(GU,{}),de.jsx(bb,{sx:{paddingTop:"4em"},children:de.jsxs(J6,{children:[de.jsx(x_,{path:"/trajectory",element:de.jsx(_J,{})}),de.jsx(x_,{path:"/",element:de.jsx(yJ,{})})]})}),de.jsx(h8,{})]})})}const Oe=t=>typeof t=="string",Oc=()=>{let t,e;const n=new Promise((i,r)=>{t=i,e=r});return n.resolve=t,n.reject=e,n},_R=t=>t==null?"":""+t,vJ=(t,e,n)=>{t.forEach(i=>{e[i]&&(n[i]=e[i])})},TJ=/###/g,bR=t=>t&&t.indexOf("###")>-1?t.replace(TJ,"."):t,vR=t=>!t||Oe(t),Yc=(t,e,n)=>{const i=Oe(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(vR(t))return{};const s=bR(i[r]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++r}return vR(t)?{}:{obj:t,k:bR(i[r])}},TR=(t,e,n)=>{const{obj:i,k:r}=Yc(t,e,Object);if(i!==void 0||e.length===1){i[r]=n;return}let s=e[e.length-1],a=e.slice(0,e.length-1),c=Yc(t,a,Object);for(;c.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),c=Yc(t,a,Object),c!=null&&c.obj&&typeof c.obj[`${c.k}.${s}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${s}`]=n},SJ=(t,e,n,i)=>{const{obj:r,k:s}=Yc(t,e,Object);r[s]=r[s]||[],r[s].push(n)},Ld=(t,e)=>{const{obj:n,k:i}=Yc(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,i))return n[i]},EJ=(t,e,n)=>{const i=Ld(t,n);return i!==void 0?i:Ld(e,n)},SM=(t,e,n)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in t?Oe(t[i])||t[i]instanceof String||Oe(e[i])||e[i]instanceof String?n&&(t[i]=e[i]):SM(t[i],e[i],n):t[i]=e[i]);return t},Oa=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var wJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const AJ=t=>Oe(t)?t.replace(/[&<>"'\/]/g,e=>wJ[e]):t;class xJ{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const RJ=[" ",",","?","!",";"],CJ=new xJ(20),OJ=(t,e,n)=>{e=e||"",n=n||"";const i=RJ.filter(a=>e.indexOf(a)<0&&n.indexOf(a)<0);if(i.length===0)return!0;const r=CJ.getRegExp(`(${i.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!r.test(t);if(!s){const a=t.indexOf(n);a>0&&!r.test(t.substring(0,a))&&(s=!0)}return s},F0=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const i=e.split(n);let r=t;for(let s=0;s<i.length;){if(!r||typeof r!="object")return;let a,c="";for(let f=s;f<i.length;++f)if(f!==s&&(c+=n),c+=i[f],a=r[c],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&f<i.length-1)continue;s+=f-s+1;break}r=a}return r},Ud=t=>t==null?void 0:t.replace("_","-"),MJ={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,i;(i=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||i.call(n,console,e)}};class Fd{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||MJ,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,i,r){return r&&!this.debug?null:(Oe(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Fd(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Fd(this.logger,e)}}var Zi=new Fd;class zp{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(n)||0;this.observers[i].set(n,r+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[c,f]=a;for(let h=0;h<f;h++)c(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[c,f]=a;for(let h=0;h<f;h++)c.apply(c,[e,...i])})}}class SR extends zp{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,i){var h,p;let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,a=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,n],i&&(Array.isArray(i)?c.push(...i):Oe(i)&&s?c.push(...i.split(s)):c.push(i)));const f=Ld(this.data,c);return!f&&!n&&!i&&e.indexOf(".")>-1&&(e=c[0],n=c[1],i=c.slice(2).join(".")),f||!a||!Oe(i)?f:F0((p=(h=this.data)==null?void 0:h[e])==null?void 0:p[n],i,s)}addResource(e,n,i,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let c=[e,n];i&&(c=c.concat(a?i.split(a):i)),e.indexOf(".")>-1&&(c=e.split("."),r=n,n=c[1]),this.addNamespaces(n),TR(this.data,c,r),s.silent||this.emit("added",e,n,i,r)}addResources(e,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in i)(Oe(i[s])||Array.isArray(i[s]))&&this.addResource(e,n,s,i[s],{silent:!0});r.silent||this.emit("added",e,n,i)}addResourceBundle(e,n,i,r,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[e,n];e.indexOf(".")>-1&&(c=e.split("."),r=i,i=n,n=c[1]),this.addNamespaces(n);let f=Ld(this.data,c)||{};a.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?SM(f,i,s):f={...f,...i},TR(this.data,c,f),a.silent||this.emit("added",e,n,i)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var EM={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,i,r){return t.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,n,i,r))??e}),e}};const ER={},wR=t=>!Oe(t)&&typeof t!="boolean"&&typeof t!="number";class zd extends zp{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),vJ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Zi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,n);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,n){let i=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const a=i&&e.indexOf(i)>-1,c=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!OJ(e,i,r);if(a&&!c){const f=e.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:e,namespaces:Oe(s)?[s]:s};const h=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(h[0])>-1)&&(s=h.shift()),e=h.join(r)}return{key:e,namespaces:Oe(s)?[s]:s}}translate(e,n,i){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const r=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],n),f=c[c.length-1],h=n.lng||this.language,p=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode"){if(p){const H=n.nsSeparator||this.options.nsSeparator;return r?{res:`${f}${H}${a}`,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:f,usedParams:this.getUsedParamsDetails(n)}:`${f}${H}${a}`}return r?{res:a,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:f,usedParams:this.getUsedParamsDetails(n)}:a}const m=this.resolve(e,n);let y=m==null?void 0:m.res;const b=(m==null?void 0:m.usedKey)||a,v=(m==null?void 0:m.exactUsedKey)||a,T=["[object Number]","[object Function]","[object RegExp]"],S=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,C=n.count!==void 0&&!Oe(n.count),A=zd.hasDefaultValue(n),O=C?this.pluralResolver.getSuffix(h,n.count,n):"",R=n.ordinal&&C?this.pluralResolver.getSuffix(h,n.count,{ordinal:!1}):"",D=C&&!n.ordinal&&n.count===0,z=D&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${O}`]||n[`defaultValue${R}`]||n.defaultValue;let j=y;w&&!y&&A&&(j=z);const V=wR(j),x=Object.prototype.toString.apply(j);if(w&&j&&V&&T.indexOf(x)<0&&!(Oe(S)&&Array.isArray(j))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const H=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,j,{...n,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return r?(m.res=H,m.usedParams=this.getUsedParamsDetails(n),m):H}if(s){const H=Array.isArray(j),te=H?[]:{},se=H?v:b;for(const fe in j)if(Object.prototype.hasOwnProperty.call(j,fe)){const pe=`${se}${s}${fe}`;A&&!y?te[fe]=this.translate(pe,{...n,defaultValue:wR(z)?z[fe]:void 0,joinArrays:!1,ns:c}):te[fe]=this.translate(pe,{...n,joinArrays:!1,ns:c}),te[fe]===pe&&(te[fe]=j[fe])}y=te}}else if(w&&Oe(S)&&Array.isArray(y))y=y.join(S),y&&(y=this.extendTranslation(y,e,n,i));else{let H=!1,te=!1;!this.isValidLookup(y)&&A&&(H=!0,y=z),this.isValidLookup(y)||(te=!0,y=a);const fe=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&te?void 0:y,pe=A&&z!==y&&this.options.updateMissing;if(te||H||pe){if(this.logger.log(pe?"updateKey":"missingKey",h,f,a,pe?z:y),s){const X=this.resolve(a,{...n,keySeparator:!1});X&&X.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let N=[];const U=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&U&&U[0])for(let X=0;X<U.length;X++)N.push(U[X]);else this.options.saveMissingTo==="all"?N=this.languageUtils.toResolveHierarchy(n.lng||this.language):N.push(n.lng||this.language);const L=(X,P,$)=>{var ne;const Q=A&&$!==y?$:fe;this.options.missingKeyHandler?this.options.missingKeyHandler(X,f,P,Q,pe,n):(ne=this.backendConnector)!=null&&ne.saveMissing&&this.backendConnector.saveMissing(X,f,P,Q,pe,n),this.emit("missingKey",X,f,P,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?N.forEach(X=>{const P=this.pluralResolver.getSuffixes(X,n);D&&n[`defaultValue${this.options.pluralSeparator}zero`]&&P.indexOf(`${this.options.pluralSeparator}zero`)<0&&P.push(`${this.options.pluralSeparator}zero`),P.forEach($=>{L([X],a+$,n[`defaultValue${$}`]||z)})}):L(N,a,z))}y=this.extendTranslation(y,e,n,m,i),te&&y===a&&this.options.appendNamespaceToMissingKey&&(y=`${f}:${a}`),(te||H)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}:${a}`:a,H?y:void 0))}return r?(m.res=y,m.usedParams=this.getUsedParamsDetails(n),m):y}extendTranslation(e,n,i,r,s){var h,p;var a=this;if((h=this.i18nFormat)!=null&&h.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const m=Oe(e)&&(((p=i==null?void 0:i.interpolation)==null?void 0:p.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let y;if(m){const v=e.match(this.interpolator.nestingRegexp);y=v&&v.length}let b=i.replace&&!Oe(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(b={...this.options.interpolation.defaultVariables,...b}),e=this.interpolator.interpolate(e,b,i.lng||this.language||r.usedLng,i),m){const v=e.match(this.interpolator.nestingRegexp),T=v&&v.length;y<T&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var v=arguments.length,T=new Array(v),S=0;S<v;S++)T[S]=arguments[S];return(s==null?void 0:s[0])===T[0]&&!i.context?(a.logger.warn(`It seems you are nesting recursively key: ${T[0]} in key: ${n[0]}`),null):a.translate(...T,n)},i)),i.interpolation&&this.interpolator.reset()}const c=i.postProcess||this.options.postProcess,f=Oe(c)?[c]:c;return e!=null&&(f!=null&&f.length)&&i.applyPostProcessor!==!1&&(e=EM.handle(f,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,r,s,a,c;return Oe(e)&&(e=[e]),e.forEach(f=>{if(this.isValidLookup(i))return;const h=this.extractFromKey(f,n),p=h.key;r=p;let m=h.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const y=n.count!==void 0&&!Oe(n.count),b=y&&!n.ordinal&&n.count===0,v=n.context!==void 0&&(Oe(n.context)||typeof n.context=="number")&&n.context!=="",T=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);m.forEach(S=>{var w,C;this.isValidLookup(i)||(c=S,!ER[`${T[0]}-${S}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((C=this.utils)!=null&&C.hasLoadedNamespace(c))&&(ER[`${T[0]}-${S}`]=!0,this.logger.warn(`key "${r}" for languages "${T.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),T.forEach(A=>{var D;if(this.isValidLookup(i))return;a=A;const O=[p];if((D=this.i18nFormat)!=null&&D.addLookupKeys)this.i18nFormat.addLookupKeys(O,p,A,S,n);else{let z;y&&(z=this.pluralResolver.getSuffix(A,n.count,n));const j=`${this.options.pluralSeparator}zero`,V=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(O.push(p+z),n.ordinal&&z.indexOf(V)===0&&O.push(p+z.replace(V,this.options.pluralSeparator)),b&&O.push(p+j)),v){const x=`${p}${this.options.contextSeparator}${n.context}`;O.push(x),y&&(O.push(x+z),n.ordinal&&z.indexOf(V)===0&&O.push(x+z.replace(V,this.options.pluralSeparator)),b&&O.push(x+j))}}let R;for(;R=O.pop();)this.isValidLookup(i)||(s=R,i=this.getResource(A,S,R,n))}))})}),{res:i,usedKey:r,exactUsedKey:s,usedLng:a,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,i){var s;let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,n,i,r):this.resourceStore.getResource(e,n,i,r)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Oe(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const s of n)delete r[s]}return r}static hasDefaultValue(e){const n="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&n===i.substring(0,n.length)&&e[i]!==void 0)return!0;return!1}}class AR{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Zi.create("languageUtils")}getScriptPartFromCode(e){if(e=Ud(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Ud(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Oe(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(i=>{if(n)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(n=r)}),!n&&this.options.supportedLngs&&e.forEach(i=>{if(n)return;const r=this.getLanguagePartFromCode(i);if(this.isSupportedCode(r))return n=r;n=this.options.supportedLngs.find(s=>{if(s===r)return s;if(!(s.indexOf("-")<0&&r.indexOf("-")<0)&&(s.indexOf("-")>0&&r.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===r||s.indexOf(r)===0&&r.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Oe(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let i=e[n];return i||(i=e[this.getScriptPartFromCode(n)]),i||(i=e[this.formatLanguageCode(n)]),i||(i=e[this.getLanguagePartFromCode(n)]),i||(i=e.default),i||[]}toResolveHierarchy(e,n){const i=this.getFallbackCodes(n||this.options.fallbackLng||[],e),r=[],s=a=>{a&&(this.isSupportedCode(a)?r.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Oe(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Oe(e)&&s(this.formatLanguageCode(e)),i.forEach(a=>{r.indexOf(a)<0&&s(this.formatLanguageCode(a))}),r}}const xR={zero:0,one:1,two:2,few:3,many:4,other:5},RR={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PJ{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Zi.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Ud(e==="dev"?"en":e),r=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),RR;if(!e.match(/-|_/))return RR;const f=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(f,n)}return this.pluralRulesCache[s]=a,a}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,n);return i||(i=this.getRule("dev",n)),(i==null?void 0:i.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(r=>`${n}${r}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,n);return i||(i=this.getRule("dev",n)),i?i.resolvedOptions().pluralCategories.sort((r,s)=>xR[r]-xR[s]).map(r=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,i))}}const CR=function(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=EJ(t,e,n);return!s&&r&&Oe(n)&&(s=F0(t,n,i),s===void 0&&(s=F0(e,n,i))),s},n_=t=>t.replace(/\$/g,"$$$$");class NJ{constructor(){var n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Zi.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(i=>i),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:i,useRawValueToEscape:r,prefix:s,prefixEscaped:a,suffix:c,suffixEscaped:f,formatSeparator:h,unescapeSuffix:p,unescapePrefix:m,nestingPrefix:y,nestingPrefixEscaped:b,nestingSuffix:v,nestingSuffixEscaped:T,nestingOptionsSeparator:S,maxReplaces:w,alwaysFormat:C}=e.interpolation;this.escape=n!==void 0?n:AJ,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=s?Oa(s):a||"{{",this.suffix=c?Oa(c):f||"}}",this.formatSeparator=h||",",this.unescapePrefix=p?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=y?Oa(y):b||Oa("$t("),this.nestingSuffix=v?Oa(v):T||Oa(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=w||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,i)=>(n==null?void 0:n.source)===i?(n.lastIndex=0,n):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,i,r){var b;let s,a,c;const f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=v=>{if(v.indexOf(this.formatSeparator)<0){const C=CR(n,f,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,i,{...r,...n,interpolationkey:v}):C}const T=v.split(this.formatSeparator),S=T.shift().trim(),w=T.join(this.formatSeparator).trim();return this.format(CR(n,f,S,this.options.keySeparator,this.options.ignoreJSONStructure),w,i,{...r,...n,interpolationkey:S})};this.resetRegExp();const p=(r==null?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,m=((b=r==null?void 0:r.interpolation)==null?void 0:b.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>n_(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?n_(this.escape(v)):n_(v)}].forEach(v=>{for(c=0;s=v.regex.exec(e);){const T=s[1].trim();if(a=h(T),a===void 0)if(typeof p=="function"){const w=p(e,s,r);a=Oe(w)?w:""}else if(r&&Object.prototype.hasOwnProperty.call(r,T))a="";else if(m){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${T} for interpolating ${e}`),a="";else!Oe(a)&&!this.useRawValueToEscape&&(a=_R(a));const S=v.safeValue(a);if(e=e.replace(s[0],S),m?(v.regex.lastIndex+=a.length,v.regex.lastIndex-=s[0].length):v.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,s,a;const c=(f,h)=>{const p=this.nestingOptionsSeparator;if(f.indexOf(p)<0)return f;const m=f.split(new RegExp(`${p}[ ]*{`));let y=`{${m[1]}`;f=m[0],y=this.interpolate(y,a);const b=y.match(/'/g),v=y.match(/"/g);(((b==null?void 0:b.length)??0)%2===0&&!v||v.length%2!==0)&&(y=y.replace(/'/g,'"'));try{a=JSON.parse(y),h&&(a={...h,...a})}catch(T){return this.logger.warn(`failed parsing options string in nesting for key ${f}`,T),`${f}${p}${y}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,f};for(;r=this.nestingRegexp.exec(e);){let f=[];a={...i},a=a.replace&&!Oe(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let h=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const p=r[1].split(this.formatSeparator).map(m=>m.trim());r[1]=p.shift(),f=p,h=!0}if(s=n(c.call(this,r[1].trim(),a),a),s&&r[0]===e&&!Oe(s))return s;Oe(s)||(s=_R(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),s=""),h&&(s=f.reduce((p,m)=>this.format(p,m,i.lng,{...i,interpolationkey:r[1].trim()}),s.trim())),e=e.replace(r[0],s),this.regexp.lastIndex=0}return e}}const kJ=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const i=t.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(a=>{if(a){const[c,...f]=a.split(":"),h=f.join(":").trim().replace(/^'+|'+$/g,""),p=c.trim();n[p]||(n[p]=h),h==="false"&&(n[p]=!1),h==="true"&&(n[p]=!0),isNaN(h)||(n[p]=parseInt(h,10))}})}return{formatName:e,formatOptions:n}},Ma=t=>{const e={};return(n,i,r)=>{let s=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(s={...s,[r.interpolationkey]:void 0});const a=i+JSON.stringify(s);let c=e[a];return c||(c=t(Ud(i),r),e[a]=c),c(n)}};class IJ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Zi.create("formatter"),this.options=e,this.formats={number:Ma((n,i)=>{const r=new Intl.NumberFormat(n,{...i});return s=>r.format(s)}),currency:Ma((n,i)=>{const r=new Intl.NumberFormat(n,{...i,style:"currency"});return s=>r.format(s)}),datetime:Ma((n,i)=>{const r=new Intl.DateTimeFormat(n,{...i});return s=>r.format(s)}),relativetime:Ma((n,i)=>{const r=new Intl.RelativeTimeFormat(n,{...i});return s=>r.format(s,i.range||"day")}),list:Ma((n,i)=>{const r=new Intl.ListFormat(n,{...i});return s=>r.format(s)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Ma(n)}format(e,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(c=>c.indexOf(")")>-1)){const c=s.findIndex(f=>f.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,c)].join(this.formatSeparator)}return s.reduce((c,f)=>{var m;const{formatName:h,formatOptions:p}=kJ(f);if(this.formats[h]){let y=c;try{const b=((m=r==null?void 0:r.formatParams)==null?void 0:m[r.interpolationkey])||{},v=b.locale||b.lng||r.locale||r.lng||i;y=this.formats[h](c,v,{...p,...r,...b})}catch(b){this.logger.warn(b)}return y}else this.logger.warn(`there was no format function for ${h}`);return c},e)}}const DJ=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class BJ extends zp{constructor(e,n,i){var s,a;let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Zi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,i,r.backend,r)}queueLoad(e,n,i,r){const s={},a={},c={},f={};return e.forEach(h=>{let p=!0;n.forEach(m=>{const y=`${h}|${m}`;!i.reload&&this.store.hasResourceBundle(h,m)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?a[y]===void 0&&(a[y]=!0):(this.state[y]=1,p=!1,a[y]===void 0&&(a[y]=!0),s[y]===void 0&&(s[y]=!0),f[m]===void 0&&(f[m]=!0)))}),p||(c[h]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(f)}}loaded(e,n,i){const r=e.split("|"),s=r[0],a=r[1];n&&this.emit("failedLoading",s,a,n),!n&&i&&this.store.addResourceBundle(s,a,i,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&i&&(this.state[e]=0);const c={};this.queue.forEach(f=>{SJ(f.loaded,[s],a),DJ(f,e),n&&f.errors.push(n),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(h=>{c[h]||(c[h]={});const p=f.loaded[h];p.length&&p.forEach(m=>{c[h][m]===void 0&&(c[h][m]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(f=>!f.done)}read(e,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:i,tried:r,wait:s,callback:a});return}this.readingCalls++;const c=(h,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(h&&p&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,i,r+1,s*2,a)},s);return}a(h,p)},f=this.backend[i].bind(this.backend);if(f.length===2){try{const h=f(e,n);h&&typeof h.then=="function"?h.then(p=>c(null,p)).catch(c):c(null,h)}catch(h){c(h)}return}return f(e,n,c)}prepareLoading(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Oe(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Oe(n)&&(n=[n]);const s=this.queueLoad(e,n,i,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,n,i){this.prepareLoading(e,n,{},i)}reload(e,n,i){this.prepareLoading(e,n,{reload:!0},i)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),r=i[0],s=i[1];this.read(r,s,"read",void 0,void 0,(a,c)=>{a&&this.logger.warn(`${n}loading namespace ${s} for language ${r} failed`,a),!a&&c&&this.logger.log(`${n}loaded namespace ${s} for language ${r}`,c),this.loaded(e,a,c)})}saveMissing(e,n,i,r,s){var f,h,p,m,y;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((h=(f=this.services)==null?void 0:f.utils)!=null&&h.hasLoadedNamespace&&!((m=(p=this.services)==null?void 0:p.utils)!=null&&m.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${i}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if((y=this.backend)!=null&&y.create){const b={...a,isUpdate:s},v=this.backend.create.bind(this.backend);if(v.length<6)try{let T;v.length===5?T=v(e,n,i,r,b):T=v(e,n,i,r),T&&typeof T.then=="function"?T.then(S=>c(null,S)).catch(c):c(null,T)}catch(T){c(T)}else v(e,n,i,r,c,b)}!e||!e[0]||this.store.addResource(e[0],n,i,r)}}}const OR=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Oe(t[1])&&(e.defaultValue=t[1]),Oe(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(i=>{e[i]=n[i]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),MR=t=>{var e,n;return Oe(t.ns)&&(t.ns=[t.ns]),Oe(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Oe(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Ph=()=>{},LJ=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class gu extends zp{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=MR(e),this.services={},this.logger=Zi,this.modules={external:[]},LJ(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(i=n,n={}),n.defaultNS==null&&n.ns&&(Oe(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const r=OR();this.options={...r,...this.options,...MR(n)},this.options.interpolation={...r.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=p=>p?typeof p=="function"?new p:p:null;if(!this.options.isClone){this.modules.logger?Zi.init(s(this.modules.logger),this.options):Zi.init(null,this.options);let p;this.modules.formatter?p=this.modules.formatter:p=IJ;const m=new AR(this.options);this.store=new SR(this.options.resources,this.options);const y=this.services;y.logger=Zi,y.resourceStore=this.store,y.languageUtils=m,y.pluralResolver=new PJ(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),p&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(y.formatter=s(p),y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new NJ(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new BJ(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",function(b){for(var v=arguments.length,T=new Array(v>1?v-1:0),S=1;S<v;S++)T[S-1]=arguments[S];e.emit(b,...T)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new zd(this.services,this.options),this.translator.on("*",function(b){for(var v=arguments.length,T=new Array(v>1?v-1:0),S=1;S<v;S++)T[S-1]=arguments[S];e.emit(b,...T)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Ph),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(p=>{this[p]=function(){return e.store[p](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(p=>{this[p]=function(){return e.store[p](...arguments),e}});const f=Oc(),h=()=>{const p=(m,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(y),i(m,y)};if(this.languages&&!this.isInitialized)return p(null,this.t.bind(this));this.changeLanguage(this.options.lng,p)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),f}loadResources(e){var s,a;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ph;const r=Oe(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if((r==null?void 0:r.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const c=[],f=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(m=>{m!=="cimode"&&c.indexOf(m)<0&&c.push(m)})};r?f(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>f(p)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,h=>f(h)),this.services.backendConnector.load(c,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(h)})}else i(null)}reloadResources(e,n,i){const r=Oc();return typeof e=="function"&&(i=e,e=void 0),typeof n=="function"&&(i=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),i||(i=Ph),this.services.backendConnector.reload(e,n,s=>{r.resolve(),i(s)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&EM.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const i=this.languages[n];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,n){var i=this;this.isLanguageChangingTo=e;const r=Oc();this.emit("languageChanging",e);const s=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},a=(f,h)=>{h?(s(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,r.resolve(function(){return i.t(...arguments)}),n&&n(f,function(){return i.t(...arguments)})},c=f=>{var p,m;!e&&!f&&this.services.languageDetector&&(f=[]);const h=Oe(f)?f:this.services.languageUtils.getBestMatchFromCodes(f);h&&(this.language||s(h),this.translator.language||this.translator.changeLanguage(h),(m=(p=this.services.languageDetector)==null?void 0:p.cacheUserLanguage)==null||m.call(p,h)),this.loadResources(h,y=>{a(y,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),r}getFixedT(e,n,i){var r=this;const s=function(a,c){let f;if(typeof c!="object"){for(var h=arguments.length,p=new Array(h>2?h-2:0),m=2;m<h;m++)p[m-2]=arguments[m];f=r.options.overloadTranslationOptionHandler([a,c].concat(p))}else f={...c};f.lng=f.lng||s.lng,f.lngs=f.lngs||s.lngs,f.ns=f.ns||s.ns,f.keyPrefix!==""&&(f.keyPrefix=f.keyPrefix||i||s.keyPrefix);const y=r.options.keySeparator||".";let b;return f.keyPrefix&&Array.isArray(a)?b=a.map(v=>`${f.keyPrefix}${y}${v}`):b=f.keyPrefix?`${f.keyPrefix}${y}${a}`:a,r.t(b,f)};return Oe(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=i,s}t(){var r;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(r=this.translator)==null?void 0:r.translate(...n)}exists(){var r;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(r=this.translator)==null?void 0:r.exists(...n)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=n.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(c,f)=>{const h=this.services.backendConnector.state[`${c}|${f}`];return h===-1||h===0||h===2};if(n.precheck){const c=n.precheck(this,a);if(c!==void 0)return c}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(i,e)&&(!r||a(s,e)))}loadNamespaces(e,n){const i=Oc();return this.options.ns?(Oe(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),n&&n(r)}),i):(n&&n(),Promise.resolve())}loadLanguages(e,n){const i=Oc();Oe(e)&&(e=[e]);const r=this.options.preload||[],s=e.filter(a=>r.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=r.concat(s),this.loadResources(a=>{i.resolve(),n&&n(a)}),i):(n&&n(),Promise.resolve())}dir(e){var r,s;if(e||(e=this.resolvedLanguage||(((r=this.languages)==null?void 0:r.length)>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=((s=this.services)==null?void 0:s.languageUtils)||new AR(OR());return n.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new gu(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ph;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},s=new gu(r);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(c=>{s[c]=this[c]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i){const c=Object.keys(this.store.data).reduce((f,h)=>(f[h]={...this.store.data[h]},Object.keys(f[h]).reduce((p,m)=>(p[m]={...f[h][m]},p),{})),{});s.store=new SR(c,r),s.services.resourceStore=s.store}return s.translator=new zd(s.services,r),s.translator.on("*",function(c){for(var f=arguments.length,h=new Array(f>1?f-1:0),p=1;p<f;p++)h[p-1]=arguments[p];s.emit(c,...h)}),s.init(r,n),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const vn=gu.createInstance();vn.createInstance=gu.createInstance;vn.createInstance;vn.dir;vn.init;vn.loadResources;vn.reloadResources;vn.use;vn.changeLanguage;vn.getFixedT;vn.t;vn.exists;vn.setDefaultNamespace;vn.hasLoadedNamespace;vn.loadNamespaces;vn.loadLanguages;const{slice:UJ,forEach:FJ}=[];function zJ(t){return FJ.call(UJ.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}const PR=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,VJ=function(t,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let s=`${t}=${r}`;if(i.maxAge>0){const a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(a)}`}if(i.domain){if(!PR.test(i.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${i.domain}`}if(i.path){if(!PR.test(i.path))throw new TypeError("option path is invalid");s+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},NR={create(t,e,n,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+n*60*1e3)),i&&(r.domain=i),document.cookie=VJ(t,encodeURIComponent(e),r)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let i=0;i<n.length;i++){let r=n[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(t){this.create(t,"",-1)}};var $J={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return NR.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:i,cookieDomain:r,cookieOptions:s}=e;n&&typeof document<"u"&&NR.create(n,t,i,r,s)}},jJ={name:"querystring",lookup(t){var i;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&((i=window.location.hash)==null?void 0:i.indexOf("?"))>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const a=r.substring(1).split("&");for(let c=0;c<a.length;c++){const f=a[c].indexOf("=");f>0&&a[c].substring(0,f)===e&&(n=a[c].substring(f+1))}}return n}};let Pa=null;const kR=()=>{if(Pa!==null)return Pa;try{if(Pa=typeof window<"u"&&window.localStorage!==null,!Pa)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Pa=!1}return Pa};var HJ={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&kR())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&kR()&&window.localStorage.setItem(n,t)}};let Na=null;const IR=()=>{if(Na!==null)return Na;try{if(Na=typeof window<"u"&&window.sessionStorage!==null,!Na)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Na=!1}return Na};var WJ={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&IR())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&IR()&&window.sessionStorage.setItem(n,t)}},XJ={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:i,language:r}=navigator;if(n)for(let s=0;s<n.length;s++)e.push(n[s]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},qJ={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},YJ={name:"path",lookup(t){var r;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(r=n[typeof e=="number"?e:0])==null?void 0:r.replace("/",""):void 0}},KJ={name:"subdomain",lookup(t){var r,s;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,i=typeof window<"u"&&((s=(r=window.location)==null?void 0:r.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(i)return i[n]}};let wM=!1;try{document.cookie,wM=!0}catch{}const AM=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];wM||AM.splice(1,1);const ZJ=()=>({order:AM,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class xM{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=zJ(n,this.options||{},ZJ()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector($J),this.addDetector(jJ),this.addDetector(HJ),this.addDetector(WJ),this.addDetector(XJ),this.addDetector(qJ),this.addDetector(YJ),this.addDetector(KJ)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(n=n.concat(r))}}),n=n.map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}xM.type="languageDetector";const QJ={"arrow.info":"Test","app.title":"SAE Visualizer","map.tooltip":"Show Map","trajectory.tooltip":"Show Trajectories","trajectory.title":"Trajectory View","home.copyright":"Starwit Technologies GmbH"},GJ={"arrow.info":"Test","app.title":"SAE Visualizer","map.tooltip":"Kartenansicht","trajectory.tooltip":"Trajektorienansicht","trajectory.title":"Trajektorienansicht","home.copyright":"Starwit Technologies GmbH"},JJ={"en-US":{translation:QJ},"de-DE":{translation:GJ}},eee={order:["navigator","cookie","localStorage","querystring","htmlTag","path","subdomain"]};vn.use(xM).use(XU).init({resources:JJ,detection:eee,fallbackLng:["de-DE"],keySeparator:!1,interpolation:{escapeValue:!1}},null).then(null,null);const tee=mp({palette:{type:"light",primary:{main:"#09284f",contrastText:"#fff"},secondary:{main:"#f3f6fe",contrastText:"#09284f"},background:{default:"#fefefe",paper:"#fff"},line:{width:4}},mixins:{toolbar:{minHeight:48}},typography:{useNextVariants:!0,fontFamily:"Lato, sans-serif",fontSize:16,body1:{},body2:{},h1:{fontSize:"2rem",fontWeight:400,textTransform:"uppercase"},h2:{fontSize:"1.7rem",fontWeight:400,textTransform:"uppercase"},h3:{fontSize:"1.7rem",fontWeight:400},h5:{fontSize:"1.2rem"},h6:{fontSize:"1.2rem",fontWeight:800,marginBottom:5}},shape:{borderRadius:0},overrides:{}}),nee=mp(tee,{components:{MuiContainer:{defaultProps:{maxWidth:!1}},MuiCard:{defaultProps:{elevation:10}},MuiFab:{defaultProps:{color:"secondary"}},MuiStack:{defaultProps:{spacing:2}},MuiIconButton:{defaultProps:{color:"inherit"}}}});function iee(t){const e=nee;return de.jsx(PB,{theme:e,children:t.children})}window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/);function ree(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()})}const see=ZN.createRoot(document.getElementById("root"));see.render(de.jsx(EU,{children:de.jsxs(iee,{children:[de.jsx(bJ,{}),de.jsx(c8,{position:"bottom-left",closeOnClick:!0,limit:5,pauseOnFocusLoss:!0,draggable:!1,theme:"colored"})]})}));ree();
